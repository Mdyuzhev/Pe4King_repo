"use strict";var _8=Object.create;var Yu=Object.defineProperty;var v8=Object.getOwnPropertyDescriptor;var S8=Object.getOwnPropertyNames;var E8=Object.getPrototypeOf,x8=Object.prototype.hasOwnProperty;var Ju=(t,e)=>()=>(t&&(e=t(t=0)),e);var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ka=(t,e)=>{for(var r in e)Yu(t,r,{get:e[r],enumerable:!0})},yT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of S8(e))!x8.call(t,i)&&i!==r&&Yu(t,i,{get:()=>e[i],enumerable:!(n=v8(e,i))||n.enumerable});return t};var st=(t,e,r)=>(r=t!=null?_8(E8(t)):{},yT(e||!t||!t.__esModule?Yu(r,"default",{value:t,enumerable:!0}):r,t)),Ya=t=>yT(Yu({},"__esModule",{value:!0}),t);var wT=w((wTe,bT)=>{var T8=typeof process=="object"&&process&&process.platform==="win32";bT.exports=T8?{sep:"\\"}:{sep:"/"}});var xT=w((_Te,ET)=>{"use strict";ET.exports=vT;function vT(t,e,r){t instanceof RegExp&&(t=_T(t,r)),e instanceof RegExp&&(e=_T(e,r));var n=ST(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function _T(t,e){var r=e.match(t);return r?r[0]:null}vT.range=ST;function ST(t,e,r){var n,i,s,o,a,l=r.indexOf(t),c=r.indexOf(e,l+1),u=l;if(l>=0&&c>0){if(t===e)return[l,c];for(n=[],s=r.length;u>=0&&!a;)u==l?(n.push(u),l=r.indexOf(t,u+1)):n.length==1?a=[n.pop(),c]:(i=n.pop(),i<s&&(s=i,o=c),c=r.indexOf(e,u+1)),u=l<c&&l>=0?l:c;n.length&&(a=[s,o])}return a}});var um=w((vTe,NT)=>{var TT=xT();NT.exports=I8;var AT="\0SLASH"+Math.random()+"\0",RT="\0OPEN"+Math.random()+"\0",cm="\0CLOSE"+Math.random()+"\0",IT="\0COMMA"+Math.random()+"\0",CT="\0PERIOD"+Math.random()+"\0";function lm(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function A8(t){return t.split("\\\\").join(AT).split("\\{").join(RT).split("\\}").join(cm).split("\\,").join(IT).split("\\.").join(CT)}function R8(t){return t.split(AT).join("\\").split(RT).join("{").split(cm).join("}").split(IT).join(",").split(CT).join(".")}function kT(t){if(!t)return[""];var e=[],r=TT("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,s=r.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var a=kT(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function I8(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Ja(A8(t),!0).map(R8)):[]}function C8(t){return"{"+t+"}"}function k8(t){return/^-?0\d/.test(t)}function N8(t,e){return t<=e}function O8(t,e){return t>=e}function Ja(t,e){var r=[],n=TT("{","}",t);if(!n)return[t];var i=n.pre,s=n.post.length?Ja(n.post,!1):[""];if(/\$$/.test(n.pre))for(var o=0;o<s.length;o++){var a=i+"{"+n.body+"}"+s[o];r.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),u=l||c,d=n.body.indexOf(",")>=0;if(!u&&!d)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+cm+n.post,Ja(t)):[t];var p;if(u)p=n.body.split(/\.\./);else if(p=kT(n.body),p.length===1&&(p=Ja(p[0],!1).map(C8),p.length===1))return s.map(function(P){return n.pre+p[0]+P});var f;if(u){var y=lm(p[0]),h=lm(p[1]),m=Math.max(p[0].length,p[1].length),g=p.length==3?Math.abs(lm(p[2])):1,E=N8,b=h<y;b&&(g*=-1,E=O8);var v=p.some(k8);f=[];for(var A=y;E(A,h);A+=g){var k;if(c)k=String.fromCharCode(A),k==="\\"&&(k="");else if(k=String(A),v){var R=m-k.length;if(R>0){var N=new Array(R+1).join("0");A<0?k="-"+N+k.slice(1):k=N+k}}f.push(k)}}else{f=[];for(var I=0;I<p.length;I++)f.push.apply(f,Ja(p[I],!1))}for(var I=0;I<f.length;I++)for(var o=0;o<s.length;o++){var a=i+f[I]+s[o];(!e||u||a)&&r.push(a)}}return r}});var DT=w((ETe,gm)=>{var Qt=gm.exports=(t,e,r={})=>(Zu(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Ks(e,r).match(t));gm.exports=Qt;var hm=wT();Qt.sep=hm.sep;var vr=Symbol("globstar **");Qt.GLOBSTAR=vr;var q8=um(),OT={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},pm="[^/]",dm=pm+"*?",P8="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",L8="(?:(?!(?:\\/|^)\\.).)*?",LT=t=>t.split("").reduce((e,r)=>(e[r]=!0,e),{}),qT=LT("().*{}+?[]^$\\!"),M8=LT("[.("),PT=/\/+/;Qt.filter=(t,e={})=>(r,n,i)=>Qt(r,t,e);var Un=(t,e={})=>{let r={};return Object.keys(t).forEach(n=>r[n]=t[n]),Object.keys(e).forEach(n=>r[n]=e[n]),r};Qt.defaults=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Qt;let e=Qt,r=(n,i,s)=>e(n,i,Un(t,s));return r.Minimatch=class extends e.Minimatch{constructor(i,s){super(i,Un(t,s))}},r.Minimatch.defaults=n=>e.defaults(Un(t,n)).Minimatch,r.filter=(n,i)=>e.filter(n,Un(t,i)),r.defaults=n=>e.defaults(Un(t,n)),r.makeRe=(n,i)=>e.makeRe(n,Un(t,i)),r.braceExpand=(n,i)=>e.braceExpand(n,Un(t,i)),r.match=(n,i,s)=>e.match(n,i,Un(t,s)),r};Qt.braceExpand=(t,e)=>MT(t,e);var MT=(t,e={})=>(Zu(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:q8(t)),D8=1024*64,Zu=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>D8)throw new TypeError("pattern is too long")},fm=Symbol("subparse");Qt.makeRe=(t,e)=>new Ks(t,e||{}).makeRe();Qt.match=(t,e,r={})=>{let n=new Ks(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};var $8=t=>t.replace(/\\(.)/g,"$1"),F8=t=>t.replace(/\\([^-\]])/g,"$1"),B8=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),j8=t=>t.replace(/[[\]\\]/g,"\\$&"),Ks=class{constructor(e,r){Zu(e),r||(r={}),this.options=r,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.make()}debug(){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let n=this.globSet=this.braceExpand();r.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,n),n=this.globParts=n.map(i=>i.split(PT)),this.debug(this.pattern,n),n=n.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,n),n=n.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,n),this.set=n}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,o=0,a=e.length,l=r.length;s<a&&o<l;s++,o++){this.debug("matchOne loop");var c=r[o],u=e[s];if(this.debug(r,c,u),c===!1)return!1;if(c===vr){this.debug("GLOBSTAR",[r,c,u]);var d=s,p=o+1;if(p===l){for(this.debug("** at the end");s<a;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;d<a;){var f=e[d];if(this.debug(`
globstar while`,e,d,r,p,f),this.matchOne(e.slice(d),r.slice(p),n))return this.debug("globstar found match!",d,a,f),!0;if(f==="."||f===".."||!i.dot&&f.charAt(0)==="."){this.debug("dot detected!",e,d,r,p);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,d,r,p),d===a))}var y;if(typeof c=="string"?(y=u===c,this.debug("string match",c,u,y)):(y=u.match(c),this.debug("pattern match",c,u,y)),!y)return!1}if(s===a&&o===l)return!0;if(s===a)return n;if(o===l)return s===a-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return MT(this.pattern,this.options)}parse(e,r){Zu(e);let n=this.options;if(e==="**")if(n.noglobstar)e="*";else return vr;if(e==="")return"";let i="",s=!1,o=!1,a=[],l=[],c,u=!1,d=-1,p=-1,f,y,h,m=e.charAt(0)===".",g=n.dot||m,E=()=>m?"":g?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=R=>R.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",v=()=>{if(c){switch(c){case"*":i+=dm,s=!0;break;case"?":i+=pm,s=!0;break;default:i+="\\"+c;break}this.debug("clearStateChar %j %j",c,i),c=!1}};for(let R=0,N;R<e.length&&(N=e.charAt(R));R++){if(this.debug("%s	%s %s %j",e,R,i,N),o){if(N==="/")return!1;qT[N]&&(i+="\\"),i+=N,o=!1;continue}switch(N){case"/":return!1;case"\\":if(u&&e.charAt(R+1)==="-"){i+=N;continue}v(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,R,i,N),u){this.debug("  in class"),N==="!"&&R===p+1&&(N="^"),i+=N;continue}this.debug("call clearStateChar %j",c),v(),c=N,n.noext&&v();continue;case"(":{if(u){i+="(";continue}if(!c){i+="\\(";continue}let I={type:c,start:R-1,reStart:i.length,open:OT[c].open,close:OT[c].close};this.debug(this.pattern,"	",I),a.push(I),i+=I.open,I.start===0&&I.type!=="!"&&(m=!0,i+=b(e.slice(R+1))),this.debug("plType %j %j",c,i),c=!1;continue}case")":{let I=a[a.length-1];if(u||!I){i+="\\)";continue}a.pop(),v(),s=!0,y=I,i+=y.close,y.type==="!"&&l.push(Object.assign(y,{reEnd:i.length}));continue}case"|":{let I=a[a.length-1];if(u||!I){i+="\\|";continue}v(),i+="|",I.start===0&&I.type!=="!"&&(m=!0,i+=b(e.slice(R+1)));continue}case"[":if(v(),u){i+="\\"+N;continue}u=!0,p=R,d=i.length,i+=N;continue;case"]":if(R===p+1||!u){i+="\\"+N;continue}f=e.substring(p+1,R);try{RegExp("["+j8(F8(f))+"]"),i+=N}catch{i=i.substring(0,d)+"(?:$.)"}s=!0,u=!1;continue;default:v(),qT[N]&&!(N==="^"&&u)&&(i+="\\"),i+=N;break}}for(u&&(f=e.slice(p+1),h=this.parse(f,fm),i=i.substring(0,d)+"\\["+h[0],s=s||h[1]),y=a.pop();y;y=a.pop()){let R;R=i.slice(y.reStart+y.open.length),this.debug("setting tail",i,y),R=R.replace(/((?:\\{2}){0,64})(\\?)\|/g,(I,P,D)=>(D||(D="\\"),P+P+D+"|")),this.debug(`tail=%j
   %s`,R,R,y,i);let N=y.type==="*"?dm:y.type==="?"?pm:"\\"+y.type;s=!0,i=i.slice(0,y.reStart)+N+"\\("+R}v(),o&&(i+="\\\\");let A=M8[i.charAt(0)];for(let R=l.length-1;R>-1;R--){let N=l[R],I=i.slice(0,N.reStart),P=i.slice(N.reStart,N.reEnd-8),D=i.slice(N.reEnd),F=i.slice(N.reEnd-8,N.reEnd)+D,B=I.split(")").length,te=I.split("(").length-B,ye=D;for(let Se=0;Se<te;Se++)ye=ye.replace(/\)[+*?]?/,"");D=ye;let de=D===""&&r!==fm?"(?:$|\\/)":"";i=I+P+D+de+F}if(i!==""&&s&&(i="(?=.)"+i),A&&(i=E()+i),r===fm)return[i,s];if(n.nocase&&!s&&(s=e.toUpperCase()!==e.toLowerCase()),!s)return $8(e);let k=n.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",k),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?dm:r.dot?P8:L8,i=r.nocase?"i":"",s=e.map(o=>(o=o.map(a=>typeof a=="string"?B8(a):a===vr?vr:a._src).reduce((a,l)=>(a[a.length-1]===vr&&l===vr||a.push(l),a),[]),o.forEach((a,l)=>{a!==vr||o[l-1]===vr||(l===0?o.length>1?o[l+1]="(?:\\/|"+n+"\\/)?"+o[l+1]:o[l]=n:l===o.length-1?o[l-1]+="(?:\\/|"+n+")?":(o[l-1]+="(?:\\/|\\/"+n+"\\/)"+o[l+1],o[l+1]=vr))}),o.filter(a=>a!==vr).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;hm.sep!=="/"&&(e=e.split(hm.sep).join("/")),e=e.split(PT),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=e.length-1;o>=0&&(s=e[o],!s);o--);for(let o=0;o<i.length;o++){let a=i[o],l=e;if(n.matchBase&&a.length===1&&(l=[s]),this.matchOne(l,a,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Qt.defaults(e).Minimatch}};Qt.Minimatch=Ks});var UT=w((xTe,jT)=>{jT.exports=BT;var ym=require("fs"),{EventEmitter:U8}=require("events"),{Minimatch:mm}=DT(),{resolve:W8}=require("path");function z8(t,e){return new Promise((r,n)=>{ym.readdir(t,{withFileTypes:!0},(i,s)=>{if(i)switch(i.code){case"ENOTDIR":e?n(i):r([]);break;case"ENOTSUP":case"ENOENT":case"ENAMETOOLONG":case"UNKNOWN":r([]);break;default:n(i);break}else r(s)})})}function $T(t,e){return new Promise((r,n)=>{(e?ym.stat:ym.lstat)(t,(s,o)=>{s?s.code==="ENOENT"?r(e?$T(t,!1):null):r(null):r(o)})})}async function*FT(t,e,r,n,i,s){let o=await z8(e+t,s);for(let a of o){let l=a.name;l===void 0&&(l=a,n=!0);let c=t+"/"+l,u=c.slice(1),d=e+"/"+u,p=null;(n||r)&&(p=await $T(d,r)),!p&&a.name!==void 0&&(p=a),p===null&&(p={isDirectory:()=>!1}),p.isDirectory()?i(u)||(yield{relative:u,absolute:d,stats:p},yield*FT(c,e,r,n,i,!1)):yield{relative:u,absolute:d,stats:p}}}async function*H8(t,e,r,n){yield*FT("",t,e,r,n,!0)}function V8(t){return{pattern:t.pattern,dot:!!t.dot,noglobstar:!!t.noglobstar,matchBase:!!t.matchBase,nocase:!!t.nocase,ignore:t.ignore,skip:t.skip,follow:!!t.follow,stat:!!t.stat,nodir:!!t.nodir,mark:!!t.mark,silent:!!t.silent,absolute:!!t.absolute}}var Qu=class extends U8{constructor(e,r,n){if(super(),typeof r=="function"&&(n=r,r=null),this.options=V8(r||{}),this.matchers=[],this.options.pattern){let i=Array.isArray(this.options.pattern)?this.options.pattern:[this.options.pattern];this.matchers=i.map(s=>new mm(s,{dot:this.options.dot,noglobstar:this.options.noglobstar,matchBase:this.options.matchBase,nocase:this.options.nocase}))}if(this.ignoreMatchers=[],this.options.ignore){let i=Array.isArray(this.options.ignore)?this.options.ignore:[this.options.ignore];this.ignoreMatchers=i.map(s=>new mm(s,{dot:!0}))}if(this.skipMatchers=[],this.options.skip){let i=Array.isArray(this.options.skip)?this.options.skip:[this.options.skip];this.skipMatchers=i.map(s=>new mm(s,{dot:!0}))}this.iterator=H8(W8(e||"."),this.options.follow,this.options.stat,this._shouldSkipDirectory.bind(this)),this.paused=!1,this.inactive=!1,this.aborted=!1,n&&(this._matches=[],this.on("match",i=>this._matches.push(this.options.absolute?i.absolute:i.relative)),this.on("error",i=>n(i)),this.on("end",()=>n(null,this._matches))),setTimeout(()=>this._next(),0)}_shouldSkipDirectory(e){return this.skipMatchers.some(r=>r.match(e))}_fileMatches(e,r){let n=e+(r?"/":"");return(this.matchers.length===0||this.matchers.some(i=>i.match(n)))&&!this.ignoreMatchers.some(i=>i.match(n))&&(!this.options.nodir||!r)}_next(){!this.paused&&!this.aborted?this.iterator.next().then(e=>{if(e.done)this.emit("end");else{let r=e.value.stats.isDirectory();if(this._fileMatches(e.value.relative,r)){let n=e.value.relative,i=e.value.absolute;this.options.mark&&r&&(n+="/",i+="/"),this.options.stat?this.emit("match",{relative:n,absolute:i,stat:e.value.stats}):this.emit("match",{relative:n,absolute:i})}this._next(this.iterator)}}).catch(e=>{this.abort(),this.emit("error",e),!e.code&&!this.options.silent&&console.error(e)}):this.inactive=!0}abort(){this.aborted=!0}pause(){this.paused=!0}resume(){this.paused=!1,this.inactive&&(this.inactive=!1,this._next())}};function BT(t,e,r){return new Qu(t,e,r)}BT.ReaddirGlob=Qu});var zT=w((Xu,WT)=>{(function(t,e){typeof Xu=="object"&&typeof WT<"u"?e(Xu):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.async={}))})(Xu,(function(t){"use strict";function e(x,...S){return(...T)=>x(...S,...T)}function r(x){return function(...S){var T=S.pop();return x.call(this,S,T)}}var n=typeof queueMicrotask=="function"&&queueMicrotask,i=typeof setImmediate=="function"&&setImmediate,s=typeof process=="object"&&typeof process.nextTick=="function";function o(x){setTimeout(x,0)}function a(x){return(S,...T)=>x(()=>S(...T))}var l;n?l=queueMicrotask:i?l=setImmediate:s?l=process.nextTick:l=o;var c=a(l);function u(x){return f(x)?function(...S){let T=S.pop(),C=x.apply(this,S);return d(C,T)}:r(function(S,T){var C;try{C=x.apply(this,S)}catch(O){return T(O)}if(C&&typeof C.then=="function")return d(C,T);T(null,C)})}function d(x,S){return x.then(T=>{p(S,null,T)},T=>{p(S,T&&(T instanceof Error||T.message)?T:new Error(T))})}function p(x,S,T){try{x(S,T)}catch(C){c(O=>{throw O},C)}}function f(x){return x[Symbol.toStringTag]==="AsyncFunction"}function y(x){return x[Symbol.toStringTag]==="AsyncGenerator"}function h(x){return typeof x[Symbol.asyncIterator]=="function"}function m(x){if(typeof x!="function")throw new Error("expected a function");return f(x)?u(x):x}function g(x,S){if(S||(S=x.length),!S)throw new Error("arity is undefined");function T(...C){return typeof C[S-1]=="function"?x.apply(this,C):new Promise((O,q)=>{C[S-1]=(L,...M)=>{if(L)return q(L);O(M.length>1?M:M[0])},x.apply(this,C)})}return T}function E(x){return function(T,...C){return g(function(q){var L=this;return x(T,(M,$)=>{m(M).apply(L,C.concat($))},q)})}}function b(x,S,T,C){S=S||[];var O=[],q=0,L=m(T);return x(S,(M,$,z)=>{var fe=q++;L(M,(be,he)=>{O[fe]=he,z(be)})},M=>{C(M,O)})}function v(x){return x&&typeof x.length=="number"&&x.length>=0&&x.length%1===0}let A={};function k(x){function S(...T){if(x!==null){var C=x;x=null,C.apply(this,T)}}return Object.assign(S,x),S}function R(x){return x[Symbol.iterator]&&x[Symbol.iterator]()}function N(x){var S=-1,T=x.length;return function(){return++S<T?{value:x[S],key:S}:null}}function I(x){var S=-1;return function(){var C=x.next();return C.done?null:(S++,{value:C.value,key:S})}}function P(x){var S=x?Object.keys(x):[],T=-1,C=S.length;return function O(){var q=S[++T];return q==="__proto__"?O():T<C?{value:x[q],key:q}:null}}function D(x){if(v(x))return N(x);var S=R(x);return S?I(S):P(x)}function F(x){return function(...S){if(x===null)throw new Error("Callback was already called.");var T=x;x=null,T.apply(this,S)}}function B(x,S,T,C){let O=!1,q=!1,L=!1,M=0,$=0;function z(){M>=S||L||O||(L=!0,x.next().then(({value:he,done:ir})=>{if(!(q||O)){if(L=!1,ir){O=!0,M<=0&&C(null);return}M++,T(he,$,fe),$++,z()}}).catch(be))}function fe(he,ir){if(M-=1,!q){if(he)return be(he);if(he===!1){O=!0,q=!0;return}if(ir===A||O&&M<=0)return O=!0,C(null);z()}}function be(he){q||(L=!1,O=!0,C(he))}z()}var te=x=>(S,T,C)=>{if(C=k(C),x<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!S)return C(null);if(y(S))return B(S,x,T,C);if(h(S))return B(S[Symbol.asyncIterator](),x,T,C);var O=D(S),q=!1,L=!1,M=0,$=!1;function z(be,he){if(!L)if(M-=1,be)q=!0,C(be);else if(be===!1)q=!0,L=!0;else{if(he===A||q&&M<=0)return q=!0,C(null);$||fe()}}function fe(){for($=!0;M<x&&!q;){var be=O();if(be===null){q=!0,M<=0&&C(null);return}M+=1,T(be.value,be.key,F(z))}$=!1}fe()};function ye(x,S,T,C){return te(S)(x,m(T),C)}var de=g(ye,4);function Se(x,S,T){T=k(T);var C=0,O=0,{length:q}=x,L=!1;q===0&&T(null);function M($,z){$===!1&&(L=!0),L!==!0&&($?T($):(++O===q||z===A)&&T(null))}for(;C<q;C++)S(x[C],C,F(M))}function it(x,S,T){return de(x,1/0,S,T)}function Ce(x,S,T){var C=v(x)?Se:it;return C(x,m(S),T)}var Kt=g(Ce,3);function TW(x,S,T){return b(Kt,x,S,T)}var Tu=g(TW,3),Cx=E(Tu);function AW(x,S,T){return de(x,1,S,T)}var _r=g(AW,3);function RW(x,S,T){return b(_r,x,S,T)}var Qg=g(RW,3),kx=E(Qg);let Ws=Symbol("promiseCallback");function zs(){let x,S;function T(C,...O){if(C)return S(C);x(O.length>1?O:O[0])}return T[Ws]=new Promise((C,O)=>{x=C,S=O}),T}function Xg(x,S,T){typeof S!="number"&&(T=S,S=null),T=k(T||zs());var C=Object.keys(x).length;if(!C)return T(null);S||(S=C);var O={},q=0,L=!1,M=!1,$=Object.create(null),z=[],fe=[],be={};Object.keys(x).forEach(W=>{var V=x[W];if(!Array.isArray(V)){he(W,[V]),fe.push(W);return}var pe=V.slice(0,V.length-1),De=pe.length;if(De===0){he(W,V),fe.push(W);return}be[W]=De,pe.forEach(mt=>{if(!x[mt])throw new Error("async.auto task `"+W+"` has a non-existent dependency `"+mt+"` in "+pe.join(", "));Vs(mt,()=>{De--,De===0&&he(W,V)})})}),we(),ir();function he(W,V){z.push(()=>Va(W,V))}function ir(){if(!L){if(z.length===0&&q===0)return T(null,O);for(;z.length&&q<S;){var W=z.shift();W()}}}function Vs(W,V){var pe=$[W];pe||(pe=$[W]=[]),pe.push(V)}function ki(W){var V=$[W]||[];V.forEach(pe=>pe()),ir()}function Va(W,V){if(!M){var pe=F((mt,...sr)=>{if(q--,mt===!1){L=!0;return}if(sr.length<2&&([sr]=sr),mt){var Gs={};if(Object.keys(O).forEach(Ni=>{Gs[Ni]=O[Ni]}),Gs[W]=sr,M=!0,$=Object.create(null),L)return;T(mt,Gs)}else O[W]=sr,ki(W)});q++;var De=m(V[V.length-1]);V.length>1?De(O,pe):De(pe)}}function we(){for(var W,V=0;fe.length;)W=fe.pop(),V++,H(W).forEach(pe=>{--be[pe]===0&&fe.push(pe)});if(V!==C)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function H(W){var V=[];return Object.keys(x).forEach(pe=>{let De=x[pe];Array.isArray(De)&&De.indexOf(W)>=0&&V.push(pe)}),V}return T[Ws]}var IW=/^(?:async\s)?(?:function)?\s*(?:\w+\s*)?\(([^)]+)\)(?:\s*{)/,CW=/^(?:async\s)?\s*(?:\(\s*)?((?:[^)=\s]\s*)*)(?:\)\s*)?=>/,kW=/,/,NW=/(=.+)?(\s*)$/;function OW(x){let S="",T=0,C=x.indexOf("*/");for(;T<x.length;)if(x[T]==="/"&&x[T+1]==="/"){let O=x.indexOf(`
`,T);T=O===-1?x.length:O}else if(C!==-1&&x[T]==="/"&&x[T+1]==="*"){let O=x.indexOf("*/",T);O!==-1?(T=O+2,C=x.indexOf("*/",T)):(S+=x[T],T++)}else S+=x[T],T++;return S}function qW(x){let S=OW(x.toString()),T=S.match(IW);if(T||(T=S.match(CW)),!T)throw new Error(`could not parse args in autoInject
Source:
`+S);let[,C]=T;return C.replace(/\s/g,"").split(kW).map(O=>O.replace(NW,"").trim())}function Nx(x,S){var T={};return Object.keys(x).forEach(C=>{var O=x[C],q,L=f(O),M=!L&&O.length===1||L&&O.length===0;if(Array.isArray(O))q=[...O],O=q.pop(),T[C]=q.concat(q.length>0?$:O);else if(M)T[C]=O;else{if(q=qW(O),O.length===0&&!L&&q.length===0)throw new Error("autoInject task functions require explicit parameters.");L||q.pop(),T[C]=q.concat($)}function $(z,fe){var be=q.map(he=>z[he]);be.push(fe),m(O)(...be)}}),Xg(T,S)}class PW{constructor(){this.head=this.tail=null,this.length=0}removeLink(S){return S.prev?S.prev.next=S.next:this.head=S.next,S.next?S.next.prev=S.prev:this.tail=S.prev,S.prev=S.next=null,this.length-=1,S}empty(){for(;this.head;)this.shift();return this}insertAfter(S,T){T.prev=S,T.next=S.next,S.next?S.next.prev=T:this.tail=T,S.next=T,this.length+=1}insertBefore(S,T){T.prev=S.prev,T.next=S,S.prev?S.prev.next=T:this.head=T,S.prev=T,this.length+=1}unshift(S){this.head?this.insertBefore(this.head,S):Ox(this,S)}push(S){this.tail?this.insertAfter(this.tail,S):Ox(this,S)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var S=this.head;S;)yield S.data,S=S.next}remove(S){for(var T=this.head;T;){var{next:C}=T;S(T)&&this.removeLink(T),T=C}return this}}function Ox(x,S){x.length=1,x.head=x.tail=S}function em(x,S,T){if(S==null)S=1;else if(S===0)throw new RangeError("Concurrency must not be zero");var C=m(x),O=0,q=[];let L={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function M(H,W){L[H].push(W)}function $(H,W){let V=(...pe)=>{z(H,V),W(...pe)};L[H].push(V)}function z(H,W){if(!H)return Object.keys(L).forEach(V=>L[V]=[]);if(!W)return L[H]=[];L[H]=L[H].filter(V=>V!==W)}function fe(H,...W){L[H].forEach(V=>V(...W))}var be=!1;function he(H,W,V,pe){if(pe!=null&&typeof pe!="function")throw new Error("task callback must be a function");we.started=!0;var De,mt;function sr(Ni,...Ga){if(Ni)return V?mt(Ni):De();if(Ga.length<=1)return De(Ga[0]);De(Ga)}var Gs=we._createTaskItem(H,V?sr:pe||sr);if(W?we._tasks.unshift(Gs):we._tasks.push(Gs),be||(be=!0,c(()=>{be=!1,we.process()})),V||!pe)return new Promise((Ni,Ga)=>{De=Ni,mt=Ga})}function ir(H){return function(W,...V){O-=1;for(var pe=0,De=H.length;pe<De;pe++){var mt=H[pe],sr=q.indexOf(mt);sr===0?q.shift():sr>0&&q.splice(sr,1),mt.callback(W,...V),W!=null&&fe("error",W,mt.data)}O<=we.concurrency-we.buffer&&fe("unsaturated"),we.idle()&&fe("drain"),we.process()}}function Vs(H){return H.length===0&&we.idle()?(c(()=>fe("drain")),!0):!1}let ki=H=>W=>{if(!W)return new Promise((V,pe)=>{$(H,(De,mt)=>{if(De)return pe(De);V(mt)})});z(H),M(H,W)};var Va=!1,we={_tasks:new PW,_createTaskItem(H,W){return{data:H,callback:W}},*[Symbol.iterator](){yield*we._tasks[Symbol.iterator]()},concurrency:S,payload:T,buffer:S/4,started:!1,paused:!1,push(H,W){return Array.isArray(H)?Vs(H)?void 0:H.map(V=>he(V,!1,!1,W)):he(H,!1,!1,W)},pushAsync(H,W){return Array.isArray(H)?Vs(H)?void 0:H.map(V=>he(V,!1,!0,W)):he(H,!1,!0,W)},kill(){z(),we._tasks.empty()},unshift(H,W){return Array.isArray(H)?Vs(H)?void 0:H.map(V=>he(V,!0,!1,W)):he(H,!0,!1,W)},unshiftAsync(H,W){return Array.isArray(H)?Vs(H)?void 0:H.map(V=>he(V,!0,!0,W)):he(H,!0,!0,W)},remove(H){we._tasks.remove(H)},process(){if(!Va){for(Va=!0;!we.paused&&O<we.concurrency&&we._tasks.length;){var H=[],W=[],V=we._tasks.length;we.payload&&(V=Math.min(V,we.payload));for(var pe=0;pe<V;pe++){var De=we._tasks.shift();H.push(De),q.push(De),W.push(De.data)}O+=1,we._tasks.length===0&&fe("empty"),O===we.concurrency&&fe("saturated");var mt=F(ir(H));C(W,mt)}Va=!1}},length(){return we._tasks.length},running(){return O},workersList(){return q},idle(){return we._tasks.length+O===0},pause(){we.paused=!0},resume(){we.paused!==!1&&(we.paused=!1,c(we.process))}};return Object.defineProperties(we,{saturated:{writable:!1,value:ki("saturated")},unsaturated:{writable:!1,value:ki("unsaturated")},empty:{writable:!1,value:ki("empty")},drain:{writable:!1,value:ki("drain")},error:{writable:!1,value:ki("error")}}),we}function qx(x,S){return em(x,1,S)}function Px(x,S,T){return em(x,S,T)}function LW(x,S,T,C){C=k(C);var O=m(T);return _r(x,(q,L,M)=>{O(S,q,($,z)=>{S=z,M($)})},q=>C(q,S))}var jn=g(LW,4);function tm(...x){var S=x.map(m);return function(...T){var C=this,O=T[T.length-1];return typeof O=="function"?T.pop():O=zs(),jn(S,T,(q,L,M)=>{L.apply(C,q.concat(($,...z)=>{M($,z)}))},(q,L)=>O(q,...L)),O[Ws]}}function Lx(...x){return tm(...x.reverse())}function MW(x,S,T,C){return b(te(S),x,T,C)}var ja=g(MW,4);function DW(x,S,T,C){var O=m(T);return ja(x,S,(q,L)=>{O(q,(M,...$)=>M?L(M):L(M,$))},(q,L)=>{for(var M=[],$=0;$<L.length;$++)L[$]&&(M=M.concat(...L[$]));return C(q,M)})}var Hs=g(DW,4);function $W(x,S,T){return Hs(x,1/0,S,T)}var Au=g($W,3);function FW(x,S,T){return Hs(x,1,S,T)}var Ru=g(FW,3);function Mx(...x){return function(...S){var T=S.pop();return T(null,...x)}}function gn(x,S){return(T,C,O,q)=>{var L=!1,M;let $=m(O);T(C,(z,fe,be)=>{$(z,(he,ir)=>{if(he||he===!1)return be(he);if(x(ir)&&!M)return L=!0,M=S(!0,z),be(null,A);be()})},z=>{if(z)return q(z);q(null,L?M:S(!1))})}}function BW(x,S,T){return gn(C=>C,(C,O)=>O)(Kt,x,S,T)}var Iu=g(BW,3);function jW(x,S,T,C){return gn(O=>O,(O,q)=>q)(te(S),x,T,C)}var Cu=g(jW,4);function UW(x,S,T){return gn(C=>C,(C,O)=>O)(te(1),x,S,T)}var ku=g(UW,3);function Dx(x){return(S,...T)=>m(S)(...T,(C,...O)=>{typeof console=="object"&&(C?console.error&&console.error(C):console[x]&&O.forEach(q=>console[x](q)))})}var $x=Dx("dir");function WW(x,S,T){T=F(T);var C=m(x),O=m(S),q;function L($,...z){if($)return T($);$!==!1&&(q=z,O(...z,M))}function M($,z){if($)return T($);if($!==!1){if(!z)return T(null,...q);C(L)}}return M(null,!0)}var Ua=g(WW,3);function Fx(x,S,T){let C=m(S);return Ua(x,(...O)=>{let q=O.pop();C(...O,(L,M)=>q(L,!M))},T)}function Bx(x){return(S,T,C)=>x(S,C)}function zW(x,S,T){return Kt(x,Bx(m(S)),T)}var Nu=g(zW,3);function HW(x,S,T,C){return te(S)(x,Bx(m(T)),C)}var Wa=g(HW,4);function VW(x,S,T){return Wa(x,1,S,T)}var za=g(VW,3);function rm(x){return f(x)?x:function(...S){var T=S.pop(),C=!0;S.push((...O)=>{C?c(()=>T(...O)):T(...O)}),x.apply(this,S),C=!1}}function GW(x,S,T){return gn(C=>!C,C=>!C)(Kt,x,S,T)}var Ou=g(GW,3);function KW(x,S,T,C){return gn(O=>!O,O=>!O)(te(S),x,T,C)}var qu=g(KW,4);function YW(x,S,T){return gn(C=>!C,C=>!C)(_r,x,S,T)}var Pu=g(YW,3);function JW(x,S,T,C){var O=new Array(S.length);x(S,(q,L,M)=>{T(q,($,z)=>{O[L]=!!z,M($)})},q=>{if(q)return C(q);for(var L=[],M=0;M<S.length;M++)O[M]&&L.push(S[M]);C(null,L)})}function ZW(x,S,T,C){var O=[];x(S,(q,L,M)=>{T(q,($,z)=>{if($)return M($);z&&O.push({index:L,value:q}),M($)})},q=>{if(q)return C(q);C(null,O.sort((L,M)=>L.index-M.index).map(L=>L.value))})}function Lu(x,S,T,C){var O=v(S)?JW:ZW;return O(x,S,m(T),C)}function QW(x,S,T){return Lu(Kt,x,S,T)}var Mu=g(QW,3);function XW(x,S,T,C){return Lu(te(S),x,T,C)}var Du=g(XW,4);function e8(x,S,T){return Lu(_r,x,S,T)}var $u=g(e8,3);function t8(x,S){var T=F(S),C=m(rm(x));function O(q){if(q)return T(q);q!==!1&&C(O)}return O()}var jx=g(t8,2);function r8(x,S,T,C){var O=m(T);return ja(x,S,(q,L)=>{O(q,(M,$)=>M?L(M):L(M,{key:$,val:q}))},(q,L)=>{for(var M={},{hasOwnProperty:$}=Object.prototype,z=0;z<L.length;z++)if(L[z]){var{key:fe}=L[z],{val:be}=L[z];$.call(M,fe)?M[fe].push(be):M[fe]=[be]}return C(q,M)})}var Fu=g(r8,4);function Ux(x,S,T){return Fu(x,1/0,S,T)}function Wx(x,S,T){return Fu(x,1,S,T)}var zx=Dx("log");function n8(x,S,T,C){C=k(C);var O={},q=m(T);return te(S)(x,(L,M,$)=>{q(L,M,(z,fe)=>{if(z)return $(z);O[M]=fe,$(z)})},L=>C(L,O))}var Bu=g(n8,4);function Hx(x,S,T){return Bu(x,1/0,S,T)}function Vx(x,S,T){return Bu(x,1,S,T)}function Gx(x,S=T=>T){var T=Object.create(null),C=Object.create(null),O=m(x),q=r((L,M)=>{var $=S(...L);$ in T?c(()=>M(null,...T[$])):$ in C?C[$].push(M):(C[$]=[M],O(...L,(z,...fe)=>{z||(T[$]=fe);var be=C[$];delete C[$];for(var he=0,ir=be.length;he<ir;he++)be[he](z,...fe)}))});return q.memo=T,q.unmemoized=x,q}var ju;s?ju=process.nextTick:i?ju=setImmediate:ju=o;var Kx=a(ju),nm=g((x,S,T)=>{var C=v(S)?[]:{};x(S,(O,q,L)=>{m(O)((M,...$)=>{$.length<2&&([$]=$),C[q]=$,L(M)})},O=>T(O,C))},3);function Yx(x,S){return nm(Kt,x,S)}function Jx(x,S,T){return nm(te(S),x,T)}function im(x,S){var T=m(x);return em((C,O)=>{T(C[0],O)},S,1)}class i8{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(S){let T;for(;S>0&&sm(this.heap[S],this.heap[T=Zx(S)]);){let C=this.heap[S];this.heap[S]=this.heap[T],this.heap[T]=C,S=T}}percDown(S){let T;for(;(T=s8(S))<this.heap.length&&(T+1<this.heap.length&&sm(this.heap[T+1],this.heap[T])&&(T=T+1),!sm(this.heap[S],this.heap[T]));){let C=this.heap[S];this.heap[S]=this.heap[T],this.heap[T]=C,S=T}}push(S){S.pushCount=++this.pushCount,this.heap.push(S),this.percUp(this.heap.length-1)}unshift(S){return this.heap.push(S)}shift(){let[S]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),S}toArray(){return[...this]}*[Symbol.iterator](){for(let S=0;S<this.heap.length;S++)yield this.heap[S].data}remove(S){let T=0;for(let C=0;C<this.heap.length;C++)S(this.heap[C])||(this.heap[T]=this.heap[C],T++);this.heap.splice(T);for(let C=Zx(this.heap.length-1);C>=0;C--)this.percDown(C);return this}}function s8(x){return(x<<1)+1}function Zx(x){return(x+1>>1)-1}function sm(x,S){return x.priority!==S.priority?x.priority<S.priority:x.pushCount<S.pushCount}function Qx(x,S){var T=im(x,S),{push:C,pushAsync:O}=T;T._tasks=new i8,T._createTaskItem=({data:L,priority:M},$)=>({data:L,priority:M,callback:$});function q(L,M){return Array.isArray(L)?L.map($=>({data:$,priority:M})):{data:L,priority:M}}return T.push=function(L,M=0,$){return C(q(L,M),$)},T.pushAsync=function(L,M=0,$){return O(q(L,M),$)},delete T.unshift,delete T.unshiftAsync,T}function o8(x,S){if(S=k(S),!Array.isArray(x))return S(new TypeError("First argument to race must be an array of functions"));if(!x.length)return S();for(var T=0,C=x.length;T<C;T++)m(x[T])(S)}var Xx=g(o8,2);function Uu(x,S,T,C){var O=[...x].reverse();return jn(O,S,T,C)}function Wu(x){var S=m(x);return r(function(C,O){return C.push((q,...L)=>{let M={};if(q&&(M.error=q),L.length>0){var $=L;L.length<=1&&([$]=L),M.value=$}O(null,M)}),S.apply(this,C)})}function eT(x){var S;return Array.isArray(x)?S=x.map(Wu):(S={},Object.keys(x).forEach(T=>{S[T]=Wu.call(this,x[T])})),S}function om(x,S,T,C){let O=m(T);return Lu(x,S,(q,L)=>{O(q,(M,$)=>{L(M,!$)})},C)}function a8(x,S,T){return om(Kt,x,S,T)}var tT=g(a8,3);function l8(x,S,T,C){return om(te(S),x,T,C)}var rT=g(l8,4);function c8(x,S,T){return om(_r,x,S,T)}var nT=g(c8,3);function iT(x){return function(){return x}}let am=5,sT=0;function zu(x,S,T){var C={times:am,intervalFunc:iT(sT)};if(arguments.length<3&&typeof x=="function"?(T=S||zs(),S=x):(u8(C,x),T=T||zs()),typeof S!="function")throw new Error("Invalid arguments for async.retry");var O=m(S),q=1;function L(){O((M,...$)=>{M!==!1&&(M&&q++<C.times&&(typeof C.errorFilter!="function"||C.errorFilter(M))?setTimeout(L,C.intervalFunc(q-1)):T(M,...$))})}return L(),T[Ws]}function u8(x,S){if(typeof S=="object")x.times=+S.times||am,x.intervalFunc=typeof S.interval=="function"?S.interval:iT(+S.interval||sT),x.errorFilter=S.errorFilter;else if(typeof S=="number"||typeof S=="string")x.times=+S||am;else throw new Error("Invalid arguments for async.retry")}function oT(x,S){S||(S=x,x=null);let T=x&&x.arity||S.length;f(S)&&(T+=1);var C=m(S);return r((O,q)=>{(O.length<T-1||q==null)&&(O.push(q),q=zs());function L(M){C(...O,M)}return x?zu(x,L,q):zu(L,q),q[Ws]})}function aT(x,S){return nm(_r,x,S)}function d8(x,S,T){return gn(Boolean,C=>C)(Kt,x,S,T)}var Hu=g(d8,3);function f8(x,S,T,C){return gn(Boolean,O=>O)(te(S),x,T,C)}var Vu=g(f8,4);function h8(x,S,T){return gn(Boolean,C=>C)(_r,x,S,T)}var Gu=g(h8,3);function p8(x,S,T){var C=m(S);return Tu(x,(q,L)=>{C(q,(M,$)=>{if(M)return L(M);L(M,{value:q,criteria:$})})},(q,L)=>{if(q)return T(q);T(null,L.sort(O).map(M=>M.value))});function O(q,L){var M=q.criteria,$=L.criteria;return M<$?-1:M>$?1:0}}var lT=g(p8,3);function cT(x,S,T){var C=m(x);return r((O,q)=>{var L=!1,M;function $(){var z=x.name||"anonymous",fe=new Error('Callback function "'+z+'" timed out.');fe.code="ETIMEDOUT",T&&(fe.info=T),L=!0,q(fe)}O.push((...z)=>{L||(q(...z),clearTimeout(M))}),M=setTimeout($,S),C(...O)})}function g8(x){for(var S=Array(x);x--;)S[x]=x;return S}function Ku(x,S,T,C){var O=m(T);return ja(g8(x),S,O,C)}function uT(x,S,T){return Ku(x,1/0,S,T)}function dT(x,S,T){return Ku(x,1,S,T)}function fT(x,S,T,C){arguments.length<=3&&typeof S=="function"&&(C=T,T=S,S=Array.isArray(x)?[]:{}),C=k(C||zs());var O=m(T);return Kt(x,(q,L,M)=>{O(S,q,L,M)},q=>C(q,S)),C[Ws]}function m8(x,S){var T=null,C;return za(x,(O,q)=>{m(O)((L,...M)=>{if(L===!1)return q(L);M.length<2?[C]=M:C=M,T=L,q(L?null:{})})},()=>S(T,C))}var hT=g(m8);function pT(x){return(...S)=>(x.unmemoized||x)(...S)}function y8(x,S,T){T=F(T);var C=m(S),O=m(x),q=[];function L($,...z){if($)return T($);q=z,$!==!1&&O(M)}function M($,z){if($)return T($);if($!==!1){if(!z)return T(null,...q);C(L)}}return O(M)}var Ha=g(y8,3);function gT(x,S,T){let C=m(x);return Ha(O=>C((q,L)=>O(q,!L)),S,T)}function b8(x,S){if(S=k(S),!Array.isArray(x))return S(new Error("First argument to waterfall must be an array of functions"));if(!x.length)return S();var T=0;function C(q){var L=m(x[T++]);L(...q,F(O))}function O(q,...L){if(q!==!1){if(q||T===x.length)return S(q,...L);C(L)}}C([])}var mT=g(b8),w8={apply:e,applyEach:Cx,applyEachSeries:kx,asyncify:u,auto:Xg,autoInject:Nx,cargo:qx,cargoQueue:Px,compose:Lx,concat:Au,concatLimit:Hs,concatSeries:Ru,constant:Mx,detect:Iu,detectLimit:Cu,detectSeries:ku,dir:$x,doUntil:Fx,doWhilst:Ua,each:Nu,eachLimit:Wa,eachOf:Kt,eachOfLimit:de,eachOfSeries:_r,eachSeries:za,ensureAsync:rm,every:Ou,everyLimit:qu,everySeries:Pu,filter:Mu,filterLimit:Du,filterSeries:$u,forever:jx,groupBy:Ux,groupByLimit:Fu,groupBySeries:Wx,log:zx,map:Tu,mapLimit:ja,mapSeries:Qg,mapValues:Hx,mapValuesLimit:Bu,mapValuesSeries:Vx,memoize:Gx,nextTick:Kx,parallel:Yx,parallelLimit:Jx,priorityQueue:Qx,queue:im,race:Xx,reduce:jn,reduceRight:Uu,reflect:Wu,reflectAll:eT,reject:tT,rejectLimit:rT,rejectSeries:nT,retry:zu,retryable:oT,seq:tm,series:aT,setImmediate:c,some:Hu,someLimit:Vu,someSeries:Gu,sortBy:lT,timeout:cT,times:uT,timesLimit:Ku,timesSeries:dT,transform:fT,tryEach:hT,unmemoize:pT,until:gT,waterfall:mT,whilst:Ha,all:Ou,allLimit:qu,allSeries:Pu,any:Hu,anyLimit:Vu,anySeries:Gu,find:Iu,findLimit:Cu,findSeries:ku,flatMap:Au,flatMapLimit:Hs,flatMapSeries:Ru,forEach:Nu,forEachSeries:za,forEachLimit:Wa,forEachOf:Kt,forEachOfSeries:_r,forEachOfLimit:de,inject:jn,foldl:jn,foldr:Uu,select:Mu,selectLimit:Du,selectSeries:$u,wrapSync:u,during:Ha,doDuring:Ua};t.all=Ou,t.allLimit=qu,t.allSeries=Pu,t.any=Hu,t.anyLimit=Vu,t.anySeries=Gu,t.apply=e,t.applyEach=Cx,t.applyEachSeries=kx,t.asyncify=u,t.auto=Xg,t.autoInject=Nx,t.cargo=qx,t.cargoQueue=Px,t.compose=Lx,t.concat=Au,t.concatLimit=Hs,t.concatSeries=Ru,t.constant=Mx,t.default=w8,t.detect=Iu,t.detectLimit=Cu,t.detectSeries=ku,t.dir=$x,t.doDuring=Ua,t.doUntil=Fx,t.doWhilst=Ua,t.during=Ha,t.each=Nu,t.eachLimit=Wa,t.eachOf=Kt,t.eachOfLimit=de,t.eachOfSeries=_r,t.eachSeries=za,t.ensureAsync=rm,t.every=Ou,t.everyLimit=qu,t.everySeries=Pu,t.filter=Mu,t.filterLimit=Du,t.filterSeries=$u,t.find=Iu,t.findLimit=Cu,t.findSeries=ku,t.flatMap=Au,t.flatMapLimit=Hs,t.flatMapSeries=Ru,t.foldl=jn,t.foldr=Uu,t.forEach=Nu,t.forEachLimit=Wa,t.forEachOf=Kt,t.forEachOfLimit=de,t.forEachOfSeries=_r,t.forEachSeries=za,t.forever=jx,t.groupBy=Ux,t.groupByLimit=Fu,t.groupBySeries=Wx,t.inject=jn,t.log=zx,t.map=Tu,t.mapLimit=ja,t.mapSeries=Qg,t.mapValues=Hx,t.mapValuesLimit=Bu,t.mapValuesSeries=Vx,t.memoize=Gx,t.nextTick=Kx,t.parallel=Yx,t.parallelLimit=Jx,t.priorityQueue=Qx,t.queue=im,t.race=Xx,t.reduce=jn,t.reduceRight=Uu,t.reflect=Wu,t.reflectAll=eT,t.reject=tT,t.rejectLimit=rT,t.rejectSeries=nT,t.retry=zu,t.retryable=oT,t.select=Mu,t.selectLimit=Du,t.selectSeries=$u,t.seq=tm,t.series=aT,t.setImmediate=c,t.some=Hu,t.someLimit=Vu,t.someSeries=Gu,t.sortBy=lT,t.timeout=cT,t.times=uT,t.timesLimit=Ku,t.timesSeries=dT,t.transform=fT,t.tryEach=hT,t.unmemoize=pT,t.until=gT,t.waterfall=mT,t.whilst=Ha,t.wrapSync=u,Object.defineProperty(t,"__esModule",{value:!0})}))});var VT=w((TTe,HT)=>{var Wn=require("constants"),G8=process.cwd,ed=null,K8=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return ed||(ed=G8.call(process)),ed};try{process.cwd()}catch{}typeof process.chdir=="function"&&(bm=process.chdir,process.chdir=function(t){ed=null,bm.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,bm));var bm;HT.exports=Y8;function Y8(t){Wn.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=s(t.chown),t.fchown=s(t.fchown),t.lchown=s(t.lchown),t.chmod=n(t.chmod),t.fchmod=n(t.fchmod),t.lchmod=n(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=l(t.statSync),t.fstatSync=l(t.fstatSync),t.lstatSync=l(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(u,d,p){p&&process.nextTick(p)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(u,d,p,f){f&&process.nextTick(f)},t.lchownSync=function(){}),K8==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:(function(u){function d(p,f,y){var h=Date.now(),m=0;u(p,f,function g(E){if(E&&(E.code==="EACCES"||E.code==="EPERM"||E.code==="EBUSY")&&Date.now()-h<6e4){setTimeout(function(){t.stat(f,function(b,v){b&&b.code==="ENOENT"?u(p,f,g):y(E)})},m),m<100&&(m+=10);return}y&&y(E)})}return Object.setPrototypeOf&&Object.setPrototypeOf(d,u),d})(t.rename)),t.read=typeof t.read!="function"?t.read:(function(u){function d(p,f,y,h,m,g){var E;if(g&&typeof g=="function"){var b=0;E=function(v,A,k){if(v&&v.code==="EAGAIN"&&b<10)return b++,u.call(t,p,f,y,h,m,E);g.apply(this,arguments)}}return u.call(t,p,f,y,h,m,E)}return Object.setPrototypeOf&&Object.setPrototypeOf(d,u),d})(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:(function(u){return function(d,p,f,y,h){for(var m=0;;)try{return u.call(t,d,p,f,y,h)}catch(g){if(g.code==="EAGAIN"&&m<10){m++;continue}throw g}}})(t.readSync);function e(u){u.lchmod=function(d,p,f){u.open(d,Wn.O_WRONLY|Wn.O_SYMLINK,p,function(y,h){if(y){f&&f(y);return}u.fchmod(h,p,function(m){u.close(h,function(g){f&&f(m||g)})})})},u.lchmodSync=function(d,p){var f=u.openSync(d,Wn.O_WRONLY|Wn.O_SYMLINK,p),y=!0,h;try{h=u.fchmodSync(f,p),y=!1}finally{if(y)try{u.closeSync(f)}catch{}else u.closeSync(f)}return h}}function r(u){Wn.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(d,p,f,y){u.open(d,Wn.O_SYMLINK,function(h,m){if(h){y&&y(h);return}u.futimes(m,p,f,function(g){u.close(m,function(E){y&&y(g||E)})})})},u.lutimesSync=function(d,p,f){var y=u.openSync(d,Wn.O_SYMLINK),h,m=!0;try{h=u.futimesSync(y,p,f),m=!1}finally{if(m)try{u.closeSync(y)}catch{}else u.closeSync(y)}return h}):u.futimes&&(u.lutimes=function(d,p,f,y){y&&process.nextTick(y)},u.lutimesSync=function(){})}function n(u){return u&&function(d,p,f){return u.call(t,d,p,function(y){c(y)&&(y=null),f&&f.apply(this,arguments)})}}function i(u){return u&&function(d,p){try{return u.call(t,d,p)}catch(f){if(!c(f))throw f}}}function s(u){return u&&function(d,p,f,y){return u.call(t,d,p,f,function(h){c(h)&&(h=null),y&&y.apply(this,arguments)})}}function o(u){return u&&function(d,p,f){try{return u.call(t,d,p,f)}catch(y){if(!c(y))throw y}}}function a(u){return u&&function(d,p,f){typeof p=="function"&&(f=p,p=null);function y(h,m){m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),f&&f.apply(this,arguments)}return p?u.call(t,d,p,y):u.call(t,d,y)}}function l(u){return u&&function(d,p){var f=p?u.call(t,d,p):u.call(t,d);return f&&(f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296)),f}}function c(u){if(!u||u.code==="ENOSYS")return!0;var d=!process.getuid||process.getuid()!==0;return!!(d&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var YT=w((ATe,KT)=>{var GT=require("stream").Stream;KT.exports=J8;function J8(t){return{ReadStream:e,WriteStream:r};function e(n,i){if(!(this instanceof e))return new e(n,i);GT.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),a=0,l=o.length;a<l;a++){var c=o[a];this[c]=i[c]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}t.open(this.path,this.flags,this.mode,function(u,d){if(u){s.emit("error",u),s.readable=!1;return}s.fd=d,s.emit("open",d),s._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);GT.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,a=s.length;o<a;o++){var l=s[o];this[l]=i[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var ZT=w((RTe,JT)=>{"use strict";JT.exports=Q8;var Z8=Object.getPrototypeOf||function(t){return t.__proto__};function Q8(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:Z8(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}});var Sm=w((ITe,vm)=>{var Ue=require("fs"),X8=VT(),ez=YT(),tz=ZT(),td=require("util"),vt,nd;typeof Symbol=="function"&&typeof Symbol.for=="function"?(vt=Symbol.for("graceful-fs.queue"),nd=Symbol.for("graceful-fs.previous")):(vt="___graceful-fs.queue",nd="___graceful-fs.previous");function rz(){}function e1(t,e){Object.defineProperty(t,vt,{get:function(){return e}})}var Oi=rz;td.debuglog?Oi=td.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Oi=function(){var t=td.format.apply(td,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});Ue[vt]||(QT=global[vt]||[],e1(Ue,QT),Ue.close=(function(t){function e(r,n){return t.call(Ue,r,function(i){i||XT(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(e,nd,{value:t}),e})(Ue.close),Ue.closeSync=(function(t){function e(r){t.apply(Ue,arguments),XT()}return Object.defineProperty(e,nd,{value:t}),e})(Ue.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Oi(Ue[vt]),require("assert").equal(Ue[vt].length,0)}));var QT;global[vt]||e1(global,Ue[vt]);vm.exports=wm(tz(Ue));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Ue.__patched&&(vm.exports=wm(Ue),Ue.__patched=!0);function wm(t){X8(t),t.gracefulify=wm,t.createReadStream=A,t.createWriteStream=k;var e=t.readFile;t.readFile=r;function r(I,P,D){return typeof P=="function"&&(D=P,P=null),F(I,P,D);function F(B,te,ye,de){return e(B,te,function(Se){Se&&(Se.code==="EMFILE"||Se.code==="ENFILE")?Ys([F,[B,te,ye],Se,de||Date.now(),Date.now()]):typeof ye=="function"&&ye.apply(this,arguments)})}}var n=t.writeFile;t.writeFile=i;function i(I,P,D,F){return typeof D=="function"&&(F=D,D=null),B(I,P,D,F);function B(te,ye,de,Se,it){return n(te,ye,de,function(Ce){Ce&&(Ce.code==="EMFILE"||Ce.code==="ENFILE")?Ys([B,[te,ye,de,Se],Ce,it||Date.now(),Date.now()]):typeof Se=="function"&&Se.apply(this,arguments)})}}var s=t.appendFile;s&&(t.appendFile=o);function o(I,P,D,F){return typeof D=="function"&&(F=D,D=null),B(I,P,D,F);function B(te,ye,de,Se,it){return s(te,ye,de,function(Ce){Ce&&(Ce.code==="EMFILE"||Ce.code==="ENFILE")?Ys([B,[te,ye,de,Se],Ce,it||Date.now(),Date.now()]):typeof Se=="function"&&Se.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=l);function l(I,P,D,F){return typeof D=="function"&&(F=D,D=0),B(I,P,D,F);function B(te,ye,de,Se,it){return a(te,ye,de,function(Ce){Ce&&(Ce.code==="EMFILE"||Ce.code==="ENFILE")?Ys([B,[te,ye,de,Se],Ce,it||Date.now(),Date.now()]):typeof Se=="function"&&Se.apply(this,arguments)})}}var c=t.readdir;t.readdir=d;var u=/^v[0-5]\./;function d(I,P,D){typeof P=="function"&&(D=P,P=null);var F=u.test(process.version)?function(ye,de,Se,it){return c(ye,B(ye,de,Se,it))}:function(ye,de,Se,it){return c(ye,de,B(ye,de,Se,it))};return F(I,P,D);function B(te,ye,de,Se){return function(it,Ce){it&&(it.code==="EMFILE"||it.code==="ENFILE")?Ys([F,[te,ye,de],it,Se||Date.now(),Date.now()]):(Ce&&Ce.sort&&Ce.sort(),typeof de=="function"&&de.call(this,it,Ce))}}}if(process.version.substr(0,4)==="v0.8"){var p=ez(t);g=p.ReadStream,b=p.WriteStream}var f=t.ReadStream;f&&(g.prototype=Object.create(f.prototype),g.prototype.open=E);var y=t.WriteStream;y&&(b.prototype=Object.create(y.prototype),b.prototype.open=v),Object.defineProperty(t,"ReadStream",{get:function(){return g},set:function(I){g=I},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return b},set:function(I){b=I},enumerable:!0,configurable:!0});var h=g;Object.defineProperty(t,"FileReadStream",{get:function(){return h},set:function(I){h=I},enumerable:!0,configurable:!0});var m=b;Object.defineProperty(t,"FileWriteStream",{get:function(){return m},set:function(I){m=I},enumerable:!0,configurable:!0});function g(I,P){return this instanceof g?(f.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}function E(){var I=this;N(I.path,I.flags,I.mode,function(P,D){P?(I.autoClose&&I.destroy(),I.emit("error",P)):(I.fd=D,I.emit("open",D),I.read())})}function b(I,P){return this instanceof b?(y.apply(this,arguments),this):b.apply(Object.create(b.prototype),arguments)}function v(){var I=this;N(I.path,I.flags,I.mode,function(P,D){P?(I.destroy(),I.emit("error",P)):(I.fd=D,I.emit("open",D))})}function A(I,P){return new t.ReadStream(I,P)}function k(I,P){return new t.WriteStream(I,P)}var R=t.open;t.open=N;function N(I,P,D,F){return typeof D=="function"&&(F=D,D=null),B(I,P,D,F);function B(te,ye,de,Se,it){return R(te,ye,de,function(Ce,Kt){Ce&&(Ce.code==="EMFILE"||Ce.code==="ENFILE")?Ys([B,[te,ye,de,Se],Ce,it||Date.now(),Date.now()]):typeof Se=="function"&&Se.apply(this,arguments)})}}return t}function Ys(t){Oi("ENQUEUE",t[0].name,t[1]),Ue[vt].push(t),_m()}var rd;function XT(){for(var t=Date.now(),e=0;e<Ue[vt].length;++e)Ue[vt][e].length>2&&(Ue[vt][e][3]=t,Ue[vt][e][4]=t);_m()}function _m(){if(clearTimeout(rd),rd=void 0,Ue[vt].length!==0){var t=Ue[vt].shift(),e=t[0],r=t[1],n=t[2],i=t[3],s=t[4];if(i===void 0)Oi("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-i>=6e4){Oi("TIMEOUT",e.name,r);var o=r.pop();typeof o=="function"&&o.call(null,n)}else{var a=Date.now()-s,l=Math.max(s-i,1),c=Math.min(l*1.2,100);a>=c?(Oi("RETRY",e.name,r),e.apply(null,r.concat([i]))):Ue[vt].push(t)}rd===void 0&&(rd=setTimeout(_m,0))}}});var id=w((CTe,t1)=>{"use strict";var Dr=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Dr.writable=t=>Dr(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Dr.readable=t=>Dr(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Dr.duplex=t=>Dr.writable(t)&&Dr.readable(t);Dr.transform=t=>Dr.duplex(t)&&typeof t._transform=="function";t1.exports=Dr});var Za=w((kTe,Em)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Em.exports={nextTick:nz}:Em.exports=process;function nz(t,e,r,n){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,s,o;switch(i){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,n)});default:for(s=new Array(i-1),o=0;o<s.length;)s[o++]=arguments[o];return process.nextTick(function(){t.apply(null,s)})}}});var n1=w((NTe,r1)=>{var iz={}.toString;r1.exports=Array.isArray||function(t){return iz.call(t)=="[object Array]"}});var xm=w((OTe,i1)=>{i1.exports=require("stream")});var Qa=w((Tm,o1)=>{var sd=require("buffer"),mn=sd.Buffer;function s1(t,e){for(var r in t)e[r]=t[r]}mn.from&&mn.alloc&&mn.allocUnsafe&&mn.allocUnsafeSlow?o1.exports=sd:(s1(sd,Tm),Tm.Buffer=Js);function Js(t,e,r){return mn(t,e,r)}s1(mn,Js);Js.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return mn(t,e,r)};Js.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=mn(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Js.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return mn(t)};Js.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return sd.SlowBuffer(t)}});var Zs=w(Nt=>{function sz(t){return Array.isArray?Array.isArray(t):od(t)==="[object Array]"}Nt.isArray=sz;function oz(t){return typeof t=="boolean"}Nt.isBoolean=oz;function az(t){return t===null}Nt.isNull=az;function lz(t){return t==null}Nt.isNullOrUndefined=lz;function cz(t){return typeof t=="number"}Nt.isNumber=cz;function uz(t){return typeof t=="string"}Nt.isString=uz;function dz(t){return typeof t=="symbol"}Nt.isSymbol=dz;function fz(t){return t===void 0}Nt.isUndefined=fz;function hz(t){return od(t)==="[object RegExp]"}Nt.isRegExp=hz;function pz(t){return typeof t=="object"&&t!==null}Nt.isObject=pz;function gz(t){return od(t)==="[object Date]"}Nt.isDate=gz;function mz(t){return od(t)==="[object Error]"||t instanceof Error}Nt.isError=mz;function yz(t){return typeof t=="function"}Nt.isFunction=yz;function bz(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}Nt.isPrimitive=bz;Nt.isBuffer=require("buffer").Buffer.isBuffer;function od(t){return Object.prototype.toString.call(t)}});var a1=w((PTe,Am)=>{typeof Object.create=="function"?Am.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Am.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Qs=w((LTe,Im)=>{try{if(Rm=require("util"),typeof Rm.inherits!="function")throw"";Im.exports=Rm.inherits}catch{Im.exports=a1()}var Rm});var c1=w((MTe,Cm)=>{"use strict";function wz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l1=Qa().Buffer,Xa=require("util");function _z(t,e,r){t.copy(e,r)}Cm.exports=(function(){function t(){wz(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},t.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},t.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},t.prototype.concat=function(r){if(this.length===0)return l1.alloc(0);for(var n=l1.allocUnsafe(r>>>0),i=this.head,s=0;i;)_z(i.data,n,s),s+=i.data.length,i=i.next;return n},t})();Xa&&Xa.inspect&&Xa.inspect.custom&&(Cm.exports.prototype[Xa.inspect.custom]=function(){var t=Xa.inspect({length:this.length});return this.constructor.name+" "+t})});var km=w((DTe,u1)=>{"use strict";var ad=Za();function vz(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,ad.nextTick(ld,this,t)):ad.nextTick(ld,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,ad.nextTick(ld,r,s)):ad.nextTick(ld,r,s):e&&e(s)}),this)}function Sz(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function ld(t,e){t.emit("error",e)}u1.exports={destroy:vz,undestroy:Sz}});var f1=w(($Te,d1)=>{d1.exports=require("util").deprecate});var Om=w((FTe,_1)=>{"use strict";var qi=Za();_1.exports=rt;function p1(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Bz(e,t)}}var Ez=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:qi.nextTick,Xs;rt.WritableState=tl;var g1=Object.create(Zs());g1.inherits=Qs();var xz={deprecate:f1()},m1=xm(),ud=Qa().Buffer,Tz=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Az(t){return ud.from(t)}function Rz(t){return ud.isBuffer(t)||t instanceof Tz}var y1=km();g1.inherits(rt,m1);function Iz(){}function tl(t,e){Xs=Xs||Pi(),t=t||{};var r=e instanceof Xs;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=t.writableHighWaterMark,s=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){Lz(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new p1(this)}tl.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(tl.prototype,"buffer",{get:xz.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var cd;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(cd=Function.prototype[Symbol.hasInstance],Object.defineProperty(rt,Symbol.hasInstance,{value:function(t){return cd.call(this,t)?!0:this!==rt?!1:t&&t._writableState instanceof tl}})):cd=function(t){return t instanceof this};function rt(t){if(Xs=Xs||Pi(),!cd.call(rt,this)&&!(this instanceof Xs))return new rt(t);this._writableState=new tl(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),m1.call(this)}rt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Cz(t,e){var r=new Error("write after end");t.emit("error",r),qi.nextTick(e,r)}function kz(t,e,r,n){var i=!0,s=!1;return r===null?s=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!e.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),qi.nextTick(n,s),i=!1),i}rt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&Rz(t);return s&&!ud.isBuffer(t)&&(t=Az(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Iz),n.ended?Cz(this,r):(s||kz(this,n,t,r))&&(n.pendingcb++,i=Oz(this,n,s,t,e,r)),i};rt.prototype.cork=function(){var t=this._writableState;t.corked++};rt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&b1(this,t))};rt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function Nz(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=ud.from(e,r)),e}Object.defineProperty(rt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Oz(t,e,r,n,i,s){if(!r){var o=Nz(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Nm(t,e,!1,a,n,i,s);return l}function Nm(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function qz(t,e,r,n,i){--e.pendingcb,r?(qi.nextTick(i,n),qi.nextTick(el,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),el(t,e))}function Pz(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Lz(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(Pz(r),e)qz(t,r,n,e,i);else{var s=w1(r);!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&b1(t,r),n?Ez(h1,t,r,s,i):h1(t,r,s,i)}}function h1(t,e,r,n){r||Mz(t,e),e.pendingcb--,n(),el(t,e)}function Mz(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function b1(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,Nm(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new p1(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,u=r.callback,d=e.objectMode?1:l.length;if(Nm(t,e,!1,d,l,c,u),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}rt.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))};rt.prototype._writev=null;rt.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Fz(this,n,r)};function w1(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Dz(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),el(t,e)})}function $z(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,qi.nextTick(Dz,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function el(t,e){var r=w1(e);return r&&($z(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),r}function Fz(t,e,r){e.ending=!0,el(t,e),r&&(e.finished?qi.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Bz(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(rt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});rt.prototype.destroy=y1.destroy;rt.prototype._undestroy=y1.undestroy;rt.prototype._destroy=function(t,e){this.end(),e(t)}});var Pi=w((BTe,x1)=>{"use strict";var v1=Za(),jz=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};x1.exports=yn;var S1=Object.create(Zs());S1.inherits=Qs();var E1=Lm(),Pm=Om();S1.inherits(yn,E1);for(qm=jz(Pm.prototype),dd=0;dd<qm.length;dd++)fd=qm[dd],yn.prototype[fd]||(yn.prototype[fd]=Pm.prototype[fd]);var qm,fd,dd;function yn(t){if(!(this instanceof yn))return new yn(t);E1.call(this,t),Pm.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Uz)}Object.defineProperty(yn.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Uz(){this.allowHalfOpen||this._writableState.ended||v1.nextTick(Wz,this)}function Wz(t){t.end()}Object.defineProperty(yn.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});yn.prototype._destroy=function(t,e){this.push(null),this.end(),v1.nextTick(e,t)}});var $m=w(A1=>{"use strict";var Dm=Qa().Buffer,T1=Dm.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function zz(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Hz(t){var e=zz(t);if(typeof e!="string"&&(Dm.isEncoding===T1||!T1(t)))throw new Error("Unknown encoding: "+t);return e||t}A1.StringDecoder=rl;function rl(t){this.encoding=Hz(t);var e;switch(this.encoding){case"utf16le":this.text=Zz,this.end=Qz,e=4;break;case"utf8":this.fillLast=Kz,e=4;break;case"base64":this.text=Xz,this.end=eH,e=3;break;default:this.write=tH,this.end=rH;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Dm.allocUnsafe(e)}rl.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};rl.prototype.end=Jz;rl.prototype.text=Yz;rl.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Mm(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Vz(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Mm(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Mm(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Mm(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Gz(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Kz(t){var e=this.lastTotal-this.lastNeed,r=Gz(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Yz(t,e){var r=Vz(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Jz(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Zz(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Qz(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Xz(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function eH(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function tH(t){return t.toString(this.encoding)}function rH(t){return t&&t.length?this.write(t):""}});var Lm=w((WTe,$1)=>{"use strict";var to=Za();$1.exports=ke;var nH=n1(),nl;ke.ReadableState=q1;var UTe=require("events").EventEmitter,k1=function(t,e){return t.listeners(e).length},Wm=xm(),il=Qa().Buffer,iH=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function sH(t){return il.from(t)}function oH(t){return il.isBuffer(t)||t instanceof iH}var N1=Object.create(Zs());N1.inherits=Qs();var Fm=require("util"),Ee=void 0;Fm&&Fm.debuglog?Ee=Fm.debuglog("stream"):Ee=function(){};var aH=c1(),O1=km(),eo;N1.inherits(ke,Wm);var Bm=["error","close","destroy","pause","resume"];function lH(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):nH(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function q1(t,e){nl=nl||Pi(),t=t||{};var r=e instanceof nl;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=t.readableHighWaterMark,s=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new aH,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(eo||(eo=$m().StringDecoder),this.decoder=new eo(t.encoding),this.encoding=t.encoding)}function ke(t){if(nl=nl||Pi(),!(this instanceof ke))return new ke(t);this._readableState=new q1(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Wm.call(this)}Object.defineProperty(ke.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});ke.prototype.destroy=O1.destroy;ke.prototype._undestroy=O1.undestroy;ke.prototype._destroy=function(t,e){this.push(null),e(t)};ke.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=il.from(t,e),e=""),n=!0),P1(this,t,e,!1,n)};ke.prototype.unshift=function(t){return P1(this,t,null,!0,!1)};function P1(t,e,r,n,i){var s=t._readableState;if(e===null)s.reading=!1,fH(t,s);else{var o;i||(o=cH(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==il.prototype&&(e=sH(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):jm(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?jm(t,s,e,!1):L1(t,s)):jm(t,s,e,!1))):n||(s.reading=!1)}return uH(s)}function jm(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&hd(t)),L1(t,e)}function cH(t,e){var r;return!oH(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function uH(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}ke.prototype.isPaused=function(){return this._readableState.flowing===!1};ke.prototype.setEncoding=function(t){return eo||(eo=$m().StringDecoder),this._readableState.decoder=new eo(t),this._readableState.encoding=t,this};var R1=8388608;function dH(t){return t>=R1?t=R1:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function I1(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=dH(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}ke.prototype.read=function(t){Ee("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Ee("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Um(this):hd(this),null;if(t=I1(t,e),t===0&&e.ended)return e.length===0&&Um(this),null;var n=e.needReadable;Ee("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Ee("length less than watermark",n)),e.ended||e.reading?(n=!1,Ee("reading or ended",n)):n&&(Ee("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=I1(r,e)));var i;return t>0?i=M1(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Um(this)),i!==null&&this.emit("data",i),i};function fH(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,hd(t)}}function hd(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Ee("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?to.nextTick(C1,t):C1(t))}function C1(t){Ee("emit readable"),t.emit("readable"),zm(t)}function L1(t,e){e.readingMore||(e.readingMore=!0,to.nextTick(hH,t,e))}function hH(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Ee("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}ke.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};ke.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Ee("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:m;n.endEmitted?to.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(g,E){Ee("onunpipe"),g===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,u())}function a(){Ee("onend"),t.end()}var l=pH(r);t.on("drain",l);var c=!1;function u(){Ee("cleanup"),t.removeListener("close",y),t.removeListener("finish",h),t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",p),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}var d=!1;r.on("data",p);function p(g){Ee("ondata"),d=!1;var E=t.write(g);E===!1&&!d&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&D1(n.pipes,t)!==-1)&&!c&&(Ee("false write response, pause",n.awaitDrain),n.awaitDrain++,d=!0),r.pause())}function f(g){Ee("onerror",g),m(),t.removeListener("error",f),k1(t,"error")===0&&t.emit("error",g)}lH(t,"error",f);function y(){t.removeListener("finish",h),m()}t.once("close",y);function h(){Ee("onfinish"),t.removeListener("close",y),m()}t.once("finish",h);function m(){Ee("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Ee("pipe resume"),r.resume()),t};function pH(t){return function(){var e=t._readableState;Ee("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&k1(t,"data")&&(e.flowing=!0,zm(t))}}ke.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=D1(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};ke.prototype.on=function(t,e){var r=Wm.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&hd(this):to.nextTick(gH,this))}return r};ke.prototype.addListener=ke.prototype.on;function gH(t){Ee("readable nexttick read 0"),t.read(0)}ke.prototype.resume=function(){var t=this._readableState;return t.flowing||(Ee("resume"),t.flowing=!0,mH(this,t)),this};function mH(t,e){e.resumeScheduled||(e.resumeScheduled=!0,to.nextTick(yH,t,e))}function yH(t,e){e.reading||(Ee("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),zm(t),e.flowing&&!e.reading&&t.read(0)}ke.prototype.pause=function(){return Ee("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ee("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function zm(t){var e=t._readableState;for(Ee("flow",e.flowing);e.flowing&&t.read()!==null;);}ke.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Ee("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(Ee("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=(function(o){return function(){return t[o].apply(t,arguments)}})(i));for(var s=0;s<Bm.length;s++)t.on(Bm[s],this.emit.bind(this,Bm[s]));return this._read=function(o){Ee("wrapped _read",o),n&&(n=!1,t.resume())},this};Object.defineProperty(ke.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});ke._fromList=M1;function M1(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=bH(t,e.buffer,e.decoder),r}function bH(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?wH(t,e):_H(t,e),n}function wH(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var s=r.data,o=t>s.length?s.length:t;if(o===s.length?i+=s:i+=s.slice(0,t),t-=o,t===0){o===s.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(o));break}++n}return e.length-=n,i}function _H(t,e){var r=il.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var s=n.data,o=t>s.length?s.length:t;if(s.copy(r,r.length-t,0,o),t-=o,t===0){o===s.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(o));break}++i}return e.length-=i,r}function Um(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,to.nextTick(vH,e,t))}function vH(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function D1(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var Hm=w((zTe,j1)=>{"use strict";j1.exports=bn;var pd=Pi(),B1=Object.create(Zs());B1.inherits=Qs();B1.inherits(bn,pd);function SH(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function bn(t){if(!(this instanceof bn))return new bn(t);pd.call(this,t),this._transformState={afterTransform:SH.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",EH)}function EH(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){F1(t,e,r)}):F1(this,null,null)}bn.prototype.push=function(t,e){return this._transformState.needTransform=!1,pd.prototype.push.call(this,t,e)};bn.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};bn.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};bn.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};bn.prototype._destroy=function(t,e){var r=this;pd.prototype._destroy.call(this,t,function(n){e(n),r.emit("close")})};function F1(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var H1=w((HTe,z1)=>{"use strict";z1.exports=sl;var U1=Hm(),W1=Object.create(Zs());W1.inherits=Qs();W1.inherits(sl,U1);function sl(t){if(!(this instanceof sl))return new sl(t);U1.call(this,t)}sl.prototype._transform=function(t,e,r){r(null,t)}});var V1=w((St,gd)=>{var $r=require("stream");process.env.READABLE_STREAM==="disable"&&$r?(gd.exports=$r,St=gd.exports=$r.Readable,St.Readable=$r.Readable,St.Writable=$r.Writable,St.Duplex=$r.Duplex,St.Transform=$r.Transform,St.PassThrough=$r.PassThrough,St.Stream=$r):(St=gd.exports=Lm(),St.Stream=$r||St,St.Readable=St,St.Writable=Om(),St.Duplex=Pi(),St.Transform=Hm(),St.PassThrough=H1())});var K1=w((VTe,G1)=>{G1.exports=V1().PassThrough});var Q1=w((GTe,Z1)=>{var Y1=require("util"),bd=K1();Z1.exports={Readable:md,Writable:yd};Y1.inherits(md,bd);Y1.inherits(yd,bd);function J1(t,e,r){t[e]=function(){return delete t[e],r.apply(this,arguments),this[e].apply(this,arguments)}}function md(t,e){if(!(this instanceof md))return new md(t,e);bd.call(this,e),J1(this,"_read",function(){var r=t.call(this,e),n=this.emit.bind(this,"error");r.on("error",n),r.pipe(this)}),this.emit("readable")}function yd(t,e){if(!(this instanceof yd))return new yd(t,e);bd.call(this,e),J1(this,"_write",function(){var r=t.call(this,e),n=this.emit.bind(this,"error");r.on("error",n),this.pipe(r)}),this.emit("writable")}});var Vm=w((KTe,X1)=>{X1.exports=function(t,e){if(typeof t!="string")throw new TypeError("expected path to be a string");if(t==="\\"||t==="/")return"/";var r=t.length;if(r<=1)return t;var n="";if(r>4&&t[3]==="\\"){var i=t[2];(i==="?"||i===".")&&t.slice(0,2)==="\\\\"&&(t=t.slice(2),n="//")}var s=t.split(/[/\\]+/);return e!==!1&&s[s.length-1]===""&&s.pop(),n+s.join("/")}});var Gm=w((YTe,eA)=>{function xH(t){return t}eA.exports=xH});var rA=w((JTe,tA)=>{function TH(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}tA.exports=TH});var sA=w((ZTe,iA)=>{var AH=rA(),nA=Math.max;function RH(t,e,r){return e=nA(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=nA(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(o),AH(t,this,a)}}iA.exports=RH});var aA=w((QTe,oA)=>{function IH(t){return function(){return t}}oA.exports=IH});var Km=w((XTe,lA)=>{var CH=typeof global=="object"&&global&&global.Object===Object&&global;lA.exports=CH});var ro=w((e1e,cA)=>{var kH=Km(),NH=typeof self=="object"&&self&&self.Object===Object&&self,OH=kH||NH||Function("return this")();cA.exports=OH});var wd=w((t1e,uA)=>{var qH=ro(),PH=qH.Symbol;uA.exports=PH});var pA=w((r1e,hA)=>{var dA=wd(),fA=Object.prototype,LH=fA.hasOwnProperty,MH=fA.toString,ol=dA?dA.toStringTag:void 0;function DH(t){var e=LH.call(t,ol),r=t[ol];try{t[ol]=void 0;var n=!0}catch{}var i=MH.call(t);return n&&(e?t[ol]=r:delete t[ol]),i}hA.exports=DH});var mA=w((n1e,gA)=>{var $H=Object.prototype,FH=$H.toString;function BH(t){return FH.call(t)}gA.exports=BH});var al=w((i1e,wA)=>{var yA=wd(),jH=pA(),UH=mA(),WH="[object Null]",zH="[object Undefined]",bA=yA?yA.toStringTag:void 0;function HH(t){return t==null?t===void 0?zH:WH:bA&&bA in Object(t)?jH(t):UH(t)}wA.exports=HH});var ll=w((s1e,_A)=>{function VH(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}_A.exports=VH});var Ym=w((o1e,vA)=>{var GH=al(),KH=ll(),YH="[object AsyncFunction]",JH="[object Function]",ZH="[object GeneratorFunction]",QH="[object Proxy]";function XH(t){if(!KH(t))return!1;var e=GH(t);return e==JH||e==ZH||e==YH||e==QH}vA.exports=XH});var EA=w((a1e,SA)=>{var e9=ro(),t9=e9["__core-js_shared__"];SA.exports=t9});var AA=w((l1e,TA)=>{var Jm=EA(),xA=(function(){var t=/[^.]+$/.exec(Jm&&Jm.keys&&Jm.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function r9(t){return!!xA&&xA in t}TA.exports=r9});var IA=w((c1e,RA)=>{var n9=Function.prototype,i9=n9.toString;function s9(t){if(t!=null){try{return i9.call(t)}catch{}try{return t+""}catch{}}return""}RA.exports=s9});var kA=w((u1e,CA)=>{var o9=Ym(),a9=AA(),l9=ll(),c9=IA(),u9=/[\\^$.*+?()[\]{}|]/g,d9=/^\[object .+?Constructor\]$/,f9=Function.prototype,h9=Object.prototype,p9=f9.toString,g9=h9.hasOwnProperty,m9=RegExp("^"+p9.call(g9).replace(u9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function y9(t){if(!l9(t)||a9(t))return!1;var e=o9(t)?m9:d9;return e.test(c9(t))}CA.exports=y9});var OA=w((d1e,NA)=>{function b9(t,e){return t?.[e]}NA.exports=b9});var cl=w((f1e,qA)=>{var w9=kA(),_9=OA();function v9(t,e){var r=_9(t,e);return w9(r)?r:void 0}qA.exports=v9});var LA=w((h1e,PA)=>{var S9=cl(),E9=(function(){try{var t=S9(Object,"defineProperty");return t({},"",{}),t}catch{}})();PA.exports=E9});var $A=w((p1e,DA)=>{var x9=aA(),MA=LA(),T9=Gm(),A9=MA?function(t,e){return MA(t,"toString",{configurable:!0,enumerable:!1,value:x9(e),writable:!0})}:T9;DA.exports=A9});var BA=w((g1e,FA)=>{var R9=800,I9=16,C9=Date.now;function k9(t){var e=0,r=0;return function(){var n=C9(),i=I9-(n-r);if(r=n,i>0){if(++e>=R9)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}FA.exports=k9});var UA=w((m1e,jA)=>{var N9=$A(),O9=BA(),q9=O9(N9);jA.exports=q9});var _d=w((y1e,WA)=>{var P9=Gm(),L9=sA(),M9=UA();function D9(t,e){return M9(L9(t,e,P9),t+"")}WA.exports=D9});var vd=w((b1e,zA)=>{function $9(t,e){return t===e||t!==t&&e!==e}zA.exports=$9});var Zm=w((w1e,HA)=>{var F9=9007199254740991;function B9(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=F9}HA.exports=B9});var Sd=w((_1e,VA)=>{var j9=Ym(),U9=Zm();function W9(t){return t!=null&&U9(t.length)&&!j9(t)}VA.exports=W9});var Qm=w((v1e,GA)=>{var z9=9007199254740991,H9=/^(?:0|[1-9]\d*)$/;function V9(t,e){var r=typeof t;return e=e??z9,!!e&&(r=="number"||r!="symbol"&&H9.test(t))&&t>-1&&t%1==0&&t<e}GA.exports=V9});var YA=w((S1e,KA)=>{var G9=vd(),K9=Sd(),Y9=Qm(),J9=ll();function Z9(t,e,r){if(!J9(r))return!1;var n=typeof e;return(n=="number"?K9(r)&&Y9(e,r.length):n=="string"&&e in r)?G9(r[e],t):!1}KA.exports=Z9});var ZA=w((E1e,JA)=>{function Q9(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}JA.exports=Q9});var no=w((x1e,QA)=>{function X9(t){return t!=null&&typeof t=="object"}QA.exports=X9});var eR=w((T1e,XA)=>{var eV=al(),tV=no(),rV="[object Arguments]";function nV(t){return tV(t)&&eV(t)==rV}XA.exports=nV});var Xm=w((A1e,nR)=>{var tR=eR(),iV=no(),rR=Object.prototype,sV=rR.hasOwnProperty,oV=rR.propertyIsEnumerable,aV=tR((function(){return arguments})())?tR:function(t){return iV(t)&&sV.call(t,"callee")&&!oV.call(t,"callee")};nR.exports=aV});var ey=w((R1e,iR)=>{var lV=Array.isArray;iR.exports=lV});var oR=w((I1e,sR)=>{function cV(){return!1}sR.exports=cV});var uR=w((ul,io)=>{var uV=ro(),dV=oR(),cR=typeof ul=="object"&&ul&&!ul.nodeType&&ul,aR=cR&&typeof io=="object"&&io&&!io.nodeType&&io,fV=aR&&aR.exports===cR,lR=fV?uV.Buffer:void 0,hV=lR?lR.isBuffer:void 0,pV=hV||dV;io.exports=pV});var fR=w((C1e,dR)=>{var gV=al(),mV=Zm(),yV=no(),bV="[object Arguments]",wV="[object Array]",_V="[object Boolean]",vV="[object Date]",SV="[object Error]",EV="[object Function]",xV="[object Map]",TV="[object Number]",AV="[object Object]",RV="[object RegExp]",IV="[object Set]",CV="[object String]",kV="[object WeakMap]",NV="[object ArrayBuffer]",OV="[object DataView]",qV="[object Float32Array]",PV="[object Float64Array]",LV="[object Int8Array]",MV="[object Int16Array]",DV="[object Int32Array]",$V="[object Uint8Array]",FV="[object Uint8ClampedArray]",BV="[object Uint16Array]",jV="[object Uint32Array]",Ne={};Ne[qV]=Ne[PV]=Ne[LV]=Ne[MV]=Ne[DV]=Ne[$V]=Ne[FV]=Ne[BV]=Ne[jV]=!0;Ne[bV]=Ne[wV]=Ne[NV]=Ne[_V]=Ne[OV]=Ne[vV]=Ne[SV]=Ne[EV]=Ne[xV]=Ne[TV]=Ne[AV]=Ne[RV]=Ne[IV]=Ne[CV]=Ne[kV]=!1;function UV(t){return yV(t)&&mV(t.length)&&!!Ne[gV(t)]}dR.exports=UV});var ty=w((k1e,hR)=>{function WV(t){return function(e){return t(e)}}hR.exports=WV});var gR=w((dl,so)=>{var zV=Km(),pR=typeof dl=="object"&&dl&&!dl.nodeType&&dl,fl=pR&&typeof so=="object"&&so&&!so.nodeType&&so,HV=fl&&fl.exports===pR,ry=HV&&zV.process,VV=(function(){try{var t=fl&&fl.require&&fl.require("util").types;return t||ry&&ry.binding&&ry.binding("util")}catch{}})();so.exports=VV});var wR=w((N1e,bR)=>{var GV=fR(),KV=ty(),mR=gR(),yR=mR&&mR.isTypedArray,YV=yR?KV(yR):GV;bR.exports=YV});var vR=w((O1e,_R)=>{var JV=ZA(),ZV=Xm(),QV=ey(),XV=uR(),eG=Qm(),tG=wR(),rG=Object.prototype,nG=rG.hasOwnProperty;function iG(t,e){var r=QV(t),n=!r&&ZV(t),i=!r&&!n&&XV(t),s=!r&&!n&&!i&&tG(t),o=r||n||i||s,a=o?JV(t.length,String):[],l=a.length;for(var c in t)(e||nG.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||eG(c,l)))&&a.push(c);return a}_R.exports=iG});var ER=w((q1e,SR)=>{var sG=Object.prototype;function oG(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||sG;return t===r}SR.exports=oG});var TR=w((P1e,xR)=>{function aG(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}xR.exports=aG});var RR=w((L1e,AR)=>{var lG=ll(),cG=ER(),uG=TR(),dG=Object.prototype,fG=dG.hasOwnProperty;function hG(t){if(!lG(t))return uG(t);var e=cG(t),r=[];for(var n in t)n=="constructor"&&(e||!fG.call(t,n))||r.push(n);return r}AR.exports=hG});var CR=w((M1e,IR)=>{var pG=vR(),gG=RR(),mG=Sd();function yG(t){return mG(t)?pG(t,!0):gG(t)}IR.exports=yG});var OR=w((D1e,NR)=>{var bG=_d(),wG=vd(),_G=YA(),vG=CR(),kR=Object.prototype,SG=kR.hasOwnProperty,EG=bG(function(t,e){t=Object(t);var r=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&_G(e[0],e[1],i)&&(n=1);++r<n;)for(var s=e[r],o=vG(s),a=-1,l=o.length;++a<l;){var c=o[a],u=t[c];(u===void 0||wG(u,kR[c])&&!SG.call(t,c))&&(t[c]=s[c])}return t});NR.exports=EG});var $e=w(($1e,qR)=>{"use strict";var ny=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};qR.exports={AggregateError:ny,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var iy=w((F1e,PR)=>{"use strict";PR.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Ot=w((B1e,DR)=>{"use strict";var{format:xG,inspect:Ed}=iy(),{AggregateError:TG}=$e(),AG=globalThis.AggregateError||TG,RG=Symbol("kIsNodeError"),IG=["string","function","number","object","Function","Object","boolean","bigint","symbol"],CG=/^([A-Z][a-z0-9]*)+$/,kG="__node_internal_",xd={};function Li(t,e){if(!t)throw new xd.ERR_INTERNAL_ASSERTION(e)}function LR(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function NG(t,e,r){if(typeof e=="function")return Li(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Li(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:xG(e,...r)}function Et(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(NG(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[RG]=!0,xd[t]=n}function MR(t){let e=kG+t.name;return Object.defineProperty(t,"name",{value:e}),t}function OG(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new AG([e,t],e.message);return r.code=e.code,r}return t||e}var sy=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new xd.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Et("ERR_ASSERTION","%s",Error);Et("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Li(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)Li(typeof l=="string","All expected entries have to be of type string"),IG.includes(l)?i.push(l.toLowerCase()):CG.test(l)?s.push(l):(Li(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=Ed(r,{depth:-1});n+=`. Received ${l}`}}else{let l=Ed(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);Et("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=Ed(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Et("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Et("ERR_MISSING_ARGS",(...t)=>{Li(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Et("ERR_OUT_OF_RANGE",(t,e,r)=>{Li(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=LR(String(r));else if(typeof r=="bigint"){n=String(r);let i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=LR(n)),n+="n"}else n=Ed(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Et("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Et("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Et("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Et("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Et("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Et("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Et("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Et("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Et("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Et("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Et("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);DR.exports={AbortError:sy,aggregateTwoErrors:MR(OG),hideStackFrames:MR,codes:xd}});var GR=w((gl,pl)=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});var WR=new WeakMap,oy=new WeakMap;function Oe(t){let e=WR.get(t);return console.assert(e!=null,"'this' is expected an Event object, but got",t),e}function $R(t){if(t.passiveListener!=null){typeof console<"u"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener);return}t.event.cancelable&&(t.canceled=!0,typeof t.event.preventDefault=="function"&&t.event.preventDefault())}function oo(t,e){WR.set(this,{eventTarget:t,event:e,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let r=Object.keys(e);for(let n=0;n<r.length;++n){let i=r[n];i in this||Object.defineProperty(this,i,zR(i))}}oo.prototype={get type(){return Oe(this).event.type},get target(){return Oe(this).eventTarget},get currentTarget(){return Oe(this).currentTarget},composedPath(){let t=Oe(this).currentTarget;return t==null?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return Oe(this).eventPhase},stopPropagation(){let t=Oe(this);t.stopped=!0,typeof t.event.stopPropagation=="function"&&t.event.stopPropagation()},stopImmediatePropagation(){let t=Oe(this);t.stopped=!0,t.immediateStopped=!0,typeof t.event.stopImmediatePropagation=="function"&&t.event.stopImmediatePropagation()},get bubbles(){return!!Oe(this).event.bubbles},get cancelable(){return!!Oe(this).event.cancelable},preventDefault(){$R(Oe(this))},get defaultPrevented(){return Oe(this).canceled},get composed(){return!!Oe(this).event.composed},get timeStamp(){return Oe(this).timeStamp},get srcElement(){return Oe(this).eventTarget},get cancelBubble(){return Oe(this).stopped},set cancelBubble(t){if(!t)return;let e=Oe(this);e.stopped=!0,typeof e.event.cancelBubble=="boolean"&&(e.event.cancelBubble=!0)},get returnValue(){return!Oe(this).canceled},set returnValue(t){t||$R(Oe(this))},initEvent(){}};Object.defineProperty(oo.prototype,"constructor",{value:oo,configurable:!0,writable:!0});typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(oo.prototype,window.Event.prototype),oy.set(window.Event.prototype,oo));function zR(t){return{get(){return Oe(this).event[t]},set(e){Oe(this).event[t]=e},configurable:!0,enumerable:!0}}function qG(t){return{value(){let e=Oe(this).event;return e[t].apply(e,arguments)},configurable:!0,enumerable:!0}}function PG(t,e){let r=Object.keys(e);if(r.length===0)return t;function n(i,s){t.call(this,i,s)}n.prototype=Object.create(t.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){let s=r[i];if(!(s in t.prototype)){let a=typeof Object.getOwnPropertyDescriptor(e,s).value=="function";Object.defineProperty(n.prototype,s,a?qG(s):zR(s))}}return n}function HR(t){if(t==null||t===Object.prototype)return oo;let e=oy.get(t);return e==null&&(e=PG(HR(Object.getPrototypeOf(t)),t),oy.set(t,e)),e}function LG(t,e){let r=HR(Object.getPrototypeOf(e));return new r(t,e)}function MG(t){return Oe(t).immediateStopped}function DG(t,e){Oe(t).eventPhase=e}function $G(t,e){Oe(t).currentTarget=e}function FR(t,e){Oe(t).passiveListener=e}var VR=new WeakMap,BR=1,jR=2,Td=3;function Ad(t){return t!==null&&typeof t=="object"}function hl(t){let e=VR.get(t);if(e==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return e}function FG(t){return{get(){let r=hl(this).get(t);for(;r!=null;){if(r.listenerType===Td)return r.listener;r=r.next}return null},set(e){typeof e!="function"&&!Ad(e)&&(e=null);let r=hl(this),n=null,i=r.get(t);for(;i!=null;)i.listenerType===Td?n!==null?n.next=i.next:i.next!==null?r.set(t,i.next):r.delete(t):n=i,i=i.next;if(e!==null){let s={listener:e,listenerType:Td,passive:!1,once:!1,next:null};n===null?r.set(t,s):n.next=s}},configurable:!0,enumerable:!0}}function ay(t,e){Object.defineProperty(t,`on${e}`,FG(e))}function UR(t){function e(){Sr.call(this)}e.prototype=Object.create(Sr.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let r=0;r<t.length;++r)ay(e.prototype,t[r]);return e}function Sr(){if(this instanceof Sr){VR.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return UR(arguments[0]);if(arguments.length>0){let t=new Array(arguments.length);for(let e=0;e<arguments.length;++e)t[e]=arguments[e];return UR(t)}throw new TypeError("Cannot call a class as a function")}Sr.prototype={addEventListener(t,e,r){if(e==null)return;if(typeof e!="function"&&!Ad(e))throw new TypeError("'listener' should be a function or an object.");let n=hl(this),i=Ad(r),o=(i?!!r.capture:!!r)?BR:jR,a={listener:e,listenerType:o,passive:i&&!!r.passive,once:i&&!!r.once,next:null},l=n.get(t);if(l===void 0){n.set(t,a);return}let c=null;for(;l!=null;){if(l.listener===e&&l.listenerType===o)return;c=l,l=l.next}c.next=a},removeEventListener(t,e,r){if(e==null)return;let n=hl(this),s=(Ad(r)?!!r.capture:!!r)?BR:jR,o=null,a=n.get(t);for(;a!=null;){if(a.listener===e&&a.listenerType===s){o!==null?o.next=a.next:a.next!==null?n.set(t,a.next):n.delete(t);return}o=a,a=a.next}},dispatchEvent(t){if(t==null||typeof t.type!="string")throw new TypeError('"event.type" should be a string.');let e=hl(this),r=t.type,n=e.get(r);if(n==null)return!0;let i=LG(this,t),s=null;for(;n!=null;){if(n.once?s!==null?s.next=n.next:n.next!==null?e.set(r,n.next):e.delete(r):s=n,FR(i,n.passive?n.listener:null),typeof n.listener=="function")try{n.listener.call(this,i)}catch(o){typeof console<"u"&&typeof console.error=="function"&&console.error(o)}else n.listenerType!==Td&&typeof n.listener.handleEvent=="function"&&n.listener.handleEvent(i);if(MG(i))break;n=n.next}return FR(i,null),DG(i,0),$G(i,null),!i.defaultPrevented}};Object.defineProperty(Sr.prototype,"constructor",{value:Sr,configurable:!0,writable:!0});typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(Sr.prototype,window.EventTarget.prototype);gl.defineEventAttribute=ay;gl.EventTarget=Sr;gl.default=Sr;pl.exports=Sr;pl.exports.EventTarget=pl.exports.default=Sr;pl.exports.defineEventAttribute=ay});var et=w((yl,ml)=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});var ly=GR(),zn=class extends ly.EventTarget{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=Rd.get(this);if(typeof e!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}};ly.defineEventAttribute(zn.prototype,"abort");function BG(){let t=Object.create(zn.prototype);return ly.EventTarget.call(t),Rd.set(t,!1),t}function jG(t){Rd.get(t)===!1&&(Rd.set(t,!0),t.dispatchEvent({type:"abort"}))}var Rd=new WeakMap;Object.defineProperties(zn.prototype,{aborted:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(zn.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var Hn=class{constructor(){YR.set(this,BG())}get signal(){return KR(this)}abort(){jG(KR(this))}},YR=new WeakMap;function KR(t){let e=YR.get(t);if(e==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${t===null?"null":typeof t}`);return e}Object.defineProperties(Hn.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Hn.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});yl.AbortController=Hn;yl.AbortSignal=zn;yl.default=Hn;ml.exports=Hn;ml.exports.AbortController=ml.exports.default=Hn;ml.exports.AbortSignal=zn});var jt=w((j1e,uy)=>{"use strict";var UG=require("buffer"),{format:WG,inspect:zG}=iy(),{codes:{ERR_INVALID_ARG_TYPE:cy}}=Ot(),{kResistStopPropagation:HG,AggregateError:VG,SymbolDispose:GG}=$e(),KG=globalThis.AbortSignal||et().AbortSignal,YG=globalThis.AbortController||et().AbortController,JG=Object.getPrototypeOf(async function(){}).constructor,JR=globalThis.Blob||UG.Blob,ZG=typeof JR<"u"?function(e){return e instanceof JR}:function(e){return!1},ZR=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new cy(e,"AbortSignal",t)},QG=(t,e)=>{if(typeof t!="function")throw new cy(e,"Function",t)};uy.exports={AggregateError:VG,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format:WG,inspect:zG,types:{isAsyncFunction(t){return t instanceof JG},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:ZG,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,r){if(e===void 0)throw new cy("signal","AbortSignal",e);ZR(e,"signal"),QG(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[HG]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[GG](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:KG.any||function(e){if(e.length===1)return e[0];let r=new YG,n=()=>r.abort();return e.forEach(i=>{ZR(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};uy.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var lo=w((U1e,aI)=>{"use strict";var{ArrayIsArray:fy,ArrayPrototypeIncludes:tI,ArrayPrototypeJoin:rI,ArrayPrototypeMap:XG,NumberIsInteger:hy,NumberIsNaN:e7,NumberMAX_SAFE_INTEGER:t7,NumberMIN_SAFE_INTEGER:r7,NumberParseInt:n7,ObjectPrototypeHasOwnProperty:i7,RegExpPrototypeExec:nI,String:s7,StringPrototypeToUpperCase:o7,StringPrototypeTrim:a7}=$e(),{hideStackFrames:or,codes:{ERR_SOCKET_BAD_PORT:l7,ERR_INVALID_ARG_TYPE:qt,ERR_INVALID_ARG_VALUE:ao,ERR_OUT_OF_RANGE:Mi,ERR_UNKNOWN_SIGNAL:QR}}=Ot(),{normalizeEncoding:c7}=jt(),{isAsyncFunction:u7,isArrayBufferView:d7}=jt().types,XR={};function f7(t){return t===(t|0)}function h7(t){return t===t>>>0}var p7=/^[0-7]+$/,g7="must be a 32-bit unsigned integer or an octal string";function m7(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(nI(p7,t)===null)throw new ao(e,t,g7);t=n7(t,8)}return iI(t,e),t}var y7=or((t,e,r=r7,n=t7)=>{if(typeof t!="number")throw new qt(e,"number",t);if(!hy(t))throw new Mi(e,"an integer",t);if(t<r||t>n)throw new Mi(e,`>= ${r} && <= ${n}`,t)}),b7=or((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new qt(e,"number",t);if(!hy(t))throw new Mi(e,"an integer",t);if(t<r||t>n)throw new Mi(e,`>= ${r} && <= ${n}`,t)}),iI=or((t,e,r=!1)=>{if(typeof t!="number")throw new qt(e,"number",t);if(!hy(t))throw new Mi(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new Mi(e,`>= ${n} && <= ${i}`,t)});function py(t,e){if(typeof t!="string")throw new qt(e,"string",t)}function w7(t,e,r=void 0,n){if(typeof t!="number")throw new qt(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&e7(t))throw new Mi(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var _7=or((t,e,r)=>{if(!tI(r,t)){let i="must be one of: "+rI(XG(r,s=>typeof s=="string"?`'${s}'`:s7(s)),", ");throw new ao(e,t,i)}});function sI(t,e){if(typeof t!="boolean")throw new qt(e,"boolean",t)}function dy(t,e,r){return t==null||!i7(t,e)?r:t[e]}var v7=or((t,e,r=null)=>{let n=dy(r,"allowArray",!1),i=dy(r,"allowFunction",!1);if(!dy(r,"nullable",!1)&&t===null||!n&&fy(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new qt(e,"Object",t)}),S7=or((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new qt(e,"a dictionary",t)}),Id=or((t,e,r=0)=>{if(!fy(t))throw new qt(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new ao(e,t,n)}});function E7(t,e){Id(t,e);for(let r=0;r<t.length;r++)py(t[r],`${e}[${r}]`)}function x7(t,e){Id(t,e);for(let r=0;r<t.length;r++)sI(t[r],`${e}[${r}]`)}function T7(t,e){Id(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new qt(i,"AbortSignal",n);oI(n,i)}}function A7(t,e="signal"){if(py(t,e),XR[t]===void 0)throw XR[o7(t)]!==void 0?new QR(t+" (signals must use all capital letters)"):new QR(t)}var R7=or((t,e="buffer")=>{if(!d7(t))throw new qt(e,["Buffer","TypedArray","DataView"],t)});function I7(t,e){let r=c7(e),n=t.length;if(r==="hex"&&n%2!==0)throw new ao("encoding",e,`is invalid for data of length ${n}`)}function C7(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&a7(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new l7(e,t,r);return t|0}var oI=or((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new qt(e,"AbortSignal",t)}),k7=or((t,e)=>{if(typeof t!="function")throw new qt(e,"Function",t)}),N7=or((t,e)=>{if(typeof t!="function"||u7(t))throw new qt(e,"Function",t)}),O7=or((t,e)=>{if(t!==void 0)throw new qt(e,"undefined",t)});function q7(t,e,r){if(!tI(r,t))throw new qt(e,`('${rI(r,"|")}')`,t)}var P7=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function eI(t,e){if(typeof t>"u"||!nI(P7,t))throw new ao(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function L7(t){if(typeof t=="string")return eI(t,"hints"),t;if(fy(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];eI(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new ao("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}aI.exports={isInt32:f7,isUint32:h7,parseFileMode:m7,validateArray:Id,validateStringArray:E7,validateBooleanArray:x7,validateAbortSignalArray:T7,validateBoolean:sI,validateBuffer:R7,validateDictionary:S7,validateEncoding:I7,validateFunction:k7,validateInt32:b7,validateInteger:y7,validateNumber:w7,validateObject:v7,validateOneOf:_7,validatePlainFunction:N7,validatePort:C7,validateSignalName:A7,validateString:py,validateUint32:iI,validateUndefined:O7,validateUnion:q7,validateAbortSignal:oI,validateLinkHeaderValue:L7}});var Ae=w((W1e,lI)=>{lI.exports=global.process});var Br=w((z1e,EI)=>{"use strict";var{SymbolAsyncIterator:cI,SymbolIterator:uI,SymbolFor:Di}=$e(),dI=Di("nodejs.stream.destroyed"),fI=Di("nodejs.stream.errored"),gy=Di("nodejs.stream.readable"),my=Di("nodejs.stream.writable"),hI=Di("nodejs.stream.disturbed"),M7=Di("nodejs.webstream.isClosedPromise"),D7=Di("nodejs.webstream.controllerErrorFunction");function Cd(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function kd(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function $7(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Fr(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function pI(t){return!!(t&&!Fr(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function gI(t){return!!(t&&!Fr(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function mI(t){return!!(t&&!Fr(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function F7(t){return pI(t)||gI(t)||mI(t)}function B7(t,e){return t==null?!1:e===!0?typeof t[cI]=="function":e===!1?typeof t[uI]=="function":typeof t[cI]=="function"||typeof t[uI]=="function"}function Nd(t){if(!Fr(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[dI]||n!=null&&n.destroyed)}function yI(t){if(!kd(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function j7(t,e){if(!kd(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function U7(t){if(!Cd(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function bI(t,e){if(!Cd(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function wI(t){return t&&t[gy]!=null?t[gy]:typeof t?.readable!="boolean"?null:Nd(t)?!1:Cd(t)&&t.readable&&!bI(t)}function _I(t){return t&&t[my]!=null?t[my]:typeof t?.writable!="boolean"?null:Nd(t)?!1:kd(t)&&t.writable&&!yI(t)}function W7(t,e){return Fr(t)?Nd(t)?!0:!(e?.readable!==!1&&wI(t)||e?.writable!==!1&&_I(t)):null}function z7(t){var e,r;return Fr(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function H7(t){var e,r;return Fr(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function V7(t){if(!Fr(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&vI(t)?t._closed:null}function vI(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function SI(t){return typeof t._sent100=="boolean"&&vI(t)}function G7(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function K7(t){if(!Fr(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&SI(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Y7(t){var e;return!!(t&&((e=t[hI])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function J7(t){var e,r,n,i,s,o,a,l,c,u;return!!(t&&((e=(r=(n=(i=(s=(o=t[fI])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}EI.exports={isDestroyed:Nd,kIsDestroyed:dI,isDisturbed:Y7,kIsDisturbed:hI,isErrored:J7,kIsErrored:fI,isReadable:wI,kIsReadable:gy,kIsClosedPromise:M7,kControllerErrorFunction:D7,kIsWritable:my,isClosed:V7,isDuplexNodeStream:$7,isFinished:W7,isIterable:B7,isReadableNodeStream:Cd,isReadableStream:pI,isReadableEnded:U7,isReadableFinished:bI,isReadableErrored:H7,isNodeStream:Fr,isWebStream:F7,isWritable:_I,isWritableNodeStream:kd,isWritableStream:gI,isWritableEnded:yI,isWritableFinished:j7,isWritableErrored:z7,isServerRequest:G7,isServerResponse:SI,willEmitClose:K7,isTransformStream:mI}});var wn=w((H1e,vy)=>{"use strict";var Vn=Ae(),{AbortError:OI,codes:Z7}=Ot(),{ERR_INVALID_ARG_TYPE:Q7,ERR_STREAM_PREMATURE_CLOSE:xI}=Z7,{kEmptyObject:by,once:wy}=jt(),{validateAbortSignal:X7,validateFunction:eK,validateObject:tK,validateBoolean:rK}=lo(),{Promise:nK,PromisePrototypeThen:iK,SymbolDispose:qI}=$e(),{isClosed:sK,isReadable:TI,isReadableNodeStream:yy,isReadableStream:oK,isReadableFinished:AI,isReadableErrored:RI,isWritable:II,isWritableNodeStream:CI,isWritableStream:aK,isWritableFinished:kI,isWritableErrored:NI,isNodeStream:lK,willEmitClose:cK,kIsClosedPromise:uK}=Br(),co;function dK(t){return t.setHeader&&typeof t.abort=="function"}var _y=()=>{};function PI(t,e,r){var n,i;if(arguments.length===2?(r=e,e=by):e==null?e=by:tK(e,"options"),eK(r,"callback"),X7(e.signal,"options.signal"),r=wy(r),oK(t)||aK(t))return fK(t,e,r);if(!lK(t))throw new Q7("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:yy(t),o=(i=e.writable)!==null&&i!==void 0?i:CI(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||p()},u=cK(t)&&yy(t)===s&&CI(t)===o,d=kI(t,!1),p=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&r.call(t)},f=AI(t,!1),y=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&r.call(t)},h=A=>{r.call(t,A)},m=sK(t),g=()=>{m=!0;let A=NI(t)||RI(t);if(A&&typeof A!="boolean")return r.call(t,A);if(s&&!f&&yy(t,!0)&&!AI(t,!1))return r.call(t,new xI);if(o&&!d&&!kI(t,!1))return r.call(t,new xI);r.call(t)},E=()=>{m=!0;let A=NI(t)||RI(t);if(A&&typeof A!="boolean")return r.call(t,A);r.call(t)},b=()=>{t.req.on("finish",p)};dK(t)?(t.on("complete",p),u||t.on("abort",g),t.req?b():t.on("request",b)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",g),t.on("end",y),t.on("finish",p),e.error!==!1&&t.on("error",h),t.on("close",g),m?Vn.nextTick(g):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||Vn.nextTick(E):(!s&&(!u||TI(t))&&(d||II(t)===!1)||!o&&(!u||II(t))&&(f||TI(t)===!1)||l&&t.req&&t.aborted)&&Vn.nextTick(E);let v=()=>{r=_y,t.removeListener("aborted",g),t.removeListener("complete",p),t.removeListener("abort",g),t.removeListener("request",b),t.req&&t.req.removeListener("finish",p),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",p),t.removeListener("end",y),t.removeListener("error",h),t.removeListener("close",g)};if(e.signal&&!m){let A=()=>{let k=r;v(),k.call(t,new OI(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Vn.nextTick(A);else{co=co||jt().addAbortListener;let k=co(e.signal,A),R=r;r=wy((...N)=>{k[qI](),R.apply(t,N)})}}return v}function fK(t,e,r){let n=!1,i=_y;if(e.signal)if(i=()=>{n=!0,r.call(t,new OI(void 0,{cause:e.signal.reason}))},e.signal.aborted)Vn.nextTick(i);else{co=co||jt().addAbortListener;let o=co(e.signal,i),a=r;r=wy((...l)=>{o[qI](),a.apply(t,l)})}let s=(...o)=>{n||Vn.nextTick(()=>r.apply(t,o))};return iK(t[uK].promise,s,s),_y}function hK(t,e){var r;let n=!1;return e===null&&(e=by),(r=e)!==null&&r!==void 0&&r.cleanup&&(rK(e.cleanup,"cleanup"),n=e.cleanup),new nK((i,s)=>{let o=PI(t,e,a=>{n&&o(),a?s(a):i()})})}vy.exports=PI;vy.exports.finished=hK});var $i=w((V1e,UI)=>{"use strict";var jr=Ae(),{aggregateTwoErrors:pK,codes:{ERR_MULTIPLE_CALLBACK:gK},AbortError:mK}=Ot(),{Symbol:DI}=$e(),{kIsDestroyed:yK,isDestroyed:bK,isFinished:wK,isServerRequest:_K}=Br(),$I=DI("kDestroy"),Sy=DI("kConstruct");function FI(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function vK(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(FI(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?LI(this,t,e):this.once($I,function(s){LI(this,pK(s,t),e)}),this)}function LI(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;FI(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?jr.nextTick(SK,t,s):jr.nextTick(BI,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function SK(t,e){Ey(t,e),BI(t)}function BI(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function Ey(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function EK(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function xy(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?jr.nextTick(Ey,t,e):Ey(t,e))}function xK(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(Sy,e),!(t.listenerCount(Sy)>1)&&jr.nextTick(TK,t)}function TK(t){let e=!1;function r(n){if(e){xy(t,n??new gK);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit($I,n):n?xy(t,n,!0):jr.nextTick(AK,t)}try{t._construct(n=>{jr.nextTick(r,n)})}catch(n){jr.nextTick(r,n)}}function AK(t){t.emit(Sy)}function MI(t){return t?.setHeader&&typeof t.abort=="function"}function jI(t){t.emit("close")}function RK(t,e){t.emit("error",e),jr.nextTick(jI,t)}function IK(t,e){!t||bK(t)||(!e&&!wK(t)&&(e=new mK),_K(t)?(t.socket=null,t.destroy(e)):MI(t)?t.abort():MI(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?jr.nextTick(RK,t,e):jr.nextTick(jI,t),t.destroyed||(t[yK]=!0))}UI.exports={construct:xK,destroyer:IK,destroy:vK,undestroy:EK,errorOrDestroy:xy}});var Pd=w((G1e,zI)=>{"use strict";var{ArrayIsArray:CK,ObjectSetPrototypeOf:WI}=$e(),{EventEmitter:Od}=require("events");function qd(t){Od.call(this,t)}WI(qd.prototype,Od.prototype);WI(qd,Od);qd.prototype.pipe=function(t,e){let r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),Od.listenerCount(this,"error")===0&&this.emit("error",u)}Ty(r,"error",l),Ty(t,"error",l);function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function Ty(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):CK(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}zI.exports={Stream:qd,prependListener:Ty}});var bl=w((K1e,Ld)=>{"use strict";var{SymbolDispose:kK}=$e(),{AbortError:HI,codes:NK}=Ot(),{isNodeStream:VI,isWebStream:OK,kControllerErrorFunction:qK}=Br(),PK=wn(),{ERR_INVALID_ARG_TYPE:GI}=NK,Ay,LK=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new GI(e,"AbortSignal",t)};Ld.exports.addAbortSignal=function(e,r){if(LK(e,"signal"),!VI(r)&&!OK(r))throw new GI("stream",["ReadableStream","WritableStream","Stream"],r);return Ld.exports.addAbortSignalNoValidate(e,r)};Ld.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=VI(e)?()=>{e.destroy(new HI(void 0,{cause:t.reason}))}:()=>{e[qK](new HI(void 0,{cause:t.reason}))};if(t.aborted)r();else{Ay=Ay||jt().addAbortListener;let n=Ay(t,r);PK(e,n[kK])}return e}});var JI=w((J1e,YI)=>{"use strict";var{StringPrototypeSlice:KI,SymbolIterator:MK,TypedArrayPrototypeSet:Md,Uint8Array:DK}=$e(),{Buffer:Ry}=require("buffer"),{inspect:$K}=jt();YI.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return Ry.alloc(0);let r=Ry.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)Md(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[MK](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=KI(s,0,e),this.head=n,n.data=KI(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=Ry.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)Md(r,o,n-e),e-=o.length;else{e===o.length?(Md(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(Md(r,new DK(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return $K(this,{...r,depth:0,customInspect:!1})}}});var wl=w((Z1e,eC)=>{"use strict";var{MathFloor:FK,NumberIsInteger:BK}=$e(),{validateInteger:jK}=lo(),{ERR_INVALID_ARG_VALUE:UK}=Ot().codes,ZI=16*1024,QI=16;function WK(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function XI(t){return t?QI:ZI}function zK(t,e){jK(e,"value",0),t?QI=e:ZI=e}function HK(t,e,r,n){let i=WK(e,n,r);if(i!=null){if(!BK(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new UK(s,i)}return FK(i)}return XI(t.objectMode)}eC.exports={getHighWaterMark:HK,getDefaultHighWaterMark:XI,setDefaultHighWaterMark:zK}});var nC=w((Iy,rC)=>{var Dd=require("buffer"),Ur=Dd.Buffer;function tC(t,e){for(var r in t)e[r]=t[r]}Ur.from&&Ur.alloc&&Ur.allocUnsafe&&Ur.allocUnsafeSlow?rC.exports=Dd:(tC(Dd,Iy),Iy.Buffer=Fi);function Fi(t,e,r){return Ur(t,e,r)}Fi.prototype=Object.create(Ur.prototype);tC(Ur,Fi);Fi.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ur(t,e,r)};Fi.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Ur(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Fi.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ur(t)};Fi.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Dd.SlowBuffer(t)}});var vl=w(sC=>{"use strict";var ky=nC().Buffer,iC=ky.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function VK(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function GK(t){var e=VK(t);if(typeof e!="string"&&(ky.isEncoding===iC||!iC(t)))throw new Error("Unknown encoding: "+t);return e||t}sC.StringDecoder=_l;function _l(t){this.encoding=GK(t);var e;switch(this.encoding){case"utf16le":this.text=XK,this.end=eY,e=4;break;case"utf8":this.fillLast=JK,e=4;break;case"base64":this.text=tY,this.end=rY,e=3;break;default:this.write=nY,this.end=iY;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=ky.allocUnsafe(e)}_l.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};_l.prototype.end=QK;_l.prototype.text=ZK;_l.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Cy(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function KK(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Cy(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Cy(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Cy(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function YK(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function JK(t){var e=this.lastTotal-this.lastNeed,r=YK(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function ZK(t,e){var r=KK(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function QK(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function XK(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function eY(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function tY(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function rY(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function nY(t){return t.toString(this.encoding)}function iY(t){return t&&t.length?this.write(t):""}});var Ny=w((X1e,cC)=>{"use strict";var oC=Ae(),{PromisePrototypeThen:sY,SymbolAsyncIterator:aC,SymbolIterator:lC}=$e(),{Buffer:oY}=require("buffer"),{ERR_INVALID_ARG_TYPE:aY,ERR_STREAM_NULL_VALUES:lY}=Ot().codes;function cY(t,e,r){let n;if(typeof e=="string"||e instanceof oY)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[aC])i=!0,n=e[aC]();else if(e&&e[lC])i=!1,n=e[lC]();else throw new aY("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){sY(a(c),()=>oC.nextTick(u,c),d=>oC.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof n.throw=="function";if(u&&d){let{value:p,done:f}=await n.throw(c);if(await p,f)return}if(typeof n.return=="function"){let{value:p}=await n.return();await p}}async function l(){for(;;){try{let{value:c,done:u}=i?await n.next():n.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new lY;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}cC.exports=cY});var El=w((eAe,RC)=>{"use strict";var Er=Ae(),{ArrayPrototypeIndexOf:uY,NumberIsInteger:dY,NumberIsNaN:fY,NumberParseInt:hY,ObjectDefineProperties:Fy,ObjectKeys:pY,ObjectSetPrototypeOf:fC,Promise:hC,SafeSet:gY,SymbolAsyncDispose:mY,SymbolAsyncIterator:yY,Symbol:bY}=$e();RC.exports=Y;Y.ReadableState=jd;var{EventEmitter:wY}=require("events"),{Stream:Gn,prependListener:_Y}=Pd(),{Buffer:Oy}=require("buffer"),{addAbortSignal:vY}=bl(),pC=wn(),oe=jt().debuglog("stream",t=>{oe=t}),SY=JI(),ho=$i(),{getHighWaterMark:EY,getDefaultHighWaterMark:xY}=wl(),{aggregateTwoErrors:uC,codes:{ERR_INVALID_ARG_TYPE:TY,ERR_METHOD_NOT_IMPLEMENTED:AY,ERR_OUT_OF_RANGE:RY,ERR_STREAM_PUSH_AFTER_EOF:IY,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:CY},AbortError:kY}=Ot(),{validateObject:NY}=lo(),Bi=bY("kPaused"),{StringDecoder:gC}=vl(),OY=Ny();fC(Y.prototype,Gn.prototype);fC(Y,Gn);var qy=()=>{},{errorOrDestroy:uo}=ho,fo=1,qY=2,mC=4,Sl=8,yC=16,$d=32,Fd=64,bC=128,PY=256,LY=512,MY=1024,Dy=2048,$y=4096,DY=8192,$Y=16384,FY=32768,wC=65536,BY=1<<17,jY=1<<18;function ot(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}Fy(jd.prototype,{objectMode:ot(fo),ended:ot(qY),endEmitted:ot(mC),reading:ot(Sl),constructed:ot(yC),sync:ot($d),needReadable:ot(Fd),emittedReadable:ot(bC),readableListening:ot(PY),resumeScheduled:ot(LY),errorEmitted:ot(MY),emitClose:ot(Dy),autoDestroy:ot($y),destroyed:ot(DY),closed:ot($Y),closeEmitted:ot(FY),multiAwaitDrain:ot(wC),readingMore:ot(BY),dataEmitted:ot(jY)});function jd(t,e,r){typeof r!="boolean"&&(r=e instanceof Wr()),this.state=Dy|$y|yC|$d,t&&t.objectMode&&(this.state|=fo),r&&t&&t.readableObjectMode&&(this.state|=fo),this.highWaterMark=t?EY(this,t,"readableHighWaterMark",r):xY(!1),this.buffer=new SY,this.length=0,this.pipes=[],this.flowing=null,this[Bi]=null,t&&t.emitClose===!1&&(this.state&=~Dy),t&&t.autoDestroy===!1&&(this.state&=~$y),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new gC(t.encoding),this.encoding=t.encoding)}function Y(t){if(!(this instanceof Y))return new Y(t);let e=this instanceof Wr();this._readableState=new jd(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&vY(t.signal,this)),Gn.call(this,t),ho.construct(this,()=>{this._readableState.needReadable&&Bd(this,this._readableState)})}Y.prototype.destroy=ho.destroy;Y.prototype._undestroy=ho.undestroy;Y.prototype._destroy=function(t,e){e(t)};Y.prototype[wY.captureRejectionSymbol]=function(t){this.destroy(t)};Y.prototype[mY]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new kY,this.destroy(t)),new hC((e,r)=>pC(this,n=>n&&n!==t?r(n):e(null)))};Y.prototype.push=function(t,e){return _C(this,t,e,!1)};Y.prototype.unshift=function(t,e){return _C(this,t,e,!0)};function _C(t,e,r,n){oe("readableAddChunk",e);let i=t._readableState,s;if((i.state&fo)===0&&(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=Oy.from(e,r).toString(i.encoding):(e=Oy.from(e,r),r=""))):e instanceof Oy?r="":Gn._isUint8Array(e)?(e=Gn._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new TY("chunk",["string","Buffer","Uint8Array"],e))),s)uo(t,s);else if(e===null)i.state&=~Sl,zY(t,i);else if((i.state&fo)!==0||e&&e.length>0)if(n)if((i.state&mC)!==0)uo(t,new CY);else{if(i.destroyed||i.errored)return!1;Py(t,i,e,!0)}else if(i.ended)uo(t,new IY);else{if(i.destroyed||i.errored)return!1;i.state&=~Sl,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?Py(t,i,e,!1):Bd(t,i)):Py(t,i,e,!1)}else n||(i.state&=~Sl,Bd(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function Py(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&wC)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&Fd)!==0&&Ud(t)),Bd(t,e)}Y.prototype.isPaused=function(){let t=this._readableState;return t[Bi]===!0||t.flowing===!1};Y.prototype.setEncoding=function(t){let e=new gC(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var UY=1073741824;function WY(t){if(t>UY)throw new RY("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function dC(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&fo)!==0?1:fY(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Y.prototype.read=function(t){oe("read",t),t===void 0?t=NaN:dY(t)||(t=hY(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=WY(t)),t!==0&&(e.state&=~bC),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return oe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Ly(this):Ud(this),null;if(t=dC(t,e),t===0&&e.ended)return e.length===0&&Ly(this),null;let n=(e.state&Fd)!==0;if(oe("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,oe("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,oe("reading, ended or constructing",n);else if(n){oe("do read"),e.state|=Sl|$d,e.length===0&&(e.state|=Fd);try{this._read(e.highWaterMark)}catch(s){uo(this,s)}e.state&=~$d,e.reading||(t=dC(r,e))}let i;return t>0?i=TC(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Ly(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function zY(t,e){if(oe("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Ud(t):(e.needReadable=!1,e.emittedReadable=!0,vC(t))}}function Ud(t){let e=t._readableState;oe("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(oe("emitReadable",e.flowing),e.emittedReadable=!0,Er.nextTick(vC,t))}function vC(t){let e=t._readableState;oe("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,EC(t)}function Bd(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Er.nextTick(HY,t,e))}function HY(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(oe("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Y.prototype._read=function(t){throw new AY("_read()")};Y.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new gY(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),oe("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Er.stdout&&t!==Er.stderr?a:m;n.endEmitted?Er.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(g,E){oe("onunpipe"),g===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,u())}function a(){oe("onend"),t.end()}let l,c=!1;function u(){oe("cleanup"),t.removeListener("close",y),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",p),c=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(oe("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(oe("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=VY(r,t),t.on("drain",l))}r.on("data",p);function p(g){oe("ondata");let E=t.write(g);oe("dest.write",E),E===!1&&d()}function f(g){if(oe("onerror",g),m(),t.removeListener("error",f),t.listenerCount("error")===0){let E=t._writableState||t._readableState;E&&!E.errorEmitted?uo(t,g):t.emit("error",g)}}_Y(t,"error",f);function y(){t.removeListener("finish",h),m()}t.once("close",y);function h(){oe("onfinish"),t.removeListener("close",y),m()}t.once("finish",h);function m(){oe("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(oe("pipe resume"),r.resume()),t};function VY(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(oe("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(oe("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Y.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=uY(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};Y.prototype.on=function(t,e){let r=Gn.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,oe("on readable",n.length,n.reading),n.length?Ud(this):n.reading||Er.nextTick(GY,this)),r};Y.prototype.addListener=Y.prototype.on;Y.prototype.removeListener=function(t,e){let r=Gn.prototype.removeListener.call(this,t,e);return t==="readable"&&Er.nextTick(SC,this),r};Y.prototype.off=Y.prototype.removeListener;Y.prototype.removeAllListeners=function(t){let e=Gn.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Er.nextTick(SC,this),e};function SC(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Bi]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function GY(t){oe("readable nexttick read 0"),t.read(0)}Y.prototype.resume=function(){let t=this._readableState;return t.flowing||(oe("resume"),t.flowing=!t.readableListening,KY(this,t)),t[Bi]=!1,this};function KY(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Er.nextTick(YY,t,e))}function YY(t,e){oe("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),EC(t),e.flowing&&!e.reading&&t.read(0)}Y.prototype.pause=function(){return oe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(oe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Bi]=!0,this};function EC(t){let e=t._readableState;for(oe("flow",e.flowing);e.flowing&&t.read()!==null;);}Y.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{uo(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=pY(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};Y.prototype[yY]=function(){return xC(this)};Y.prototype.iterator=function(t){return t!==void 0&&NY(t,"options"),xC(this,t)};function xC(t,e){typeof t.read!="function"&&(t=Y.wrap(t,{objectMode:!0}));let r=JY(t,e);return r.stream=t,r}async function*JY(t,e){let r=qy;function n(o){this===t?(r(),r=qy):r=o}t.on("readable",n);let i,s=pC(t,{writable:!1},o=>{i=o?uC(i,o):null,r(),r=qy});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new hC(n)}}}catch(o){throw i=uC(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?ho.destroyer(t,null):(t.off("readable",n),s())}}Fy(Y.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Fy(jd.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Bi]!==!1},set(t){this[Bi]=!!t}}});Y._fromList=TC;function TC(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Ly(t){let e=t._readableState;oe("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Er.nextTick(ZY,e,t))}function ZY(t,e){if(oe("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Er.nextTick(QY,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function QY(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Y.from=function(t,e){return OY(Y,t,e)};var My;function AC(){return My===void 0&&(My={}),My}Y.fromWeb=function(t,e){return AC().newStreamReadableFromReadableStream(t,e)};Y.toWeb=function(t,e){return AC().newReadableStreamFromStreamReadable(t,e)};Y.wrap=function(t,e){var r,n;return new Y({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){ho.destroyer(t,i),s(i)}}).wrap(t)}});var Gd=w((tAe,FC)=>{"use strict";var ji=Ae(),{ArrayPrototypeSlice:kC,Error:XY,FunctionPrototypeSymbolHasInstance:NC,ObjectDefineProperty:OC,ObjectDefineProperties:eJ,ObjectSetPrototypeOf:qC,StringPrototypeToLowerCase:tJ,Symbol:rJ,SymbolHasInstance:nJ}=$e();FC.exports=We;We.WritableState=Al;var{EventEmitter:iJ}=require("events"),xl=Pd().Stream,{Buffer:Wd}=require("buffer"),Vd=$i(),{addAbortSignal:sJ}=bl(),{getHighWaterMark:oJ,getDefaultHighWaterMark:aJ}=wl(),{ERR_INVALID_ARG_TYPE:lJ,ERR_METHOD_NOT_IMPLEMENTED:cJ,ERR_MULTIPLE_CALLBACK:PC,ERR_STREAM_CANNOT_PIPE:uJ,ERR_STREAM_DESTROYED:Tl,ERR_STREAM_ALREADY_FINISHED:dJ,ERR_STREAM_NULL_VALUES:fJ,ERR_STREAM_WRITE_AFTER_END:hJ,ERR_UNKNOWN_ENCODING:LC}=Ot().codes,{errorOrDestroy:po}=Vd;qC(We.prototype,xl.prototype);qC(We,xl);function Uy(){}var go=rJ("kOnFinished");function Al(t,e,r){typeof r!="boolean"&&(r=e instanceof Wr()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?oJ(this,t,"writableHighWaterMark",r):aJ(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=gJ.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Hd(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[go]=[]}function Hd(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Al.prototype.getBuffer=function(){return kC(this.buffered,this.bufferedIndex)};OC(Al.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function We(t){let e=this instanceof Wr();if(!e&&!NC(We,this))return new We(t);this._writableState=new Al(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&sJ(t.signal,this)),xl.call(this,t),Vd.construct(this,()=>{let r=this._writableState;r.writing||zy(this,r),Hy(this,r)})}OC(We,nJ,{__proto__:null,value:function(t){return NC(this,t)?!0:this!==We?!1:t&&t._writableState instanceof Al}});We.prototype.pipe=function(){po(this,new uJ)};function MC(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!Wd.isEncoding(r))throw new LC(r);typeof n!="function"&&(n=Uy)}if(e===null)throw new fJ;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=Wd.from(e,r),r="buffer");else if(e instanceof Wd)r="buffer";else if(xl._isUint8Array(e))e=xl._uint8ArrayToBuffer(e),r="buffer";else throw new lJ("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new hJ:i.destroyed&&(s=new Tl("write")),s?(ji.nextTick(n,s),po(t,s,!0),s):(i.pendingcb++,pJ(t,i,e,r,n))}We.prototype.write=function(t,e,r){return MC(this,t,e,r)===!0};We.prototype.cork=function(){this._writableState.corked++};We.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||zy(this,t))};We.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=tJ(e)),!Wd.isEncoding(e))throw new LC(e);return this._writableState.defaultEncoding=e,this};function pJ(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==Uy&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function IC(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Tl("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function CC(t,e,r,n){--e.pendingcb,n(r),Wy(e),po(t,r)}function gJ(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){po(t,new PC);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?ji.nextTick(CC,t,r,e,i):CC(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&zy(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},ji.nextTick(mJ,r.afterWriteTickInfo)):DC(t,r,1,i))}function mJ({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,DC(t,e,r,n)}function DC(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&Wy(e),Hy(t,e)}function Wy(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Tl("write"))}let r=t[go].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new Tl("end"))}Hd(t)}function zy(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?Uy:c=>{for(let u=o;u<r.length;++u)r[u].callback(c)},l=e.allNoop&&o===0?r:kC(r,o);l.allBuffers=e.allBuffers,IC(t,e,!0,e.length,l,"",a),Hd(e)}else{do{let{chunk:a,encoding:l,callback:c}=r[o];r[o++]=null;let u=i?1:a.length;IC(t,e,!1,u,a,l,c)}while(o<r.length&&!e.writing);o===r.length?Hd(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}We.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new cJ("_write()")};We.prototype._writev=null;We.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=MC(this,t,e);s instanceof XY&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,Hy(this,n,!0),n.ended=!0):n.finished?i=new dJ("end"):n.destroyed&&(i=new Tl("end"))),typeof r=="function"&&(i||n.finished?ji.nextTick(r,i):n[go].push(r)),this};function zd(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function yJ(t,e){let r=!1;function n(i){if(r){po(t,i??PC());return}if(r=!0,e.pendingcb--,i){let s=e[go].splice(0);for(let o=0;o<s.length;o++)s[o](i);po(t,i,e.sync)}else zd(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,ji.nextTick(jy,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function bJ(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,yJ(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Hy(t,e,r){zd(e)&&(bJ(t,e),e.pendingcb===0&&(r?(e.pendingcb++,ji.nextTick((n,i)=>{zd(i)?jy(n,i):i.pendingcb--},t,e)):zd(e)&&(e.pendingcb++,jy(t,e))))}function jy(t,e){e.pendingcb--,e.finished=!0;let r=e[go].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}eJ(We.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var wJ=Vd.destroy;We.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[go].length)&&ji.nextTick(Wy,r),wJ.call(this,t,e),this};We.prototype._undestroy=Vd.undestroy;We.prototype._destroy=function(t,e){e(t)};We.prototype[iJ.captureRejectionSymbol]=function(t){this.destroy(t)};var By;function $C(){return By===void 0&&(By={}),By}We.fromWeb=function(t,e){return $C().newStreamWritableFromWritableStream(t,e)};We.toWeb=function(t){return $C().newWritableStreamFromStreamWritable(t)}});var ek=w((rAe,XC)=>{var Vy=Ae(),_J=require("buffer"),{isReadable:vJ,isWritable:SJ,isIterable:BC,isNodeStream:EJ,isReadableNodeStream:jC,isWritableNodeStream:UC,isDuplexNodeStream:xJ,isReadableStream:WC,isWritableStream:zC}=Br(),HC=wn(),{AbortError:ZC,codes:{ERR_INVALID_ARG_TYPE:TJ,ERR_INVALID_RETURN_VALUE:VC}}=Ot(),{destroyer:yo}=$i(),AJ=Wr(),QC=El(),RJ=Gd(),{createDeferredPromise:GC}=jt(),KC=Ny(),YC=globalThis.Blob||_J.Blob,IJ=typeof YC<"u"?function(e){return e instanceof YC}:function(e){return!1},CJ=globalThis.AbortController||et().AbortController,{FunctionPrototypeCall:JC}=$e(),Kn=class extends AJ{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};XC.exports=function t(e,r){if(xJ(e))return e;if(jC(e))return mo({readable:e});if(UC(e))return mo({writable:e});if(EJ(e))return mo({writable:!1,readable:!1});if(WC(e))return mo({readable:QC.fromWeb(e)});if(zC(e))return mo({writable:RJ.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=kJ(e);if(BC(i))return KC(Kn,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=JC(l,i,d=>{if(d!=null)throw new VC("nully","body",d)},d=>{yo(c,d)});return c=new Kn({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,Vy.nextTick(d,null)}catch(p){Vy.nextTick(d,p)}})},destroy:a})}throw new VC("Iterable, AsyncIterable or AsyncFunction",r,i)}if(IJ(e))return t(e.arrayBuffer());if(BC(e))return KC(Kn,e,{objectMode:!0,writable:!1});if(WC(e?.readable)&&zC(e?.writable))return Kn.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?jC(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?UC(e?.writable)?e?.writable:t(e.writable):void 0;return mo({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return JC(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{yo(i,s)}),i=new Kn({objectMode:!0,writable:!1,read(){}})}throw new TJ(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function kJ(t){let{promise:e,resolve:r}=GC(),n=new CJ,i=n.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(Vy.nextTick(c),l)return;if(i.aborted)throw new ZC(void 0,{cause:i.reason});({promise:e,resolve:r}=GC()),yield a}})(),{signal:i}),write(o,a,l){let c=r;r=null,c({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function mo(t){let e=t.readable&&typeof t.readable.read!="function"?QC.wrap(t.readable):t.readable,r=t.writable,n=!!vJ(e),i=!!SJ(r),s,o,a,l,c;function u(d){let p=l;l=null,p?p(d):d&&c.destroy(d)}return c=new Kn({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(HC(r,d=>{i=!1,d&&yo(e,d),u(d)}),c._write=function(d,p,f){r.write(d,p)?f():s=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(s){let d=s;s=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(HC(e,d=>{n=!1,d&&yo(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,p){!d&&l!==null&&(d=new ZC),a=null,s=null,o=null,l===null?p(d):(l=p,yo(r,d),yo(e,d))},c}});var Wr=w((nAe,nk)=>{"use strict";var{ObjectDefineProperties:NJ,ObjectGetOwnPropertyDescriptor:_n,ObjectKeys:OJ,ObjectSetPrototypeOf:tk}=$e();nk.exports=xr;var Yy=El(),ar=Gd();tk(xr.prototype,Yy.prototype);tk(xr,Yy);{let t=OJ(ar.prototype);for(let e=0;e<t.length;e++){let r=t[e];xr.prototype[r]||(xr.prototype[r]=ar.prototype[r])}}function xr(t){if(!(this instanceof xr))return new xr(t);Yy.call(this,t),ar.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}NJ(xr.prototype,{writable:{__proto__:null,..._n(ar.prototype,"writable")},writableHighWaterMark:{__proto__:null,..._n(ar.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,..._n(ar.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,..._n(ar.prototype,"writableBuffer")},writableLength:{__proto__:null,..._n(ar.prototype,"writableLength")},writableFinished:{__proto__:null,..._n(ar.prototype,"writableFinished")},writableCorked:{__proto__:null,..._n(ar.prototype,"writableCorked")},writableEnded:{__proto__:null,..._n(ar.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,..._n(ar.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var Gy;function rk(){return Gy===void 0&&(Gy={}),Gy}xr.fromWeb=function(t,e){return rk().newStreamDuplexFromReadableWritablePair(t,e)};xr.toWeb=function(t){return rk().newReadableWritablePairFromDuplex(t)};var Ky;xr.from=function(t){return Ky||(Ky=ek()),Ky(t,"body")}});var Qy=w((iAe,sk)=>{"use strict";var{ObjectSetPrototypeOf:ik,Symbol:qJ}=$e();sk.exports=vn;var{ERR_METHOD_NOT_IMPLEMENTED:PJ}=Ot().codes,Zy=Wr(),{getHighWaterMark:LJ}=wl();ik(vn.prototype,Zy.prototype);ik(vn,Zy);var Rl=qJ("kCallback");function vn(t){if(!(this instanceof vn))return new vn(t);let e=t?LJ(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Zy.call(this,t),this._readableState.sync=!1,this[Rl]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",MJ)}function Jy(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function MJ(){this._final!==Jy&&Jy.call(this)}vn.prototype._final=Jy;vn.prototype._transform=function(t,e,r){throw new PJ("_transform()")};vn.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[Rl]=r})};vn.prototype._read=function(){if(this[Rl]){let t=this[Rl];this[Rl]=null,t()}}});var eb=w((sAe,ak)=>{"use strict";var{ObjectSetPrototypeOf:ok}=$e();ak.exports=bo;var Xy=Qy();ok(bo.prototype,Xy.prototype);ok(bo,Xy);function bo(t){if(!(this instanceof bo))return new bo(t);Xy.call(this,t)}bo.prototype._transform=function(t,e,r){r(null,t)}});var Zd=w((oAe,fk)=>{var Il=Ae(),{ArrayIsArray:DJ,Promise:$J,SymbolAsyncIterator:FJ,SymbolDispose:BJ}=$e(),Jd=wn(),{once:jJ}=jt(),UJ=$i(),lk=Wr(),{aggregateTwoErrors:WJ,codes:{ERR_INVALID_ARG_TYPE:cb,ERR_INVALID_RETURN_VALUE:tb,ERR_MISSING_ARGS:zJ,ERR_STREAM_DESTROYED:HJ,ERR_STREAM_PREMATURE_CLOSE:VJ},AbortError:GJ}=Ot(),{validateFunction:KJ,validateAbortSignal:YJ}=lo(),{isIterable:Ui,isReadable:rb,isReadableNodeStream:Yd,isNodeStream:ck,isTransformStream:wo,isWebStream:JJ,isReadableStream:nb,isReadableFinished:ZJ}=Br(),QJ=globalThis.AbortController||et().AbortController,ib,sb,ob;function uk(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=Jd(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,UJ.destroyer(t,s||new HJ("pipe")))},cleanup:i}}function XJ(t){return KJ(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function ab(t){if(Ui(t))return t;if(Yd(t))return eZ(t);throw new cb("val",["Readable","Iterable","AsyncIterable"],t)}async function*eZ(t){sb||(sb=El()),yield*sb.prototype[FJ].call(t)}async function Kd(t,e,r,{end:n}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new $J((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=Jd(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&(e.end(),await a()),r()}catch(c){r(i!==c?WJ(i,c):c)}finally{l(),e.off("drain",o)}}async function lb(t,e,r,{end:n}){wo(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function tZ(...t){return dk(t,jJ(XJ(t)))}function dk(t,e,r){if(t.length===1&&DJ(t[0])&&(t=t[0]),t.length<2)throw new zJ("streams");let n=new QJ,i=n.signal,s=r?.signal,o=[];YJ(s,"options.signal");function a(){y(new GJ)}ob=ob||jt().addAbortListener;let l;s&&(l=ob(s,a));let c,u,d=[],p=0;function f(b){y(b,--p===0)}function y(b,v){var A;if(b&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=b),!(!c&&!v)){for(;d.length;)d.shift()(c);(A=l)===null||A===void 0||A[BJ](),n.abort(),v&&(c||o.forEach(k=>k()),Il.nextTick(e,c,u))}}let h;for(let b=0;b<t.length;b++){let v=t[b],A=b<t.length-1,k=b>0,R=A||r?.end!==!1,N=b===t.length-1;if(ck(v)){let I=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var E=I;if(R){let{destroy:P,cleanup:D}=uk(v,A,k);d.push(P),rb(v)&&N&&o.push(D)}v.on("error",I),rb(v)&&N&&o.push(()=>{v.removeListener("error",I)})}if(b===0)if(typeof v=="function"){if(h=v({signal:i}),!Ui(h))throw new tb("Iterable, AsyncIterable or Stream","source",h)}else Ui(v)||Yd(v)||wo(v)?h=v:h=lk.from(v);else if(typeof v=="function"){if(wo(h)){var m;h=ab((m=h)===null||m===void 0?void 0:m.readable)}else h=ab(h);if(h=v(h,{signal:i}),A){if(!Ui(h,!0))throw new tb("AsyncIterable",`transform[${b-1}]`,h)}else{var g;ib||(ib=eb());let I=new ib({objectMode:!0}),P=(g=h)===null||g===void 0?void 0:g.then;if(typeof P=="function")p++,P.call(h,B=>{u=B,B!=null&&I.write(B),R&&I.end(),Il.nextTick(f)},B=>{I.destroy(B),Il.nextTick(f,B)});else if(Ui(h,!0))p++,Kd(h,I,f,{end:R});else if(nb(h)||wo(h)){let B=h.readable||h;p++,Kd(B,I,f,{end:R})}else throw new tb("AsyncIterable or Promise","destination",h);h=I;let{destroy:D,cleanup:F}=uk(h,!1,!0);d.push(D),N&&o.push(F)}}else if(ck(v)){if(Yd(h)){p+=2;let I=rZ(h,v,f,{end:R});rb(v)&&N&&o.push(I)}else if(wo(h)||nb(h)){let I=h.readable||h;p++,Kd(I,v,f,{end:R})}else if(Ui(h))p++,Kd(h,v,f,{end:R});else throw new cb("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=v}else if(JJ(v)){if(Yd(h))p++,lb(ab(h),v,f,{end:R});else if(nb(h)||Ui(h))p++,lb(h,v,f,{end:R});else if(wo(h))p++,lb(h.readable,v,f,{end:R});else throw new cb("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=v}else h=lk.from(v)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Il.nextTick(a),h}function rZ(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new VJ)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;ZJ(t)?Il.nextTick(o):t.once("end",o)}else r();return Jd(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),Jd(e,{readable:!1,writable:!0},r)}fk.exports={pipelineImpl:dk,pipeline:tZ}});var db=w((aAe,bk)=>{"use strict";var{pipeline:nZ}=Zd(),Qd=Wr(),{destroyer:iZ}=$i(),{isNodeStream:Xd,isReadable:hk,isWritable:pk,isWebStream:ub,isTransformStream:Wi,isWritableStream:gk,isReadableStream:mk}=Br(),{AbortError:sZ,codes:{ERR_INVALID_ARG_VALUE:yk,ERR_MISSING_ARGS:oZ}}=Ot(),aZ=wn();bk.exports=function(...e){if(e.length===0)throw new oZ("streams");if(e.length===1)return Qd.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=Qd.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=Qd.from(e[f])}for(let f=0;f<e.length;++f)if(!(!Xd(e[f])&&!ub(e[f]))){if(f<e.length-1&&!(hk(e[f])||mk(e[f])||Wi(e[f])))throw new yk(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(pk(e[f])||gk(e[f])||Wi(e[f])))throw new yk(`streams[${f}]`,r[f],"must be writable")}let n,i,s,o,a;function l(f){let y=o;o=null,y?y(f):f?a.destroy(f):!p&&!d&&a.destroy()}let c=e[0],u=nZ(e,l),d=!!(pk(c)||gk(c)||Wi(c)),p=!!(hk(u)||mk(u)||Wi(u));if(a=new Qd({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:p}),d){if(Xd(c))a._write=function(y,h,m){c.write(y,h)?m():n=m},a._final=function(y){c.end(),i=y},c.on("drain",function(){if(n){let y=n;n=null,y()}});else if(ub(c)){let h=(Wi(c)?c.writable:c).getWriter();a._write=async function(m,g,E){try{await h.ready,h.write(m).catch(()=>{}),E()}catch(b){E(b)}},a._final=async function(m){try{await h.ready,h.close().catch(()=>{}),i=m}catch(g){m(g)}}}let f=Wi(u)?u.readable:u;aZ(f,()=>{if(i){let y=i;i=null,y()}})}if(p){if(Xd(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(ub(u)){let y=(Wi(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:m}=await y.read();if(!a.push(h))return;if(m){a.push(null);return}}catch{return}}}}return a._destroy=function(f,y){!f&&o!==null&&(f=new sZ),s=null,n=null,i=null,o===null?y(f):(o=y,Xd(u)&&iZ(u,f))},a}});var Ik=w((lAe,pb)=>{"use strict";var lZ=globalThis.AbortController||et().AbortController,{codes:{ERR_INVALID_ARG_VALUE:cZ,ERR_INVALID_ARG_TYPE:Cl,ERR_MISSING_ARGS:uZ,ERR_OUT_OF_RANGE:dZ},AbortError:zr}=Ot(),{validateAbortSignal:zi,validateInteger:wk,validateObject:Hi}=lo(),fZ=$e().Symbol("kWeak"),hZ=$e().Symbol("kResistStopPropagation"),{finished:pZ}=wn(),gZ=db(),{addAbortSignalNoValidate:mZ}=bl(),{isWritable:yZ,isNodeStream:bZ}=Br(),{deprecate:wZ}=jt(),{ArrayPrototypePush:_Z,Boolean:vZ,MathFloor:_k,Number:SZ,NumberIsNaN:EZ,Promise:vk,PromiseReject:Sk,PromiseResolve:xZ,PromisePrototypeThen:Ek,Symbol:Tk}=$e(),ef=Tk("kEmpty"),xk=Tk("kEof");function TZ(t,e){if(e!=null&&Hi(e,"options"),e?.signal!=null&&zi(e.signal,"options.signal"),bZ(t)&&!yZ(t))throw new cZ("stream",t,"must be writable");let r=gZ(this,t);return e!=null&&e.signal&&mZ(e.signal,r),r}function tf(t,e){if(typeof t!="function")throw new Cl("fn",["Function","AsyncFunction"],t);e!=null&&Hi(e,"options"),e?.signal!=null&&zi(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=_k(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=_k(e.highWaterMark)),wk(r,"options.concurrency",1),wk(n,"options.highWaterMark",0),n+=r,async function*(){let s=jt().AbortSignalAny([e?.signal].filter(vZ)),o=this,a=[],l={signal:s},c,u,d=!1,p=0;function f(){d=!0,y()}function y(){p-=1,h()}function h(){u&&!d&&p<r&&a.length<n&&(u(),u=null)}async function m(){try{for await(let g of o){if(d)return;if(s.aborted)throw new zr;try{if(g=t(g,l),g===ef)continue;g=xZ(g)}catch(E){g=Sk(E)}p+=1,Ek(g,y,f),a.push(g),c&&(c(),c=null),!d&&(a.length>=n||p>=r)&&await new vk(E=>{u=E})}a.push(xk)}catch(g){let E=Sk(g);Ek(E,y,f),a.push(E)}finally{d=!0,c&&(c(),c=null)}}m();try{for(;;){for(;a.length>0;){let g=await a[0];if(g===xk)return;if(s.aborted)throw new zr;g!==ef&&(yield g),a.shift(),h()}await new vk(g=>{c=g})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function AZ(t=void 0){return t!=null&&Hi(t,"options"),t?.signal!=null&&zi(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new zr({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function Ak(t,e=void 0){for await(let r of hb.call(this,t,e))return!0;return!1}async function RZ(t,e=void 0){if(typeof t!="function")throw new Cl("fn",["Function","AsyncFunction"],t);return!await Ak.call(this,async(...r)=>!await t(...r),e)}async function IZ(t,e){for await(let r of hb.call(this,t,e))return r}async function CZ(t,e){if(typeof t!="function")throw new Cl("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),ef}for await(let n of tf.call(this,r,e));}function hb(t,e){if(typeof t!="function")throw new Cl("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:ef}return tf.call(this,r,e)}var fb=class extends uZ{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function kZ(t,e,r){var n;if(typeof t!="function")throw new Cl("reducer",["Function","AsyncFunction"],t);r!=null&&Hi(r,"options"),r?.signal!=null&&zi(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new zr(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await pZ(this.destroy(c)),c}let s=new lZ,o=s.signal;if(r!=null&&r.signal){let c={once:!0,[fZ]:this,[hZ]:!0};r.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new zr;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new fb}finally{s.abort()}return e}async function NZ(t){t!=null&&Hi(t,"options"),t?.signal!=null&&zi(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new zr(void 0,{cause:t.signal.reason});_Z(e,n)}return e}function OZ(t,e){let r=tf.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function Rk(t){if(t=SZ(t),EZ(t))return 0;if(t<0)throw new dZ("number",">= 0",t);return t}function qZ(t,e=void 0){return e!=null&&Hi(e,"options"),e?.signal!=null&&zi(e.signal,"options.signal"),t=Rk(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new zr;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new zr;t--<=0&&(yield s)}}.call(this)}function PZ(t,e=void 0){return e!=null&&Hi(e,"options"),e?.signal!=null&&zi(e.signal,"options.signal"),t=Rk(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new zr;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new zr;if(t-- >0&&(yield s),t<=0)return}}.call(this)}pb.exports.streamReturningOperators={asIndexedPairs:wZ(AZ,"readable.asIndexedPairs will be removed in a future version."),drop:qZ,filter:hb,flatMap:OZ,map:tf,take:PZ,compose:TZ};pb.exports.promiseReturningOperators={every:RZ,forEach:CZ,reduce:kZ,toArray:NZ,some:Ak,find:IZ}});var gb=w((cAe,Ck)=>{"use strict";var{ArrayPrototypePop:LZ,Promise:MZ}=$e(),{isIterable:DZ,isNodeStream:$Z,isWebStream:FZ}=Br(),{pipelineImpl:BZ}=Zd(),{finished:jZ}=wn();mb();function UZ(...t){return new MZ((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!$Z(s)&&!DZ(s)&&!FZ(s)){let o=LZ(t);n=o.signal,i=o.end}BZ(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}Ck.exports={finished:jZ,pipeline:UZ}});var mb=w((uAe,$k)=>{"use strict";var{Buffer:WZ}=require("buffer"),{ObjectDefineProperty:Sn,ObjectKeys:Ok,ReflectApply:qk}=$e(),{promisify:{custom:Pk}}=jt(),{streamReturningOperators:kk,promiseReturningOperators:Nk}=Ik(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:Lk}}=Ot(),zZ=db(),{setDefaultHighWaterMark:HZ,getDefaultHighWaterMark:VZ}=wl(),{pipeline:Mk}=Zd(),{destroyer:GZ}=$i(),Dk=wn(),yb=gb(),kl=Br(),qe=$k.exports=Pd().Stream;qe.isDestroyed=kl.isDestroyed;qe.isDisturbed=kl.isDisturbed;qe.isErrored=kl.isErrored;qe.isReadable=kl.isReadable;qe.isWritable=kl.isWritable;qe.Readable=El();for(let t of Ok(kk)){let r=function(...n){if(new.target)throw Lk();return qe.Readable.from(qk(e,this,n))},e=kk[t];Sn(r,"name",{__proto__:null,value:e.name}),Sn(r,"length",{__proto__:null,value:e.length}),Sn(qe.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let t of Ok(Nk)){let r=function(...n){if(new.target)throw Lk();return qk(e,this,n)},e=Nk[t];Sn(r,"name",{__proto__:null,value:e.name}),Sn(r,"length",{__proto__:null,value:e.length}),Sn(qe.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}qe.Writable=Gd();qe.Duplex=Wr();qe.Transform=Qy();qe.PassThrough=eb();qe.pipeline=Mk;var{addAbortSignal:KZ}=bl();qe.addAbortSignal=KZ;qe.finished=Dk;qe.destroy=GZ;qe.compose=zZ;qe.setDefaultHighWaterMark=HZ;qe.getDefaultHighWaterMark=VZ;Sn(qe,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return yb}});Sn(Mk,Pk,{__proto__:null,enumerable:!0,get(){return yb.pipeline}});Sn(Dk,Pk,{__proto__:null,enumerable:!0,get(){return yb.finished}});qe.Stream=qe;qe._isUint8Array=function(e){return e instanceof Uint8Array};qe._uint8ArrayToBuffer=function(e){return WZ.from(e.buffer,e.byteOffset,e.byteLength)}});var Fk=w((dAe,re)=>{"use strict";var at=require("stream");if(at&&process.env.READABLE_STREAM==="disable"){let t=at.promises;re.exports._uint8ArrayToBuffer=at._uint8ArrayToBuffer,re.exports._isUint8Array=at._isUint8Array,re.exports.isDisturbed=at.isDisturbed,re.exports.isErrored=at.isErrored,re.exports.isReadable=at.isReadable,re.exports.Readable=at.Readable,re.exports.Writable=at.Writable,re.exports.Duplex=at.Duplex,re.exports.Transform=at.Transform,re.exports.PassThrough=at.PassThrough,re.exports.addAbortSignal=at.addAbortSignal,re.exports.finished=at.finished,re.exports.destroy=at.destroy,re.exports.pipeline=at.pipeline,re.exports.compose=at.compose,Object.defineProperty(at,"promises",{configurable:!0,enumerable:!0,get(){return t}}),re.exports.Stream=at.Stream}else{let t=mb(),e=gb(),r=t.Readable.destroy;re.exports=t.Readable,re.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,re.exports._isUint8Array=t._isUint8Array,re.exports.isDisturbed=t.isDisturbed,re.exports.isErrored=t.isErrored,re.exports.isReadable=t.isReadable,re.exports.Readable=t.Readable,re.exports.Writable=t.Writable,re.exports.Duplex=t.Duplex,re.exports.Transform=t.Transform,re.exports.PassThrough=t.PassThrough,re.exports.addAbortSignal=t.addAbortSignal,re.exports.finished=t.finished,re.exports.destroy=t.destroy,re.exports.destroy=r,re.exports.pipeline=t.pipeline,re.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),re.exports.Stream=t.Stream}re.exports.default=re.exports});var jk=w((fAe,Bk)=>{function YZ(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}Bk.exports=YZ});var Hk=w((hAe,zk)=>{var Uk=wd(),JZ=Xm(),ZZ=ey(),Wk=Uk?Uk.isConcatSpreadable:void 0;function QZ(t){return ZZ(t)||JZ(t)||!!(Wk&&t&&t[Wk])}zk.exports=QZ});var rf=w((pAe,Gk)=>{var XZ=jk(),eQ=Hk();function Vk(t,e,r,n,i){var s=-1,o=t.length;for(r||(r=eQ),i||(i=[]);++s<o;){var a=t[s];e>0&&r(a)?e>1?Vk(a,e-1,r,n,i):XZ(i,a):n||(i[i.length]=a)}return i}Gk.exports=Vk});var Yk=w((gAe,Kk)=>{var tQ=rf();function rQ(t){var e=t==null?0:t.length;return e?tQ(t,1):[]}Kk.exports=rQ});var Nl=w((mAe,Jk)=>{var nQ=cl(),iQ=nQ(Object,"create");Jk.exports=iQ});var Xk=w((yAe,Qk)=>{var Zk=Nl();function sQ(){this.__data__=Zk?Zk(null):{},this.size=0}Qk.exports=sQ});var tN=w((bAe,eN)=>{function oQ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}eN.exports=oQ});var nN=w((wAe,rN)=>{var aQ=Nl(),lQ="__lodash_hash_undefined__",cQ=Object.prototype,uQ=cQ.hasOwnProperty;function dQ(t){var e=this.__data__;if(aQ){var r=e[t];return r===lQ?void 0:r}return uQ.call(e,t)?e[t]:void 0}rN.exports=dQ});var sN=w((_Ae,iN)=>{var fQ=Nl(),hQ=Object.prototype,pQ=hQ.hasOwnProperty;function gQ(t){var e=this.__data__;return fQ?e[t]!==void 0:pQ.call(e,t)}iN.exports=gQ});var aN=w((vAe,oN)=>{var mQ=Nl(),yQ="__lodash_hash_undefined__";function bQ(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=mQ&&e===void 0?yQ:e,this}oN.exports=bQ});var cN=w((SAe,lN)=>{var wQ=Xk(),_Q=tN(),vQ=nN(),SQ=sN(),EQ=aN();function _o(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}_o.prototype.clear=wQ;_o.prototype.delete=_Q;_o.prototype.get=vQ;_o.prototype.has=SQ;_o.prototype.set=EQ;lN.exports=_o});var dN=w((EAe,uN)=>{function xQ(){this.__data__=[],this.size=0}uN.exports=xQ});var Ol=w((xAe,fN)=>{var TQ=vd();function AQ(t,e){for(var r=t.length;r--;)if(TQ(t[r][0],e))return r;return-1}fN.exports=AQ});var pN=w((TAe,hN)=>{var RQ=Ol(),IQ=Array.prototype,CQ=IQ.splice;function kQ(t){var e=this.__data__,r=RQ(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():CQ.call(e,r,1),--this.size,!0}hN.exports=kQ});var mN=w((AAe,gN)=>{var NQ=Ol();function OQ(t){var e=this.__data__,r=NQ(e,t);return r<0?void 0:e[r][1]}gN.exports=OQ});var bN=w((RAe,yN)=>{var qQ=Ol();function PQ(t){return qQ(this.__data__,t)>-1}yN.exports=PQ});var _N=w((IAe,wN)=>{var LQ=Ol();function MQ(t,e){var r=this.__data__,n=LQ(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}wN.exports=MQ});var SN=w((CAe,vN)=>{var DQ=dN(),$Q=pN(),FQ=mN(),BQ=bN(),jQ=_N();function vo(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}vo.prototype.clear=DQ;vo.prototype.delete=$Q;vo.prototype.get=FQ;vo.prototype.has=BQ;vo.prototype.set=jQ;vN.exports=vo});var xN=w((kAe,EN)=>{var UQ=cl(),WQ=ro(),zQ=UQ(WQ,"Map");EN.exports=zQ});var RN=w((NAe,AN)=>{var TN=cN(),HQ=SN(),VQ=xN();function GQ(){this.size=0,this.__data__={hash:new TN,map:new(VQ||HQ),string:new TN}}AN.exports=GQ});var CN=w((OAe,IN)=>{function KQ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}IN.exports=KQ});var ql=w((qAe,kN)=>{var YQ=CN();function JQ(t,e){var r=t.__data__;return YQ(e)?r[typeof e=="string"?"string":"hash"]:r.map}kN.exports=JQ});var ON=w((PAe,NN)=>{var ZQ=ql();function QQ(t){var e=ZQ(this,t).delete(t);return this.size-=e?1:0,e}NN.exports=QQ});var PN=w((LAe,qN)=>{var XQ=ql();function eX(t){return XQ(this,t).get(t)}qN.exports=eX});var MN=w((MAe,LN)=>{var tX=ql();function rX(t){return tX(this,t).has(t)}LN.exports=rX});var $N=w((DAe,DN)=>{var nX=ql();function iX(t,e){var r=nX(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}DN.exports=iX});var BN=w(($Ae,FN)=>{var sX=RN(),oX=ON(),aX=PN(),lX=MN(),cX=$N();function So(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}So.prototype.clear=sX;So.prototype.delete=oX;So.prototype.get=aX;So.prototype.has=lX;So.prototype.set=cX;FN.exports=So});var UN=w((FAe,jN)=>{var uX="__lodash_hash_undefined__";function dX(t){return this.__data__.set(t,uX),this}jN.exports=dX});var zN=w((BAe,WN)=>{function fX(t){return this.__data__.has(t)}WN.exports=fX});var bb=w((jAe,HN)=>{var hX=BN(),pX=UN(),gX=zN();function nf(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new hX;++e<r;)this.add(t[e])}nf.prototype.add=nf.prototype.push=pX;nf.prototype.has=gX;HN.exports=nf});var GN=w((UAe,VN)=>{function mX(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}VN.exports=mX});var YN=w((WAe,KN)=>{function yX(t){return t!==t}KN.exports=yX});var ZN=w((zAe,JN)=>{function bX(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}JN.exports=bX});var XN=w((HAe,QN)=>{var wX=GN(),_X=YN(),vX=ZN();function SX(t,e,r){return e===e?vX(t,e,r):wX(t,_X,r)}QN.exports=SX});var wb=w((VAe,eO)=>{var EX=XN();function xX(t,e){var r=t==null?0:t.length;return!!r&&EX(t,e,0)>-1}eO.exports=xX});var _b=w((GAe,tO)=>{function TX(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}tO.exports=TX});var nO=w((KAe,rO)=>{function AX(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}rO.exports=AX});var vb=w((YAe,iO)=>{function RX(t,e){return t.has(e)}iO.exports=RX});var oO=w((JAe,sO)=>{var IX=bb(),CX=wb(),kX=_b(),NX=nO(),OX=ty(),qX=vb(),PX=200;function LX(t,e,r,n){var i=-1,s=CX,o=!0,a=t.length,l=[],c=e.length;if(!a)return l;r&&(e=NX(e,OX(r))),n?(s=kX,o=!1):e.length>=PX&&(s=qX,o=!1,e=new IX(e));e:for(;++i<a;){var u=t[i],d=r==null?u:r(u);if(u=n||u!==0?u:0,o&&d===d){for(var p=c;p--;)if(e[p]===d)continue e;l.push(u)}else s(e,d,n)||l.push(u)}return l}sO.exports=LX});var Sb=w((ZAe,aO)=>{var MX=Sd(),DX=no();function $X(t){return DX(t)&&MX(t)}aO.exports=$X});var uO=w((QAe,cO)=>{var FX=oO(),BX=rf(),jX=_d(),lO=Sb(),UX=jX(function(t,e){return lO(t)?FX(t,BX(e,1,lO,!0)):[]});cO.exports=UX});var fO=w((XAe,dO)=>{var WX=cl(),zX=ro(),HX=WX(zX,"Set");dO.exports=HX});var pO=w((eRe,hO)=>{function VX(){}hO.exports=VX});var Eb=w((tRe,gO)=>{function GX(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}gO.exports=GX});var yO=w((rRe,mO)=>{var xb=fO(),KX=pO(),YX=Eb(),JX=1/0,ZX=xb&&1/YX(new xb([,-0]))[1]==JX?function(t){return new xb(t)}:KX;mO.exports=ZX});var wO=w((nRe,bO)=>{var QX=bb(),XX=wb(),eee=_b(),tee=vb(),ree=yO(),nee=Eb(),iee=200;function see(t,e,r){var n=-1,i=XX,s=t.length,o=!0,a=[],l=a;if(r)o=!1,i=eee;else if(s>=iee){var c=e?null:ree(t);if(c)return nee(c);o=!1,i=tee,l=new QX}else l=e?[]:a;e:for(;++n<s;){var u=t[n],d=e?e(u):u;if(u=r||u!==0?u:0,o&&d===d){for(var p=l.length;p--;)if(l[p]===d)continue e;e&&l.push(d),a.push(u)}else i(l,d,r)||(l!==a&&l.push(d),a.push(u))}return a}bO.exports=see});var vO=w((iRe,_O)=>{var oee=rf(),aee=_d(),lee=wO(),cee=Sb(),uee=aee(function(t){return lee(oee(t,1,cee,!0))});_O.exports=uee});var EO=w((sRe,SO)=>{function dee(t,e){return function(r){return t(e(r))}}SO.exports=dee});var TO=w((oRe,xO)=>{var fee=EO(),hee=fee(Object.getPrototypeOf,Object);xO.exports=hee});var IO=w((aRe,RO)=>{var pee=al(),gee=TO(),mee=no(),yee="[object Object]",bee=Function.prototype,wee=Object.prototype,AO=bee.toString,_ee=wee.hasOwnProperty,vee=AO.call(Object);function See(t){if(!mee(t)||pee(t)!=yee)return!1;var e=gee(t);if(e===null)return!0;var r=_ee.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&AO.call(r)==vee}RO.exports=See});var CO=w(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});sf.assertValidPattern=void 0;var Eee=1024*64,xee=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>Eee)throw new TypeError("pattern is too long")};sf.assertValidPattern=xee});var NO=w(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.parseClass=void 0;var Tee={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Pl=t=>t.replace(/[[\]\\-]/g,"\\$&"),Aee=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),kO=t=>t.join(""),Ree=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],s=r+1,o=!1,a=!1,l=!1,c=!1,u=r,d="";e:for(;s<t.length;){let h=t.charAt(s);if((h==="!"||h==="^")&&s===r+1){c=!0,s++;continue}if(h==="]"&&o&&!l){u=s+1;break}if(o=!0,h==="\\"&&!l){l=!0,s++;continue}if(h==="["&&!l){for(let[m,[g,E,b]]of Object.entries(Tee))if(t.startsWith(m,s)){if(d)return["$.",!1,t.length-r,!0];s+=m.length,b?i.push(g):n.push(g),a=a||E;continue e}}if(l=!1,d){h>d?n.push(Pl(d)+"-"+Pl(h)):h===d&&n.push(Pl(h)),d="",s++;continue}if(t.startsWith("-]",s+1)){n.push(Pl(h+"-")),s+=2;continue}if(t.startsWith("-",s+1)){d=h,s+=2;continue}n.push(Pl(h)),s++}if(u<s)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!c){let h=n[0].length===2?n[0].slice(-1):n[0];return[Aee(h),!1,u-r,!1]}let p="["+(c?"^":"")+kO(n)+"]",f="["+(c?"":"^")+kO(i)+"]";return[n.length&&i.length?"("+p+"|"+f+")":n.length?p:f,a,u-r,!0]};of.parseClass=Ree});var lf=w(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.unescape=void 0;var Iee=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");af.unescape=Iee});var Rb=w(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});df.AST=void 0;var Cee=NO(),cf=lf(),kee=new Set(["!","?","+","*","@"]),OO=t=>kee.has(t),Nee="(?!(?:^|/)\\.\\.?(?:$|/))",uf="(?!\\.)",Oee=new Set(["[","."]),qee=new Set(["..","."]),Pee=new Set("().*{}+?[]^$\\!"),Lee=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Ab="[^/]",qO=Ab+"*?",PO=Ab+"+?",Tb=class t{type;#e;#t;#s=!1;#n=[];#o;#_;#c;#d=!1;#a;#l;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#o=r,this.#e=this.#o?this.#o.#e:this,this.#a=this.#e===this?n:this.#e.#a,this.#c=this.#e===this?[]:this.#e.#c,e==="!"&&!this.#e.#d&&this.#c.push(this),this.#_=this.#o?this.#o.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#l=this.#n.map(e=>String(e)).join("")}#m(){if(this!==this.#e)throw new Error("should only call on root");if(this.#d)return this;this.toString(),this.#d=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let r=e,n=r.#o;for(;n;){for(let i=r.#_+1;!n.type&&i<n.#n.length;i++)for(let s of e.#n){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(n.#n[i])}r=n,n=r.#o}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#o===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#d&&this.#o?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#o?.isStart())return!1;if(this.#_===0)return!0;let e=this.#o;for(let r=0;r<this.#_;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#o?.type==="!")return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();let e=this.#o?this.#o.#n.length:0;return this.#_===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let s=!1,o=!1,a=-1,l=!1;if(r.type===null){let f=n,y="";for(;f<e.length;){let h=e.charAt(f++);if(s||h==="\\"){s=!s,y+=h;continue}if(o){f===a+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(f===a+2&&l)&&(o=!1),y+=h;continue}else if(h==="["){o=!0,a=f,l=!1,y+=h;continue}if(!i.noext&&OO(h)&&e.charAt(f)==="("){r.push(y),y="";let m=new t(h,r);f=t.#y(e,m,f,i),r.push(m);continue}y+=h}return r.push(y),f}let c=n+1,u=new t(null,r),d=[],p="";for(;c<e.length;){let f=e.charAt(c++);if(s||f==="\\"){s=!s,p+=f;continue}if(o){c===a+1?(f==="^"||f==="!")&&(l=!0):f==="]"&&!(c===a+2&&l)&&(o=!1),p+=f;continue}else if(f==="["){o=!0,a=c,l=!1,p+=f;continue}if(OO(f)&&e.charAt(c)==="("){u.push(p),p="";let y=new t(f,u);u.push(y),c=t.#y(e,y,c,i);continue}if(f==="|"){u.push(p),p="",d.push(u),u=new t(null,r);continue}if(f===")")return p===""&&r.#n.length===0&&(r.#i=!0),u.push(p),p="",r.push(...d,u),c;p+=f}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],c}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,s]=this.toRegExpSource();if(!(i||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let a=(this.#a.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${r}$`,a),{_src:r,_glob:e})}get options(){return this.#a}toRegExpSource(e){let r=e??!!this.#a.dot;if(this.#e===this&&this.#m(),!this.type){let l=this.isStart()&&this.isEnd(),c=this.#n.map(f=>{let[y,h,m,g]=typeof f=="string"?t.#f(f,this.#t,l):f.toRegExpSource(e);return this.#t=this.#t||m,this.#s=this.#s||g,y}).join(""),u="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&qee.has(this.#n[0]))){let y=Oee,h=r&&y.has(c.charAt(0))||c.startsWith("\\.")&&y.has(c.charAt(2))||c.startsWith("\\.\\.")&&y.has(c.charAt(4)),m=!r&&!e&&y.has(c.charAt(0));u=h?Nee:m?uf:""}let d="";return this.isEnd()&&this.#e.#d&&this.#o?.type==="!"&&(d="(?:$|\\/)"),[u+c+d,(0,cf.unescape)(c),this.#t=!!this.#t,this.#s]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#h(r);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let l=this.toString();return this.#n=[l],this.type=null,this.#t=void 0,[l,(0,cf.unescape)(this.toString()),!1,!1]}let o=!n||e||r||!uf?"":this.#h(!0);o===s&&(o=""),o&&(s=`(?:${s})(?:${o})*?`);let a="";if(this.type==="!"&&this.#i)a=(this.isStart()&&!r?uf:"")+PO;else{let l=this.type==="!"?"))"+(this.isStart()&&!r&&!e?uf:"")+qO+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=i+s+l}return[a,(0,cf.unescape)(s),this.#t=!!this.#t,this.#s]}#h(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,s,o]=r.toRegExpSource(e);return this.#s=this.#s||o,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,s="",o=!1;for(let a=0;a<e.length;a++){let l=e.charAt(a);if(i){i=!1,s+=(Pee.has(l)?"\\":"")+l;continue}if(l==="\\"){a===e.length-1?s+="\\\\":i=!0;continue}if(l==="["){let[c,u,d,p]=(0,Cee.parseClass)(e,a);if(d){s+=c,o=o||u,a+=d-1,r=r||p;continue}}if(l==="*"){n&&e==="*"?s+=PO:s+=qO,r=!0;continue}if(l==="?"){s+=Ab,r=!0;continue}s+=Lee(l)}return[s,(0,cf.unescape)(e),!!r,o]}};df.AST=Tb});var Ib=w(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});ff.escape=void 0;var Mee=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");ff.escape=Mee});var Yn=w(U=>{"use strict";var Dee=U&&U.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(U,"__esModule",{value:!0});U.unescape=U.escape=U.AST=U.Minimatch=U.match=U.makeRe=U.braceExpand=U.defaults=U.filter=U.GLOBSTAR=U.sep=U.minimatch=void 0;var $ee=Dee(um()),hf=CO(),DO=Rb(),Fee=Ib(),Bee=lf(),jee=(t,e,r={})=>((0,hf.assertValidPattern)(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Vi(e,r).match(t));U.minimatch=jee;var Uee=/^\*+([^+@!?\*\[\(]*)$/,Wee=t=>e=>!e.startsWith(".")&&e.endsWith(t),zee=t=>e=>e.endsWith(t),Hee=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),Vee=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),Gee=/^\*+\.\*+$/,Kee=t=>!t.startsWith(".")&&t.includes("."),Yee=t=>t!=="."&&t!==".."&&t.includes("."),Jee=/^\.\*+$/,Zee=t=>t!=="."&&t!==".."&&t.startsWith("."),Qee=/^\*+$/,Xee=t=>t.length!==0&&!t.startsWith("."),ete=t=>t.length!==0&&t!=="."&&t!=="..",tte=/^\?+([^+@!?\*\[\(]*)?$/,rte=([t,e=""])=>{let r=$O([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},nte=([t,e=""])=>{let r=FO([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},ite=([t,e=""])=>{let r=FO([t]);return e?n=>r(n)&&n.endsWith(e):r},ste=([t,e=""])=>{let r=$O([t]);return e?n=>r(n)&&n.endsWith(e):r},$O=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},FO=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},BO=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",LO={win32:{sep:"\\"},posix:{sep:"/"}};U.sep=BO==="win32"?LO.win32.sep:LO.posix.sep;U.minimatch.sep=U.sep;U.GLOBSTAR=Symbol("globstar **");U.minimatch.GLOBSTAR=U.GLOBSTAR;var ote="[^/]",ate=ote+"*?",lte="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",cte="(?:(?!(?:\\/|^)\\.).)*?",ute=(t,e={})=>r=>(0,U.minimatch)(r,t,e);U.filter=ute;U.minimatch.filter=U.filter;var lr=(t,e={})=>Object.assign({},t,e),dte=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return U.minimatch;let e=U.minimatch;return Object.assign((n,i,s={})=>e(n,i,lr(t,s)),{Minimatch:class extends e.Minimatch{constructor(i,s={}){super(i,lr(t,s))}static defaults(i){return e.defaults(lr(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,s,o={}){super(i,s,lr(t,o))}static fromGlob(i,s={}){return e.AST.fromGlob(i,lr(t,s))}},unescape:(n,i={})=>e.unescape(n,lr(t,i)),escape:(n,i={})=>e.escape(n,lr(t,i)),filter:(n,i={})=>e.filter(n,lr(t,i)),defaults:n=>e.defaults(lr(t,n)),makeRe:(n,i={})=>e.makeRe(n,lr(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,lr(t,i)),match:(n,i,s={})=>e.match(n,i,lr(t,s)),sep:e.sep,GLOBSTAR:U.GLOBSTAR})};U.defaults=dte;U.minimatch.defaults=U.defaults;var fte=(t,e={})=>((0,hf.assertValidPattern)(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,$ee.default)(t));U.braceExpand=fte;U.minimatch.braceExpand=U.braceExpand;var hte=(t,e={})=>new Vi(t,e).makeRe();U.makeRe=hte;U.minimatch.makeRe=U.makeRe;var pte=(t,e,r={})=>{let n=new Vi(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};U.match=pte;U.minimatch.match=U.match;var MO=/[?*]|[+@!]\(.*?\)|\[|\]/,gte=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Vi=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){(0,hf.assertValidPattern)(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||BO,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((s,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=s[0]===""&&s[1]===""&&(s[2]==="?"||!MO.test(s[2]))&&!MO.test(s[3]),c=/^[a-z]:/i.test(s[0]);if(l)return[...s.slice(0,4),...s.slice(4).map(u=>this.parse(u))];if(c)return[s[0],...s.slice(1).map(u=>this.parse(u))]}return s.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let o=this.set[s];o[0]===""&&o[1]===""&&this.globParts[s][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let s=n[n.length-1];return i==="**"&&s==="**"?n:i===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let s=e[i];i===1&&s===""&&e[0]===""||(s==="."||s==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let o=i;for(;n[o+1]==="**";)o++;o>i&&n.splice(i+1,o-i);let a=n[i+1],l=n[i+2],c=n[i+3];if(a!==".."||!l||l==="."||l===".."||!c||c==="."||c==="..")continue;r=!0,n.splice(i,1);let u=n.slice(0);u[i]="**",e.push(u),i--}if(!this.preserveMultipleSlashes){for(let o=1;o<n.length-1;o++){let a=n[o];o===1&&a===""&&n[0]===""||(a==="."||a==="")&&(r=!0,n.splice(o,1),o--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let s=0;for(;(s=n.indexOf("..",s+1))!==-1;){let o=n[s-1];if(o&&o!=="."&&o!==".."&&o!=="**"){r=!0;let l=s===1&&n[s+1]==="**"?["."]:[];n.splice(s-1,2,...l),n.length===0&&n.push(""),s-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,s=0,o=[],a="";for(;i<e.length&&s<r.length;)if(e[i]===r[s])o.push(a==="b"?r[s]:e[i]),i++,s++;else if(n&&e[i]==="**"&&r[s]===e[i+1])o.push(e[i]),i++;else if(n&&r[s]==="**"&&e[i]===r[s+1])o.push(r[s]),s++;else if(e[i]==="*"&&r[s]&&(this.options.dot||!r[s].startsWith("."))&&r[s]!=="**"){if(a==="b")return!1;a="a",o.push(e[i]),i++,s++}else if(r[s]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",o.push(r[s]),i++,s++}else return!1;return e.length===r.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let h=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),m=!h&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),g=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),E=!g&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),b=m?3:h?0:void 0,v=E?3:g?0:void 0;if(typeof b=="number"&&typeof v=="number"){let[A,k]=[e[b],r[v]];A.toLowerCase()===k.toLowerCase()&&(r[v]=A,v>b?r=r.slice(v):b>v&&(e=e.slice(b)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var o=0,a=0,l=e.length,c=r.length;o<l&&a<c;o++,a++){this.debug("matchOne loop");var u=r[a],d=e[o];if(this.debug(r,u,d),u===!1)return!1;if(u===U.GLOBSTAR){this.debug("GLOBSTAR",[r,u,d]);var p=o,f=a+1;if(f===c){for(this.debug("** at the end");o<l;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;p<l;){var y=e[p];if(this.debug(`
globstar while`,e,p,r,f,y),this.matchOne(e.slice(p),r.slice(f),n))return this.debug("globstar found match!",p,l,y),!0;if(y==="."||y===".."||!i.dot&&y.charAt(0)==="."){this.debug("dot detected!",e,p,r,f);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,p,r,f),p===l))}let h;if(typeof u=="string"?(h=d===u,this.debug("string match",u,d,h)):(h=u.test(d),this.debug("pattern match",u,d,h)),!h)return!1}if(o===l&&a===c)return!0;if(o===l)return n;if(a===c)return o===l-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return(0,U.braceExpand)(this.pattern,this.options)}parse(e){(0,hf.assertValidPattern)(e);let r=this.options;if(e==="**")return U.GLOBSTAR;if(e==="")return"";let n,i=null;(n=e.match(Qee))?i=r.dot?ete:Xee:(n=e.match(Uee))?i=(r.nocase?r.dot?Vee:Hee:r.dot?zee:Wee)(n[1]):(n=e.match(tte))?i=(r.nocase?r.dot?nte:rte:r.dot?ite:ste)(n):(n=e.match(Gee))?i=r.dot?Yee:Kee:(n=e.match(Jee))&&(i=Zee);let s=DO.AST.fromGlob(e,this.options).toMMPattern();return i&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:i}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?ate:r.dot?lte:cte,i=new Set(r.nocase?["i"]:[]),s=e.map(l=>{let c=l.map(u=>{if(u instanceof RegExp)for(let d of u.flags.split(""))i.add(d);return typeof u=="string"?gte(u):u===U.GLOBSTAR?U.GLOBSTAR:u._src});return c.forEach((u,d)=>{let p=c[d+1],f=c[d-1];u!==U.GLOBSTAR||f===U.GLOBSTAR||(f===void 0?p!==void 0&&p!==U.GLOBSTAR?c[d+1]="(?:\\/|"+n+"\\/)?"+p:c[d]=n:p===void 0?c[d-1]=f+"(?:\\/|"+n+")?":p!==U.GLOBSTAR&&(c[d-1]=f+"(?:\\/|\\/"+n+"\\/)"+p,c[d+1]=U.GLOBSTAR))}),c.filter(u=>u!==U.GLOBSTAR).join("/")}).join("|"),[o,a]=e.length>1?["(?:",")"]:["",""];s="^"+o+s+a+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let s=this.set;this.debug(this.pattern,"set",s);let o=i[i.length-1];if(!o)for(let a=i.length-2;!o&&a>=0;a--)o=i[a];for(let a=0;a<s.length;a++){let l=s[a],c=i;if(n.matchBase&&l.length===1&&(c=[o]),this.matchOne(c,l,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return U.minimatch.defaults(e).Minimatch}};U.Minimatch=Vi;var mte=Rb();Object.defineProperty(U,"AST",{enumerable:!0,get:function(){return mte.AST}});var yte=Ib();Object.defineProperty(U,"escape",{enumerable:!0,get:function(){return yte.escape}});var bte=lf();Object.defineProperty(U,"unescape",{enumerable:!0,get:function(){return bte.unescape}});U.minimatch.AST=DO.AST;U.minimatch.Minimatch=Vi;U.minimatch.escape=Fee.escape;U.minimatch.unescape=Bee.unescape});var HO=w(gf=>{"use strict";Object.defineProperty(gf,"__esModule",{value:!0});gf.LRUCache=void 0;var Eo=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,UO=new Set,Cb=typeof process=="object"&&process?process:{},WO=(t,e,r,n)=>{typeof Cb.emitWarning=="function"?Cb.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},pf=globalThis.AbortController,jO=globalThis.AbortSignal;if(typeof pf>"u"){jO=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},pf=class{constructor(){e()}signal=new jO;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=Cb.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,WO("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var wte=t=>!UO.has(t),Jn=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),zO=t=>Jn(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?xo:null:null,xo=class extends Array{constructor(e){super(e),this.fill(0)}},kb=class t{heap;length;static#e=!1;static create(e){let r=zO(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Nb=class t{#e;#t;#s;#n;#o;#_;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#c;#d;#a;#l;#i;#m;#y;#h;#f;#E;#g;#x;#T;#w;#v;#S;#p;static unsafeExposeInternals(e){return{starts:e.#T,ttls:e.#w,sizes:e.#x,keyMap:e.#a,keyList:e.#l,valList:e.#i,next:e.#m,prev:e.#y,get head(){return e.#h},get tail(){return e.#f},free:e.#E,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,s)=>e.#$(r,n,i,s),moveToTail:r=>e.#B(r),indexes:r=>e.#R(r),rindexes:r=>e.#I(r),isStale:r=>e.#b(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#d}get size(){return this.#c}get fetchMethod(){return this.#o}get memoMethod(){return this.#_}get dispose(){return this.#s}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:p,maxSize:f=0,maxEntrySize:y=0,sizeCalculation:h,fetchMethod:m,memoMethod:g,noDeleteOnFetchRejection:E,noDeleteOnStaleGet:b,allowStaleOnFetchRejection:v,allowStaleOnFetchAbort:A,ignoreFetchAbort:k}=e;if(r!==0&&!Jn(r))throw new TypeError("max option must be a nonnegative integer");let R=r?zO(r):Array;if(!R)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=f,this.maxEntrySize=y||this.#t,this.sizeCalculation=h,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(g!==void 0&&typeof g!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#_=g,m!==void 0&&typeof m!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=m,this.#S=!!m,this.#a=new Map,this.#l=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#m=new R(r),this.#y=new R(r),this.#h=0,this.#f=0,this.#E=kb.create(r),this.#c=0,this.#d=0,typeof c=="function"&&(this.#s=c),typeof u=="function"?(this.#n=u,this.#g=[]):(this.#n=void 0,this.#g=void 0),this.#v=!!this.#s,this.#p=!!this.#n,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!E,this.allowStaleOnFetchRejection=!!v,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!k,this.maxEntrySize!==0){if(this.#t!==0&&!Jn(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Jn(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#k()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Jn(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!Jn(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#C()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let N="LRU_CACHE_UNBOUNDED";wte(N)&&(UO.add(N),WO("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",N,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#C(){let e=new xo(this.#e),r=new xo(this.#e);this.#w=e,this.#T=r,this.#O=(s,o,a=Eo.now())=>{if(r[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#b(s)&&this.#N(this.#l[s],"expire")},o+1);l.unref&&l.unref()}},this.#A=s=>{r[s]=e[s]!==0?Eo.now():0},this.#r=(s,o)=>{if(e[o]){let a=e[o],l=r[o];if(!a||!l)return;s.ttl=a,s.start=l,s.now=n||i();let c=s.now-l;s.remainingTTL=a-c}};let n=0,i=()=>{let s=Eo.now();if(this.ttlResolution>0){n=s;let o=setTimeout(()=>n=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#a.get(s);if(o===void 0)return 0;let a=e[o],l=r[o];if(!a||!l)return 1/0;let c=(n||i())-l;return a-c},this.#b=s=>{let o=r[s],a=e[s];return!!a&&!!o&&(n||i())-o>a}}#A=()=>{};#r=()=>{};#O=()=>{};#b=()=>!1;#k(){let e=new xo(this.#e);this.#d=0,this.#x=e,this.#q=r=>{this.#d-=e[r],e[r]=0},this.#L=(r,n,i,s)=>{if(this.#u(n))return 0;if(!Jn(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(n,r),!Jn(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#P=(r,n,i)=>{if(e[r]=n,this.#t){let s=this.#t-e[r];for(;this.#d>s;)this.#D(!0)}this.#d+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#d)}}#q=e=>{};#P=(e,r,n)=>{};#L=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#R({allowStale:e=this.allowStale}={}){if(this.#c)for(let r=this.#f;!(!this.#M(r)||((e||!this.#b(r))&&(yield r),r===this.#h));)r=this.#y[r]}*#I({allowStale:e=this.allowStale}={}){if(this.#c)for(let r=this.#h;!(!this.#M(r)||((e||!this.#b(r))&&(yield r),r===this.#f));)r=this.#m[r]}#M(e){return e!==void 0&&this.#a.get(this.#l[e])===e}*entries(){for(let e of this.#R())this.#i[e]!==void 0&&this.#l[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#l[e],this.#i[e]])}*rentries(){for(let e of this.#I())this.#i[e]!==void 0&&this.#l[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#l[e],this.#i[e]])}*keys(){for(let e of this.#R()){let r=this.#l[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#I()){let r=this.#l[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#R())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#I())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#R()){let i=this.#i[n],s=this.#u(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#l[n],this))return this.get(this.#l[n],r)}}forEach(e,r=this){for(let n of this.#R()){let i=this.#i[n],s=this.#u(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(r,s,this.#l[n],this)}}rforEach(e,r=this){for(let n of this.#I()){let i=this.#i[n],s=this.#u(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(r,s,this.#l[n],this)}}purgeStale(){let e=!1;for(let r of this.#I({allowStale:!0}))this.#b(r)&&(this.#N(this.#l[r],"expire"),e=!0);return e}info(e){let r=this.#a.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let s={value:i};if(this.#w&&this.#T){let o=this.#w[r],a=this.#T[r];if(o&&a){let l=o-(Eo.now()-a);s.ttl=l,s.start=Date.now()}}return this.#x&&(s.size=this.#x[r]),s}dump(){let e=[];for(let r of this.#R({allowStale:!0})){let n=this.#l[r],i=this.#i[r],s=this.#u(i)?i.__staleWhileFetching:i;if(s===void 0||n===void 0)continue;let o={value:s};if(this.#w&&this.#T){o.ttl=this.#w[r];let a=Eo.now()-this.#T[r];o.start=Math.floor(Date.now()-a)}this.#x&&(o.size=this.#x[r]),e.unshift([n,o])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=Eo.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=n,{noUpdateTTL:c=this.noUpdateTTL}=n,u=this.#L(e,r,n.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#N(e,"set"),this;let d=this.#c===0?void 0:this.#a.get(e);if(d===void 0)d=this.#c===0?this.#f:this.#E.length!==0?this.#E.pop():this.#c===this.#e?this.#D(!1):this.#c,this.#l[d]=e,this.#i[d]=r,this.#a.set(e,d),this.#m[this.#f]=d,this.#y[d]=this.#f,this.#f=d,this.#c++,this.#P(d,u,l),l&&(l.set="add"),c=!1;else{this.#B(d);let p=this.#i[d];if(r!==p){if(this.#S&&this.#u(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:f}=p;f!==void 0&&!o&&(this.#v&&this.#s?.(f,e,"set"),this.#p&&this.#g?.push([f,e,"set"]))}else o||(this.#v&&this.#s?.(p,e,"set"),this.#p&&this.#g?.push([p,e,"set"]));if(this.#q(d),this.#P(d,u,l),this.#i[d]=r,l){l.set="replace";let f=p&&this.#u(p)?p.__staleWhileFetching:p;f!==void 0&&(l.oldValue=f)}}else l&&(l.set="update")}if(i!==0&&!this.#w&&this.#C(),this.#w&&(c||this.#O(d,i,s),l&&this.#r(l,d)),!o&&this.#p&&this.#g){let p=this.#g,f;for(;f=p?.shift();)this.#n?.(...f)}return this}pop(){try{for(;this.#c;){let e=this.#i[this.#h];if(this.#D(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#p&&this.#g){let e=this.#g,r;for(;r=e?.shift();)this.#n?.(...r)}}}#D(e){let r=this.#h,n=this.#l[r],i=this.#i[r];return this.#S&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#p)&&(this.#v&&this.#s?.(i,n,"evict"),this.#p&&this.#g?.push([i,n,"evict"])),this.#q(r),e&&(this.#l[r]=void 0,this.#i[r]=void 0,this.#E.push(r)),this.#c===1?(this.#h=this.#f=0,this.#E.length=0):this.#h=this.#m[r],this.#a.delete(n),this.#c--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,s=this.#a.get(e);if(s!==void 0){let o=this.#i[s];if(this.#u(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#b(s))i&&(i.has="stale",this.#r(i,s));else return n&&this.#A(s),i&&(i.has="hit",this.#r(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#a.get(e);if(i===void 0||!n&&this.#b(i))return;let s=this.#i[i];return this.#u(s)?s.__staleWhileFetching:s}#$(e,r,n,i){let s=r===void 0?void 0:this.#i[r];if(this.#u(s))return s;let o=new pf,{signal:a}=n;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:n,context:i},c=(h,m=!1)=>{let{aborted:g}=o.signal,E=n.ignoreFetchAbort&&h!==void 0;if(n.status&&(g&&!m?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,E&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),g&&!E&&!m)return d(o.signal.reason);let b=f;return this.#i[r]===f&&(h===void 0?b.__staleWhileFetching?this.#i[r]=b.__staleWhileFetching:this.#N(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,h,l.options))),h},u=h=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=h),d(h)),d=h=>{let{aborted:m}=o.signal,g=m&&n.allowStaleOnFetchAbort,E=g||n.allowStaleOnFetchRejection,b=E||n.noDeleteOnFetchRejection,v=f;if(this.#i[r]===f&&(!b||v.__staleWhileFetching===void 0?this.#N(e,"fetch"):g||(this.#i[r]=v.__staleWhileFetching)),E)return n.status&&v.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),v.__staleWhileFetching;if(v.__returned===v)throw h},p=(h,m)=>{let g=this.#o?.(e,s,l);g&&g instanceof Promise&&g.then(E=>h(E===void 0?void 0:E),m),o.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(h(void 0),n.allowStaleOnFetchAbort&&(h=E=>c(E,!0)))})};n.status&&(n.status.fetchDispatched=!0);let f=new Promise(p).then(c,u),y=Object.assign(f,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return r===void 0?(this.set(e,y,{...l.options,status:void 0}),r=this.#a.get(e)):this.#i[r]=y,y}#u(e){if(!this.#S)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof pf}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:y=this.allowStaleOnFetchAbort,context:h,forceRefresh:m=!1,status:g,signal:E}=r;if(!this.#S)return g&&(g.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:g});let b={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:y,ignoreFetchAbort:f,status:g,signal:E},v=this.#a.get(e);if(v===void 0){g&&(g.fetch="miss");let A=this.#$(e,v,b,h);return A.__returned=A}else{let A=this.#i[v];if(this.#u(A)){let P=n&&A.__staleWhileFetching!==void 0;return g&&(g.fetch="inflight",P&&(g.returnedStale=!0)),P?A.__staleWhileFetching:A.__returned=A}let k=this.#b(v);if(!m&&!k)return g&&(g.fetch="hit"),this.#B(v),i&&this.#A(v),g&&this.#r(g,v),A;let R=this.#$(e,v,b,h),I=R.__staleWhileFetching!==void 0&&n;return g&&(g.fetch=k?"stale":"refresh",I&&k&&(g.returnedStale=!0)),I?R.__staleWhileFetching:R.__returned=R}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#_;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:s,...o}=r,a=this.get(e,o);if(!s&&a!==void 0)return a;let l=n(e,a,{options:o,context:i});return this.set(e,l,o),l}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=r,a=this.#a.get(e);if(a!==void 0){let l=this.#i[a],c=this.#u(l);return o&&this.#r(o,a),this.#b(a)?(o&&(o.get="stale"),c?(o&&n&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),n?l.__staleWhileFetching:void 0):(s||this.#N(e,"expire"),o&&n&&(o.returnedStale=!0),n?l:void 0)):(o&&(o.get="hit"),c?l.__staleWhileFetching:(this.#B(a),i&&this.#A(a),l))}else o&&(o.get="miss")}#F(e,r){this.#y[r]=e,this.#m[e]=r}#B(e){e!==this.#f&&(e===this.#h?this.#h=this.#m[e]:this.#F(this.#y[e],this.#m[e]),this.#F(this.#f,e),this.#f=e)}delete(e){return this.#N(e,"delete")}#N(e,r){let n=!1;if(this.#c!==0){let i=this.#a.get(e);if(i!==void 0)if(n=!0,this.#c===1)this.#j(r);else{this.#q(i);let s=this.#i[i];if(this.#u(s)?s.__abortController.abort(new Error("deleted")):(this.#v||this.#p)&&(this.#v&&this.#s?.(s,e,r),this.#p&&this.#g?.push([s,e,r])),this.#a.delete(e),this.#l[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#h)this.#h=this.#m[i];else{let o=this.#y[i];this.#m[o]=this.#m[i];let a=this.#m[i];this.#y[a]=this.#y[i]}this.#c--,this.#E.push(i)}}if(this.#p&&this.#g?.length){let i=this.#g,s;for(;s=i?.shift();)this.#n?.(...s)}return n}clear(){return this.#j("delete")}#j(e){for(let r of this.#I({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#l[r];this.#v&&this.#s?.(n,i,e),this.#p&&this.#g?.push([n,i,e])}}if(this.#a.clear(),this.#i.fill(void 0),this.#l.fill(void 0),this.#w&&this.#T&&(this.#w.fill(0),this.#T.fill(0)),this.#x&&this.#x.fill(0),this.#h=0,this.#f=0,this.#E.length=0,this.#d=0,this.#c=0,this.#p&&this.#g){let r=this.#g,n;for(;n=r?.shift();)this.#n?.(...n)}}};gf.LRUCache=Nb});var Fb=w(Wt=>{"use strict";var _te=Wt&&Wt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.Minipass=Wt.isWritable=Wt.isReadable=Wt.isStream=void 0;var VO=typeof process=="object"&&process?process:{stdout:null,stderr:null},$b=require("node:events"),JO=_te(require("node:stream")),vte=require("node:string_decoder"),Ste=t=>!!t&&typeof t=="object"&&(t instanceof Sf||t instanceof JO.default||(0,Wt.isReadable)(t)||(0,Wt.isWritable)(t));Wt.isStream=Ste;var Ete=t=>!!t&&typeof t=="object"&&t instanceof $b.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==JO.default.Writable.prototype.pipe;Wt.isReadable=Ete;var xte=t=>!!t&&typeof t=="object"&&t instanceof $b.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function";Wt.isWritable=xte;var En=Symbol("EOF"),xn=Symbol("maybeEmitEnd"),Zn=Symbol("emittedEnd"),mf=Symbol("emittingEnd"),Ll=Symbol("emittedError"),yf=Symbol("closed"),GO=Symbol("read"),bf=Symbol("flush"),KO=Symbol("flushChunk"),Tr=Symbol("encoding"),To=Symbol("decoder"),yt=Symbol("flowing"),Ml=Symbol("paused"),Ao=Symbol("resume"),bt=Symbol("buffer"),Ut=Symbol("pipes"),wt=Symbol("bufferLength"),Ob=Symbol("bufferPush"),wf=Symbol("bufferShift"),Pt=Symbol("objectMode"),tt=Symbol("destroyed"),qb=Symbol("error"),Pb=Symbol("emitData"),YO=Symbol("emitEnd"),Lb=Symbol("emitEnd2"),Hr=Symbol("async"),Mb=Symbol("abort"),_f=Symbol("aborted"),Dl=Symbol("signal"),Gi=Symbol("dataListeners"),Xt=Symbol("discarded"),$l=t=>Promise.resolve().then(t),Tte=t=>t(),Ate=t=>t==="end"||t==="finish"||t==="prefinish",Rte=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,Ite=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),vf=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Ao](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Db=class extends vf{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},Cte=t=>!!t.objectMode,kte=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Sf=class extends $b.EventEmitter{[yt]=!1;[Ml]=!1;[Ut]=[];[bt]=[];[Pt];[Tr];[Hr];[To];[En]=!1;[Zn]=!1;[mf]=!1;[yf]=!1;[Ll]=null;[wt]=0;[tt]=!1;[Dl];[_f]=!1;[Gi]=0;[Xt]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");Cte(r)?(this[Pt]=!0,this[Tr]=null):kte(r)?(this[Tr]=r.encoding,this[Pt]=!1):(this[Pt]=!1,this[Tr]=null),this[Hr]=!!r.async,this[To]=this[Tr]?new vte.StringDecoder(this[Tr]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[bt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Ut]});let{signal:n}=r;n&&(this[Dl]=n,n.aborted?this[Mb]():n.addEventListener("abort",()=>this[Mb]()))}get bufferLength(){return this[wt]}get encoding(){return this[Tr]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Pt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Hr]}set async(e){this[Hr]=this[Hr]||!!e}[Mb](){this[_f]=!0,this.emit("abort",this[Dl]?.reason),this.destroy(this[Dl]?.reason)}get aborted(){return this[_f]}set aborted(e){}write(e,r,n){if(this[_f])return!1;if(this[En])throw new Error("write after end");if(this[tt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[Hr]?$l:Tte;if(!this[Pt]&&!Buffer.isBuffer(e)){if(Ite(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(Rte(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Pt]?(this[yt]&&this[wt]!==0&&this[bf](!0),this[yt]?this.emit("data",e):this[Ob](e),this[wt]!==0&&this.emit("readable"),n&&i(n),this[yt]):e.length?(typeof e=="string"&&!(r===this[Tr]&&!this[To]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Tr]&&(e=this[To].write(e)),this[yt]&&this[wt]!==0&&this[bf](!0),this[yt]?this.emit("data",e):this[Ob](e),this[wt]!==0&&this.emit("readable"),n&&i(n),this[yt]):(this[wt]!==0&&this.emit("readable"),n&&i(n),this[yt])}read(e){if(this[tt])return null;if(this[Xt]=!1,this[wt]===0||e===0||e&&e>this[wt])return this[xn](),null;this[Pt]&&(e=null),this[bt].length>1&&!this[Pt]&&(this[bt]=[this[Tr]?this[bt].join(""):Buffer.concat(this[bt],this[wt])]);let r=this[GO](e||null,this[bt][0]);return this[xn](),r}[GO](e,r){if(this[Pt])this[wf]();else{let n=r;e===n.length||e===null?this[wf]():typeof n=="string"?(this[bt][0]=n.slice(e),r=n.slice(0,e),this[wt]-=e):(this[bt][0]=n.subarray(e),r=n.subarray(0,e),this[wt]-=e)}return this.emit("data",r),!this[bt].length&&!this[En]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[En]=!0,this.writable=!1,(this[yt]||!this[Ml])&&this[xn](),this}[Ao](){this[tt]||(!this[Gi]&&!this[Ut].length&&(this[Xt]=!0),this[Ml]=!1,this[yt]=!0,this.emit("resume"),this[bt].length?this[bf]():this[En]?this[xn]():this.emit("drain"))}resume(){return this[Ao]()}pause(){this[yt]=!1,this[Ml]=!0,this[Xt]=!1}get destroyed(){return this[tt]}get flowing(){return this[yt]}get paused(){return this[Ml]}[Ob](e){this[Pt]?this[wt]+=1:this[wt]+=e.length,this[bt].push(e)}[wf](){return this[Pt]?this[wt]-=1:this[wt]-=this[bt][0].length,this[bt].shift()}[bf](e=!1){do;while(this[KO](this[wf]())&&this[bt].length);!e&&!this[bt].length&&!this[En]&&this.emit("drain")}[KO](e){return this.emit("data",e),this[yt]}pipe(e,r){if(this[tt])return e;this[Xt]=!1;let n=this[Zn];return r=r||{},e===VO.stdout||e===VO.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[Ut].push(r.proxyErrors?new Db(this,e,r):new vf(this,e,r)),this[Hr]?$l(()=>this[Ao]()):this[Ao]()),e}unpipe(e){let r=this[Ut].find(n=>n.dest===e);r&&(this[Ut].length===1?(this[yt]&&this[Gi]===0&&(this[yt]=!1),this[Ut]=[]):this[Ut].splice(this[Ut].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Xt]=!1,this[Gi]++,!this[Ut].length&&!this[yt]&&this[Ao]();else if(e==="readable"&&this[wt]!==0)super.emit("readable");else if(Ate(e)&&this[Zn])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[Ll]){let i=r;this[Hr]?$l(()=>i.call(this,this[Ll])):i.call(this,this[Ll])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Gi]=this.listeners("data").length,this[Gi]===0&&!this[Xt]&&!this[Ut].length&&(this[yt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Gi]=0,!this[Xt]&&!this[Ut].length&&(this[yt]=!1)),r}get emittedEnd(){return this[Zn]}[xn](){!this[mf]&&!this[Zn]&&!this[tt]&&this[bt].length===0&&this[En]&&(this[mf]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[yf]&&this.emit("close"),this[mf]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==tt&&this[tt])return!1;if(e==="data")return!this[Pt]&&!n?!1:this[Hr]?($l(()=>this[Pb](n)),!0):this[Pb](n);if(e==="end")return this[YO]();if(e==="close"){if(this[yf]=!0,!this[Zn]&&!this[tt])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Ll]=n,super.emit(qb,n);let s=!this[Dl]||this.listeners("error").length?super.emit("error",n):!1;return this[xn](),s}else if(e==="resume"){let s=super.emit("resume");return this[xn](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,...r);return this[xn](),i}[Pb](e){for(let n of this[Ut])n.dest.write(e)===!1&&this.pause();let r=this[Xt]?!1:super.emit("data",e);return this[xn](),r}[YO](){return this[Zn]?!1:(this[Zn]=!0,this.readable=!1,this[Hr]?($l(()=>this[Lb]()),!0):this[Lb]())}[Lb](){if(this[To]){let r=this[To].end();if(r){for(let n of this[Ut])n.dest.write(r);this[Xt]||super.emit("data",r)}}for(let r of this[Ut])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Pt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Pt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[Pt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Tr]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(tt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Xt]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[En])return r();let s,o,a=d=>{this.off("data",l),this.off("end",c),this.off(tt,u),r(),o(d)},l=d=>{this.off("error",a),this.off("end",c),this.off(tt,u),this.pause(),s({value:d,done:!!this[En]})},c=()=>{this.off("error",a),this.off("data",l),this.off(tt,u),r(),s({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,p)=>{o=p,s=d,this.once(tt,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Xt]=!1;let e=!1,r=()=>(this.pause(),this.off(qb,r),this.off(tt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(qb,r),this.once(tt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[tt])return e?this.emit("error",e):this.emit(tt),this;this[tt]=!0,this[Xt]=!0,this[bt].length=0,this[wt]=0;let r=this;return typeof r.close=="function"&&!this[yf]&&r.close(),e?this.emit("error",e):this.emit(tt),this}static get isStream(){return Wt.isStream}};Wt.Minipass=Sf});var dq=w(xe=>{"use strict";var Nte=xe&&xe.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Ote=xe&&xe.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),qte=xe&&xe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Nte(e,t,r);return Ote(e,t),e};Object.defineProperty(xe,"__esModule",{value:!0});xe.PathScurry=xe.Path=xe.PathScurryDarwin=xe.PathScurryPosix=xe.PathScurryWin32=xe.PathScurryBase=xe.PathPosix=xe.PathWin32=xe.PathBase=xe.ChildrenCache=xe.ResolveCache=void 0;var rq=HO(),Rf=require("node:path"),Pte=require("node:url"),Bl=require("fs"),Lte=qte(require("node:fs")),Mte=Bl.realpathSync.native,Ef=require("node:fs/promises"),ZO=Fb(),jl={lstatSync:Bl.lstatSync,readdir:Bl.readdir,readdirSync:Bl.readdirSync,readlinkSync:Bl.readlinkSync,realpathSync:Mte,promises:{lstat:Ef.lstat,readdir:Ef.readdir,readlink:Ef.readlink,realpath:Ef.realpath}},nq=t=>!t||t===jl||t===Lte?jl:{...jl,...t,promises:{...jl.promises,...t.promises||{}}},iq=/^\\\\\?\\([a-z]:)\\?$/i,Dte=t=>t.replace(/\//g,"\\").replace(iq,"$1\\"),$te=/[\\\/]/,ur=0,sq=1,oq=2,Vr=4,aq=6,lq=8,Ki=10,cq=12,cr=15,Fl=~cr,Bb=16,QO=32,Ul=64,Ar=128,xf=256,Af=512,XO=Ul|Ar|Af,Fte=1023,jb=t=>t.isFile()?lq:t.isDirectory()?Vr:t.isSymbolicLink()?Ki:t.isCharacterDevice()?oq:t.isBlockDevice()?aq:t.isSocket()?cq:t.isFIFO()?sq:ur,eq=new Map,Wl=t=>{let e=eq.get(t);if(e)return e;let r=t.normalize("NFKD");return eq.set(t,r),r},tq=new Map,Tf=t=>{let e=tq.get(t);if(e)return e;let r=Wl(t.toLowerCase());return tq.set(t,r),r},zl=class extends rq.LRUCache{constructor(){super({max:256})}};xe.ResolveCache=zl;var If=class extends rq.LRUCache{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}};xe.ChildrenCache=If;var uq=Symbol("PathScurry setAsCwd"),xt=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#s;get mode(){return this.#s}#n;get nlink(){return this.#n}#o;get uid(){return this.#o}#_;get gid(){return this.#_}#c;get rdev(){return this.#c}#d;get blksize(){return this.#d}#a;get ino(){return this.#a}#l;get size(){return this.#l}#i;get blocks(){return this.#i}#m;get atimeMs(){return this.#m}#y;get mtimeMs(){return this.#y}#h;get ctimeMs(){return this.#h}#f;get birthtimeMs(){return this.#f}#E;get atime(){return this.#E}#g;get mtime(){return this.#g}#x;get ctime(){return this.#x}#T;get birthtime(){return this.#T}#w;#v;#S;#p;#C;#A;#r;#O;#b;#k;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=ur,n,i,s,o,a){this.name=e,this.#w=s?Tf(e):Wl(e),this.#r=r&Fte,this.nocase=s,this.roots=i,this.root=n||this,this.#O=o,this.#S=a.fullpath,this.#C=a.relative,this.#A=a.relativePosix,this.parent=a.parent,this.parent?this.#e=this.parent.#e:this.#e=nq(a.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#O}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#q(i):this.#q(i)}#q(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#O.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#O.set(this,r),this.#r&=~Bb,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Tf(e):Wl(e);for(let l of n)if(l.#w===i)return l;let s=this.parent?this.sep:"",o=this.#S?this.#S+s+e:void 0,a=this.newChild(e,ur,{...r,parent:this,fullpath:o});return this.canReaddir()||(a.#r|=Ar),n.push(a),a}relative(){if(this.isCWD)return"";if(this.#C!==void 0)return this.#C;let e=this.name,r=this.parent;if(!r)return this.#C=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#A!==void 0)return this.#A;let e=this.name,r=this.parent;if(!r)return this.#A=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#S!==void 0)return this.#S;let e=this.name,r=this.parent;if(!r)return this.#S=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#S=i}fullpathPosix(){if(this.#p!==void 0)return this.#p;if(this.sep==="/")return this.#p=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#p=`//?/${i}`:this.#p=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#p=n}isUnknown(){return(this.#r&cr)===ur}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&cr)===lq}isDirectory(){return(this.#r&cr)===Vr}isCharacterDevice(){return(this.#r&cr)===oq}isBlockDevice(){return(this.#r&cr)===aq}isFIFO(){return(this.#r&cr)===sq}isSocket(){return(this.#r&cr)===cq}isSymbolicLink(){return(this.#r&Ki)===Ki}lstatCached(){return this.#r&QO?this:void 0}readlinkCached(){return this.#b}realpathCached(){return this.#k}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#b)return!0;if(!this.parent)return!1;let e=this.#r&cr;return!(e!==ur&&e!==Ki||this.#r&xf||this.#r&Ar)}calledReaddir(){return!!(this.#r&Bb)}isENOENT(){return!!(this.#r&Ar)}isNamed(e){return this.nocase?this.#w===Tf(e):this.#w===Wl(e)}async readlink(){let e=this.#b;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#b=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#b;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#b=n}catch(r){this.#u(r.code);return}}#P(e){this.#r|=Bb;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#L()}}#L(){this.#r&Ar||(this.#r=(this.#r|Ar)&Fl,this.#R())}#R(){let e=this.children();e.provisional=0;for(let r of e)r.#L()}#I(){this.#r|=Af,this.#M()}#M(){if(this.#r&Ul)return;let e=this.#r;(e&cr)===Vr&&(e&=Fl),this.#r=e|Ul,this.#R()}#D(e=""){e==="ENOTDIR"||e==="EPERM"?this.#M():e==="ENOENT"?this.#L():this.children().provisional=0}#$(e=""){e==="ENOTDIR"?this.parent.#M():e==="ENOENT"&&this.#L()}#u(e=""){let r=this.#r;r|=xf,e==="ENOENT"&&(r|=Ar),(e==="EINVAL"||e==="UNKNOWN")&&(r&=Fl),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#M()}#F(e,r){return this.#N(e,r)||this.#B(e,r)}#B(e,r){let n=jb(e),i=this.newChild(e.name,n,{parent:this}),s=i.#r&cr;return s!==Vr&&s!==Ki&&s!==ur&&(i.#r|=Ul),r.unshift(i),r.provisional++,i}#N(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Tf(e.name):Wl(e.name))===i.#w)return this.#j(e,i,n,r)}}#j(e,r,n,i){let s=r.name;return r.#r=r.#r&Fl|jb(e),s!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if((this.#r&Ar)===0)try{return this.#H(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#$(e.code)}}lstatSync(){if((this.#r&Ar)===0)try{return this.#H(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#$(e.code)}}#H(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:s,blksize:o,blocks:a,ctime:l,ctimeMs:c,dev:u,gid:d,ino:p,mode:f,mtime:y,mtimeMs:h,nlink:m,rdev:g,size:E,uid:b}=e;this.#E=r,this.#m=n,this.#T=i,this.#f=s,this.#d=o,this.#i=a,this.#x=l,this.#h=c,this.#t=u,this.#_=d,this.#a=p,this.#s=f,this.#g=y,this.#y=h,this.#n=m,this.#c=g,this.#l=E,this.#o=b;let v=jb(e);this.#r=this.#r&Fl|v|QO,v!==ur&&v!==Vr&&v!==Ki&&(this.#r|=Ul)}#W=[];#z=!1;#V(e){this.#z=!1;let r=this.#W.slice();this.#W.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let s=n.slice(0,n.provisional);r?e(null,s):queueMicrotask(()=>e(null,s));return}if(this.#W.push(e),this.#z)return;this.#z=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(s,o)=>{if(s)this.#D(s.code),n.provisional=0;else{for(let a of o)this.#F(a,n);this.#P(n)}this.#V(n.slice(0,n.provisional))})}#U;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#U)await this.#U;else{let n=()=>{};this.#U=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#F(i,e);this.#P(e)}catch(i){this.#D(i.code),e.provisional=0}this.#U=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#F(n,e);this.#P(e)}catch(n){this.#D(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&XO)return!1;let e=cr&this.#r;return e===ur||e===Vr||e===Ki}shouldWalk(e,r){return(this.#r&Vr)===Vr&&!(this.#r&XO)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#k)return this.#k;if(!((Af|xf|Ar)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#k=this.resolve(e)}catch{this.#I()}}realpathSync(){if(this.#k)return this.#k;if(!((Af|xf|Ar)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#k=this.resolve(e)}catch{this.#I()}}[uq](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#C=n.join(this.sep),i.#A=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#C=void 0,i.#A=void 0,i=i.parent}};xe.PathBase=xt;var Hl=class t extends xt{sep="\\";splitSep=$te;constructor(e,r=ur,n,i,s,o,a){super(e,r,n,i,s,o,a)}newChild(e,r=ur,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return Rf.win32.parse(e).root}getRoot(e){if(e=Dte(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new Kl(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(iq,"$1\\"),e===r}};xe.PathWin32=Hl;var Vl=class t extends xt{splitSep="/";sep="/";constructor(e,r=ur,n,i,s,o,a){super(e,r,n,i,s,o,a)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=ur,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}};xe.PathPosix=Vl;var Gl=class{root;rootPath;roots;cwd;#e;#t;#s;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:s=16*1024,fs:o=jl}={}){this.#n=nq(o),(e instanceof URL||e.startsWith("file://"))&&(e=(0,Pte.fileURLToPath)(e));let a=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#e=new zl,this.#t=new zl,this.#s=new If(s);let l=a.substring(this.rootPath.length).split(n);if(l.length===1&&!l[0]&&l.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let c=this.root,u=l.length-1,d=r.sep,p=this.rootPath,f=!1;for(let y of l){let h=u--;c=c.child(y,{relative:new Array(h).fill("..").join(d),relativePosix:new Array(h).fill("..").join("/"),fullpath:p+=(f?"":d)+y}),f=!0}this.cwd=c}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#s}resolve(...e){let r="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(r=r?`${o}/${r}`:o,this.isAbsolute(o)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(r=r?`${o}/${r}`:o,this.isAbsolute(o)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(s=>s.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r,a=[];(!s||s(e))&&a.push(n?e:e.fullpath());let l=new Set,c=(d,p)=>{l.add(d),d.readdirCB((f,y)=>{if(f)return p(f);let h=y.length;if(!h)return p();let m=()=>{--h===0&&p()};for(let g of y)(!s||s(g))&&a.push(n?g:g.fullpath()),i&&g.isSymbolicLink()?g.realpath().then(E=>E?.isUnknown()?E.lstat():E).then(E=>E?.shouldWalk(l,o)?c(E,m):m()):g.shouldWalk(l,o)?c(g,m):m()},!0)},u=e;return new Promise((d,p)=>{c(u,f=>{if(f)return p(f);d(a)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r,a=[];(!s||s(e))&&a.push(n?e:e.fullpath());let l=new Set([e]);for(let c of l){let u=c.readdirSync();for(let d of u){(!s||s(d))&&a.push(n?d:d.fullpath());let p=d;if(d.isSymbolicLink()){if(!(i&&(p=d.realpathSync())))continue;p.isUnknown()&&p.lstatSync()}p.shouldWalk(l,o)&&l.add(p)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof xt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r;(!s||s(e))&&(yield n?e:e.fullpath());let a=new Set([e]);for(let l of a){let c=l.readdirSync();for(let u of c){(!s||s(u))&&(yield n?u:u.fullpath());let d=u;if(u.isSymbolicLink()){if(!(i&&(d=u.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(a,o)&&a.add(d)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r,a=new ZO.Minipass({objectMode:!0});(!s||s(e))&&a.write(n?e:e.fullpath());let l=new Set,c=[e],u=0,d=()=>{let p=!1;for(;!p;){let f=c.shift();if(!f){u===0&&a.end();return}u++,l.add(f);let y=(m,g,E=!1)=>{if(m)return a.emit("error",m);if(i&&!E){let b=[];for(let v of g)v.isSymbolicLink()&&b.push(v.realpath().then(A=>A?.isUnknown()?A.lstat():A));if(b.length){Promise.all(b).then(()=>y(null,g,!0));return}}for(let b of g)b&&(!s||s(b))&&(a.write(n?b:b.fullpath())||(p=!0));u--;for(let b of g){let v=b.realpathCached()||b;v.shouldWalk(l,o)&&c.push(v)}p&&!a.flowing?a.once("drain",d):h||d()},h=!0;f.readdirCB(y,!0),h=!1}};return d(),a}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof xt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r,a=new ZO.Minipass({objectMode:!0}),l=new Set;(!s||s(e))&&a.write(n?e:e.fullpath());let c=[e],u=0,d=()=>{let p=!1;for(;!p;){let f=c.shift();if(!f){u===0&&a.end();return}u++,l.add(f);let y=f.readdirSync();for(let h of y)(!s||s(h))&&(a.write(n?h:h.fullpath())||(p=!0));u--;for(let h of y){let m=h;if(h.isSymbolicLink()){if(!(i&&(m=h.realpathSync())))continue;m.isUnknown()&&m.lstatSync()}m.shouldWalk(l,o)&&c.push(m)}}p&&!a.flowing&&a.once("drain",d)};return d(),a}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[uq](r)}};xe.PathScurryBase=Gl;var Kl=class extends Gl{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,Rf.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return Rf.win32.parse(e).root.toUpperCase()}newRoot(e){return new Hl(this.rootPath,Vr,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}};xe.PathScurryWin32=Kl;var Yl=class extends Gl{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,Rf.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Vl(this.rootPath,Vr,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}};xe.PathScurryPosix=Yl;var Cf=class extends Yl{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}};xe.PathScurryDarwin=Cf;xe.Path=process.platform==="win32"?Hl:Vl;xe.PathScurry=process.platform==="win32"?Kl:process.platform==="darwin"?Cf:Yl});var Wb=w(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});kf.Pattern=void 0;var Bte=Yn(),jte=t=>t.length>=1,Ute=t=>t.length>=1,Ub=class t{#e;#t;#s;length;#n;#o;#_;#c;#d;#a;#l=!0;constructor(e,r,n,i){if(!jte(e))throw new TypeError("empty pattern list");if(!Ute(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#s=n,this.#n=i,this.#s===0){if(this.isUNC()){let[s,o,a,l,...c]=this.#e,[u,d,p,f,...y]=this.#t;c[0]===""&&(c.shift(),y.shift());let h=[s,o,a,l,""].join("/"),m=[u,d,p,f,""].join("/");this.#e=[h,...c],this.#t=[m,...y],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[s,...o]=this.#e,[a,...l]=this.#t;o[0]===""&&(o.shift(),l.shift());let c=s+"/",u=a+"/";this.#e=[c,...o],this.#t=[u,...l],this.length=this.#e.length}}}pattern(){return this.#e[this.#s]}isString(){return typeof this.#e[this.#s]=="string"}isGlobstar(){return this.#e[this.#s]===Bte.GLOBSTAR}isRegExp(){return this.#e[this.#s]instanceof RegExp}globString(){return this.#_=this.#_||(this.#s===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#s).join("/"))}hasMore(){return this.length>this.#s+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new t(this.#e,this.#t,this.#s+1,this.#n),this.#o.#a=this.#a,this.#o.#d=this.#d,this.#o.#c=this.#c,this.#o):this.#o=null}isUNC(){let e=this.#e;return this.#d!==void 0?this.#d:this.#d=this.#n==="win32"&&this.#s===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#c!==void 0?this.#c:this.#c=this.#n==="win32"&&this.#s===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#s===0?e:""}checkFollowGlobstar(){return!(this.#s===0||!this.isGlobstar()||!this.#l)}markFollowGlobstar(){return this.#s===0||!this.isGlobstar()||!this.#l?!1:(this.#l=!1,!0)}};kf.Pattern=Ub});var Hb=w(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.Ignore=void 0;var fq=Yn(),Wte=Wb(),zte=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",zb=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:s,platform:o=zte}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:s,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of e)this.add(a)}add(e){let r=new fq.Minimatch(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],s=r.globParts[n];if(!i||!s)throw new Error("invalid pattern object");for(;i[0]==="."&&s[0]===".";)i.shift(),s.shift();let o=new Wte.Pattern(i,s,0,this.platform),a=new fq.Minimatch(o.globString(),this.mmopts),l=s[s.length-1]==="**",c=o.isAbsolute();c?this.absolute.push(a):this.relative.push(a),l&&(c?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",s=`${i}/`;for(let o of this.relative)if(o.match(i)||o.match(s))return!0;for(let o of this.absolute)if(o.match(r)||o.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};Nf.Ignore=zb});var pq=w(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.Processor=Gr.SubWalks=Gr.MatchRecord=Gr.HasWalkedCache=void 0;var hq=Yn(),Of=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}};Gr.HasWalkedCache=Of;var qf=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),s=this.store.get(e);this.store.set(e,s===void 0?i:i&s)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}};Gr.MatchRecord=qf;var Pf=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}};Gr.SubWalks=Pf;var Vb=class t{hasWalkedCache;matches=new qf;subwalks=new Pf;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Of}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,s]of n){this.hasWalkedCache.storeWalked(i,s);let o=s.root(),a=s.isAbsolute()&&this.opts.absolute!==!1;if(o){i=i.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let d=s.rest();if(d)s=d;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let l,c,u=!1;for(;typeof(l=s.pattern())=="string"&&(c=s.rest());)i=i.resolve(l),s=c,u=!0;if(l=s.pattern(),c=s.rest(),u){if(this.hasWalkedCache.hasWalked(i,s))continue;this.hasWalkedCache.storeWalked(i,s)}if(typeof l=="string"){let d=l===".."||l===""||l===".";this.matches.add(i.resolve(l),a,d);continue}else if(l===hq.GLOBSTAR){(!i.isSymbolicLink()||this.follow||s.checkFollowGlobstar())&&this.subwalks.add(i,s);let d=c?.pattern(),p=c?.rest();if(!c||(d===""||d===".")&&!p)this.matches.add(i,a,d===""||d===".");else if(d===".."){let f=i.parent||i;p?this.hasWalkedCache.hasWalked(f,p)||this.subwalks.add(f,p):this.matches.add(f,a,!0)}}else l instanceof RegExp&&this.subwalks.add(i,s)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let s of r)for(let o of n){let a=o.isAbsolute(),l=o.pattern(),c=o.rest();l===hq.GLOBSTAR?i.testGlobstar(s,o,c,a):l instanceof RegExp?i.testRegExp(s,l,c,a):i.testString(s,l,c,a)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let s=n.pattern();if(typeof s=="string"&&s!==".."&&s!==""&&s!==".")this.testString(e,s,n.rest(),i);else if(s===".."){let o=e.parent||e;this.subwalks.add(o,n)}else s instanceof RegExp&&this.testRegExp(e,s,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};Gr.Processor=Vb});var yq=w(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.GlobStream=Qn.GlobWalker=Qn.GlobUtil=void 0;var Hte=Fb(),gq=Hb(),mq=pq(),Vte=(t,e)=>typeof t=="string"?new gq.Ignore([t],e):Array.isArray(t)?new gq.Ignore(t,e):t,Jl=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#s;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#s=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=Vte(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#o(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let s=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=await s.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(s,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let s=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=s.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(s,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let s=`${e.relativePosix()}/**`;this.#t.add(s)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#s:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let s=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(s+i)}else{let s=this.opts.posix?e.relativePosix():e.relative(),o=this.opts.dotRelative&&!s.startsWith(".."+this.#s)?"."+this.#s:"";this.matchEmit(s?o+s+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new mq.Processor(this.opts),n)}walkCB2(e,r,n,i){if(this.#o(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of n.matches.entries())this.#n(a)||(s++,this.match(a,l,c).then(()=>o()));for(let a of n.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let l=a.readdirCached();a.calledReaddir()?this.walkCB3(a,l,n,o):a.readdirCB((c,u)=>this.walkCB3(a,u,n,o),!0)}o()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of n.matches.entries())this.#n(a)||(s++,this.match(a,l,c).then(()=>o()));for(let[a,l]of n.subwalks.entries())s++,this.walkCB2(a,l,n.child(),o);o()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new mq.Processor(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#o(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of n.matches.entries())this.#n(a)||this.matchSync(a,l,c);for(let a of n.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let l=a.readdirSync();this.walkCB3Sync(a,l,n,o)}o()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of n.matches.entries())this.#n(a)||this.matchSync(a,l,c);for(let[a,l]of n.subwalks.entries())s++,this.walkCB2Sync(a,l,n.child(),o);o()}};Qn.GlobUtil=Jl;var Gb=class extends Jl{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}};Qn.GlobWalker=Gb;var Kb=class extends Jl{results;constructor(e,r,n){super(e,r,n),this.results=new Hte.Minipass({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};Qn.GlobStream=Kb});var Jb=w(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.Glob=void 0;var Gte=Yn(),Kte=require("node:url"),Lf=dq(),Yte=Wb(),Mf=yq(),Jte=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Yb=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,Kte.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(l=>l.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(l=>l.includes("/")?l:`./**/${l}`)}if(this.pattern=e,this.platform=r.platform||Jte,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let l=r.platform==="win32"?Lf.PathScurryWin32:r.platform==="darwin"?Lf.PathScurryDarwin:r.platform?Lf.PathScurryPosix:Lf.PathScurry;this.scurry=new l(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map(l=>new Gte.Minimatch(l,i)),[o,a]=s.reduce((l,c)=>(l[0].push(...c.set),l[1].push(...c.globParts),l),[[],[]]);this.patterns=o.map((l,c)=>{let u=a[c];if(!u)throw new Error("invalid pattern object");return new Yte.Pattern(l,u,0,this.platform)})}async walk(){return[...await new Mf.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Mf.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Mf.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Mf.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};Df.Glob=Yb});var Zb=w($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.hasMagic=void 0;var Zte=Yn(),Qte=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Zte.Minimatch(r,e).hasMagic())return!0;return!1};$f.hasMagic=Qte});var vq=w(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.glob=ae.sync=ae.iterate=ae.iterateSync=ae.stream=ae.streamSync=ae.Ignore=ae.hasMagic=ae.Glob=ae.unescape=ae.escape=void 0;ae.globStreamSync=Zl;ae.globStream=Qb;ae.globSync=Xb;ae.globIterateSync=Ql;ae.globIterate=ew;var bq=Yn(),Yi=Jb(),Xte=Zb(),_q=Yn();Object.defineProperty(ae,"escape",{enumerable:!0,get:function(){return _q.escape}});Object.defineProperty(ae,"unescape",{enumerable:!0,get:function(){return _q.unescape}});var ere=Jb();Object.defineProperty(ae,"Glob",{enumerable:!0,get:function(){return ere.Glob}});var tre=Zb();Object.defineProperty(ae,"hasMagic",{enumerable:!0,get:function(){return tre.hasMagic}});var rre=Hb();Object.defineProperty(ae,"Ignore",{enumerable:!0,get:function(){return rre.Ignore}});function Zl(t,e={}){return new Yi.Glob(t,e).streamSync()}function Qb(t,e={}){return new Yi.Glob(t,e).stream()}function Xb(t,e={}){return new Yi.Glob(t,e).walkSync()}async function wq(t,e={}){return new Yi.Glob(t,e).walk()}function Ql(t,e={}){return new Yi.Glob(t,e).iterateSync()}function ew(t,e={}){return new Yi.Glob(t,e).iterate()}ae.streamSync=Zl;ae.stream=Object.assign(Qb,{sync:Zl});ae.iterateSync=Ql;ae.iterate=Object.assign(ew,{sync:Ql});ae.sync=Object.assign(Xb,{stream:Zl,iterate:Ql});ae.glob=Object.assign(wq,{glob:wq,globSync:Xb,sync:ae.sync,globStream:Qb,stream:ae.stream,globStreamSync:Zl,streamSync:ae.streamSync,globIterate:ew,iterate:ae.iterate,globIterateSync:Ql,iterateSync:ae.iterateSync,Glob:Yi.Glob,hasMagic:Xte.hasMagic,escape:bq.escape,unescape:bq.unescape});ae.glob.glob=ae.glob});var Tq=w((IRe,xq)=>{var Eq=Sm(),Ro=require("path"),tw=Yk(),nre=uO(),ire=vO(),sre=IO(),ore=vq(),Ji=xq.exports={},Sq=/[\/\\]/g,are=function(t,e){var r=[];return tw(t).forEach(function(n){var i=n.indexOf("!")===0;i&&(n=n.slice(1));var s=e(n);i?r=nre(r,s):r=ire(r,s)}),r};Ji.exists=function(){var t=Ro.join.apply(Ro,arguments);return Eq.existsSync(t)};Ji.expand=function(...t){var e=sre(t[0])?t.shift():{},r=Array.isArray(t[0])?t[0]:t;if(r.length===0)return[];var n=are(r,function(i){return ore.sync(i,e)});return e.filter&&(n=n.filter(function(i){i=Ro.join(e.cwd||"",i);try{return typeof e.filter=="function"?e.filter(i):Eq.statSync(i)[e.filter]()}catch{return!1}})),n};Ji.expandMapping=function(t,e,r){r=Object.assign({rename:function(s,o){return Ro.join(s||"",o)}},r);var n=[],i={};return Ji.expand(r,t).forEach(function(s){var o=s;r.flatten&&(o=Ro.basename(o)),r.ext&&(o=o.replace(/(\.[^\/]*)?$/,r.ext));var a=r.rename(e,o,r);r.cwd&&(s=Ro.join(r.cwd,s)),a=a.replace(Sq,"/"),s=s.replace(Sq,"/"),i[a]?i[a].src.push(s):(n.push({src:[s],dest:a}),i[a]=n[n.length-1])}),n};Ji.normalizeFilesArray=function(t){var e=[];return t.forEach(function(r){var n;("src"in r||"dest"in r)&&e.push(r)}),e.length===0?[]:(e=_(e).chain().forEach(function(r){!("src"in r)||!r.src||(Array.isArray(r.src)?r.src=tw(r.src):r.src=[r.src])}).map(function(r){var n=Object.assign({},r);if(delete n.src,delete n.dest,r.expand)return Ji.expandMapping(r.src,r.dest,n).map(function(s){var o=Object.assign({},r);return o.orig=Object.assign({},r),o.src=s.src,o.dest=s.dest,["expand","cwd","flatten","rename","ext"].forEach(function(a){delete o[a]}),o});var i=Object.assign({},r);return i.orig=Object.assign({},r),"src"in i&&Object.defineProperty(i,"src",{enumerable:!0,get:function s(){var o;return"result"in s||(o=r.src,o=Array.isArray(o)?tw(o):[o],s.result=Ji.expand(n,o)),s.result}}),"dest"in i&&(i.dest=r.dest),i}).flatten().value(),e)}});var Io=w((kRe,Iq)=>{var rw=Sm(),Aq=require("path"),lre=id(),cre=Q1(),Rq=Vm(),ure=OR(),CRe=require("stream").Stream,dre=Fk().PassThrough,er=Iq.exports={};er.file=Tq();er.collectStream=function(t,e){var r=[],n=0;t.on("error",e),t.on("data",function(i){r.push(i),n+=i.length}),t.on("end",function(){var i=Buffer.alloc(n),s=0;r.forEach(function(o){o.copy(i,s),s+=o.length}),e(null,i)})};er.dateify=function(t){return t=t||new Date,t instanceof Date?t=t:typeof t=="string"?t=new Date(t):t=new Date,t};er.defaults=function(t,e,r){var n=arguments;return n[0]=n[0]||{},ure(...n)};er.isStream=function(t){return lre(t)};er.lazyReadStream=function(t){return new cre.Readable(function(){return rw.createReadStream(t)})};er.normalizeInputSource=function(t){return t===null?Buffer.alloc(0):typeof t=="string"?Buffer.from(t):er.isStream(t)?t.pipe(new dre):t};er.sanitizePath=function(t){return Rq(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,"")};er.trailingSlashIt=function(t){return t.slice(-1)!=="/"?t+"/":t};er.unixifyPath=function(t){return Rq(t,!1).replace(/^\w+:/,"")};er.walkdir=function(t,e,r){var n=[];typeof e=="function"&&(r=e,e=t),rw.readdir(t,function(i,s){var o=0,a,l;if(i)return r(i);(function c(){if(a=s[o++],!a)return r(null,n);l=Aq.join(t,a),rw.stat(l,function(u,d){n.push({path:l,relative:Aq.relative(e,l).replace(/\\/g,"/"),stats:d}),d&&d.isDirectory()?er.walkdir(l,e,function(p,f){if(p)return r(p);f.forEach(function(y){n.push(y)}),c()}):c()})})()})}});var Oq=w((kq,Nq)=>{var fre=require("util"),hre={ABORTED:"archive was aborted",DIRECTORYDIRPATHREQUIRED:"diretory dirpath argument must be a non-empty string value",DIRECTORYFUNCTIONINVALIDDATA:"invalid data returned by directory custom data function",ENTRYNAMEREQUIRED:"entry name must be a non-empty string value",FILEFILEPATHREQUIRED:"file filepath argument must be a non-empty string value",FINALIZING:"archive already finalizing",QUEUECLOSED:"queue closed",NOENDMETHOD:"no suitable finalize/end method defined by module",DIRECTORYNOTSUPPORTED:"support for directory entries not defined by module",FORMATSET:"archive format already set",INPUTSTEAMBUFFERREQUIRED:"input source must be valid Stream or Buffer instance",MODULESET:"module already set",SYMLINKNOTSUPPORTED:"support for symlink entries not defined by module",SYMLINKFILEPATHREQUIRED:"symlink filepath argument must be a non-empty string value",SYMLINKTARGETREQUIRED:"symlink target argument must be a non-empty string value",ENTRYNOTSUPPORTED:"entry not supported"};function Cq(t,e){Error.captureStackTrace(this,this.constructor),this.message=hre[t]||t,this.code=t,this.data=e}fre.inherits(Cq,Error);kq=Nq.exports=Cq});var Fe=w((NRe,qq)=>{"use strict";var nw=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};qq.exports={AggregateError:nw,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var iw=w((ORe,Pq)=>{"use strict";Pq.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Lt=w((qRe,Dq)=>{"use strict";var{format:pre,inspect:Ff}=iw(),{AggregateError:gre}=Fe(),mre=globalThis.AggregateError||gre,yre=Symbol("kIsNodeError"),bre=["string","function","number","object","Function","Object","boolean","bigint","symbol"],wre=/^([A-Z][a-z0-9]*)+$/,_re="__node_internal_",Bf={};function Zi(t,e){if(!t)throw new Bf.ERR_INTERNAL_ASSERTION(e)}function Lq(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function vre(t,e,r){if(typeof e=="function")return Zi(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Zi(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:pre(e,...r)}function Tt(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(vre(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[yre]=!0,Bf[t]=n}function Mq(t){let e=_re+t.name;return Object.defineProperty(t,"name",{value:e}),t}function Sre(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new mre([e,t],e.message);return r.code=e.code,r}return t||e}var sw=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Bf.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Tt("ERR_ASSERTION","%s",Error);Tt("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Zi(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)Zi(typeof l=="string","All expected entries have to be of type string"),bre.includes(l)?i.push(l.toLowerCase()):wre.test(l)?s.push(l):(Zi(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=Ff(r,{depth:-1});n+=`. Received ${l}`}}else{let l=Ff(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);Tt("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=Ff(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Tt("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Tt("ERR_MISSING_ARGS",(...t)=>{Zi(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Tt("ERR_OUT_OF_RANGE",(t,e,r)=>{Zi(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=Lq(String(r));else if(typeof r=="bigint"){n=String(r);let i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=Lq(n)),n+="n"}else n=Ff(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Tt("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Tt("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Tt("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Tt("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Tt("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Tt("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Tt("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Tt("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Tt("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Tt("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Tt("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);Dq.exports={AbortError:sw,aggregateTwoErrors:Mq(Sre),hideStackFrames:Mq,codes:Bf}});var zt=w((PRe,aw)=>{"use strict";var Ere=require("buffer"),{format:xre,inspect:Tre}=iw(),{codes:{ERR_INVALID_ARG_TYPE:ow}}=Lt(),{kResistStopPropagation:Are,AggregateError:Rre,SymbolDispose:Ire}=Fe(),Cre=globalThis.AbortSignal||et().AbortSignal,kre=globalThis.AbortController||et().AbortController,Nre=Object.getPrototypeOf(async function(){}).constructor,$q=globalThis.Blob||Ere.Blob,Ore=typeof $q<"u"?function(e){return e instanceof $q}:function(e){return!1},Fq=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ow(e,"AbortSignal",t)},qre=(t,e)=>{if(typeof t!="function")throw new ow(e,"Function",t)};aw.exports={AggregateError:Rre,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format:xre,inspect:Tre,types:{isAsyncFunction(t){return t instanceof Nre},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:Ore,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,r){if(e===void 0)throw new ow("signal","AbortSignal",e);Fq(e,"signal"),qre(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[Are]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[Ire](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:Cre.any||function(e){if(e.length===1)return e[0];let r=new kre,n=()=>r.abort();return e.forEach(i=>{Fq(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};aw.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var ko=w((LRe,Yq)=>{"use strict";var{ArrayIsArray:cw,ArrayPrototypeIncludes:Wq,ArrayPrototypeJoin:zq,ArrayPrototypeMap:Pre,NumberIsInteger:uw,NumberIsNaN:Lre,NumberMAX_SAFE_INTEGER:Mre,NumberMIN_SAFE_INTEGER:Dre,NumberParseInt:$re,ObjectPrototypeHasOwnProperty:Fre,RegExpPrototypeExec:Hq,String:Bre,StringPrototypeToUpperCase:jre,StringPrototypeTrim:Ure}=Fe(),{hideStackFrames:dr,codes:{ERR_SOCKET_BAD_PORT:Wre,ERR_INVALID_ARG_TYPE:Mt,ERR_INVALID_ARG_VALUE:Co,ERR_OUT_OF_RANGE:Qi,ERR_UNKNOWN_SIGNAL:Bq}}=Lt(),{normalizeEncoding:zre}=zt(),{isAsyncFunction:Hre,isArrayBufferView:Vre}=zt().types,jq={};function Gre(t){return t===(t|0)}function Kre(t){return t===t>>>0}var Yre=/^[0-7]+$/,Jre="must be a 32-bit unsigned integer or an octal string";function Zre(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(Hq(Yre,t)===null)throw new Co(e,t,Jre);t=$re(t,8)}return Vq(t,e),t}var Qre=dr((t,e,r=Dre,n=Mre)=>{if(typeof t!="number")throw new Mt(e,"number",t);if(!uw(t))throw new Qi(e,"an integer",t);if(t<r||t>n)throw new Qi(e,`>= ${r} && <= ${n}`,t)}),Xre=dr((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Mt(e,"number",t);if(!uw(t))throw new Qi(e,"an integer",t);if(t<r||t>n)throw new Qi(e,`>= ${r} && <= ${n}`,t)}),Vq=dr((t,e,r=!1)=>{if(typeof t!="number")throw new Mt(e,"number",t);if(!uw(t))throw new Qi(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new Qi(e,`>= ${n} && <= ${i}`,t)});function dw(t,e){if(typeof t!="string")throw new Mt(e,"string",t)}function ene(t,e,r=void 0,n){if(typeof t!="number")throw new Mt(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&Lre(t))throw new Qi(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var tne=dr((t,e,r)=>{if(!Wq(r,t)){let i="must be one of: "+zq(Pre(r,s=>typeof s=="string"?`'${s}'`:Bre(s)),", ");throw new Co(e,t,i)}});function Gq(t,e){if(typeof t!="boolean")throw new Mt(e,"boolean",t)}function lw(t,e,r){return t==null||!Fre(t,e)?r:t[e]}var rne=dr((t,e,r=null)=>{let n=lw(r,"allowArray",!1),i=lw(r,"allowFunction",!1);if(!lw(r,"nullable",!1)&&t===null||!n&&cw(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Mt(e,"Object",t)}),nne=dr((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Mt(e,"a dictionary",t)}),jf=dr((t,e,r=0)=>{if(!cw(t))throw new Mt(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Co(e,t,n)}});function ine(t,e){jf(t,e);for(let r=0;r<t.length;r++)dw(t[r],`${e}[${r}]`)}function sne(t,e){jf(t,e);for(let r=0;r<t.length;r++)Gq(t[r],`${e}[${r}]`)}function one(t,e){jf(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new Mt(i,"AbortSignal",n);Kq(n,i)}}function ane(t,e="signal"){if(dw(t,e),jq[t]===void 0)throw jq[jre(t)]!==void 0?new Bq(t+" (signals must use all capital letters)"):new Bq(t)}var lne=dr((t,e="buffer")=>{if(!Vre(t))throw new Mt(e,["Buffer","TypedArray","DataView"],t)});function cne(t,e){let r=zre(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Co("encoding",e,`is invalid for data of length ${n}`)}function une(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&Ure(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new Wre(e,t,r);return t|0}var Kq=dr((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Mt(e,"AbortSignal",t)}),dne=dr((t,e)=>{if(typeof t!="function")throw new Mt(e,"Function",t)}),fne=dr((t,e)=>{if(typeof t!="function"||Hre(t))throw new Mt(e,"Function",t)}),hne=dr((t,e)=>{if(t!==void 0)throw new Mt(e,"undefined",t)});function pne(t,e,r){if(!Wq(r,t))throw new Mt(e,`('${zq(r,"|")}')`,t)}var gne=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Uq(t,e){if(typeof t>"u"||!Hq(gne,t))throw new Co(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function mne(t){if(typeof t=="string")return Uq(t,"hints"),t;if(cw(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];Uq(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Co("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Yq.exports={isInt32:Gre,isUint32:Kre,parseFileMode:Zre,validateArray:jf,validateStringArray:ine,validateBooleanArray:sne,validateAbortSignalArray:one,validateBoolean:Gq,validateBuffer:lne,validateDictionary:nne,validateEncoding:cne,validateFunction:dne,validateInt32:Xre,validateInteger:Qre,validateNumber:ene,validateObject:rne,validateOneOf:tne,validatePlainFunction:fne,validatePort:une,validateSignalName:ane,validateString:dw,validateUint32:Vq,validateUndefined:hne,validateUnion:pne,validateAbortSignal:Kq,validateLinkHeaderValue:mne}});var Yr=w((MRe,uP)=>{"use strict";var{SymbolAsyncIterator:Jq,SymbolIterator:Zq,SymbolFor:Xi}=Fe(),Qq=Xi("nodejs.stream.destroyed"),Xq=Xi("nodejs.stream.errored"),fw=Xi("nodejs.stream.readable"),hw=Xi("nodejs.stream.writable"),eP=Xi("nodejs.stream.disturbed"),yne=Xi("nodejs.webstream.isClosedPromise"),bne=Xi("nodejs.webstream.controllerErrorFunction");function Uf(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function Wf(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function wne(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Kr(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function tP(t){return!!(t&&!Kr(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function rP(t){return!!(t&&!Kr(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function nP(t){return!!(t&&!Kr(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function _ne(t){return tP(t)||rP(t)||nP(t)}function vne(t,e){return t==null?!1:e===!0?typeof t[Jq]=="function":e===!1?typeof t[Zq]=="function":typeof t[Jq]=="function"||typeof t[Zq]=="function"}function zf(t){if(!Kr(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[Qq]||n!=null&&n.destroyed)}function iP(t){if(!Wf(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Sne(t,e){if(!Wf(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function Ene(t){if(!Uf(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function sP(t,e){if(!Uf(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function oP(t){return t&&t[fw]!=null?t[fw]:typeof t?.readable!="boolean"?null:zf(t)?!1:Uf(t)&&t.readable&&!sP(t)}function aP(t){return t&&t[hw]!=null?t[hw]:typeof t?.writable!="boolean"?null:zf(t)?!1:Wf(t)&&t.writable&&!iP(t)}function xne(t,e){return Kr(t)?zf(t)?!0:!(e?.readable!==!1&&oP(t)||e?.writable!==!1&&aP(t)):null}function Tne(t){var e,r;return Kr(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Ane(t){var e,r;return Kr(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Rne(t){if(!Kr(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&lP(t)?t._closed:null}function lP(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function cP(t){return typeof t._sent100=="boolean"&&lP(t)}function Ine(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Cne(t){if(!Kr(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&cP(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function kne(t){var e;return!!(t&&((e=t[eP])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Nne(t){var e,r,n,i,s,o,a,l,c,u;return!!(t&&((e=(r=(n=(i=(s=(o=t[Xq])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}uP.exports={isDestroyed:zf,kIsDestroyed:Qq,isDisturbed:kne,kIsDisturbed:eP,isErrored:Nne,kIsErrored:Xq,isReadable:oP,kIsReadable:fw,kIsClosedPromise:yne,kControllerErrorFunction:bne,kIsWritable:hw,isClosed:Rne,isDuplexNodeStream:wne,isFinished:xne,isIterable:vne,isReadableNodeStream:Uf,isReadableStream:tP,isReadableEnded:Ene,isReadableFinished:sP,isReadableErrored:Ane,isNodeStream:Kr,isWebStream:_ne,isWritable:aP,isWritableNodeStream:Wf,isWritableStream:rP,isWritableEnded:iP,isWritableFinished:Sne,isWritableErrored:Tne,isServerRequest:Ine,isServerResponse:cP,willEmitClose:Cne,isTransformStream:nP}});var Tn=w((DRe,bw)=>{"use strict";var Xn=Ae(),{AbortError:wP,codes:One}=Lt(),{ERR_INVALID_ARG_TYPE:qne,ERR_STREAM_PREMATURE_CLOSE:dP}=One,{kEmptyObject:gw,once:mw}=zt(),{validateAbortSignal:Pne,validateFunction:Lne,validateObject:Mne,validateBoolean:Dne}=ko(),{Promise:$ne,PromisePrototypeThen:Fne,SymbolDispose:_P}=Fe(),{isClosed:Bne,isReadable:fP,isReadableNodeStream:pw,isReadableStream:jne,isReadableFinished:hP,isReadableErrored:pP,isWritable:gP,isWritableNodeStream:mP,isWritableStream:Une,isWritableFinished:yP,isWritableErrored:bP,isNodeStream:Wne,willEmitClose:zne,kIsClosedPromise:Hne}=Yr(),No;function Vne(t){return t.setHeader&&typeof t.abort=="function"}var yw=()=>{};function vP(t,e,r){var n,i;if(arguments.length===2?(r=e,e=gw):e==null?e=gw:Mne(e,"options"),Lne(r,"callback"),Pne(e.signal,"options.signal"),r=mw(r),jne(t)||Une(t))return Gne(t,e,r);if(!Wne(t))throw new qne("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:pw(t),o=(i=e.writable)!==null&&i!==void 0?i:mP(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||p()},u=zne(t)&&pw(t)===s&&mP(t)===o,d=yP(t,!1),p=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&r.call(t)},f=hP(t,!1),y=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&r.call(t)},h=A=>{r.call(t,A)},m=Bne(t),g=()=>{m=!0;let A=bP(t)||pP(t);if(A&&typeof A!="boolean")return r.call(t,A);if(s&&!f&&pw(t,!0)&&!hP(t,!1))return r.call(t,new dP);if(o&&!d&&!yP(t,!1))return r.call(t,new dP);r.call(t)},E=()=>{m=!0;let A=bP(t)||pP(t);if(A&&typeof A!="boolean")return r.call(t,A);r.call(t)},b=()=>{t.req.on("finish",p)};Vne(t)?(t.on("complete",p),u||t.on("abort",g),t.req?b():t.on("request",b)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",g),t.on("end",y),t.on("finish",p),e.error!==!1&&t.on("error",h),t.on("close",g),m?Xn.nextTick(g):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||Xn.nextTick(E):(!s&&(!u||fP(t))&&(d||gP(t)===!1)||!o&&(!u||gP(t))&&(f||fP(t)===!1)||l&&t.req&&t.aborted)&&Xn.nextTick(E);let v=()=>{r=yw,t.removeListener("aborted",g),t.removeListener("complete",p),t.removeListener("abort",g),t.removeListener("request",b),t.req&&t.req.removeListener("finish",p),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",p),t.removeListener("end",y),t.removeListener("error",h),t.removeListener("close",g)};if(e.signal&&!m){let A=()=>{let k=r;v(),k.call(t,new wP(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Xn.nextTick(A);else{No=No||zt().addAbortListener;let k=No(e.signal,A),R=r;r=mw((...N)=>{k[_P](),R.apply(t,N)})}}return v}function Gne(t,e,r){let n=!1,i=yw;if(e.signal)if(i=()=>{n=!0,r.call(t,new wP(void 0,{cause:e.signal.reason}))},e.signal.aborted)Xn.nextTick(i);else{No=No||zt().addAbortListener;let o=No(e.signal,i),a=r;r=mw((...l)=>{o[_P](),a.apply(t,l)})}let s=(...o)=>{n||Xn.nextTick(()=>r.apply(t,o))};return Fne(t[Hne].promise,s,s),yw}function Kne(t,e){var r;let n=!1;return e===null&&(e=gw),(r=e)!==null&&r!==void 0&&r.cleanup&&(Dne(e.cleanup,"cleanup"),n=e.cleanup),new $ne((i,s)=>{let o=vP(t,e,a=>{n&&o(),a?s(a):i()})})}bw.exports=vP;bw.exports.finished=Kne});var es=w(($Re,CP)=>{"use strict";var Jr=Ae(),{aggregateTwoErrors:Yne,codes:{ERR_MULTIPLE_CALLBACK:Jne},AbortError:Zne}=Lt(),{Symbol:xP}=Fe(),{kIsDestroyed:Qne,isDestroyed:Xne,isFinished:eie,isServerRequest:tie}=Yr(),TP=xP("kDestroy"),ww=xP("kConstruct");function AP(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function rie(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(AP(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?SP(this,t,e):this.once(TP,function(s){SP(this,Yne(s,t),e)}),this)}function SP(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;AP(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?Jr.nextTick(nie,t,s):Jr.nextTick(RP,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function nie(t,e){_w(t,e),RP(t)}function RP(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function _w(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function iie(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function vw(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Jr.nextTick(_w,t,e):_w(t,e))}function sie(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(ww,e),!(t.listenerCount(ww)>1)&&Jr.nextTick(oie,t)}function oie(t){let e=!1;function r(n){if(e){vw(t,n??new Jne);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(TP,n):n?vw(t,n,!0):Jr.nextTick(aie,t)}try{t._construct(n=>{Jr.nextTick(r,n)})}catch(n){Jr.nextTick(r,n)}}function aie(t){t.emit(ww)}function EP(t){return t?.setHeader&&typeof t.abort=="function"}function IP(t){t.emit("close")}function lie(t,e){t.emit("error",e),Jr.nextTick(IP,t)}function cie(t,e){!t||Xne(t)||(!e&&!eie(t)&&(e=new Zne),tie(t)?(t.socket=null,t.destroy(e)):EP(t)?t.abort():EP(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Jr.nextTick(lie,t,e):Jr.nextTick(IP,t),t.destroyed||(t[Qne]=!0))}CP.exports={construct:sie,destroyer:cie,destroy:rie,undestroy:iie,errorOrDestroy:vw}});var Gf=w((FRe,NP)=>{"use strict";var{ArrayIsArray:uie,ObjectSetPrototypeOf:kP}=Fe(),{EventEmitter:Hf}=require("events");function Vf(t){Hf.call(this,t)}kP(Vf.prototype,Hf.prototype);kP(Vf,Hf);Vf.prototype.pipe=function(t,e){let r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),Hf.listenerCount(this,"error")===0&&this.emit("error",u)}Sw(r,"error",l),Sw(t,"error",l);function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function Sw(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):uie(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}NP.exports={Stream:Vf,prependListener:Sw}});var Xl=w((BRe,Kf)=>{"use strict";var{SymbolDispose:die}=Fe(),{AbortError:OP,codes:fie}=Lt(),{isNodeStream:qP,isWebStream:hie,kControllerErrorFunction:pie}=Yr(),gie=Tn(),{ERR_INVALID_ARG_TYPE:PP}=fie,Ew,mie=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new PP(e,"AbortSignal",t)};Kf.exports.addAbortSignal=function(e,r){if(mie(e,"signal"),!qP(r)&&!hie(r))throw new PP("stream",["ReadableStream","WritableStream","Stream"],r);return Kf.exports.addAbortSignalNoValidate(e,r)};Kf.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=qP(e)?()=>{e.destroy(new OP(void 0,{cause:t.reason}))}:()=>{e[pie](new OP(void 0,{cause:t.reason}))};if(t.aborted)r();else{Ew=Ew||zt().addAbortListener;let n=Ew(t,r);gie(e,n[die])}return e}});var DP=w((URe,MP)=>{"use strict";var{StringPrototypeSlice:LP,SymbolIterator:yie,TypedArrayPrototypeSet:Yf,Uint8Array:bie}=Fe(),{Buffer:xw}=require("buffer"),{inspect:wie}=zt();MP.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return xw.alloc(0);let r=xw.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)Yf(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[yie](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=LP(s,0,e),this.head=n,n.data=LP(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=xw.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)Yf(r,o,n-e),e-=o.length;else{e===o.length?(Yf(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(Yf(r,new bie(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return wie(this,{...r,depth:0,customInspect:!1})}}});var ec=w((WRe,jP)=>{"use strict";var{MathFloor:_ie,NumberIsInteger:vie}=Fe(),{validateInteger:Sie}=ko(),{ERR_INVALID_ARG_VALUE:Eie}=Lt().codes,$P=16*1024,FP=16;function xie(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function BP(t){return t?FP:$P}function Tie(t,e){Sie(e,"value",0),t?FP=e:$P=e}function Aie(t,e,r,n){let i=xie(e,n,r);if(i!=null){if(!vie(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new Eie(s,i)}return _ie(i)}return BP(t.objectMode)}jP.exports={getHighWaterMark:Aie,getDefaultHighWaterMark:BP,setDefaultHighWaterMark:Tie}});var Tw=w((zRe,HP)=>{"use strict";var UP=Ae(),{PromisePrototypeThen:Rie,SymbolAsyncIterator:WP,SymbolIterator:zP}=Fe(),{Buffer:Iie}=require("buffer"),{ERR_INVALID_ARG_TYPE:Cie,ERR_STREAM_NULL_VALUES:kie}=Lt().codes;function Nie(t,e,r){let n;if(typeof e=="string"||e instanceof Iie)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[WP])i=!0,n=e[WP]();else if(e&&e[zP])i=!1,n=e[zP]();else throw new Cie("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){Rie(a(c),()=>UP.nextTick(u,c),d=>UP.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof n.throw=="function";if(u&&d){let{value:p,done:f}=await n.throw(c);if(await p,f)return}if(typeof n.return=="function"){let{value:p}=await n.return();await p}}async function l(){for(;;){try{let{value:c,done:u}=i?await n.next():n.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new kie;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}HP.exports=Nie});var rc=w((HRe,cL)=>{"use strict";var Rr=Ae(),{ArrayPrototypeIndexOf:Oie,NumberIsInteger:qie,NumberIsNaN:Pie,NumberParseInt:Lie,ObjectDefineProperties:qw,ObjectKeys:Mie,ObjectSetPrototypeOf:KP,Promise:YP,SafeSet:Die,SymbolAsyncDispose:$ie,SymbolAsyncIterator:Fie,Symbol:Bie}=Fe();cL.exports=J;J.ReadableState=Xf;var{EventEmitter:jie}=require("events"),{Stream:ei,prependListener:Uie}=Gf(),{Buffer:Aw}=require("buffer"),{addAbortSignal:Wie}=Xl(),JP=Tn(),le=zt().debuglog("stream",t=>{le=t}),zie=DP(),Po=es(),{getHighWaterMark:Hie,getDefaultHighWaterMark:Vie}=ec(),{aggregateTwoErrors:VP,codes:{ERR_INVALID_ARG_TYPE:Gie,ERR_METHOD_NOT_IMPLEMENTED:Kie,ERR_OUT_OF_RANGE:Yie,ERR_STREAM_PUSH_AFTER_EOF:Jie,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Zie},AbortError:Qie}=Lt(),{validateObject:Xie}=ko(),ts=Bie("kPaused"),{StringDecoder:ZP}=vl(),ese=Tw();KP(J.prototype,ei.prototype);KP(J,ei);var Rw=()=>{},{errorOrDestroy:Oo}=Po,qo=1,tse=2,QP=4,tc=8,XP=16,Jf=32,Zf=64,eL=128,rse=256,nse=512,ise=1024,Nw=2048,Ow=4096,sse=8192,ose=16384,ase=32768,tL=65536,lse=1<<17,cse=1<<18;function lt(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}qw(Xf.prototype,{objectMode:lt(qo),ended:lt(tse),endEmitted:lt(QP),reading:lt(tc),constructed:lt(XP),sync:lt(Jf),needReadable:lt(Zf),emittedReadable:lt(eL),readableListening:lt(rse),resumeScheduled:lt(nse),errorEmitted:lt(ise),emitClose:lt(Nw),autoDestroy:lt(Ow),destroyed:lt(sse),closed:lt(ose),closeEmitted:lt(ase),multiAwaitDrain:lt(tL),readingMore:lt(lse),dataEmitted:lt(cse)});function Xf(t,e,r){typeof r!="boolean"&&(r=e instanceof Zr()),this.state=Nw|Ow|XP|Jf,t&&t.objectMode&&(this.state|=qo),r&&t&&t.readableObjectMode&&(this.state|=qo),this.highWaterMark=t?Hie(this,t,"readableHighWaterMark",r):Vie(!1),this.buffer=new zie,this.length=0,this.pipes=[],this.flowing=null,this[ts]=null,t&&t.emitClose===!1&&(this.state&=~Nw),t&&t.autoDestroy===!1&&(this.state&=~Ow),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new ZP(t.encoding),this.encoding=t.encoding)}function J(t){if(!(this instanceof J))return new J(t);let e=this instanceof Zr();this._readableState=new Xf(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Wie(t.signal,this)),ei.call(this,t),Po.construct(this,()=>{this._readableState.needReadable&&Qf(this,this._readableState)})}J.prototype.destroy=Po.destroy;J.prototype._undestroy=Po.undestroy;J.prototype._destroy=function(t,e){e(t)};J.prototype[jie.captureRejectionSymbol]=function(t){this.destroy(t)};J.prototype[$ie]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new Qie,this.destroy(t)),new YP((e,r)=>JP(this,n=>n&&n!==t?r(n):e(null)))};J.prototype.push=function(t,e){return rL(this,t,e,!1)};J.prototype.unshift=function(t,e){return rL(this,t,e,!0)};function rL(t,e,r,n){le("readableAddChunk",e);let i=t._readableState,s;if((i.state&qo)===0&&(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=Aw.from(e,r).toString(i.encoding):(e=Aw.from(e,r),r=""))):e instanceof Aw?r="":ei._isUint8Array(e)?(e=ei._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new Gie("chunk",["string","Buffer","Uint8Array"],e))),s)Oo(t,s);else if(e===null)i.state&=~tc,fse(t,i);else if((i.state&qo)!==0||e&&e.length>0)if(n)if((i.state&QP)!==0)Oo(t,new Zie);else{if(i.destroyed||i.errored)return!1;Iw(t,i,e,!0)}else if(i.ended)Oo(t,new Jie);else{if(i.destroyed||i.errored)return!1;i.state&=~tc,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?Iw(t,i,e,!1):Qf(t,i)):Iw(t,i,e,!1)}else n||(i.state&=~tc,Qf(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function Iw(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&tL)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&Zf)!==0&&eh(t)),Qf(t,e)}J.prototype.isPaused=function(){let t=this._readableState;return t[ts]===!0||t.flowing===!1};J.prototype.setEncoding=function(t){let e=new ZP(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var use=1073741824;function dse(t){if(t>use)throw new Yie("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function GP(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&qo)!==0?1:Pie(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}J.prototype.read=function(t){le("read",t),t===void 0?t=NaN:qie(t)||(t=Lie(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=dse(t)),t!==0&&(e.state&=~eL),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return le("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Cw(this):eh(this),null;if(t=GP(t,e),t===0&&e.ended)return e.length===0&&Cw(this),null;let n=(e.state&Zf)!==0;if(le("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,le("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,le("reading, ended or constructing",n);else if(n){le("do read"),e.state|=tc|Jf,e.length===0&&(e.state|=Zf);try{this._read(e.highWaterMark)}catch(s){Oo(this,s)}e.state&=~Jf,e.reading||(t=GP(r,e))}let i;return t>0?i=aL(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Cw(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function fse(t,e){if(le("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?eh(t):(e.needReadable=!1,e.emittedReadable=!0,nL(t))}}function eh(t){let e=t._readableState;le("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(le("emitReadable",e.flowing),e.emittedReadable=!0,Rr.nextTick(nL,t))}function nL(t){let e=t._readableState;le("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,sL(t)}function Qf(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Rr.nextTick(hse,t,e))}function hse(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(le("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}J.prototype._read=function(t){throw new Kie("_read()")};J.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new Die(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),le("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Rr.stdout&&t!==Rr.stderr?a:m;n.endEmitted?Rr.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(g,E){le("onunpipe"),g===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,u())}function a(){le("onend"),t.end()}let l,c=!1;function u(){le("cleanup"),t.removeListener("close",y),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",p),c=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(le("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(le("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=pse(r,t),t.on("drain",l))}r.on("data",p);function p(g){le("ondata");let E=t.write(g);le("dest.write",E),E===!1&&d()}function f(g){if(le("onerror",g),m(),t.removeListener("error",f),t.listenerCount("error")===0){let E=t._writableState||t._readableState;E&&!E.errorEmitted?Oo(t,g):t.emit("error",g)}}Uie(t,"error",f);function y(){t.removeListener("finish",h),m()}t.once("close",y);function h(){le("onfinish"),t.removeListener("close",y),m()}t.once("finish",h);function m(){le("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(le("pipe resume"),r.resume()),t};function pse(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(le("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(le("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}J.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=Oie(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};J.prototype.on=function(t,e){let r=ei.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,le("on readable",n.length,n.reading),n.length?eh(this):n.reading||Rr.nextTick(gse,this)),r};J.prototype.addListener=J.prototype.on;J.prototype.removeListener=function(t,e){let r=ei.prototype.removeListener.call(this,t,e);return t==="readable"&&Rr.nextTick(iL,this),r};J.prototype.off=J.prototype.removeListener;J.prototype.removeAllListeners=function(t){let e=ei.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Rr.nextTick(iL,this),e};function iL(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[ts]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function gse(t){le("readable nexttick read 0"),t.read(0)}J.prototype.resume=function(){let t=this._readableState;return t.flowing||(le("resume"),t.flowing=!t.readableListening,mse(this,t)),t[ts]=!1,this};function mse(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Rr.nextTick(yse,t,e))}function yse(t,e){le("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),sL(t),e.flowing&&!e.reading&&t.read(0)}J.prototype.pause=function(){return le("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(le("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ts]=!0,this};function sL(t){let e=t._readableState;for(le("flow",e.flowing);e.flowing&&t.read()!==null;);}J.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{Oo(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=Mie(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};J.prototype[Fie]=function(){return oL(this)};J.prototype.iterator=function(t){return t!==void 0&&Xie(t,"options"),oL(this,t)};function oL(t,e){typeof t.read!="function"&&(t=J.wrap(t,{objectMode:!0}));let r=bse(t,e);return r.stream=t,r}async function*bse(t,e){let r=Rw;function n(o){this===t?(r(),r=Rw):r=o}t.on("readable",n);let i,s=JP(t,{writable:!1},o=>{i=o?VP(i,o):null,r(),r=Rw});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new YP(n)}}}catch(o){throw i=VP(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Po.destroyer(t,null):(t.off("readable",n),s())}}qw(J.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});qw(Xf.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ts]!==!1},set(t){this[ts]=!!t}}});J._fromList=aL;function aL(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Cw(t){let e=t._readableState;le("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Rr.nextTick(wse,e,t))}function wse(t,e){if(le("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Rr.nextTick(_se,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function _se(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}J.from=function(t,e){return ese(J,t,e)};var kw;function lL(){return kw===void 0&&(kw={}),kw}J.fromWeb=function(t,e){return lL().newStreamReadableFromReadableStream(t,e)};J.toWeb=function(t,e){return lL().newReadableStreamFromStreamReadable(t,e)};J.wrap=function(t,e){var r,n;return new J({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){Po.destroyer(t,i),s(i)}}).wrap(t)}});var sh=w((VRe,vL)=>{"use strict";var rs=Ae(),{ArrayPrototypeSlice:fL,Error:vse,FunctionPrototypeSymbolHasInstance:hL,ObjectDefineProperty:pL,ObjectDefineProperties:Sse,ObjectSetPrototypeOf:gL,StringPrototypeToLowerCase:Ese,Symbol:xse,SymbolHasInstance:Tse}=Fe();vL.exports=ze;ze.WritableState=sc;var{EventEmitter:Ase}=require("events"),nc=Gf().Stream,{Buffer:th}=require("buffer"),ih=es(),{addAbortSignal:Rse}=Xl(),{getHighWaterMark:Ise,getDefaultHighWaterMark:Cse}=ec(),{ERR_INVALID_ARG_TYPE:kse,ERR_METHOD_NOT_IMPLEMENTED:Nse,ERR_MULTIPLE_CALLBACK:mL,ERR_STREAM_CANNOT_PIPE:Ose,ERR_STREAM_DESTROYED:ic,ERR_STREAM_ALREADY_FINISHED:qse,ERR_STREAM_NULL_VALUES:Pse,ERR_STREAM_WRITE_AFTER_END:Lse,ERR_UNKNOWN_ENCODING:yL}=Lt().codes,{errorOrDestroy:Lo}=ih;gL(ze.prototype,nc.prototype);gL(ze,nc);function Mw(){}var Mo=xse("kOnFinished");function sc(t,e,r){typeof r!="boolean"&&(r=e instanceof Zr()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Ise(this,t,"writableHighWaterMark",r):Cse(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Dse.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,nh(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Mo]=[]}function nh(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}sc.prototype.getBuffer=function(){return fL(this.buffered,this.bufferedIndex)};pL(sc.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ze(t){let e=this instanceof Zr();if(!e&&!hL(ze,this))return new ze(t);this._writableState=new sc(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&Rse(t.signal,this)),nc.call(this,t),ih.construct(this,()=>{let r=this._writableState;r.writing||$w(this,r),Fw(this,r)})}pL(ze,Tse,{__proto__:null,value:function(t){return hL(this,t)?!0:this!==ze?!1:t&&t._writableState instanceof sc}});ze.prototype.pipe=function(){Lo(this,new Ose)};function bL(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!th.isEncoding(r))throw new yL(r);typeof n!="function"&&(n=Mw)}if(e===null)throw new Pse;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=th.from(e,r),r="buffer");else if(e instanceof th)r="buffer";else if(nc._isUint8Array(e))e=nc._uint8ArrayToBuffer(e),r="buffer";else throw new kse("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new Lse:i.destroyed&&(s=new ic("write")),s?(rs.nextTick(n,s),Lo(t,s,!0),s):(i.pendingcb++,Mse(t,i,e,r,n))}ze.prototype.write=function(t,e,r){return bL(this,t,e,r)===!0};ze.prototype.cork=function(){this._writableState.corked++};ze.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||$w(this,t))};ze.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=Ese(e)),!th.isEncoding(e))throw new yL(e);return this._writableState.defaultEncoding=e,this};function Mse(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==Mw&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function uL(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new ic("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function dL(t,e,r,n){--e.pendingcb,n(r),Dw(e),Lo(t,r)}function Dse(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){Lo(t,new mL);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?rs.nextTick(dL,t,r,e,i):dL(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&$w(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},rs.nextTick($se,r.afterWriteTickInfo)):wL(t,r,1,i))}function $se({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,wL(t,e,r,n)}function wL(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&Dw(e),Fw(t,e)}function Dw(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new ic("write"))}let r=t[Mo].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new ic("end"))}nh(t)}function $w(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?Mw:c=>{for(let u=o;u<r.length;++u)r[u].callback(c)},l=e.allNoop&&o===0?r:fL(r,o);l.allBuffers=e.allBuffers,uL(t,e,!0,e.length,l,"",a),nh(e)}else{do{let{chunk:a,encoding:l,callback:c}=r[o];r[o++]=null;let u=i?1:a.length;uL(t,e,!1,u,a,l,c)}while(o<r.length&&!e.writing);o===r.length?nh(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}ze.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new Nse("_write()")};ze.prototype._writev=null;ze.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=bL(this,t,e);s instanceof vse&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,Fw(this,n,!0),n.ended=!0):n.finished?i=new qse("end"):n.destroyed&&(i=new ic("end"))),typeof r=="function"&&(i||n.finished?rs.nextTick(r,i):n[Mo].push(r)),this};function rh(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function Fse(t,e){let r=!1;function n(i){if(r){Lo(t,i??mL());return}if(r=!0,e.pendingcb--,i){let s=e[Mo].splice(0);for(let o=0;o<s.length;o++)s[o](i);Lo(t,i,e.sync)}else rh(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,rs.nextTick(Lw,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function Bse(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,Fse(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Fw(t,e,r){rh(e)&&(Bse(t,e),e.pendingcb===0&&(r?(e.pendingcb++,rs.nextTick((n,i)=>{rh(i)?Lw(n,i):i.pendingcb--},t,e)):rh(e)&&(e.pendingcb++,Lw(t,e))))}function Lw(t,e){e.pendingcb--,e.finished=!0;let r=e[Mo].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}Sse(ze.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var jse=ih.destroy;ze.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Mo].length)&&rs.nextTick(Dw,r),jse.call(this,t,e),this};ze.prototype._undestroy=ih.undestroy;ze.prototype._destroy=function(t,e){e(t)};ze.prototype[Ase.captureRejectionSymbol]=function(t){this.destroy(t)};var Pw;function _L(){return Pw===void 0&&(Pw={}),Pw}ze.fromWeb=function(t,e){return _L().newStreamWritableFromWritableStream(t,e)};ze.toWeb=function(t){return _L().newWritableStreamFromStreamWritable(t)}});var ML=w((GRe,LL)=>{var Bw=Ae(),Use=require("buffer"),{isReadable:Wse,isWritable:zse,isIterable:SL,isNodeStream:Hse,isReadableNodeStream:EL,isWritableNodeStream:xL,isDuplexNodeStream:Vse,isReadableStream:TL,isWritableStream:AL}=Yr(),RL=Tn(),{AbortError:qL,codes:{ERR_INVALID_ARG_TYPE:Gse,ERR_INVALID_RETURN_VALUE:IL}}=Lt(),{destroyer:$o}=es(),Kse=Zr(),PL=rc(),Yse=sh(),{createDeferredPromise:CL}=zt(),kL=Tw(),NL=globalThis.Blob||Use.Blob,Jse=typeof NL<"u"?function(e){return e instanceof NL}:function(e){return!1},Zse=globalThis.AbortController||et().AbortController,{FunctionPrototypeCall:OL}=Fe(),ti=class extends Kse{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};LL.exports=function t(e,r){if(Vse(e))return e;if(EL(e))return Do({readable:e});if(xL(e))return Do({writable:e});if(Hse(e))return Do({writable:!1,readable:!1});if(TL(e))return Do({readable:PL.fromWeb(e)});if(AL(e))return Do({writable:Yse.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=Qse(e);if(SL(i))return kL(ti,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=OL(l,i,d=>{if(d!=null)throw new IL("nully","body",d)},d=>{$o(c,d)});return c=new ti({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,Bw.nextTick(d,null)}catch(p){Bw.nextTick(d,p)}})},destroy:a})}throw new IL("Iterable, AsyncIterable or AsyncFunction",r,i)}if(Jse(e))return t(e.arrayBuffer());if(SL(e))return kL(ti,e,{objectMode:!0,writable:!1});if(TL(e?.readable)&&AL(e?.writable))return ti.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?EL(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?xL(e?.writable)?e?.writable:t(e.writable):void 0;return Do({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return OL(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{$o(i,s)}),i=new ti({objectMode:!0,writable:!1,read(){}})}throw new Gse(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function Qse(t){let{promise:e,resolve:r}=CL(),n=new Zse,i=n.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(Bw.nextTick(c),l)return;if(i.aborted)throw new qL(void 0,{cause:i.reason});({promise:e,resolve:r}=CL()),yield a}})(),{signal:i}),write(o,a,l){let c=r;r=null,c({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function Do(t){let e=t.readable&&typeof t.readable.read!="function"?PL.wrap(t.readable):t.readable,r=t.writable,n=!!Wse(e),i=!!zse(r),s,o,a,l,c;function u(d){let p=l;l=null,p?p(d):d&&c.destroy(d)}return c=new ti({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(RL(r,d=>{i=!1,d&&$o(e,d),u(d)}),c._write=function(d,p,f){r.write(d,p)?f():s=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(s){let d=s;s=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(RL(e,d=>{n=!1,d&&$o(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,p){!d&&l!==null&&(d=new qL),a=null,s=null,o=null,l===null?p(d):(l=p,$o(r,d),$o(e,d))},c}});var Zr=w((KRe,FL)=>{"use strict";var{ObjectDefineProperties:Xse,ObjectGetOwnPropertyDescriptor:An,ObjectKeys:eoe,ObjectSetPrototypeOf:DL}=Fe();FL.exports=Ir;var Ww=rc(),fr=sh();DL(Ir.prototype,Ww.prototype);DL(Ir,Ww);{let t=eoe(fr.prototype);for(let e=0;e<t.length;e++){let r=t[e];Ir.prototype[r]||(Ir.prototype[r]=fr.prototype[r])}}function Ir(t){if(!(this instanceof Ir))return new Ir(t);Ww.call(this,t),fr.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}Xse(Ir.prototype,{writable:{__proto__:null,...An(fr.prototype,"writable")},writableHighWaterMark:{__proto__:null,...An(fr.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...An(fr.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...An(fr.prototype,"writableBuffer")},writableLength:{__proto__:null,...An(fr.prototype,"writableLength")},writableFinished:{__proto__:null,...An(fr.prototype,"writableFinished")},writableCorked:{__proto__:null,...An(fr.prototype,"writableCorked")},writableEnded:{__proto__:null,...An(fr.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...An(fr.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var jw;function $L(){return jw===void 0&&(jw={}),jw}Ir.fromWeb=function(t,e){return $L().newStreamDuplexFromReadableWritablePair(t,e)};Ir.toWeb=function(t){return $L().newReadableWritablePairFromDuplex(t)};var Uw;Ir.from=function(t){return Uw||(Uw=ML()),Uw(t,"body")}});var Vw=w((YRe,jL)=>{"use strict";var{ObjectSetPrototypeOf:BL,Symbol:toe}=Fe();jL.exports=Rn;var{ERR_METHOD_NOT_IMPLEMENTED:roe}=Lt().codes,Hw=Zr(),{getHighWaterMark:noe}=ec();BL(Rn.prototype,Hw.prototype);BL(Rn,Hw);var oc=toe("kCallback");function Rn(t){if(!(this instanceof Rn))return new Rn(t);let e=t?noe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Hw.call(this,t),this._readableState.sync=!1,this[oc]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",ioe)}function zw(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function ioe(){this._final!==zw&&zw.call(this)}Rn.prototype._final=zw;Rn.prototype._transform=function(t,e,r){throw new roe("_transform()")};Rn.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[oc]=r})};Rn.prototype._read=function(){if(this[oc]){let t=this[oc];this[oc]=null,t()}}});var Kw=w((JRe,WL)=>{"use strict";var{ObjectSetPrototypeOf:UL}=Fe();WL.exports=Fo;var Gw=Vw();UL(Fo.prototype,Gw.prototype);UL(Fo,Gw);function Fo(t){if(!(this instanceof Fo))return new Fo(t);Gw.call(this,t)}Fo.prototype._transform=function(t,e,r){r(null,t)}});var ch=w((ZRe,KL)=>{var ac=Ae(),{ArrayIsArray:soe,Promise:ooe,SymbolAsyncIterator:aoe,SymbolDispose:loe}=Fe(),lh=Tn(),{once:coe}=zt(),uoe=es(),zL=Zr(),{aggregateTwoErrors:doe,codes:{ERR_INVALID_ARG_TYPE:n_,ERR_INVALID_RETURN_VALUE:Yw,ERR_MISSING_ARGS:foe,ERR_STREAM_DESTROYED:hoe,ERR_STREAM_PREMATURE_CLOSE:poe},AbortError:goe}=Lt(),{validateFunction:moe,validateAbortSignal:yoe}=ko(),{isIterable:ns,isReadable:Jw,isReadableNodeStream:ah,isNodeStream:HL,isTransformStream:Bo,isWebStream:boe,isReadableStream:Zw,isReadableFinished:woe}=Yr(),_oe=globalThis.AbortController||et().AbortController,Qw,Xw,e_;function VL(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=lh(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,uoe.destroyer(t,s||new hoe("pipe")))},cleanup:i}}function voe(t){return moe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function t_(t){if(ns(t))return t;if(ah(t))return Soe(t);throw new n_("val",["Readable","Iterable","AsyncIterable"],t)}async function*Soe(t){Xw||(Xw=rc()),yield*Xw.prototype[aoe].call(t)}async function oh(t,e,r,{end:n}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new ooe((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=lh(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&(e.end(),await a()),r()}catch(c){r(i!==c?doe(i,c):c)}finally{l(),e.off("drain",o)}}async function r_(t,e,r,{end:n}){Bo(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function Eoe(...t){return GL(t,coe(voe(t)))}function GL(t,e,r){if(t.length===1&&soe(t[0])&&(t=t[0]),t.length<2)throw new foe("streams");let n=new _oe,i=n.signal,s=r?.signal,o=[];yoe(s,"options.signal");function a(){y(new goe)}e_=e_||zt().addAbortListener;let l;s&&(l=e_(s,a));let c,u,d=[],p=0;function f(b){y(b,--p===0)}function y(b,v){var A;if(b&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=b),!(!c&&!v)){for(;d.length;)d.shift()(c);(A=l)===null||A===void 0||A[loe](),n.abort(),v&&(c||o.forEach(k=>k()),ac.nextTick(e,c,u))}}let h;for(let b=0;b<t.length;b++){let v=t[b],A=b<t.length-1,k=b>0,R=A||r?.end!==!1,N=b===t.length-1;if(HL(v)){let I=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var E=I;if(R){let{destroy:P,cleanup:D}=VL(v,A,k);d.push(P),Jw(v)&&N&&o.push(D)}v.on("error",I),Jw(v)&&N&&o.push(()=>{v.removeListener("error",I)})}if(b===0)if(typeof v=="function"){if(h=v({signal:i}),!ns(h))throw new Yw("Iterable, AsyncIterable or Stream","source",h)}else ns(v)||ah(v)||Bo(v)?h=v:h=zL.from(v);else if(typeof v=="function"){if(Bo(h)){var m;h=t_((m=h)===null||m===void 0?void 0:m.readable)}else h=t_(h);if(h=v(h,{signal:i}),A){if(!ns(h,!0))throw new Yw("AsyncIterable",`transform[${b-1}]`,h)}else{var g;Qw||(Qw=Kw());let I=new Qw({objectMode:!0}),P=(g=h)===null||g===void 0?void 0:g.then;if(typeof P=="function")p++,P.call(h,B=>{u=B,B!=null&&I.write(B),R&&I.end(),ac.nextTick(f)},B=>{I.destroy(B),ac.nextTick(f,B)});else if(ns(h,!0))p++,oh(h,I,f,{end:R});else if(Zw(h)||Bo(h)){let B=h.readable||h;p++,oh(B,I,f,{end:R})}else throw new Yw("AsyncIterable or Promise","destination",h);h=I;let{destroy:D,cleanup:F}=VL(h,!1,!0);d.push(D),N&&o.push(F)}}else if(HL(v)){if(ah(h)){p+=2;let I=xoe(h,v,f,{end:R});Jw(v)&&N&&o.push(I)}else if(Bo(h)||Zw(h)){let I=h.readable||h;p++,oh(I,v,f,{end:R})}else if(ns(h))p++,oh(h,v,f,{end:R});else throw new n_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=v}else if(boe(v)){if(ah(h))p++,r_(t_(h),v,f,{end:R});else if(Zw(h)||ns(h))p++,r_(h,v,f,{end:R});else if(Bo(h))p++,r_(h.readable,v,f,{end:R});else throw new n_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=v}else h=zL.from(v)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&ac.nextTick(a),h}function xoe(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new poe)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;woe(t)?ac.nextTick(o):t.once("end",o)}else r();return lh(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),lh(e,{readable:!1,writable:!0},r)}KL.exports={pipelineImpl:GL,pipeline:Eoe}});var s_=w((QRe,eM)=>{"use strict";var{pipeline:Toe}=ch(),uh=Zr(),{destroyer:Aoe}=es(),{isNodeStream:dh,isReadable:YL,isWritable:JL,isWebStream:i_,isTransformStream:is,isWritableStream:ZL,isReadableStream:QL}=Yr(),{AbortError:Roe,codes:{ERR_INVALID_ARG_VALUE:XL,ERR_MISSING_ARGS:Ioe}}=Lt(),Coe=Tn();eM.exports=function(...e){if(e.length===0)throw new Ioe("streams");if(e.length===1)return uh.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=uh.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=uh.from(e[f])}for(let f=0;f<e.length;++f)if(!(!dh(e[f])&&!i_(e[f]))){if(f<e.length-1&&!(YL(e[f])||QL(e[f])||is(e[f])))throw new XL(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(JL(e[f])||ZL(e[f])||is(e[f])))throw new XL(`streams[${f}]`,r[f],"must be writable")}let n,i,s,o,a;function l(f){let y=o;o=null,y?y(f):f?a.destroy(f):!p&&!d&&a.destroy()}let c=e[0],u=Toe(e,l),d=!!(JL(c)||ZL(c)||is(c)),p=!!(YL(u)||QL(u)||is(u));if(a=new uh({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:p}),d){if(dh(c))a._write=function(y,h,m){c.write(y,h)?m():n=m},a._final=function(y){c.end(),i=y},c.on("drain",function(){if(n){let y=n;n=null,y()}});else if(i_(c)){let h=(is(c)?c.writable:c).getWriter();a._write=async function(m,g,E){try{await h.ready,h.write(m).catch(()=>{}),E()}catch(b){E(b)}},a._final=async function(m){try{await h.ready,h.close().catch(()=>{}),i=m}catch(g){m(g)}}}let f=is(u)?u.readable:u;Coe(f,()=>{if(i){let y=i;i=null,y()}})}if(p){if(dh(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(i_(u)){let y=(is(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:m}=await y.read();if(!a.push(h))return;if(m){a.push(null);return}}catch{return}}}}return a._destroy=function(f,y){!f&&o!==null&&(f=new Roe),s=null,n=null,i=null,o===null?y(f):(o=y,dh(u)&&Aoe(u,f))},a}});var uM=w((XRe,l_)=>{"use strict";var koe=globalThis.AbortController||et().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Noe,ERR_INVALID_ARG_TYPE:lc,ERR_MISSING_ARGS:Ooe,ERR_OUT_OF_RANGE:qoe},AbortError:Qr}=Lt(),{validateAbortSignal:ss,validateInteger:tM,validateObject:os}=ko(),Poe=Fe().Symbol("kWeak"),Loe=Fe().Symbol("kResistStopPropagation"),{finished:Moe}=Tn(),Doe=s_(),{addAbortSignalNoValidate:$oe}=Xl(),{isWritable:Foe,isNodeStream:Boe}=Yr(),{deprecate:joe}=zt(),{ArrayPrototypePush:Uoe,Boolean:Woe,MathFloor:rM,Number:zoe,NumberIsNaN:Hoe,Promise:nM,PromiseReject:iM,PromiseResolve:Voe,PromisePrototypeThen:sM,Symbol:aM}=Fe(),fh=aM("kEmpty"),oM=aM("kEof");function Goe(t,e){if(e!=null&&os(e,"options"),e?.signal!=null&&ss(e.signal,"options.signal"),Boe(t)&&!Foe(t))throw new Noe("stream",t,"must be writable");let r=Doe(this,t);return e!=null&&e.signal&&$oe(e.signal,r),r}function hh(t,e){if(typeof t!="function")throw new lc("fn",["Function","AsyncFunction"],t);e!=null&&os(e,"options"),e?.signal!=null&&ss(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=rM(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=rM(e.highWaterMark)),tM(r,"options.concurrency",1),tM(n,"options.highWaterMark",0),n+=r,async function*(){let s=zt().AbortSignalAny([e?.signal].filter(Woe)),o=this,a=[],l={signal:s},c,u,d=!1,p=0;function f(){d=!0,y()}function y(){p-=1,h()}function h(){u&&!d&&p<r&&a.length<n&&(u(),u=null)}async function m(){try{for await(let g of o){if(d)return;if(s.aborted)throw new Qr;try{if(g=t(g,l),g===fh)continue;g=Voe(g)}catch(E){g=iM(E)}p+=1,sM(g,y,f),a.push(g),c&&(c(),c=null),!d&&(a.length>=n||p>=r)&&await new nM(E=>{u=E})}a.push(oM)}catch(g){let E=iM(g);sM(E,y,f),a.push(E)}finally{d=!0,c&&(c(),c=null)}}m();try{for(;;){for(;a.length>0;){let g=await a[0];if(g===oM)return;if(s.aborted)throw new Qr;g!==fh&&(yield g),a.shift(),h()}await new nM(g=>{c=g})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function Koe(t=void 0){return t!=null&&os(t,"options"),t?.signal!=null&&ss(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Qr({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function lM(t,e=void 0){for await(let r of a_.call(this,t,e))return!0;return!1}async function Yoe(t,e=void 0){if(typeof t!="function")throw new lc("fn",["Function","AsyncFunction"],t);return!await lM.call(this,async(...r)=>!await t(...r),e)}async function Joe(t,e){for await(let r of a_.call(this,t,e))return r}async function Zoe(t,e){if(typeof t!="function")throw new lc("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),fh}for await(let n of hh.call(this,r,e));}function a_(t,e){if(typeof t!="function")throw new lc("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:fh}return hh.call(this,r,e)}var o_=class extends Ooe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function Qoe(t,e,r){var n;if(typeof t!="function")throw new lc("reducer",["Function","AsyncFunction"],t);r!=null&&os(r,"options"),r?.signal!=null&&ss(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new Qr(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Moe(this.destroy(c)),c}let s=new koe,o=s.signal;if(r!=null&&r.signal){let c={once:!0,[Poe]:this,[Loe]:!0};r.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new Qr;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new o_}finally{s.abort()}return e}async function Xoe(t){t!=null&&os(t,"options"),t?.signal!=null&&ss(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Qr(void 0,{cause:t.signal.reason});Uoe(e,n)}return e}function eae(t,e){let r=hh.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function cM(t){if(t=zoe(t),Hoe(t))return 0;if(t<0)throw new qoe("number",">= 0",t);return t}function tae(t,e=void 0){return e!=null&&os(e,"options"),e?.signal!=null&&ss(e.signal,"options.signal"),t=cM(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Qr;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Qr;t--<=0&&(yield s)}}.call(this)}function rae(t,e=void 0){return e!=null&&os(e,"options"),e?.signal!=null&&ss(e.signal,"options.signal"),t=cM(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Qr;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Qr;if(t-- >0&&(yield s),t<=0)return}}.call(this)}l_.exports.streamReturningOperators={asIndexedPairs:joe(Koe,"readable.asIndexedPairs will be removed in a future version."),drop:tae,filter:a_,flatMap:eae,map:hh,take:rae,compose:Goe};l_.exports.promiseReturningOperators={every:Yoe,forEach:Zoe,reduce:Qoe,toArray:Xoe,some:lM,find:Joe}});var c_=w((eIe,dM)=>{"use strict";var{ArrayPrototypePop:nae,Promise:iae}=Fe(),{isIterable:sae,isNodeStream:oae,isWebStream:aae}=Yr(),{pipelineImpl:lae}=ch(),{finished:cae}=Tn();u_();function uae(...t){return new iae((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!oae(s)&&!sae(s)&&!aae(s)){let o=nae(t);n=o.signal,i=o.end}lae(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}dM.exports={finished:cae,pipeline:uae}});var u_=w((tIe,_M)=>{"use strict";var{Buffer:dae}=require("buffer"),{ObjectDefineProperty:In,ObjectKeys:pM,ReflectApply:gM}=Fe(),{promisify:{custom:mM}}=zt(),{streamReturningOperators:fM,promiseReturningOperators:hM}=uM(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:yM}}=Lt(),fae=s_(),{setDefaultHighWaterMark:hae,getDefaultHighWaterMark:pae}=ec(),{pipeline:bM}=ch(),{destroyer:gae}=es(),wM=Tn(),d_=c_(),cc=Yr(),Pe=_M.exports=Gf().Stream;Pe.isDestroyed=cc.isDestroyed;Pe.isDisturbed=cc.isDisturbed;Pe.isErrored=cc.isErrored;Pe.isReadable=cc.isReadable;Pe.isWritable=cc.isWritable;Pe.Readable=rc();for(let t of pM(fM)){let r=function(...n){if(new.target)throw yM();return Pe.Readable.from(gM(e,this,n))},e=fM[t];In(r,"name",{__proto__:null,value:e.name}),In(r,"length",{__proto__:null,value:e.length}),In(Pe.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let t of pM(hM)){let r=function(...n){if(new.target)throw yM();return gM(e,this,n)},e=hM[t];In(r,"name",{__proto__:null,value:e.name}),In(r,"length",{__proto__:null,value:e.length}),In(Pe.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}Pe.Writable=sh();Pe.Duplex=Zr();Pe.Transform=Vw();Pe.PassThrough=Kw();Pe.pipeline=bM;var{addAbortSignal:mae}=Xl();Pe.addAbortSignal=mae;Pe.finished=wM;Pe.destroy=gae;Pe.compose=fae;Pe.setDefaultHighWaterMark=hae;Pe.getDefaultHighWaterMark=pae;In(Pe,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return d_}});In(bM,mM,{__proto__:null,enumerable:!0,get(){return d_.pipeline}});In(wM,mM,{__proto__:null,enumerable:!0,get(){return d_.finished}});Pe.Stream=Pe;Pe._isUint8Array=function(e){return e instanceof Uint8Array};Pe._uint8ArrayToBuffer=function(e){return dae.from(e.buffer,e.byteOffset,e.byteLength)}});var f_=w((rIe,ne)=>{"use strict";var ct=require("stream");if(ct&&process.env.READABLE_STREAM==="disable"){let t=ct.promises;ne.exports._uint8ArrayToBuffer=ct._uint8ArrayToBuffer,ne.exports._isUint8Array=ct._isUint8Array,ne.exports.isDisturbed=ct.isDisturbed,ne.exports.isErrored=ct.isErrored,ne.exports.isReadable=ct.isReadable,ne.exports.Readable=ct.Readable,ne.exports.Writable=ct.Writable,ne.exports.Duplex=ct.Duplex,ne.exports.Transform=ct.Transform,ne.exports.PassThrough=ct.PassThrough,ne.exports.addAbortSignal=ct.addAbortSignal,ne.exports.finished=ct.finished,ne.exports.destroy=ct.destroy,ne.exports.pipeline=ct.pipeline,ne.exports.compose=ct.compose,Object.defineProperty(ct,"promises",{configurable:!0,enumerable:!0,get(){return t}}),ne.exports.Stream=ct.Stream}else{let t=u_(),e=c_(),r=t.Readable.destroy;ne.exports=t.Readable,ne.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,ne.exports._isUint8Array=t._isUint8Array,ne.exports.isDisturbed=t.isDisturbed,ne.exports.isErrored=t.isErrored,ne.exports.isReadable=t.isReadable,ne.exports.Readable=t.Readable,ne.exports.Writable=t.Writable,ne.exports.Duplex=t.Duplex,ne.exports.Transform=t.Transform,ne.exports.PassThrough=t.PassThrough,ne.exports.addAbortSignal=t.addAbortSignal,ne.exports.finished=t.finished,ne.exports.destroy=t.destroy,ne.exports.destroy=r,ne.exports.pipeline=t.pipeline,ne.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),ne.exports.Stream=t.Stream}ne.exports.default=ne.exports});var TM=w((nIe,xM)=>{var g_=require("fs"),SM=UT(),vM=zT(),h_=require("path"),Xr=Io(),yae=require("util").inherits,Je=Oq(),EM=f_().Transform,p_=process.platform==="win32",_e=function(t,e){if(!(this instanceof _e))return new _e(t,e);typeof t!="string"&&(e=t,t="zip"),e=this.options=Xr.defaults(e,{highWaterMark:1024*1024,statConcurrency:4}),EM.call(this,e),this._format=!1,this._module=!1,this._pending=0,this._pointer=0,this._entriesCount=0,this._entriesProcessedCount=0,this._fsEntriesTotalBytes=0,this._fsEntriesProcessedBytes=0,this._queue=vM.queue(this._onQueueTask.bind(this),1),this._queue.drain(this._onQueueDrain.bind(this)),this._statQueue=vM.queue(this._onStatQueueTask.bind(this),e.statConcurrency),this._statQueue.drain(this._onQueueDrain.bind(this)),this._state={aborted:!1,finalize:!1,finalizing:!1,finalized:!1,modulePiped:!1},this._streams=[]};yae(_e,EM);_e.prototype._abort=function(){this._state.aborted=!0,this._queue.kill(),this._statQueue.kill(),this._queue.idle()&&this._shutdown()};_e.prototype._append=function(t,e){e=e||{};var r={source:null,filepath:t};e.name||(e.name=t),e.sourcePath=t,r.data=e,this._entriesCount++,e.stats&&e.stats instanceof g_.Stats?(r=this._updateQueueTaskWithStats(r,e.stats),r&&(e.stats.size&&(this._fsEntriesTotalBytes+=e.stats.size),this._queue.push(r))):this._statQueue.push(r)};_e.prototype._finalize=function(){this._state.finalizing||this._state.finalized||this._state.aborted||(this._state.finalizing=!0,this._moduleFinalize(),this._state.finalizing=!1,this._state.finalized=!0)};_e.prototype._maybeFinalize=function(){return this._state.finalizing||this._state.finalized||this._state.aborted?!1:this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()?(this._finalize(),!0):!1};_e.prototype._moduleAppend=function(t,e,r){if(this._state.aborted){r();return}this._module.append(t,e,function(n){if(this._task=null,this._state.aborted){this._shutdown();return}if(n){this.emit("error",n),setImmediate(r);return}this.emit("entry",e),this._entriesProcessedCount++,e.stats&&e.stats.size&&(this._fsEntriesProcessedBytes+=e.stats.size),this.emit("progress",{entries:{total:this._entriesCount,processed:this._entriesProcessedCount},fs:{totalBytes:this._fsEntriesTotalBytes,processedBytes:this._fsEntriesProcessedBytes}}),setImmediate(r)}.bind(this))};_e.prototype._moduleFinalize=function(){typeof this._module.finalize=="function"?this._module.finalize():typeof this._module.end=="function"?this._module.end():this.emit("error",new Je("NOENDMETHOD"))};_e.prototype._modulePipe=function(){this._module.on("error",this._onModuleError.bind(this)),this._module.pipe(this),this._state.modulePiped=!0};_e.prototype._moduleSupports=function(t){return!this._module.supports||!this._module.supports[t]?!1:this._module.supports[t]};_e.prototype._moduleUnpipe=function(){this._module.unpipe(this),this._state.modulePiped=!1};_e.prototype._normalizeEntryData=function(t,e){t=Xr.defaults(t,{type:"file",name:null,date:null,mode:null,prefix:null,sourcePath:null,stats:!1}),e&&t.stats===!1&&(t.stats=e);var r=t.type==="directory";return t.name&&(typeof t.prefix=="string"&&t.prefix!==""&&(t.name=t.prefix+"/"+t.name,t.prefix=null),t.name=Xr.sanitizePath(t.name),t.type!=="symlink"&&t.name.slice(-1)==="/"?(r=!0,t.type="directory"):r&&(t.name+="/")),typeof t.mode=="number"?p_?t.mode&=511:t.mode&=4095:t.stats&&t.mode===null?(p_?t.mode=t.stats.mode&511:t.mode=t.stats.mode&4095,p_&&r&&(t.mode=493)):t.mode===null&&(t.mode=r?493:420),t.stats&&t.date===null?t.date=t.stats.mtime:t.date=Xr.dateify(t.date),t};_e.prototype._onModuleError=function(t){this.emit("error",t)};_e.prototype._onQueueDrain=function(){this._state.finalizing||this._state.finalized||this._state.aborted||this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize()};_e.prototype._onQueueTask=function(t,e){var r=()=>{t.data.callback&&t.data.callback(),e()};if(this._state.finalizing||this._state.finalized||this._state.aborted){r();return}this._task=t,this._moduleAppend(t.source,t.data,r)};_e.prototype._onStatQueueTask=function(t,e){if(this._state.finalizing||this._state.finalized||this._state.aborted){e();return}g_.lstat(t.filepath,function(r,n){if(this._state.aborted){setImmediate(e);return}if(r){this._entriesCount--,this.emit("warning",r),setImmediate(e);return}t=this._updateQueueTaskWithStats(t,n),t&&(n.size&&(this._fsEntriesTotalBytes+=n.size),this._queue.push(t)),setImmediate(e)}.bind(this))};_e.prototype._shutdown=function(){this._moduleUnpipe(),this.end()};_e.prototype._transform=function(t,e,r){t&&(this._pointer+=t.length),r(null,t)};_e.prototype._updateQueueTaskWithStats=function(t,e){if(e.isFile())t.data.type="file",t.data.sourceType="stream",t.source=Xr.lazyReadStream(t.filepath);else if(e.isDirectory()&&this._moduleSupports("directory"))t.data.name=Xr.trailingSlashIt(t.data.name),t.data.type="directory",t.data.sourcePath=Xr.trailingSlashIt(t.filepath),t.data.sourceType="buffer",t.source=Buffer.concat([]);else if(e.isSymbolicLink()&&this._moduleSupports("symlink")){var r=g_.readlinkSync(t.filepath),n=h_.dirname(t.filepath);t.data.type="symlink",t.data.linkname=h_.relative(n,h_.resolve(n,r)),t.data.sourceType="buffer",t.source=Buffer.concat([])}else return e.isDirectory()?this.emit("warning",new Je("DIRECTORYNOTSUPPORTED",t.data)):e.isSymbolicLink()?this.emit("warning",new Je("SYMLINKNOTSUPPORTED",t.data)):this.emit("warning",new Je("ENTRYNOTSUPPORTED",t.data)),null;return t.data=this._normalizeEntryData(t.data,e),t};_e.prototype.abort=function(){return this._state.aborted||this._state.finalized?this:(this._abort(),this)};_e.prototype.append=function(t,e){if(this._state.finalize||this._state.aborted)return this.emit("error",new Je("QUEUECLOSED")),this;if(e=this._normalizeEntryData(e),typeof e.name!="string"||e.name.length===0)return this.emit("error",new Je("ENTRYNAMEREQUIRED")),this;if(e.type==="directory"&&!this._moduleSupports("directory"))return this.emit("error",new Je("DIRECTORYNOTSUPPORTED",{name:e.name})),this;if(t=Xr.normalizeInputSource(t),Buffer.isBuffer(t))e.sourceType="buffer";else if(Xr.isStream(t))e.sourceType="stream";else return this.emit("error",new Je("INPUTSTEAMBUFFERREQUIRED",{name:e.name})),this;return this._entriesCount++,this._queue.push({data:e,source:t}),this};_e.prototype.directory=function(t,e,r){if(this._state.finalize||this._state.aborted)return this.emit("error",new Je("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new Je("DIRECTORYDIRPATHREQUIRED")),this;this._pending++,e===!1?e="":typeof e!="string"&&(e=t);var n=!1;typeof r=="function"?(n=r,r={}):typeof r!="object"&&(r={});var i={stat:!0,dot:!0};function s(){this._pending--,this._maybeFinalize()}function o(c){this.emit("error",c)}function a(c){l.pause();var u=!1,d=Object.assign({},r);d.name=c.relative,d.prefix=e,d.stats=c.stat,d.callback=l.resume.bind(l);try{if(n){if(d=n(d),d===!1)u=!0;else if(typeof d!="object")throw new Je("DIRECTORYFUNCTIONINVALIDDATA",{dirpath:t})}}catch(p){this.emit("error",p);return}if(u){l.resume();return}this._append(c.absolute,d)}var l=SM(t,i);return l.on("error",o.bind(this)),l.on("match",a.bind(this)),l.on("end",s.bind(this)),this};_e.prototype.file=function(t,e){return this._state.finalize||this._state.aborted?(this.emit("error",new Je("QUEUECLOSED")),this):typeof t!="string"||t.length===0?(this.emit("error",new Je("FILEFILEPATHREQUIRED")),this):(this._append(t,e),this)};_e.prototype.glob=function(t,e,r){this._pending++,e=Xr.defaults(e,{stat:!0,pattern:t});function n(){this._pending--,this._maybeFinalize()}function i(a){this.emit("error",a)}function s(a){o.pause();var l=Object.assign({},r);l.callback=o.resume.bind(o),l.stats=a.stat,l.name=a.relative,this._append(a.absolute,l)}var o=SM(e.cwd||".",e);return o.on("error",i.bind(this)),o.on("match",s.bind(this)),o.on("end",n.bind(this)),this};_e.prototype.finalize=function(){if(this._state.aborted){var t=new Je("ABORTED");return this.emit("error",t),Promise.reject(t)}if(this._state.finalize){var e=new Je("FINALIZING");return this.emit("error",e),Promise.reject(e)}this._state.finalize=!0,this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize();var r=this;return new Promise(function(n,i){var s;r._module.on("end",function(){s||n()}),r._module.on("error",function(o){s=!0,i(o)})})};_e.prototype.setFormat=function(t){return this._format?(this.emit("error",new Je("FORMATSET")),this):(this._format=t,this)};_e.prototype.setModule=function(t){return this._state.aborted?(this.emit("error",new Je("ABORTED")),this):this._state.module?(this.emit("error",new Je("MODULESET")),this):(this._module=t,this._modulePipe(),this)};_e.prototype.symlink=function(t,e,r){if(this._state.finalize||this._state.aborted)return this.emit("error",new Je("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new Je("SYMLINKFILEPATHREQUIRED")),this;if(typeof e!="string"||e.length===0)return this.emit("error",new Je("SYMLINKTARGETREQUIRED",{filepath:t})),this;if(!this._moduleSupports("symlink"))return this.emit("error",new Je("SYMLINKNOTSUPPORTED",{filepath:t})),this;var n={};return n.type="symlink",n.name=t.replace(/\\/g,"/"),n.linkname=e.replace(/\\/g,"/"),n.sourceType="buffer",typeof r=="number"&&(n.mode=r),this._entriesCount++,this._queue.push({data:n,source:Buffer.concat([])}),this};_e.prototype.pointer=function(){return this._pointer};_e.prototype.use=function(t){return this._streams.push(t),this};xM.exports=_e});var gh=w((iIe,AM)=>{var ph=AM.exports=function(){};ph.prototype.getName=function(){};ph.prototype.getSize=function(){};ph.prototype.getLastModifiedDate=function(){};ph.prototype.isDirectory=function(){}});var mh=w((sIe,RM)=>{var hr=RM.exports={};hr.dateToDos=function(t,e){e=e||!1;var r=e?t.getFullYear():t.getUTCFullYear();if(r<1980)return 2162688;if(r>=2044)return 2141175677;var n={year:r,month:e?t.getMonth():t.getUTCMonth(),date:e?t.getDate():t.getUTCDate(),hours:e?t.getHours():t.getUTCHours(),minutes:e?t.getMinutes():t.getUTCMinutes(),seconds:e?t.getSeconds():t.getUTCSeconds()};return n.year-1980<<25|n.month+1<<21|n.date<<16|n.hours<<11|n.minutes<<5|n.seconds/2};hr.dosToDate=function(t){return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(t&31)<<1)};hr.fromDosTime=function(t){return hr.dosToDate(t.readUInt32LE(0))};hr.getEightBytes=function(t){var e=Buffer.alloc(8);return e.writeUInt32LE(t%4294967296,0),e.writeUInt32LE(t/4294967296|0,4),e};hr.getShortBytes=function(t){var e=Buffer.alloc(2);return e.writeUInt16LE((t&65535)>>>0,0),e};hr.getShortBytesValue=function(t,e){return t.readUInt16LE(e)};hr.getLongBytes=function(t){var e=Buffer.alloc(4);return e.writeUInt32LE((t&4294967295)>>>0,0),e};hr.getLongBytesValue=function(t,e){return t.readUInt32LE(e)};hr.toDosTime=function(t){return hr.getLongBytes(hr.dateToDos(t))}});var m_=w((oIe,qM)=>{var IM=mh(),CM=8,kM=1,bae=4,wae=2,NM=64,OM=2048,At=qM.exports=function(){return this instanceof At?(this.descriptor=!1,this.encryption=!1,this.utf8=!1,this.numberOfShannonFanoTrees=0,this.strongEncryption=!1,this.slidingDictionarySize=0,this):new At};At.prototype.encode=function(){return IM.getShortBytes((this.descriptor?CM:0)|(this.utf8?OM:0)|(this.encryption?kM:0)|(this.strongEncryption?NM:0))};At.prototype.parse=function(t,e){var r=IM.getShortBytesValue(t,e),n=new At;return n.useDataDescriptor((r&CM)!==0),n.useUTF8ForNames((r&OM)!==0),n.useStrongEncryption((r&NM)!==0),n.useEncryption((r&kM)!==0),n.setSlidingDictionarySize((r&wae)!==0?8192:4096),n.setNumberOfShannonFanoTrees((r&bae)!==0?3:2),n};At.prototype.setNumberOfShannonFanoTrees=function(t){this.numberOfShannonFanoTrees=t};At.prototype.getNumberOfShannonFanoTrees=function(){return this.numberOfShannonFanoTrees};At.prototype.setSlidingDictionarySize=function(t){this.slidingDictionarySize=t};At.prototype.getSlidingDictionarySize=function(){return this.slidingDictionarySize};At.prototype.useDataDescriptor=function(t){this.descriptor=t};At.prototype.usesDataDescriptor=function(){return this.descriptor};At.prototype.useEncryption=function(t){this.encryption=t};At.prototype.usesEncryption=function(){return this.encryption};At.prototype.useStrongEncryption=function(t){this.strongEncryption=t};At.prototype.usesStrongEncryption=function(){return this.strongEncryption};At.prototype.useUTF8ForNames=function(t){this.utf8=t};At.prototype.usesUTF8ForNames=function(){return this.utf8}});var LM=w((aIe,PM)=>{PM.exports={PERM_MASK:4095,FILE_TYPE_FLAG:61440,LINK_FLAG:40960,FILE_FLAG:32768,DIR_FLAG:16384,DEFAULT_LINK_PERM:511,DEFAULT_DIR_PERM:493,DEFAULT_FILE_PERM:420}});var y_=w((lIe,MM)=>{MM.exports={WORD:4,DWORD:8,EMPTY:Buffer.alloc(0),SHORT:2,SHORT_MASK:65535,SHORT_SHIFT:16,SHORT_ZERO:Buffer.from(Array(2)),LONG:4,LONG_ZERO:Buffer.from(Array(4)),MIN_VERSION_INITIAL:10,MIN_VERSION_DATA_DESCRIPTOR:20,MIN_VERSION_ZIP64:45,VERSION_MADEBY:45,METHOD_STORED:0,METHOD_DEFLATED:8,PLATFORM_UNIX:3,PLATFORM_FAT:0,SIG_LFH:67324752,SIG_DD:134695760,SIG_CFH:33639248,SIG_EOCD:101010256,SIG_ZIP64_EOCD:101075792,SIG_ZIP64_EOCD_LOC:117853008,ZIP64_MAGIC_SHORT:65535,ZIP64_MAGIC:4294967295,ZIP64_EXTRA_ID:1,ZLIB_NO_COMPRESSION:0,ZLIB_BEST_SPEED:1,ZLIB_BEST_COMPRESSION:9,ZLIB_DEFAULT_COMPRESSION:-1,MODE_MASK:4095,DEFAULT_FILE_MODE:33188,DEFAULT_DIR_MODE:16877,EXT_FILE_ATTR_DIR:1106051088,EXT_FILE_ATTR_FILE:2175008800,S_IFMT:61440,S_IFIFO:4096,S_IFCHR:8192,S_IFDIR:16384,S_IFBLK:24576,S_IFREG:32768,S_IFLNK:40960,S_IFSOCK:49152,S_DOS_A:32,S_DOS_D:16,S_DOS_V:8,S_DOS_S:4,S_DOS_H:2,S_DOS_R:1}});var b_=w((cIe,jM)=>{var _ae=require("util").inherits,vae=Vm(),$M=gh(),FM=m_(),DM=LM(),Ht=y_(),BM=mh(),ee=jM.exports=function(t){if(!(this instanceof ee))return new ee(t);$M.call(this),this.platform=Ht.PLATFORM_FAT,this.method=-1,this.name=null,this.size=0,this.csize=0,this.gpb=new FM,this.crc=0,this.time=-1,this.minver=Ht.MIN_VERSION_INITIAL,this.mode=-1,this.extra=null,this.exattr=0,this.inattr=0,this.comment=null,t&&this.setName(t)};_ae(ee,$M);ee.prototype.getCentralDirectoryExtra=function(){return this.getExtra()};ee.prototype.getComment=function(){return this.comment!==null?this.comment:""};ee.prototype.getCompressedSize=function(){return this.csize};ee.prototype.getCrc=function(){return this.crc};ee.prototype.getExternalAttributes=function(){return this.exattr};ee.prototype.getExtra=function(){return this.extra!==null?this.extra:Ht.EMPTY};ee.prototype.getGeneralPurposeBit=function(){return this.gpb};ee.prototype.getInternalAttributes=function(){return this.inattr};ee.prototype.getLastModifiedDate=function(){return this.getTime()};ee.prototype.getLocalFileDataExtra=function(){return this.getExtra()};ee.prototype.getMethod=function(){return this.method};ee.prototype.getName=function(){return this.name};ee.prototype.getPlatform=function(){return this.platform};ee.prototype.getSize=function(){return this.size};ee.prototype.getTime=function(){return this.time!==-1?BM.dosToDate(this.time):-1};ee.prototype.getTimeDos=function(){return this.time!==-1?this.time:0};ee.prototype.getUnixMode=function(){return this.platform!==Ht.PLATFORM_UNIX?0:this.getExternalAttributes()>>Ht.SHORT_SHIFT&Ht.SHORT_MASK};ee.prototype.getVersionNeededToExtract=function(){return this.minver};ee.prototype.setComment=function(t){Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.comment=t};ee.prototype.setCompressedSize=function(t){if(t<0)throw new Error("invalid entry compressed size");this.csize=t};ee.prototype.setCrc=function(t){if(t<0)throw new Error("invalid entry crc32");this.crc=t};ee.prototype.setExternalAttributes=function(t){this.exattr=t>>>0};ee.prototype.setExtra=function(t){this.extra=t};ee.prototype.setGeneralPurposeBit=function(t){if(!(t instanceof FM))throw new Error("invalid entry GeneralPurposeBit");this.gpb=t};ee.prototype.setInternalAttributes=function(t){this.inattr=t};ee.prototype.setMethod=function(t){if(t<0)throw new Error("invalid entry compression method");this.method=t};ee.prototype.setName=function(t,e=!1){t=vae(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,""),e&&(t=`/${t}`),Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.name=t};ee.prototype.setPlatform=function(t){this.platform=t};ee.prototype.setSize=function(t){if(t<0)throw new Error("invalid entry size");this.size=t};ee.prototype.setTime=function(t,e){if(!(t instanceof Date))throw new Error("invalid entry time");this.time=BM.dateToDos(t,e)};ee.prototype.setUnixMode=function(t){t|=this.isDirectory()?Ht.S_IFDIR:Ht.S_IFREG;var e=0;e|=t<<Ht.SHORT_SHIFT|(this.isDirectory()?Ht.S_DOS_D:Ht.S_DOS_A),this.setExternalAttributes(e),this.mode=t&Ht.MODE_MASK,this.platform=Ht.PLATFORM_UNIX};ee.prototype.setVersionNeededToExtract=function(t){this.minver=t};ee.prototype.isDirectory=function(){return this.getName().slice(-1)==="/"};ee.prototype.isUnixSymlink=function(){return(this.getUnixMode()&DM.FILE_TYPE_FLAG)===DM.LINK_FLAG};ee.prototype.isZip64=function(){return this.csize>Ht.ZIP64_MAGIC||this.size>Ht.ZIP64_MAGIC}});var Be=w((uIe,UM)=>{"use strict";var w_=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};UM.exports={AggregateError:w_,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var __=w((dIe,WM)=>{"use strict";WM.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Dt=w((fIe,VM)=>{"use strict";var{format:Sae,inspect:yh}=__(),{AggregateError:Eae}=Be(),xae=globalThis.AggregateError||Eae,Tae=Symbol("kIsNodeError"),Aae=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Rae=/^([A-Z][a-z0-9]*)+$/,Iae="__node_internal_",bh={};function as(t,e){if(!t)throw new bh.ERR_INTERNAL_ASSERTION(e)}function zM(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Cae(t,e,r){if(typeof e=="function")return as(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return as(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:Sae(e,...r)}function Rt(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(Cae(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[Tae]=!0,bh[t]=n}function HM(t){let e=Iae+t.name;return Object.defineProperty(t,"name",{value:e}),t}function kae(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new xae([e,t],e.message);return r.code=e.code,r}return t||e}var v_=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new bh.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Rt("ERR_ASSERTION","%s",Error);Rt("ERR_INVALID_ARG_TYPE",(t,e,r)=>{as(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)as(typeof l=="string","All expected entries have to be of type string"),Aae.includes(l)?i.push(l.toLowerCase()):Rae.test(l)?s.push(l):(as(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=yh(r,{depth:-1});n+=`. Received ${l}`}}else{let l=yh(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);Rt("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=yh(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Rt("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Rt("ERR_MISSING_ARGS",(...t)=>{as(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Rt("ERR_OUT_OF_RANGE",(t,e,r)=>{as(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=zM(String(r));else if(typeof r=="bigint"){n=String(r);let i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=zM(n)),n+="n"}else n=yh(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Rt("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Rt("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Rt("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Rt("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Rt("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Rt("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Rt("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Rt("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Rt("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Rt("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Rt("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);VM.exports={AbortError:v_,aggregateTwoErrors:HM(kae),hideStackFrames:HM,codes:bh}});var Vt=w((hIe,E_)=>{"use strict";var Nae=require("buffer"),{format:Oae,inspect:qae}=__(),{codes:{ERR_INVALID_ARG_TYPE:S_}}=Dt(),{kResistStopPropagation:Pae,AggregateError:Lae,SymbolDispose:Mae}=Be(),Dae=globalThis.AbortSignal||et().AbortSignal,$ae=globalThis.AbortController||et().AbortController,Fae=Object.getPrototypeOf(async function(){}).constructor,GM=globalThis.Blob||Nae.Blob,Bae=typeof GM<"u"?function(e){return e instanceof GM}:function(e){return!1},KM=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new S_(e,"AbortSignal",t)},jae=(t,e)=>{if(typeof t!="function")throw new S_(e,"Function",t)};E_.exports={AggregateError:Lae,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format:Oae,inspect:qae,types:{isAsyncFunction(t){return t instanceof Fae},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:Bae,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,r){if(e===void 0)throw new S_("signal","AbortSignal",e);KM(e,"signal"),jae(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[Pae]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[Mae](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:Dae.any||function(e){if(e.length===1)return e[0];let r=new $ae,n=()=>r.abort();return e.forEach(i=>{KM(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};E_.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Uo=w((pIe,iD)=>{"use strict";var{ArrayIsArray:T_,ArrayPrototypeIncludes:QM,ArrayPrototypeJoin:XM,ArrayPrototypeMap:Uae,NumberIsInteger:A_,NumberIsNaN:Wae,NumberMAX_SAFE_INTEGER:zae,NumberMIN_SAFE_INTEGER:Hae,NumberParseInt:Vae,ObjectPrototypeHasOwnProperty:Gae,RegExpPrototypeExec:eD,String:Kae,StringPrototypeToUpperCase:Yae,StringPrototypeTrim:Jae}=Be(),{hideStackFrames:pr,codes:{ERR_SOCKET_BAD_PORT:Zae,ERR_INVALID_ARG_TYPE:$t,ERR_INVALID_ARG_VALUE:jo,ERR_OUT_OF_RANGE:ls,ERR_UNKNOWN_SIGNAL:YM}}=Dt(),{normalizeEncoding:Qae}=Vt(),{isAsyncFunction:Xae,isArrayBufferView:ele}=Vt().types,JM={};function tle(t){return t===(t|0)}function rle(t){return t===t>>>0}var nle=/^[0-7]+$/,ile="must be a 32-bit unsigned integer or an octal string";function sle(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(eD(nle,t)===null)throw new jo(e,t,ile);t=Vae(t,8)}return tD(t,e),t}var ole=pr((t,e,r=Hae,n=zae)=>{if(typeof t!="number")throw new $t(e,"number",t);if(!A_(t))throw new ls(e,"an integer",t);if(t<r||t>n)throw new ls(e,`>= ${r} && <= ${n}`,t)}),ale=pr((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new $t(e,"number",t);if(!A_(t))throw new ls(e,"an integer",t);if(t<r||t>n)throw new ls(e,`>= ${r} && <= ${n}`,t)}),tD=pr((t,e,r=!1)=>{if(typeof t!="number")throw new $t(e,"number",t);if(!A_(t))throw new ls(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new ls(e,`>= ${n} && <= ${i}`,t)});function R_(t,e){if(typeof t!="string")throw new $t(e,"string",t)}function lle(t,e,r=void 0,n){if(typeof t!="number")throw new $t(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&Wae(t))throw new ls(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var cle=pr((t,e,r)=>{if(!QM(r,t)){let i="must be one of: "+XM(Uae(r,s=>typeof s=="string"?`'${s}'`:Kae(s)),", ");throw new jo(e,t,i)}});function rD(t,e){if(typeof t!="boolean")throw new $t(e,"boolean",t)}function x_(t,e,r){return t==null||!Gae(t,e)?r:t[e]}var ule=pr((t,e,r=null)=>{let n=x_(r,"allowArray",!1),i=x_(r,"allowFunction",!1);if(!x_(r,"nullable",!1)&&t===null||!n&&T_(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new $t(e,"Object",t)}),dle=pr((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new $t(e,"a dictionary",t)}),wh=pr((t,e,r=0)=>{if(!T_(t))throw new $t(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new jo(e,t,n)}});function fle(t,e){wh(t,e);for(let r=0;r<t.length;r++)R_(t[r],`${e}[${r}]`)}function hle(t,e){wh(t,e);for(let r=0;r<t.length;r++)rD(t[r],`${e}[${r}]`)}function ple(t,e){wh(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new $t(i,"AbortSignal",n);nD(n,i)}}function gle(t,e="signal"){if(R_(t,e),JM[t]===void 0)throw JM[Yae(t)]!==void 0?new YM(t+" (signals must use all capital letters)"):new YM(t)}var mle=pr((t,e="buffer")=>{if(!ele(t))throw new $t(e,["Buffer","TypedArray","DataView"],t)});function yle(t,e){let r=Qae(e),n=t.length;if(r==="hex"&&n%2!==0)throw new jo("encoding",e,`is invalid for data of length ${n}`)}function ble(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&Jae(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new Zae(e,t,r);return t|0}var nD=pr((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new $t(e,"AbortSignal",t)}),wle=pr((t,e)=>{if(typeof t!="function")throw new $t(e,"Function",t)}),_le=pr((t,e)=>{if(typeof t!="function"||Xae(t))throw new $t(e,"Function",t)}),vle=pr((t,e)=>{if(t!==void 0)throw new $t(e,"undefined",t)});function Sle(t,e,r){if(!QM(r,t))throw new $t(e,`('${XM(r,"|")}')`,t)}var Ele=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ZM(t,e){if(typeof t>"u"||!eD(Ele,t))throw new jo(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function xle(t){if(typeof t=="string")return ZM(t,"hints"),t;if(T_(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];ZM(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new jo("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}iD.exports={isInt32:tle,isUint32:rle,parseFileMode:sle,validateArray:wh,validateStringArray:fle,validateBooleanArray:hle,validateAbortSignalArray:ple,validateBoolean:rD,validateBuffer:mle,validateDictionary:dle,validateEncoding:yle,validateFunction:wle,validateInt32:ale,validateInteger:ole,validateNumber:lle,validateObject:ule,validateOneOf:cle,validatePlainFunction:_le,validatePort:ble,validateSignalName:gle,validateString:R_,validateUint32:tD,validateUndefined:vle,validateUnion:Sle,validateAbortSignal:nD,validateLinkHeaderValue:xle}});var tn=w((gIe,wD)=>{"use strict";var{SymbolAsyncIterator:sD,SymbolIterator:oD,SymbolFor:cs}=Be(),aD=cs("nodejs.stream.destroyed"),lD=cs("nodejs.stream.errored"),I_=cs("nodejs.stream.readable"),C_=cs("nodejs.stream.writable"),cD=cs("nodejs.stream.disturbed"),Tle=cs("nodejs.webstream.isClosedPromise"),Ale=cs("nodejs.webstream.controllerErrorFunction");function _h(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function vh(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Rle(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function en(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function uD(t){return!!(t&&!en(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function dD(t){return!!(t&&!en(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function fD(t){return!!(t&&!en(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Ile(t){return uD(t)||dD(t)||fD(t)}function Cle(t,e){return t==null?!1:e===!0?typeof t[sD]=="function":e===!1?typeof t[oD]=="function":typeof t[sD]=="function"||typeof t[oD]=="function"}function Sh(t){if(!en(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[aD]||n!=null&&n.destroyed)}function hD(t){if(!vh(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function kle(t,e){if(!vh(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function Nle(t){if(!_h(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function pD(t,e){if(!_h(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function gD(t){return t&&t[I_]!=null?t[I_]:typeof t?.readable!="boolean"?null:Sh(t)?!1:_h(t)&&t.readable&&!pD(t)}function mD(t){return t&&t[C_]!=null?t[C_]:typeof t?.writable!="boolean"?null:Sh(t)?!1:vh(t)&&t.writable&&!hD(t)}function Ole(t,e){return en(t)?Sh(t)?!0:!(e?.readable!==!1&&gD(t)||e?.writable!==!1&&mD(t)):null}function qle(t){var e,r;return en(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Ple(t){var e,r;return en(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Lle(t){if(!en(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&yD(t)?t._closed:null}function yD(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function bD(t){return typeof t._sent100=="boolean"&&yD(t)}function Mle(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Dle(t){if(!en(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&bD(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function $le(t){var e;return!!(t&&((e=t[cD])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Fle(t){var e,r,n,i,s,o,a,l,c,u;return!!(t&&((e=(r=(n=(i=(s=(o=t[lD])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}wD.exports={isDestroyed:Sh,kIsDestroyed:aD,isDisturbed:$le,kIsDisturbed:cD,isErrored:Fle,kIsErrored:lD,isReadable:gD,kIsReadable:I_,kIsClosedPromise:Tle,kControllerErrorFunction:Ale,kIsWritable:C_,isClosed:Lle,isDuplexNodeStream:Rle,isFinished:Ole,isIterable:Cle,isReadableNodeStream:_h,isReadableStream:uD,isReadableEnded:Nle,isReadableFinished:pD,isReadableErrored:Ple,isNodeStream:en,isWebStream:Ile,isWritable:mD,isWritableNodeStream:vh,isWritableStream:dD,isWritableEnded:hD,isWritableFinished:kle,isWritableErrored:qle,isServerRequest:Mle,isServerResponse:bD,willEmitClose:Dle,isTransformStream:fD}});var Cn=w((mIe,P_)=>{"use strict";var ri=Ae(),{AbortError:ID,codes:Ble}=Dt(),{ERR_INVALID_ARG_TYPE:jle,ERR_STREAM_PREMATURE_CLOSE:_D}=Ble,{kEmptyObject:N_,once:O_}=Vt(),{validateAbortSignal:Ule,validateFunction:Wle,validateObject:zle,validateBoolean:Hle}=Uo(),{Promise:Vle,PromisePrototypeThen:Gle,SymbolDispose:CD}=Be(),{isClosed:Kle,isReadable:vD,isReadableNodeStream:k_,isReadableStream:Yle,isReadableFinished:SD,isReadableErrored:ED,isWritable:xD,isWritableNodeStream:TD,isWritableStream:Jle,isWritableFinished:AD,isWritableErrored:RD,isNodeStream:Zle,willEmitClose:Qle,kIsClosedPromise:Xle}=tn(),Wo;function ece(t){return t.setHeader&&typeof t.abort=="function"}var q_=()=>{};function kD(t,e,r){var n,i;if(arguments.length===2?(r=e,e=N_):e==null?e=N_:zle(e,"options"),Wle(r,"callback"),Ule(e.signal,"options.signal"),r=O_(r),Yle(t)||Jle(t))return tce(t,e,r);if(!Zle(t))throw new jle("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:k_(t),o=(i=e.writable)!==null&&i!==void 0?i:TD(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||p()},u=Qle(t)&&k_(t)===s&&TD(t)===o,d=AD(t,!1),p=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&r.call(t)},f=SD(t,!1),y=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&r.call(t)},h=A=>{r.call(t,A)},m=Kle(t),g=()=>{m=!0;let A=RD(t)||ED(t);if(A&&typeof A!="boolean")return r.call(t,A);if(s&&!f&&k_(t,!0)&&!SD(t,!1))return r.call(t,new _D);if(o&&!d&&!AD(t,!1))return r.call(t,new _D);r.call(t)},E=()=>{m=!0;let A=RD(t)||ED(t);if(A&&typeof A!="boolean")return r.call(t,A);r.call(t)},b=()=>{t.req.on("finish",p)};ece(t)?(t.on("complete",p),u||t.on("abort",g),t.req?b():t.on("request",b)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",g),t.on("end",y),t.on("finish",p),e.error!==!1&&t.on("error",h),t.on("close",g),m?ri.nextTick(g):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||ri.nextTick(E):(!s&&(!u||vD(t))&&(d||xD(t)===!1)||!o&&(!u||xD(t))&&(f||vD(t)===!1)||l&&t.req&&t.aborted)&&ri.nextTick(E);let v=()=>{r=q_,t.removeListener("aborted",g),t.removeListener("complete",p),t.removeListener("abort",g),t.removeListener("request",b),t.req&&t.req.removeListener("finish",p),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",p),t.removeListener("end",y),t.removeListener("error",h),t.removeListener("close",g)};if(e.signal&&!m){let A=()=>{let k=r;v(),k.call(t,new ID(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)ri.nextTick(A);else{Wo=Wo||Vt().addAbortListener;let k=Wo(e.signal,A),R=r;r=O_((...N)=>{k[CD](),R.apply(t,N)})}}return v}function tce(t,e,r){let n=!1,i=q_;if(e.signal)if(i=()=>{n=!0,r.call(t,new ID(void 0,{cause:e.signal.reason}))},e.signal.aborted)ri.nextTick(i);else{Wo=Wo||Vt().addAbortListener;let o=Wo(e.signal,i),a=r;r=O_((...l)=>{o[CD](),a.apply(t,l)})}let s=(...o)=>{n||ri.nextTick(()=>r.apply(t,o))};return Gle(t[Xle].promise,s,s),q_}function rce(t,e){var r;let n=!1;return e===null&&(e=N_),(r=e)!==null&&r!==void 0&&r.cleanup&&(Hle(e.cleanup,"cleanup"),n=e.cleanup),new Vle((i,s)=>{let o=kD(t,e,a=>{n&&o(),a?s(a):i()})})}P_.exports=kD;P_.exports.finished=rce});var us=w((yIe,$D)=>{"use strict";var rn=Ae(),{aggregateTwoErrors:nce,codes:{ERR_MULTIPLE_CALLBACK:ice},AbortError:sce}=Dt(),{Symbol:qD}=Be(),{kIsDestroyed:oce,isDestroyed:ace,isFinished:lce,isServerRequest:cce}=tn(),PD=qD("kDestroy"),L_=qD("kConstruct");function LD(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function uce(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(LD(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?ND(this,t,e):this.once(PD,function(s){ND(this,nce(s,t),e)}),this)}function ND(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;LD(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?rn.nextTick(dce,t,s):rn.nextTick(MD,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function dce(t,e){M_(t,e),MD(t)}function MD(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function M_(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function fce(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function D_(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?rn.nextTick(M_,t,e):M_(t,e))}function hce(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(L_,e),!(t.listenerCount(L_)>1)&&rn.nextTick(pce,t)}function pce(t){let e=!1;function r(n){if(e){D_(t,n??new ice);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(PD,n):n?D_(t,n,!0):rn.nextTick(gce,t)}try{t._construct(n=>{rn.nextTick(r,n)})}catch(n){rn.nextTick(r,n)}}function gce(t){t.emit(L_)}function OD(t){return t?.setHeader&&typeof t.abort=="function"}function DD(t){t.emit("close")}function mce(t,e){t.emit("error",e),rn.nextTick(DD,t)}function yce(t,e){!t||ace(t)||(!e&&!lce(t)&&(e=new sce),cce(t)?(t.socket=null,t.destroy(e)):OD(t)?t.abort():OD(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?rn.nextTick(mce,t,e):rn.nextTick(DD,t),t.destroyed||(t[oce]=!0))}$D.exports={construct:hce,destroyer:yce,destroy:uce,undestroy:fce,errorOrDestroy:D_}});var Th=w((bIe,BD)=>{"use strict";var{ArrayIsArray:bce,ObjectSetPrototypeOf:FD}=Be(),{EventEmitter:Eh}=require("events");function xh(t){Eh.call(this,t)}FD(xh.prototype,Eh.prototype);FD(xh,Eh);xh.prototype.pipe=function(t,e){let r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),Eh.listenerCount(this,"error")===0&&this.emit("error",u)}$_(r,"error",l),$_(t,"error",l);function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function $_(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):bce(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}BD.exports={Stream:xh,prependListener:$_}});var uc=w((wIe,Ah)=>{"use strict";var{SymbolDispose:wce}=Be(),{AbortError:jD,codes:_ce}=Dt(),{isNodeStream:UD,isWebStream:vce,kControllerErrorFunction:Sce}=tn(),Ece=Cn(),{ERR_INVALID_ARG_TYPE:WD}=_ce,F_,xce=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new WD(e,"AbortSignal",t)};Ah.exports.addAbortSignal=function(e,r){if(xce(e,"signal"),!UD(r)&&!vce(r))throw new WD("stream",["ReadableStream","WritableStream","Stream"],r);return Ah.exports.addAbortSignalNoValidate(e,r)};Ah.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=UD(e)?()=>{e.destroy(new jD(void 0,{cause:t.reason}))}:()=>{e[Sce](new jD(void 0,{cause:t.reason}))};if(t.aborted)r();else{F_=F_||Vt().addAbortListener;let n=F_(t,r);Ece(e,n[wce])}return e}});var VD=w((vIe,HD)=>{"use strict";var{StringPrototypeSlice:zD,SymbolIterator:Tce,TypedArrayPrototypeSet:Rh,Uint8Array:Ace}=Be(),{Buffer:B_}=require("buffer"),{inspect:Rce}=Vt();HD.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return B_.alloc(0);let r=B_.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)Rh(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Tce](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=zD(s,0,e),this.head=n,n.data=zD(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=B_.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)Rh(r,o,n-e),e-=o.length;else{e===o.length?(Rh(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(Rh(r,new Ace(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return Rce(this,{...r,depth:0,customInspect:!1})}}});var dc=w((SIe,JD)=>{"use strict";var{MathFloor:Ice,NumberIsInteger:Cce}=Be(),{validateInteger:kce}=Uo(),{ERR_INVALID_ARG_VALUE:Nce}=Dt().codes,GD=16*1024,KD=16;function Oce(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function YD(t){return t?KD:GD}function qce(t,e){kce(e,"value",0),t?KD=e:GD=e}function Pce(t,e,r,n){let i=Oce(e,n,r);if(i!=null){if(!Cce(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new Nce(s,i)}return Ice(i)}return YD(t.objectMode)}JD.exports={getHighWaterMark:Pce,getDefaultHighWaterMark:YD,setDefaultHighWaterMark:qce}});var j_=w((EIe,e2)=>{"use strict";var ZD=Ae(),{PromisePrototypeThen:Lce,SymbolAsyncIterator:QD,SymbolIterator:XD}=Be(),{Buffer:Mce}=require("buffer"),{ERR_INVALID_ARG_TYPE:Dce,ERR_STREAM_NULL_VALUES:$ce}=Dt().codes;function Fce(t,e,r){let n;if(typeof e=="string"||e instanceof Mce)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[QD])i=!0,n=e[QD]();else if(e&&e[XD])i=!1,n=e[XD]();else throw new Dce("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){Lce(a(c),()=>ZD.nextTick(u,c),d=>ZD.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof n.throw=="function";if(u&&d){let{value:p,done:f}=await n.throw(c);if(await p,f)return}if(typeof n.return=="function"){let{value:p}=await n.return();await p}}async function l(){for(;;){try{let{value:c,done:u}=i?await n.next():n.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new $ce;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}e2.exports=Fce});var hc=w((xIe,b2)=>{"use strict";var Cr=Ae(),{ArrayPrototypeIndexOf:Bce,NumberIsInteger:jce,NumberIsNaN:Uce,NumberParseInt:Wce,ObjectDefineProperties:Y_,ObjectKeys:zce,ObjectSetPrototypeOf:n2,Promise:i2,SafeSet:Hce,SymbolAsyncDispose:Vce,SymbolAsyncIterator:Gce,Symbol:Kce}=Be();b2.exports=Z;Z.ReadableState=Nh;var{EventEmitter:Yce}=require("events"),{Stream:ni,prependListener:Jce}=Th(),{Buffer:U_}=require("buffer"),{addAbortSignal:Zce}=uc(),s2=Cn(),ce=Vt().debuglog("stream",t=>{ce=t}),Qce=VD(),Vo=us(),{getHighWaterMark:Xce,getDefaultHighWaterMark:eue}=dc(),{aggregateTwoErrors:t2,codes:{ERR_INVALID_ARG_TYPE:tue,ERR_METHOD_NOT_IMPLEMENTED:rue,ERR_OUT_OF_RANGE:nue,ERR_STREAM_PUSH_AFTER_EOF:iue,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:sue},AbortError:oue}=Dt(),{validateObject:aue}=Uo(),ds=Kce("kPaused"),{StringDecoder:o2}=vl(),lue=j_();n2(Z.prototype,ni.prototype);n2(Z,ni);var W_=()=>{},{errorOrDestroy:zo}=Vo,Ho=1,cue=2,a2=4,fc=8,l2=16,Ih=32,Ch=64,c2=128,uue=256,due=512,fue=1024,G_=2048,K_=4096,hue=8192,pue=16384,gue=32768,u2=65536,mue=1<<17,yue=1<<18;function ut(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}Y_(Nh.prototype,{objectMode:ut(Ho),ended:ut(cue),endEmitted:ut(a2),reading:ut(fc),constructed:ut(l2),sync:ut(Ih),needReadable:ut(Ch),emittedReadable:ut(c2),readableListening:ut(uue),resumeScheduled:ut(due),errorEmitted:ut(fue),emitClose:ut(G_),autoDestroy:ut(K_),destroyed:ut(hue),closed:ut(pue),closeEmitted:ut(gue),multiAwaitDrain:ut(u2),readingMore:ut(mue),dataEmitted:ut(yue)});function Nh(t,e,r){typeof r!="boolean"&&(r=e instanceof nn()),this.state=G_|K_|l2|Ih,t&&t.objectMode&&(this.state|=Ho),r&&t&&t.readableObjectMode&&(this.state|=Ho),this.highWaterMark=t?Xce(this,t,"readableHighWaterMark",r):eue(!1),this.buffer=new Qce,this.length=0,this.pipes=[],this.flowing=null,this[ds]=null,t&&t.emitClose===!1&&(this.state&=~G_),t&&t.autoDestroy===!1&&(this.state&=~K_),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new o2(t.encoding),this.encoding=t.encoding)}function Z(t){if(!(this instanceof Z))return new Z(t);let e=this instanceof nn();this._readableState=new Nh(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Zce(t.signal,this)),ni.call(this,t),Vo.construct(this,()=>{this._readableState.needReadable&&kh(this,this._readableState)})}Z.prototype.destroy=Vo.destroy;Z.prototype._undestroy=Vo.undestroy;Z.prototype._destroy=function(t,e){e(t)};Z.prototype[Yce.captureRejectionSymbol]=function(t){this.destroy(t)};Z.prototype[Vce]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new oue,this.destroy(t)),new i2((e,r)=>s2(this,n=>n&&n!==t?r(n):e(null)))};Z.prototype.push=function(t,e){return d2(this,t,e,!1)};Z.prototype.unshift=function(t,e){return d2(this,t,e,!0)};function d2(t,e,r,n){ce("readableAddChunk",e);let i=t._readableState,s;if((i.state&Ho)===0&&(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=U_.from(e,r).toString(i.encoding):(e=U_.from(e,r),r=""))):e instanceof U_?r="":ni._isUint8Array(e)?(e=ni._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new tue("chunk",["string","Buffer","Uint8Array"],e))),s)zo(t,s);else if(e===null)i.state&=~fc,_ue(t,i);else if((i.state&Ho)!==0||e&&e.length>0)if(n)if((i.state&a2)!==0)zo(t,new sue);else{if(i.destroyed||i.errored)return!1;z_(t,i,e,!0)}else if(i.ended)zo(t,new iue);else{if(i.destroyed||i.errored)return!1;i.state&=~fc,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?z_(t,i,e,!1):kh(t,i)):z_(t,i,e,!1)}else n||(i.state&=~fc,kh(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function z_(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&u2)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&Ch)!==0&&Oh(t)),kh(t,e)}Z.prototype.isPaused=function(){let t=this._readableState;return t[ds]===!0||t.flowing===!1};Z.prototype.setEncoding=function(t){let e=new o2(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var bue=1073741824;function wue(t){if(t>bue)throw new nue("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function r2(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&Ho)!==0?1:Uce(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Z.prototype.read=function(t){ce("read",t),t===void 0?t=NaN:jce(t)||(t=Wce(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=wue(t)),t!==0&&(e.state&=~c2),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return ce("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?H_(this):Oh(this),null;if(t=r2(t,e),t===0&&e.ended)return e.length===0&&H_(this),null;let n=(e.state&Ch)!==0;if(ce("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,ce("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,ce("reading, ended or constructing",n);else if(n){ce("do read"),e.state|=fc|Ih,e.length===0&&(e.state|=Ch);try{this._read(e.highWaterMark)}catch(s){zo(this,s)}e.state&=~Ih,e.reading||(t=r2(r,e))}let i;return t>0?i=m2(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&H_(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function _ue(t,e){if(ce("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Oh(t):(e.needReadable=!1,e.emittedReadable=!0,f2(t))}}function Oh(t){let e=t._readableState;ce("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(ce("emitReadable",e.flowing),e.emittedReadable=!0,Cr.nextTick(f2,t))}function f2(t){let e=t._readableState;ce("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,p2(t)}function kh(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Cr.nextTick(vue,t,e))}function vue(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(ce("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Z.prototype._read=function(t){throw new rue("_read()")};Z.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new Hce(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),ce("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Cr.stdout&&t!==Cr.stderr?a:m;n.endEmitted?Cr.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(g,E){ce("onunpipe"),g===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,u())}function a(){ce("onend"),t.end()}let l,c=!1;function u(){ce("cleanup"),t.removeListener("close",y),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",p),c=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(ce("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(ce("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=Sue(r,t),t.on("drain",l))}r.on("data",p);function p(g){ce("ondata");let E=t.write(g);ce("dest.write",E),E===!1&&d()}function f(g){if(ce("onerror",g),m(),t.removeListener("error",f),t.listenerCount("error")===0){let E=t._writableState||t._readableState;E&&!E.errorEmitted?zo(t,g):t.emit("error",g)}}Jce(t,"error",f);function y(){t.removeListener("finish",h),m()}t.once("close",y);function h(){ce("onfinish"),t.removeListener("close",y),m()}t.once("finish",h);function m(){ce("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(ce("pipe resume"),r.resume()),t};function Sue(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(ce("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(ce("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Z.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=Bce(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};Z.prototype.on=function(t,e){let r=ni.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,ce("on readable",n.length,n.reading),n.length?Oh(this):n.reading||Cr.nextTick(Eue,this)),r};Z.prototype.addListener=Z.prototype.on;Z.prototype.removeListener=function(t,e){let r=ni.prototype.removeListener.call(this,t,e);return t==="readable"&&Cr.nextTick(h2,this),r};Z.prototype.off=Z.prototype.removeListener;Z.prototype.removeAllListeners=function(t){let e=ni.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Cr.nextTick(h2,this),e};function h2(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[ds]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function Eue(t){ce("readable nexttick read 0"),t.read(0)}Z.prototype.resume=function(){let t=this._readableState;return t.flowing||(ce("resume"),t.flowing=!t.readableListening,xue(this,t)),t[ds]=!1,this};function xue(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Cr.nextTick(Tue,t,e))}function Tue(t,e){ce("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),p2(t),e.flowing&&!e.reading&&t.read(0)}Z.prototype.pause=function(){return ce("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ce("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ds]=!0,this};function p2(t){let e=t._readableState;for(ce("flow",e.flowing);e.flowing&&t.read()!==null;);}Z.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{zo(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=zce(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};Z.prototype[Gce]=function(){return g2(this)};Z.prototype.iterator=function(t){return t!==void 0&&aue(t,"options"),g2(this,t)};function g2(t,e){typeof t.read!="function"&&(t=Z.wrap(t,{objectMode:!0}));let r=Aue(t,e);return r.stream=t,r}async function*Aue(t,e){let r=W_;function n(o){this===t?(r(),r=W_):r=o}t.on("readable",n);let i,s=s2(t,{writable:!1},o=>{i=o?t2(i,o):null,r(),r=W_});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new i2(n)}}}catch(o){throw i=t2(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Vo.destroyer(t,null):(t.off("readable",n),s())}}Y_(Z.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Y_(Nh.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ds]!==!1},set(t){this[ds]=!!t}}});Z._fromList=m2;function m2(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function H_(t){let e=t._readableState;ce("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Cr.nextTick(Rue,e,t))}function Rue(t,e){if(ce("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Cr.nextTick(Iue,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function Iue(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Z.from=function(t,e){return lue(Z,t,e)};var V_;function y2(){return V_===void 0&&(V_={}),V_}Z.fromWeb=function(t,e){return y2().newStreamReadableFromReadableStream(t,e)};Z.toWeb=function(t,e){return y2().newReadableStreamFromStreamReadable(t,e)};Z.wrap=function(t,e){var r,n;return new Z({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){Vo.destroyer(t,i),s(i)}}).wrap(t)}});var Dh=w((TIe,k2)=>{"use strict";var fs=Ae(),{ArrayPrototypeSlice:v2,Error:Cue,FunctionPrototypeSymbolHasInstance:S2,ObjectDefineProperty:E2,ObjectDefineProperties:kue,ObjectSetPrototypeOf:x2,StringPrototypeToLowerCase:Nue,Symbol:Oue,SymbolHasInstance:que}=Be();k2.exports=He;He.WritableState=mc;var{EventEmitter:Pue}=require("events"),pc=Th().Stream,{Buffer:qh}=require("buffer"),Mh=us(),{addAbortSignal:Lue}=uc(),{getHighWaterMark:Mue,getDefaultHighWaterMark:Due}=dc(),{ERR_INVALID_ARG_TYPE:$ue,ERR_METHOD_NOT_IMPLEMENTED:Fue,ERR_MULTIPLE_CALLBACK:T2,ERR_STREAM_CANNOT_PIPE:Bue,ERR_STREAM_DESTROYED:gc,ERR_STREAM_ALREADY_FINISHED:jue,ERR_STREAM_NULL_VALUES:Uue,ERR_STREAM_WRITE_AFTER_END:Wue,ERR_UNKNOWN_ENCODING:A2}=Dt().codes,{errorOrDestroy:Go}=Mh;x2(He.prototype,pc.prototype);x2(He,pc);function Q_(){}var Ko=Oue("kOnFinished");function mc(t,e,r){typeof r!="boolean"&&(r=e instanceof nn()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Mue(this,t,"writableHighWaterMark",r):Due(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Hue.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Lh(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Ko]=[]}function Lh(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}mc.prototype.getBuffer=function(){return v2(this.buffered,this.bufferedIndex)};E2(mc.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function He(t){let e=this instanceof nn();if(!e&&!S2(He,this))return new He(t);this._writableState=new mc(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&Lue(t.signal,this)),pc.call(this,t),Mh.construct(this,()=>{let r=this._writableState;r.writing||ev(this,r),tv(this,r)})}E2(He,que,{__proto__:null,value:function(t){return S2(this,t)?!0:this!==He?!1:t&&t._writableState instanceof mc}});He.prototype.pipe=function(){Go(this,new Bue)};function R2(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!qh.isEncoding(r))throw new A2(r);typeof n!="function"&&(n=Q_)}if(e===null)throw new Uue;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=qh.from(e,r),r="buffer");else if(e instanceof qh)r="buffer";else if(pc._isUint8Array(e))e=pc._uint8ArrayToBuffer(e),r="buffer";else throw new $ue("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new Wue:i.destroyed&&(s=new gc("write")),s?(fs.nextTick(n,s),Go(t,s,!0),s):(i.pendingcb++,zue(t,i,e,r,n))}He.prototype.write=function(t,e,r){return R2(this,t,e,r)===!0};He.prototype.cork=function(){this._writableState.corked++};He.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||ev(this,t))};He.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=Nue(e)),!qh.isEncoding(e))throw new A2(e);return this._writableState.defaultEncoding=e,this};function zue(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==Q_&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function w2(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new gc("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function _2(t,e,r,n){--e.pendingcb,n(r),X_(e),Go(t,r)}function Hue(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){Go(t,new T2);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?fs.nextTick(_2,t,r,e,i):_2(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&ev(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},fs.nextTick(Vue,r.afterWriteTickInfo)):I2(t,r,1,i))}function Vue({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,I2(t,e,r,n)}function I2(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&X_(e),tv(t,e)}function X_(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new gc("write"))}let r=t[Ko].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new gc("end"))}Lh(t)}function ev(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?Q_:c=>{for(let u=o;u<r.length;++u)r[u].callback(c)},l=e.allNoop&&o===0?r:v2(r,o);l.allBuffers=e.allBuffers,w2(t,e,!0,e.length,l,"",a),Lh(e)}else{do{let{chunk:a,encoding:l,callback:c}=r[o];r[o++]=null;let u=i?1:a.length;w2(t,e,!1,u,a,l,c)}while(o<r.length&&!e.writing);o===r.length?Lh(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}He.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new Fue("_write()")};He.prototype._writev=null;He.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=R2(this,t,e);s instanceof Cue&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,tv(this,n,!0),n.ended=!0):n.finished?i=new jue("end"):n.destroyed&&(i=new gc("end"))),typeof r=="function"&&(i||n.finished?fs.nextTick(r,i):n[Ko].push(r)),this};function Ph(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function Gue(t,e){let r=!1;function n(i){if(r){Go(t,i??T2());return}if(r=!0,e.pendingcb--,i){let s=e[Ko].splice(0);for(let o=0;o<s.length;o++)s[o](i);Go(t,i,e.sync)}else Ph(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,fs.nextTick(Z_,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function Kue(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,Gue(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function tv(t,e,r){Ph(e)&&(Kue(t,e),e.pendingcb===0&&(r?(e.pendingcb++,fs.nextTick((n,i)=>{Ph(i)?Z_(n,i):i.pendingcb--},t,e)):Ph(e)&&(e.pendingcb++,Z_(t,e))))}function Z_(t,e){e.pendingcb--,e.finished=!0;let r=e[Ko].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}kue(He.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Yue=Mh.destroy;He.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Ko].length)&&fs.nextTick(X_,r),Yue.call(this,t,e),this};He.prototype._undestroy=Mh.undestroy;He.prototype._destroy=function(t,e){e(t)};He.prototype[Pue.captureRejectionSymbol]=function(t){this.destroy(t)};var J_;function C2(){return J_===void 0&&(J_={}),J_}He.fromWeb=function(t,e){return C2().newStreamWritableFromWritableStream(t,e)};He.toWeb=function(t){return C2().newWritableStreamFromStreamWritable(t)}});var H2=w((AIe,z2)=>{var rv=Ae(),Jue=require("buffer"),{isReadable:Zue,isWritable:Que,isIterable:N2,isNodeStream:Xue,isReadableNodeStream:O2,isWritableNodeStream:q2,isDuplexNodeStream:ede,isReadableStream:P2,isWritableStream:L2}=tn(),M2=Cn(),{AbortError:U2,codes:{ERR_INVALID_ARG_TYPE:tde,ERR_INVALID_RETURN_VALUE:D2}}=Dt(),{destroyer:Jo}=us(),rde=nn(),W2=hc(),nde=Dh(),{createDeferredPromise:$2}=Vt(),F2=j_(),B2=globalThis.Blob||Jue.Blob,ide=typeof B2<"u"?function(e){return e instanceof B2}:function(e){return!1},sde=globalThis.AbortController||et().AbortController,{FunctionPrototypeCall:j2}=Be(),ii=class extends rde{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};z2.exports=function t(e,r){if(ede(e))return e;if(O2(e))return Yo({readable:e});if(q2(e))return Yo({writable:e});if(Xue(e))return Yo({writable:!1,readable:!1});if(P2(e))return Yo({readable:W2.fromWeb(e)});if(L2(e))return Yo({writable:nde.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=ode(e);if(N2(i))return F2(ii,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=j2(l,i,d=>{if(d!=null)throw new D2("nully","body",d)},d=>{Jo(c,d)});return c=new ii({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,rv.nextTick(d,null)}catch(p){rv.nextTick(d,p)}})},destroy:a})}throw new D2("Iterable, AsyncIterable or AsyncFunction",r,i)}if(ide(e))return t(e.arrayBuffer());if(N2(e))return F2(ii,e,{objectMode:!0,writable:!1});if(P2(e?.readable)&&L2(e?.writable))return ii.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?O2(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?q2(e?.writable)?e?.writable:t(e.writable):void 0;return Yo({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return j2(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{Jo(i,s)}),i=new ii({objectMode:!0,writable:!1,read(){}})}throw new tde(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function ode(t){let{promise:e,resolve:r}=$2(),n=new sde,i=n.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(rv.nextTick(c),l)return;if(i.aborted)throw new U2(void 0,{cause:i.reason});({promise:e,resolve:r}=$2()),yield a}})(),{signal:i}),write(o,a,l){let c=r;r=null,c({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function Yo(t){let e=t.readable&&typeof t.readable.read!="function"?W2.wrap(t.readable):t.readable,r=t.writable,n=!!Zue(e),i=!!Que(r),s,o,a,l,c;function u(d){let p=l;l=null,p?p(d):d&&c.destroy(d)}return c=new ii({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(M2(r,d=>{i=!1,d&&Jo(e,d),u(d)}),c._write=function(d,p,f){r.write(d,p)?f():s=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(s){let d=s;s=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(M2(e,d=>{n=!1,d&&Jo(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,p){!d&&l!==null&&(d=new U2),a=null,s=null,o=null,l===null?p(d):(l=p,Jo(r,d),Jo(e,d))},c}});var nn=w((RIe,K2)=>{"use strict";var{ObjectDefineProperties:ade,ObjectGetOwnPropertyDescriptor:kn,ObjectKeys:lde,ObjectSetPrototypeOf:V2}=Be();K2.exports=kr;var sv=hc(),gr=Dh();V2(kr.prototype,sv.prototype);V2(kr,sv);{let t=lde(gr.prototype);for(let e=0;e<t.length;e++){let r=t[e];kr.prototype[r]||(kr.prototype[r]=gr.prototype[r])}}function kr(t){if(!(this instanceof kr))return new kr(t);sv.call(this,t),gr.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}ade(kr.prototype,{writable:{__proto__:null,...kn(gr.prototype,"writable")},writableHighWaterMark:{__proto__:null,...kn(gr.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...kn(gr.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...kn(gr.prototype,"writableBuffer")},writableLength:{__proto__:null,...kn(gr.prototype,"writableLength")},writableFinished:{__proto__:null,...kn(gr.prototype,"writableFinished")},writableCorked:{__proto__:null,...kn(gr.prototype,"writableCorked")},writableEnded:{__proto__:null,...kn(gr.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...kn(gr.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var nv;function G2(){return nv===void 0&&(nv={}),nv}kr.fromWeb=function(t,e){return G2().newStreamDuplexFromReadableWritablePair(t,e)};kr.toWeb=function(t){return G2().newReadableWritablePairFromDuplex(t)};var iv;kr.from=function(t){return iv||(iv=H2()),iv(t,"body")}});var lv=w((IIe,J2)=>{"use strict";var{ObjectSetPrototypeOf:Y2,Symbol:cde}=Be();J2.exports=Nn;var{ERR_METHOD_NOT_IMPLEMENTED:ude}=Dt().codes,av=nn(),{getHighWaterMark:dde}=dc();Y2(Nn.prototype,av.prototype);Y2(Nn,av);var yc=cde("kCallback");function Nn(t){if(!(this instanceof Nn))return new Nn(t);let e=t?dde(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),av.call(this,t),this._readableState.sync=!1,this[yc]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",fde)}function ov(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function fde(){this._final!==ov&&ov.call(this)}Nn.prototype._final=ov;Nn.prototype._transform=function(t,e,r){throw new ude("_transform()")};Nn.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[yc]=r})};Nn.prototype._read=function(){if(this[yc]){let t=this[yc];this[yc]=null,t()}}});var uv=w((CIe,Q2)=>{"use strict";var{ObjectSetPrototypeOf:Z2}=Be();Q2.exports=Zo;var cv=lv();Z2(Zo.prototype,cv.prototype);Z2(Zo,cv);function Zo(t){if(!(this instanceof Zo))return new Zo(t);cv.call(this,t)}Zo.prototype._transform=function(t,e,r){r(null,t)}});var jh=w((kIe,n$)=>{var bc=Ae(),{ArrayIsArray:hde,Promise:pde,SymbolAsyncIterator:gde,SymbolDispose:mde}=Be(),Bh=Cn(),{once:yde}=Vt(),bde=us(),X2=nn(),{aggregateTwoErrors:wde,codes:{ERR_INVALID_ARG_TYPE:wv,ERR_INVALID_RETURN_VALUE:dv,ERR_MISSING_ARGS:_de,ERR_STREAM_DESTROYED:vde,ERR_STREAM_PREMATURE_CLOSE:Sde},AbortError:Ede}=Dt(),{validateFunction:xde,validateAbortSignal:Tde}=Uo(),{isIterable:hs,isReadable:fv,isReadableNodeStream:Fh,isNodeStream:e$,isTransformStream:Qo,isWebStream:Ade,isReadableStream:hv,isReadableFinished:Rde}=tn(),Ide=globalThis.AbortController||et().AbortController,pv,gv,mv;function t$(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=Bh(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,bde.destroyer(t,s||new vde("pipe")))},cleanup:i}}function Cde(t){return xde(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function yv(t){if(hs(t))return t;if(Fh(t))return kde(t);throw new wv("val",["Readable","Iterable","AsyncIterable"],t)}async function*kde(t){gv||(gv=hc()),yield*gv.prototype[gde].call(t)}async function $h(t,e,r,{end:n}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new pde((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=Bh(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&(e.end(),await a()),r()}catch(c){r(i!==c?wde(i,c):c)}finally{l(),e.off("drain",o)}}async function bv(t,e,r,{end:n}){Qo(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function Nde(...t){return r$(t,yde(Cde(t)))}function r$(t,e,r){if(t.length===1&&hde(t[0])&&(t=t[0]),t.length<2)throw new _de("streams");let n=new Ide,i=n.signal,s=r?.signal,o=[];Tde(s,"options.signal");function a(){y(new Ede)}mv=mv||Vt().addAbortListener;let l;s&&(l=mv(s,a));let c,u,d=[],p=0;function f(b){y(b,--p===0)}function y(b,v){var A;if(b&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=b),!(!c&&!v)){for(;d.length;)d.shift()(c);(A=l)===null||A===void 0||A[mde](),n.abort(),v&&(c||o.forEach(k=>k()),bc.nextTick(e,c,u))}}let h;for(let b=0;b<t.length;b++){let v=t[b],A=b<t.length-1,k=b>0,R=A||r?.end!==!1,N=b===t.length-1;if(e$(v)){let I=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var E=I;if(R){let{destroy:P,cleanup:D}=t$(v,A,k);d.push(P),fv(v)&&N&&o.push(D)}v.on("error",I),fv(v)&&N&&o.push(()=>{v.removeListener("error",I)})}if(b===0)if(typeof v=="function"){if(h=v({signal:i}),!hs(h))throw new dv("Iterable, AsyncIterable or Stream","source",h)}else hs(v)||Fh(v)||Qo(v)?h=v:h=X2.from(v);else if(typeof v=="function"){if(Qo(h)){var m;h=yv((m=h)===null||m===void 0?void 0:m.readable)}else h=yv(h);if(h=v(h,{signal:i}),A){if(!hs(h,!0))throw new dv("AsyncIterable",`transform[${b-1}]`,h)}else{var g;pv||(pv=uv());let I=new pv({objectMode:!0}),P=(g=h)===null||g===void 0?void 0:g.then;if(typeof P=="function")p++,P.call(h,B=>{u=B,B!=null&&I.write(B),R&&I.end(),bc.nextTick(f)},B=>{I.destroy(B),bc.nextTick(f,B)});else if(hs(h,!0))p++,$h(h,I,f,{end:R});else if(hv(h)||Qo(h)){let B=h.readable||h;p++,$h(B,I,f,{end:R})}else throw new dv("AsyncIterable or Promise","destination",h);h=I;let{destroy:D,cleanup:F}=t$(h,!1,!0);d.push(D),N&&o.push(F)}}else if(e$(v)){if(Fh(h)){p+=2;let I=Ode(h,v,f,{end:R});fv(v)&&N&&o.push(I)}else if(Qo(h)||hv(h)){let I=h.readable||h;p++,$h(I,v,f,{end:R})}else if(hs(h))p++,$h(h,v,f,{end:R});else throw new wv("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=v}else if(Ade(v)){if(Fh(h))p++,bv(yv(h),v,f,{end:R});else if(hv(h)||hs(h))p++,bv(h,v,f,{end:R});else if(Qo(h))p++,bv(h.readable,v,f,{end:R});else throw new wv("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=v}else h=X2.from(v)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&bc.nextTick(a),h}function Ode(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new Sde)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;Rde(t)?bc.nextTick(o):t.once("end",o)}else r();return Bh(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),Bh(e,{readable:!1,writable:!0},r)}n$.exports={pipelineImpl:r$,pipeline:Nde}});var vv=w((NIe,c$)=>{"use strict";var{pipeline:qde}=jh(),Uh=nn(),{destroyer:Pde}=us(),{isNodeStream:Wh,isReadable:i$,isWritable:s$,isWebStream:_v,isTransformStream:ps,isWritableStream:o$,isReadableStream:a$}=tn(),{AbortError:Lde,codes:{ERR_INVALID_ARG_VALUE:l$,ERR_MISSING_ARGS:Mde}}=Dt(),Dde=Cn();c$.exports=function(...e){if(e.length===0)throw new Mde("streams");if(e.length===1)return Uh.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=Uh.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=Uh.from(e[f])}for(let f=0;f<e.length;++f)if(!(!Wh(e[f])&&!_v(e[f]))){if(f<e.length-1&&!(i$(e[f])||a$(e[f])||ps(e[f])))throw new l$(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(s$(e[f])||o$(e[f])||ps(e[f])))throw new l$(`streams[${f}]`,r[f],"must be writable")}let n,i,s,o,a;function l(f){let y=o;o=null,y?y(f):f?a.destroy(f):!p&&!d&&a.destroy()}let c=e[0],u=qde(e,l),d=!!(s$(c)||o$(c)||ps(c)),p=!!(i$(u)||a$(u)||ps(u));if(a=new Uh({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:p}),d){if(Wh(c))a._write=function(y,h,m){c.write(y,h)?m():n=m},a._final=function(y){c.end(),i=y},c.on("drain",function(){if(n){let y=n;n=null,y()}});else if(_v(c)){let h=(ps(c)?c.writable:c).getWriter();a._write=async function(m,g,E){try{await h.ready,h.write(m).catch(()=>{}),E()}catch(b){E(b)}},a._final=async function(m){try{await h.ready,h.close().catch(()=>{}),i=m}catch(g){m(g)}}}let f=ps(u)?u.readable:u;Dde(f,()=>{if(i){let y=i;i=null,y()}})}if(p){if(Wh(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(_v(u)){let y=(ps(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:m}=await y.read();if(!a.push(h))return;if(m){a.push(null);return}}catch{return}}}}return a._destroy=function(f,y){!f&&o!==null&&(f=new Lde),s=null,n=null,i=null,o===null?y(f):(o=y,Wh(u)&&Pde(u,f))},a}});var w$=w((OIe,xv)=>{"use strict";var $de=globalThis.AbortController||et().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Fde,ERR_INVALID_ARG_TYPE:wc,ERR_MISSING_ARGS:Bde,ERR_OUT_OF_RANGE:jde},AbortError:sn}=Dt(),{validateAbortSignal:gs,validateInteger:u$,validateObject:ms}=Uo(),Ude=Be().Symbol("kWeak"),Wde=Be().Symbol("kResistStopPropagation"),{finished:zde}=Cn(),Hde=vv(),{addAbortSignalNoValidate:Vde}=uc(),{isWritable:Gde,isNodeStream:Kde}=tn(),{deprecate:Yde}=Vt(),{ArrayPrototypePush:Jde,Boolean:Zde,MathFloor:d$,Number:Qde,NumberIsNaN:Xde,Promise:f$,PromiseReject:h$,PromiseResolve:efe,PromisePrototypeThen:p$,Symbol:m$}=Be(),zh=m$("kEmpty"),g$=m$("kEof");function tfe(t,e){if(e!=null&&ms(e,"options"),e?.signal!=null&&gs(e.signal,"options.signal"),Kde(t)&&!Gde(t))throw new Fde("stream",t,"must be writable");let r=Hde(this,t);return e!=null&&e.signal&&Vde(e.signal,r),r}function Hh(t,e){if(typeof t!="function")throw new wc("fn",["Function","AsyncFunction"],t);e!=null&&ms(e,"options"),e?.signal!=null&&gs(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=d$(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=d$(e.highWaterMark)),u$(r,"options.concurrency",1),u$(n,"options.highWaterMark",0),n+=r,async function*(){let s=Vt().AbortSignalAny([e?.signal].filter(Zde)),o=this,a=[],l={signal:s},c,u,d=!1,p=0;function f(){d=!0,y()}function y(){p-=1,h()}function h(){u&&!d&&p<r&&a.length<n&&(u(),u=null)}async function m(){try{for await(let g of o){if(d)return;if(s.aborted)throw new sn;try{if(g=t(g,l),g===zh)continue;g=efe(g)}catch(E){g=h$(E)}p+=1,p$(g,y,f),a.push(g),c&&(c(),c=null),!d&&(a.length>=n||p>=r)&&await new f$(E=>{u=E})}a.push(g$)}catch(g){let E=h$(g);p$(E,y,f),a.push(E)}finally{d=!0,c&&(c(),c=null)}}m();try{for(;;){for(;a.length>0;){let g=await a[0];if(g===g$)return;if(s.aborted)throw new sn;g!==zh&&(yield g),a.shift(),h()}await new f$(g=>{c=g})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function rfe(t=void 0){return t!=null&&ms(t,"options"),t?.signal!=null&&gs(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new sn({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function y$(t,e=void 0){for await(let r of Ev.call(this,t,e))return!0;return!1}async function nfe(t,e=void 0){if(typeof t!="function")throw new wc("fn",["Function","AsyncFunction"],t);return!await y$.call(this,async(...r)=>!await t(...r),e)}async function ife(t,e){for await(let r of Ev.call(this,t,e))return r}async function sfe(t,e){if(typeof t!="function")throw new wc("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),zh}for await(let n of Hh.call(this,r,e));}function Ev(t,e){if(typeof t!="function")throw new wc("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:zh}return Hh.call(this,r,e)}var Sv=class extends Bde{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function ofe(t,e,r){var n;if(typeof t!="function")throw new wc("reducer",["Function","AsyncFunction"],t);r!=null&&ms(r,"options"),r?.signal!=null&&gs(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new sn(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await zde(this.destroy(c)),c}let s=new $de,o=s.signal;if(r!=null&&r.signal){let c={once:!0,[Ude]:this,[Wde]:!0};r.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new sn;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new Sv}finally{s.abort()}return e}async function afe(t){t!=null&&ms(t,"options"),t?.signal!=null&&gs(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new sn(void 0,{cause:t.signal.reason});Jde(e,n)}return e}function lfe(t,e){let r=Hh.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function b$(t){if(t=Qde(t),Xde(t))return 0;if(t<0)throw new jde("number",">= 0",t);return t}function cfe(t,e=void 0){return e!=null&&ms(e,"options"),e?.signal!=null&&gs(e.signal,"options.signal"),t=b$(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new sn;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new sn;t--<=0&&(yield s)}}.call(this)}function ufe(t,e=void 0){return e!=null&&ms(e,"options"),e?.signal!=null&&gs(e.signal,"options.signal"),t=b$(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new sn;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new sn;if(t-- >0&&(yield s),t<=0)return}}.call(this)}xv.exports.streamReturningOperators={asIndexedPairs:Yde(rfe,"readable.asIndexedPairs will be removed in a future version."),drop:cfe,filter:Ev,flatMap:lfe,map:Hh,take:ufe,compose:tfe};xv.exports.promiseReturningOperators={every:nfe,forEach:sfe,reduce:ofe,toArray:afe,some:y$,find:ife}});var Tv=w((qIe,_$)=>{"use strict";var{ArrayPrototypePop:dfe,Promise:ffe}=Be(),{isIterable:hfe,isNodeStream:pfe,isWebStream:gfe}=tn(),{pipelineImpl:mfe}=jh(),{finished:yfe}=Cn();Av();function bfe(...t){return new ffe((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!pfe(s)&&!hfe(s)&&!gfe(s)){let o=dfe(t);n=o.signal,i=o.end}mfe(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}_$.exports={finished:yfe,pipeline:bfe}});var Av=w((PIe,C$)=>{"use strict";var{Buffer:wfe}=require("buffer"),{ObjectDefineProperty:On,ObjectKeys:E$,ReflectApply:x$}=Be(),{promisify:{custom:T$}}=Vt(),{streamReturningOperators:v$,promiseReturningOperators:S$}=w$(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:A$}}=Dt(),_fe=vv(),{setDefaultHighWaterMark:vfe,getDefaultHighWaterMark:Sfe}=dc(),{pipeline:R$}=jh(),{destroyer:Efe}=us(),I$=Cn(),Rv=Tv(),_c=tn(),Le=C$.exports=Th().Stream;Le.isDestroyed=_c.isDestroyed;Le.isDisturbed=_c.isDisturbed;Le.isErrored=_c.isErrored;Le.isReadable=_c.isReadable;Le.isWritable=_c.isWritable;Le.Readable=hc();for(let t of E$(v$)){let r=function(...n){if(new.target)throw A$();return Le.Readable.from(x$(e,this,n))},e=v$[t];On(r,"name",{__proto__:null,value:e.name}),On(r,"length",{__proto__:null,value:e.length}),On(Le.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let t of E$(S$)){let r=function(...n){if(new.target)throw A$();return x$(e,this,n)},e=S$[t];On(r,"name",{__proto__:null,value:e.name}),On(r,"length",{__proto__:null,value:e.length}),On(Le.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}Le.Writable=Dh();Le.Duplex=nn();Le.Transform=lv();Le.PassThrough=uv();Le.pipeline=R$;var{addAbortSignal:xfe}=uc();Le.addAbortSignal=xfe;Le.finished=I$;Le.destroy=Efe;Le.compose=_fe;Le.setDefaultHighWaterMark=vfe;Le.getDefaultHighWaterMark=Sfe;On(Le,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return Rv}});On(R$,T$,{__proto__:null,enumerable:!0,get(){return Rv.pipeline}});On(I$,T$,{__proto__:null,enumerable:!0,get(){return Rv.finished}});Le.Stream=Le;Le._isUint8Array=function(e){return e instanceof Uint8Array};Le._uint8ArrayToBuffer=function(e){return wfe.from(e.buffer,e.byteOffset,e.byteLength)}});var Iv=w((LIe,ie)=>{"use strict";var dt=require("stream");if(dt&&process.env.READABLE_STREAM==="disable"){let t=dt.promises;ie.exports._uint8ArrayToBuffer=dt._uint8ArrayToBuffer,ie.exports._isUint8Array=dt._isUint8Array,ie.exports.isDisturbed=dt.isDisturbed,ie.exports.isErrored=dt.isErrored,ie.exports.isReadable=dt.isReadable,ie.exports.Readable=dt.Readable,ie.exports.Writable=dt.Writable,ie.exports.Duplex=dt.Duplex,ie.exports.Transform=dt.Transform,ie.exports.PassThrough=dt.PassThrough,ie.exports.addAbortSignal=dt.addAbortSignal,ie.exports.finished=dt.finished,ie.exports.destroy=dt.destroy,ie.exports.pipeline=dt.pipeline,ie.exports.compose=dt.compose,Object.defineProperty(dt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),ie.exports.Stream=dt.Stream}else{let t=Av(),e=Tv(),r=t.Readable.destroy;ie.exports=t.Readable,ie.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,ie.exports._isUint8Array=t._isUint8Array,ie.exports.isDisturbed=t.isDisturbed,ie.exports.isErrored=t.isErrored,ie.exports.isReadable=t.isReadable,ie.exports.Readable=t.Readable,ie.exports.Writable=t.Writable,ie.exports.Duplex=t.Duplex,ie.exports.Transform=t.Transform,ie.exports.PassThrough=t.PassThrough,ie.exports.addAbortSignal=t.addAbortSignal,ie.exports.finished=t.finished,ie.exports.destroy=t.destroy,ie.exports.destroy=r,ie.exports.pipeline=t.pipeline,ie.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),ie.exports.Stream=t.Stream}ie.exports.default=ie.exports});var Cv=w((DIe,k$)=>{var MIe=require("stream").Stream,Tfe=Iv().PassThrough,Afe=id(),Rfe=k$.exports={};Rfe.normalizeInputSource=function(t){if(t===null)return Buffer.alloc(0);if(typeof t=="string")return Buffer.from(t);if(Afe(t)&&!t._readableState){var e=new Tfe;return t.pipe(e),e}return t}});var Nv=w(($Ie,N$)=>{var Ife=require("util").inherits,Cfe=id(),kv=Iv().Transform,kfe=gh(),Nfe=Cv(),tr=N$.exports=function(t){if(!(this instanceof tr))return new tr(t);kv.call(this,t),this.offset=0,this._archive={finish:!1,finished:!1,processing:!1}};Ife(tr,kv);tr.prototype._appendBuffer=function(t,e,r){};tr.prototype._appendStream=function(t,e,r){};tr.prototype._emitErrorCallback=function(t){t&&this.emit("error",t)};tr.prototype._finish=function(t){};tr.prototype._normalizeEntry=function(t){};tr.prototype._transform=function(t,e,r){r(null,t)};tr.prototype.entry=function(t,e,r){if(e=e||null,typeof r!="function"&&(r=this._emitErrorCallback.bind(this)),!(t instanceof kfe)){r(new Error("not a valid instance of ArchiveEntry"));return}if(this._archive.finish||this._archive.finished){r(new Error("unacceptable entry after finish"));return}if(this._archive.processing){r(new Error("already processing an entry"));return}if(this._archive.processing=!0,this._normalizeEntry(t),this._entry=t,e=Nfe.normalizeInputSource(e),Buffer.isBuffer(e))this._appendBuffer(t,e,r);else if(Cfe(e))this._appendStream(t,e,r);else{this._archive.processing=!1,r(new Error("input source must be valid Stream or Buffer instance"));return}return this};tr.prototype.finish=function(){if(this._archive.processing){this._archive.finish=!0;return}this._finish()};tr.prototype.getBytesWritten=function(){return this.offset};tr.prototype.write=function(t,e){return t&&(this.offset+=t.length),kv.prototype.write.call(this,t,e)}});var Vh=w(Ov=>{var O$;(function(t){typeof DO_NOT_EXPORT_CRC>"u"?typeof Ov=="object"?t(Ov):typeof define=="function"&&define.amd?define(function(){var e={};return t(e),e}):t(O$={}):t(O$={})})(function(t){t.version="1.2.2";function e(){for(var R=0,N=new Array(256),I=0;I!=256;++I)R=I,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,N[I]=R;return typeof Int32Array<"u"?new Int32Array(N):N}var r=e();function n(R){var N=0,I=0,P=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(P=0;P!=256;++P)D[P]=R[P];for(P=0;P!=256;++P)for(I=R[P],N=256+P;N<4096;N+=256)I=D[N]=I>>>8^R[I&255];var F=[];for(P=1;P!=16;++P)F[P-1]=typeof Int32Array<"u"?D.subarray(P*256,P*256+256):D.slice(P*256,P*256+256);return F}var i=n(r),s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],p=i[7],f=i[8],y=i[9],h=i[10],m=i[11],g=i[12],E=i[13],b=i[14];function v(R,N){for(var I=N^-1,P=0,D=R.length;P<D;)I=I>>>8^r[(I^R.charCodeAt(P++))&255];return~I}function A(R,N){for(var I=N^-1,P=R.length-15,D=0;D<P;)I=b[R[D++]^I&255]^E[R[D++]^I>>8&255]^g[R[D++]^I>>16&255]^m[R[D++]^I>>>24]^h[R[D++]]^y[R[D++]]^f[R[D++]]^p[R[D++]]^d[R[D++]]^u[R[D++]]^c[R[D++]]^l[R[D++]]^a[R[D++]]^o[R[D++]]^s[R[D++]]^r[R[D++]];for(P+=15;D<P;)I=I>>>8^r[(I^R[D++])&255];return~I}function k(R,N){for(var I=N^-1,P=0,D=R.length,F=0,B=0;P<D;)F=R.charCodeAt(P++),F<128?I=I>>>8^r[(I^F)&255]:F<2048?(I=I>>>8^r[(I^(192|F>>6&31))&255],I=I>>>8^r[(I^(128|F&63))&255]):F>=55296&&F<57344?(F=(F&1023)+64,B=R.charCodeAt(P++)&1023,I=I>>>8^r[(I^(240|F>>8&7))&255],I=I>>>8^r[(I^(128|F>>2&63))&255],I=I>>>8^r[(I^(128|B>>6&15|(F&3)<<4))&255],I=I>>>8^r[(I^(128|B&63))&255]):(I=I>>>8^r[(I^(224|F>>12&15))&255],I=I>>>8^r[(I^(128|F>>6&63))&255],I=I>>>8^r[(I^(128|F&63))&255]);return~I}t.table=r,t.bstr=v,t.buf=A,t.str=k})});var je=w((BIe,q$)=>{"use strict";var qv=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};q$.exports={AggregateError:qv,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var Pv=w((jIe,P$)=>{"use strict";P$.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Ft=w((UIe,D$)=>{"use strict";var{format:Ofe,inspect:Gh}=Pv(),{AggregateError:qfe}=je(),Pfe=globalThis.AggregateError||qfe,Lfe=Symbol("kIsNodeError"),Mfe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Dfe=/^([A-Z][a-z0-9]*)+$/,$fe="__node_internal_",Kh={};function ys(t,e){if(!t)throw new Kh.ERR_INTERNAL_ASSERTION(e)}function L$(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Ffe(t,e,r){if(typeof e=="function")return ys(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return ys(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:Ofe(e,...r)}function It(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(Ffe(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[Lfe]=!0,Kh[t]=n}function M$(t){let e=$fe+t.name;return Object.defineProperty(t,"name",{value:e}),t}function Bfe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new Pfe([e,t],e.message);return r.code=e.code,r}return t||e}var Lv=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Kh.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};It("ERR_ASSERTION","%s",Error);It("ERR_INVALID_ARG_TYPE",(t,e,r)=>{ys(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)ys(typeof l=="string","All expected entries have to be of type string"),Mfe.includes(l)?i.push(l.toLowerCase()):Dfe.test(l)?s.push(l):(ys(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=Gh(r,{depth:-1});n+=`. Received ${l}`}}else{let l=Gh(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);It("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=Gh(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);It("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);It("ERR_MISSING_ARGS",(...t)=>{ys(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);It("ERR_OUT_OF_RANGE",(t,e,r)=>{ys(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=L$(String(r));else if(typeof r=="bigint"){n=String(r);let i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=L$(n)),n+="n"}else n=Gh(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);It("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);It("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);It("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);It("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);It("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);It("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);It("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);It("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);It("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);It("ERR_STREAM_WRITE_AFTER_END","write after end",Error);It("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);D$.exports={AbortError:Lv,aggregateTwoErrors:M$(Bfe),hideStackFrames:M$,codes:Kh}});var Gt=w((WIe,Dv)=>{"use strict";var jfe=require("buffer"),{format:Ufe,inspect:Wfe}=Pv(),{codes:{ERR_INVALID_ARG_TYPE:Mv}}=Ft(),{kResistStopPropagation:zfe,AggregateError:Hfe,SymbolDispose:Vfe}=je(),Gfe=globalThis.AbortSignal||et().AbortSignal,Kfe=globalThis.AbortController||et().AbortController,Yfe=Object.getPrototypeOf(async function(){}).constructor,$$=globalThis.Blob||jfe.Blob,Jfe=typeof $$<"u"?function(e){return e instanceof $$}:function(e){return!1},F$=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Mv(e,"AbortSignal",t)},Zfe=(t,e)=>{if(typeof t!="function")throw new Mv(e,"Function",t)};Dv.exports={AggregateError:Hfe,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format:Ufe,inspect:Wfe,types:{isAsyncFunction(t){return t instanceof Yfe},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:Jfe,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,r){if(e===void 0)throw new Mv("signal","AbortSignal",e);F$(e,"signal"),Zfe(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[zfe]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[Vfe](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:Gfe.any||function(e){if(e.length===1)return e[0];let r=new Kfe,n=()=>r.abort();return e.forEach(i=>{F$(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};Dv.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var ea=w((zIe,Y$)=>{"use strict";var{ArrayIsArray:Fv,ArrayPrototypeIncludes:W$,ArrayPrototypeJoin:z$,ArrayPrototypeMap:Qfe,NumberIsInteger:Bv,NumberIsNaN:Xfe,NumberMAX_SAFE_INTEGER:ehe,NumberMIN_SAFE_INTEGER:the,NumberParseInt:rhe,ObjectPrototypeHasOwnProperty:nhe,RegExpPrototypeExec:H$,String:ihe,StringPrototypeToUpperCase:she,StringPrototypeTrim:ohe}=je(),{hideStackFrames:mr,codes:{ERR_SOCKET_BAD_PORT:ahe,ERR_INVALID_ARG_TYPE:Bt,ERR_INVALID_ARG_VALUE:Xo,ERR_OUT_OF_RANGE:bs,ERR_UNKNOWN_SIGNAL:B$}}=Ft(),{normalizeEncoding:lhe}=Gt(),{isAsyncFunction:che,isArrayBufferView:uhe}=Gt().types,j$={};function dhe(t){return t===(t|0)}function fhe(t){return t===t>>>0}var hhe=/^[0-7]+$/,phe="must be a 32-bit unsigned integer or an octal string";function ghe(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(H$(hhe,t)===null)throw new Xo(e,t,phe);t=rhe(t,8)}return V$(t,e),t}var mhe=mr((t,e,r=the,n=ehe)=>{if(typeof t!="number")throw new Bt(e,"number",t);if(!Bv(t))throw new bs(e,"an integer",t);if(t<r||t>n)throw new bs(e,`>= ${r} && <= ${n}`,t)}),yhe=mr((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Bt(e,"number",t);if(!Bv(t))throw new bs(e,"an integer",t);if(t<r||t>n)throw new bs(e,`>= ${r} && <= ${n}`,t)}),V$=mr((t,e,r=!1)=>{if(typeof t!="number")throw new Bt(e,"number",t);if(!Bv(t))throw new bs(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new bs(e,`>= ${n} && <= ${i}`,t)});function jv(t,e){if(typeof t!="string")throw new Bt(e,"string",t)}function bhe(t,e,r=void 0,n){if(typeof t!="number")throw new Bt(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&Xfe(t))throw new bs(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var whe=mr((t,e,r)=>{if(!W$(r,t)){let i="must be one of: "+z$(Qfe(r,s=>typeof s=="string"?`'${s}'`:ihe(s)),", ");throw new Xo(e,t,i)}});function G$(t,e){if(typeof t!="boolean")throw new Bt(e,"boolean",t)}function $v(t,e,r){return t==null||!nhe(t,e)?r:t[e]}var _he=mr((t,e,r=null)=>{let n=$v(r,"allowArray",!1),i=$v(r,"allowFunction",!1);if(!$v(r,"nullable",!1)&&t===null||!n&&Fv(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Bt(e,"Object",t)}),vhe=mr((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Bt(e,"a dictionary",t)}),Yh=mr((t,e,r=0)=>{if(!Fv(t))throw new Bt(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Xo(e,t,n)}});function She(t,e){Yh(t,e);for(let r=0;r<t.length;r++)jv(t[r],`${e}[${r}]`)}function Ehe(t,e){Yh(t,e);for(let r=0;r<t.length;r++)G$(t[r],`${e}[${r}]`)}function xhe(t,e){Yh(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new Bt(i,"AbortSignal",n);K$(n,i)}}function The(t,e="signal"){if(jv(t,e),j$[t]===void 0)throw j$[she(t)]!==void 0?new B$(t+" (signals must use all capital letters)"):new B$(t)}var Ahe=mr((t,e="buffer")=>{if(!uhe(t))throw new Bt(e,["Buffer","TypedArray","DataView"],t)});function Rhe(t,e){let r=lhe(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Xo("encoding",e,`is invalid for data of length ${n}`)}function Ihe(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&ohe(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new ahe(e,t,r);return t|0}var K$=mr((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Bt(e,"AbortSignal",t)}),Che=mr((t,e)=>{if(typeof t!="function")throw new Bt(e,"Function",t)}),khe=mr((t,e)=>{if(typeof t!="function"||che(t))throw new Bt(e,"Function",t)}),Nhe=mr((t,e)=>{if(t!==void 0)throw new Bt(e,"undefined",t)});function Ohe(t,e,r){if(!W$(r,t))throw new Bt(e,`('${z$(r,"|")}')`,t)}var qhe=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function U$(t,e){if(typeof t>"u"||!H$(qhe,t))throw new Xo(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Phe(t){if(typeof t=="string")return U$(t,"hints"),t;if(Fv(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];U$(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Xo("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Y$.exports={isInt32:dhe,isUint32:fhe,parseFileMode:ghe,validateArray:Yh,validateStringArray:She,validateBooleanArray:Ehe,validateAbortSignalArray:xhe,validateBoolean:G$,validateBuffer:Ahe,validateDictionary:vhe,validateEncoding:Rhe,validateFunction:Che,validateInt32:yhe,validateInteger:mhe,validateNumber:bhe,validateObject:_he,validateOneOf:whe,validatePlainFunction:khe,validatePort:Ihe,validateSignalName:The,validateString:jv,validateUint32:V$,validateUndefined:Nhe,validateUnion:Ohe,validateAbortSignal:K$,validateLinkHeaderValue:Phe}});var an=w((HIe,uF)=>{"use strict";var{SymbolAsyncIterator:J$,SymbolIterator:Z$,SymbolFor:ws}=je(),Q$=ws("nodejs.stream.destroyed"),X$=ws("nodejs.stream.errored"),Uv=ws("nodejs.stream.readable"),Wv=ws("nodejs.stream.writable"),eF=ws("nodejs.stream.disturbed"),Lhe=ws("nodejs.webstream.isClosedPromise"),Mhe=ws("nodejs.webstream.controllerErrorFunction");function Jh(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function Zh(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Dhe(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function on(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function tF(t){return!!(t&&!on(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function rF(t){return!!(t&&!on(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function nF(t){return!!(t&&!on(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function $he(t){return tF(t)||rF(t)||nF(t)}function Fhe(t,e){return t==null?!1:e===!0?typeof t[J$]=="function":e===!1?typeof t[Z$]=="function":typeof t[J$]=="function"||typeof t[Z$]=="function"}function Qh(t){if(!on(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[Q$]||n!=null&&n.destroyed)}function iF(t){if(!Zh(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Bhe(t,e){if(!Zh(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function jhe(t){if(!Jh(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function sF(t,e){if(!Jh(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function oF(t){return t&&t[Uv]!=null?t[Uv]:typeof t?.readable!="boolean"?null:Qh(t)?!1:Jh(t)&&t.readable&&!sF(t)}function aF(t){return t&&t[Wv]!=null?t[Wv]:typeof t?.writable!="boolean"?null:Qh(t)?!1:Zh(t)&&t.writable&&!iF(t)}function Uhe(t,e){return on(t)?Qh(t)?!0:!(e?.readable!==!1&&oF(t)||e?.writable!==!1&&aF(t)):null}function Whe(t){var e,r;return on(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function zhe(t){var e,r;return on(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Hhe(t){if(!on(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&lF(t)?t._closed:null}function lF(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function cF(t){return typeof t._sent100=="boolean"&&lF(t)}function Vhe(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Ghe(t){if(!on(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&cF(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Khe(t){var e;return!!(t&&((e=t[eF])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Yhe(t){var e,r,n,i,s,o,a,l,c,u;return!!(t&&((e=(r=(n=(i=(s=(o=t[X$])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}uF.exports={isDestroyed:Qh,kIsDestroyed:Q$,isDisturbed:Khe,kIsDisturbed:eF,isErrored:Yhe,kIsErrored:X$,isReadable:oF,kIsReadable:Uv,kIsClosedPromise:Lhe,kControllerErrorFunction:Mhe,kIsWritable:Wv,isClosed:Hhe,isDuplexNodeStream:Dhe,isFinished:Uhe,isIterable:Fhe,isReadableNodeStream:Jh,isReadableStream:tF,isReadableEnded:jhe,isReadableFinished:sF,isReadableErrored:zhe,isNodeStream:on,isWebStream:$he,isWritable:aF,isWritableNodeStream:Zh,isWritableStream:rF,isWritableEnded:iF,isWritableFinished:Bhe,isWritableErrored:Whe,isServerRequest:Vhe,isServerResponse:cF,willEmitClose:Ghe,isTransformStream:nF}});var qn=w((VIe,Kv)=>{"use strict";var si=Ae(),{AbortError:wF,codes:Jhe}=Ft(),{ERR_INVALID_ARG_TYPE:Zhe,ERR_STREAM_PREMATURE_CLOSE:dF}=Jhe,{kEmptyObject:Hv,once:Vv}=Gt(),{validateAbortSignal:Qhe,validateFunction:Xhe,validateObject:epe,validateBoolean:tpe}=ea(),{Promise:rpe,PromisePrototypeThen:npe,SymbolDispose:_F}=je(),{isClosed:ipe,isReadable:fF,isReadableNodeStream:zv,isReadableStream:spe,isReadableFinished:hF,isReadableErrored:pF,isWritable:gF,isWritableNodeStream:mF,isWritableStream:ope,isWritableFinished:yF,isWritableErrored:bF,isNodeStream:ape,willEmitClose:lpe,kIsClosedPromise:cpe}=an(),ta;function upe(t){return t.setHeader&&typeof t.abort=="function"}var Gv=()=>{};function vF(t,e,r){var n,i;if(arguments.length===2?(r=e,e=Hv):e==null?e=Hv:epe(e,"options"),Xhe(r,"callback"),Qhe(e.signal,"options.signal"),r=Vv(r),spe(t)||ope(t))return dpe(t,e,r);if(!ape(t))throw new Zhe("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:zv(t),o=(i=e.writable)!==null&&i!==void 0?i:mF(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||p()},u=lpe(t)&&zv(t)===s&&mF(t)===o,d=yF(t,!1),p=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&r.call(t)},f=hF(t,!1),y=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&r.call(t)},h=A=>{r.call(t,A)},m=ipe(t),g=()=>{m=!0;let A=bF(t)||pF(t);if(A&&typeof A!="boolean")return r.call(t,A);if(s&&!f&&zv(t,!0)&&!hF(t,!1))return r.call(t,new dF);if(o&&!d&&!yF(t,!1))return r.call(t,new dF);r.call(t)},E=()=>{m=!0;let A=bF(t)||pF(t);if(A&&typeof A!="boolean")return r.call(t,A);r.call(t)},b=()=>{t.req.on("finish",p)};upe(t)?(t.on("complete",p),u||t.on("abort",g),t.req?b():t.on("request",b)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",g),t.on("end",y),t.on("finish",p),e.error!==!1&&t.on("error",h),t.on("close",g),m?si.nextTick(g):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||si.nextTick(E):(!s&&(!u||fF(t))&&(d||gF(t)===!1)||!o&&(!u||gF(t))&&(f||fF(t)===!1)||l&&t.req&&t.aborted)&&si.nextTick(E);let v=()=>{r=Gv,t.removeListener("aborted",g),t.removeListener("complete",p),t.removeListener("abort",g),t.removeListener("request",b),t.req&&t.req.removeListener("finish",p),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",p),t.removeListener("end",y),t.removeListener("error",h),t.removeListener("close",g)};if(e.signal&&!m){let A=()=>{let k=r;v(),k.call(t,new wF(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)si.nextTick(A);else{ta=ta||Gt().addAbortListener;let k=ta(e.signal,A),R=r;r=Vv((...N)=>{k[_F](),R.apply(t,N)})}}return v}function dpe(t,e,r){let n=!1,i=Gv;if(e.signal)if(i=()=>{n=!0,r.call(t,new wF(void 0,{cause:e.signal.reason}))},e.signal.aborted)si.nextTick(i);else{ta=ta||Gt().addAbortListener;let o=ta(e.signal,i),a=r;r=Vv((...l)=>{o[_F](),a.apply(t,l)})}let s=(...o)=>{n||si.nextTick(()=>r.apply(t,o))};return npe(t[cpe].promise,s,s),Gv}function fpe(t,e){var r;let n=!1;return e===null&&(e=Hv),(r=e)!==null&&r!==void 0&&r.cleanup&&(tpe(e.cleanup,"cleanup"),n=e.cleanup),new rpe((i,s)=>{let o=vF(t,e,a=>{n&&o(),a?s(a):i()})})}Kv.exports=vF;Kv.exports.finished=fpe});var _s=w((GIe,CF)=>{"use strict";var ln=Ae(),{aggregateTwoErrors:hpe,codes:{ERR_MULTIPLE_CALLBACK:ppe},AbortError:gpe}=Ft(),{Symbol:xF}=je(),{kIsDestroyed:mpe,isDestroyed:ype,isFinished:bpe,isServerRequest:wpe}=an(),TF=xF("kDestroy"),Yv=xF("kConstruct");function AF(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function _pe(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(AF(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?SF(this,t,e):this.once(TF,function(s){SF(this,hpe(s,t),e)}),this)}function SF(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;AF(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?ln.nextTick(vpe,t,s):ln.nextTick(RF,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function vpe(t,e){Jv(t,e),RF(t)}function RF(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function Jv(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function Spe(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function Zv(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?ln.nextTick(Jv,t,e):Jv(t,e))}function Epe(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(Yv,e),!(t.listenerCount(Yv)>1)&&ln.nextTick(xpe,t)}function xpe(t){let e=!1;function r(n){if(e){Zv(t,n??new ppe);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(TF,n):n?Zv(t,n,!0):ln.nextTick(Tpe,t)}try{t._construct(n=>{ln.nextTick(r,n)})}catch(n){ln.nextTick(r,n)}}function Tpe(t){t.emit(Yv)}function EF(t){return t?.setHeader&&typeof t.abort=="function"}function IF(t){t.emit("close")}function Ape(t,e){t.emit("error",e),ln.nextTick(IF,t)}function Rpe(t,e){!t||ype(t)||(!e&&!bpe(t)&&(e=new gpe),wpe(t)?(t.socket=null,t.destroy(e)):EF(t)?t.abort():EF(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?ln.nextTick(Ape,t,e):ln.nextTick(IF,t),t.destroyed||(t[mpe]=!0))}CF.exports={construct:Epe,destroyer:Rpe,destroy:_pe,undestroy:Spe,errorOrDestroy:Zv}});var tp=w((KIe,NF)=>{"use strict";var{ArrayIsArray:Ipe,ObjectSetPrototypeOf:kF}=je(),{EventEmitter:Xh}=require("events");function ep(t){Xh.call(this,t)}kF(ep.prototype,Xh.prototype);kF(ep,Xh);ep.prototype.pipe=function(t,e){let r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),Xh.listenerCount(this,"error")===0&&this.emit("error",u)}Qv(r,"error",l),Qv(t,"error",l);function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function Qv(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Ipe(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}NF.exports={Stream:ep,prependListener:Qv}});var vc=w((YIe,rp)=>{"use strict";var{SymbolDispose:Cpe}=je(),{AbortError:OF,codes:kpe}=Ft(),{isNodeStream:qF,isWebStream:Npe,kControllerErrorFunction:Ope}=an(),qpe=qn(),{ERR_INVALID_ARG_TYPE:PF}=kpe,Xv,Ppe=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new PF(e,"AbortSignal",t)};rp.exports.addAbortSignal=function(e,r){if(Ppe(e,"signal"),!qF(r)&&!Npe(r))throw new PF("stream",["ReadableStream","WritableStream","Stream"],r);return rp.exports.addAbortSignalNoValidate(e,r)};rp.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=qF(e)?()=>{e.destroy(new OF(void 0,{cause:t.reason}))}:()=>{e[Ope](new OF(void 0,{cause:t.reason}))};if(t.aborted)r();else{Xv=Xv||Gt().addAbortListener;let n=Xv(t,r);qpe(e,n[Cpe])}return e}});var DF=w((ZIe,MF)=>{"use strict";var{StringPrototypeSlice:LF,SymbolIterator:Lpe,TypedArrayPrototypeSet:np,Uint8Array:Mpe}=je(),{Buffer:eS}=require("buffer"),{inspect:Dpe}=Gt();MF.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return eS.alloc(0);let r=eS.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)np(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Lpe](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=LF(s,0,e),this.head=n,n.data=LF(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=eS.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)np(r,o,n-e),e-=o.length;else{e===o.length?(np(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(np(r,new Mpe(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return Dpe(this,{...r,depth:0,customInspect:!1})}}});var Sc=w((QIe,jF)=>{"use strict";var{MathFloor:$pe,NumberIsInteger:Fpe}=je(),{validateInteger:Bpe}=ea(),{ERR_INVALID_ARG_VALUE:jpe}=Ft().codes,$F=16*1024,FF=16;function Upe(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function BF(t){return t?FF:$F}function Wpe(t,e){Bpe(e,"value",0),t?FF=e:$F=e}function zpe(t,e,r,n){let i=Upe(e,n,r);if(i!=null){if(!Fpe(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new jpe(s,i)}return $pe(i)}return BF(t.objectMode)}jF.exports={getHighWaterMark:zpe,getDefaultHighWaterMark:BF,setDefaultHighWaterMark:Wpe}});var tS=w((XIe,HF)=>{"use strict";var UF=Ae(),{PromisePrototypeThen:Hpe,SymbolAsyncIterator:WF,SymbolIterator:zF}=je(),{Buffer:Vpe}=require("buffer"),{ERR_INVALID_ARG_TYPE:Gpe,ERR_STREAM_NULL_VALUES:Kpe}=Ft().codes;function Ype(t,e,r){let n;if(typeof e=="string"||e instanceof Vpe)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[WF])i=!0,n=e[WF]();else if(e&&e[zF])i=!1,n=e[zF]();else throw new Gpe("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){Hpe(a(c),()=>UF.nextTick(u,c),d=>UF.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof n.throw=="function";if(u&&d){let{value:p,done:f}=await n.throw(c);if(await p,f)return}if(typeof n.return=="function"){let{value:p}=await n.return();await p}}async function l(){for(;;){try{let{value:c,done:u}=i?await n.next():n.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new Kpe;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}HF.exports=Ype});var xc=w((eCe,cB)=>{"use strict";var Nr=Ae(),{ArrayPrototypeIndexOf:Jpe,NumberIsInteger:Zpe,NumberIsNaN:Qpe,NumberParseInt:Xpe,ObjectDefineProperties:cS,ObjectKeys:ege,ObjectSetPrototypeOf:KF,Promise:YF,SafeSet:tge,SymbolAsyncDispose:rge,SymbolAsyncIterator:nge,Symbol:ige}=je();cB.exports=Q;Q.ReadableState=ap;var{EventEmitter:sge}=require("events"),{Stream:oi,prependListener:oge}=tp(),{Buffer:rS}=require("buffer"),{addAbortSignal:age}=vc(),JF=qn(),ue=Gt().debuglog("stream",t=>{ue=t}),lge=DF(),ia=_s(),{getHighWaterMark:cge,getDefaultHighWaterMark:uge}=Sc(),{aggregateTwoErrors:VF,codes:{ERR_INVALID_ARG_TYPE:dge,ERR_METHOD_NOT_IMPLEMENTED:fge,ERR_OUT_OF_RANGE:hge,ERR_STREAM_PUSH_AFTER_EOF:pge,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:gge},AbortError:mge}=Ft(),{validateObject:yge}=ea(),vs=ige("kPaused"),{StringDecoder:ZF}=vl(),bge=tS();KF(Q.prototype,oi.prototype);KF(Q,oi);var nS=()=>{},{errorOrDestroy:ra}=ia,na=1,wge=2,QF=4,Ec=8,XF=16,ip=32,sp=64,eB=128,_ge=256,vge=512,Sge=1024,aS=2048,lS=4096,Ege=8192,xge=16384,Tge=32768,tB=65536,Age=1<<17,Rge=1<<18;function ft(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}cS(ap.prototype,{objectMode:ft(na),ended:ft(wge),endEmitted:ft(QF),reading:ft(Ec),constructed:ft(XF),sync:ft(ip),needReadable:ft(sp),emittedReadable:ft(eB),readableListening:ft(_ge),resumeScheduled:ft(vge),errorEmitted:ft(Sge),emitClose:ft(aS),autoDestroy:ft(lS),destroyed:ft(Ege),closed:ft(xge),closeEmitted:ft(Tge),multiAwaitDrain:ft(tB),readingMore:ft(Age),dataEmitted:ft(Rge)});function ap(t,e,r){typeof r!="boolean"&&(r=e instanceof cn()),this.state=aS|lS|XF|ip,t&&t.objectMode&&(this.state|=na),r&&t&&t.readableObjectMode&&(this.state|=na),this.highWaterMark=t?cge(this,t,"readableHighWaterMark",r):uge(!1),this.buffer=new lge,this.length=0,this.pipes=[],this.flowing=null,this[vs]=null,t&&t.emitClose===!1&&(this.state&=~aS),t&&t.autoDestroy===!1&&(this.state&=~lS),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new ZF(t.encoding),this.encoding=t.encoding)}function Q(t){if(!(this instanceof Q))return new Q(t);let e=this instanceof cn();this._readableState=new ap(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&age(t.signal,this)),oi.call(this,t),ia.construct(this,()=>{this._readableState.needReadable&&op(this,this._readableState)})}Q.prototype.destroy=ia.destroy;Q.prototype._undestroy=ia.undestroy;Q.prototype._destroy=function(t,e){e(t)};Q.prototype[sge.captureRejectionSymbol]=function(t){this.destroy(t)};Q.prototype[rge]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new mge,this.destroy(t)),new YF((e,r)=>JF(this,n=>n&&n!==t?r(n):e(null)))};Q.prototype.push=function(t,e){return rB(this,t,e,!1)};Q.prototype.unshift=function(t,e){return rB(this,t,e,!0)};function rB(t,e,r,n){ue("readableAddChunk",e);let i=t._readableState,s;if((i.state&na)===0&&(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=rS.from(e,r).toString(i.encoding):(e=rS.from(e,r),r=""))):e instanceof rS?r="":oi._isUint8Array(e)?(e=oi._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new dge("chunk",["string","Buffer","Uint8Array"],e))),s)ra(t,s);else if(e===null)i.state&=~Ec,kge(t,i);else if((i.state&na)!==0||e&&e.length>0)if(n)if((i.state&QF)!==0)ra(t,new gge);else{if(i.destroyed||i.errored)return!1;iS(t,i,e,!0)}else if(i.ended)ra(t,new pge);else{if(i.destroyed||i.errored)return!1;i.state&=~Ec,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?iS(t,i,e,!1):op(t,i)):iS(t,i,e,!1)}else n||(i.state&=~Ec,op(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function iS(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&tB)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&sp)!==0&&lp(t)),op(t,e)}Q.prototype.isPaused=function(){let t=this._readableState;return t[vs]===!0||t.flowing===!1};Q.prototype.setEncoding=function(t){let e=new ZF(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var Ige=1073741824;function Cge(t){if(t>Ige)throw new hge("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function GF(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&na)!==0?1:Qpe(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Q.prototype.read=function(t){ue("read",t),t===void 0?t=NaN:Zpe(t)||(t=Xpe(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=Cge(t)),t!==0&&(e.state&=~eB),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return ue("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?sS(this):lp(this),null;if(t=GF(t,e),t===0&&e.ended)return e.length===0&&sS(this),null;let n=(e.state&sp)!==0;if(ue("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,ue("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,ue("reading, ended or constructing",n);else if(n){ue("do read"),e.state|=Ec|ip,e.length===0&&(e.state|=sp);try{this._read(e.highWaterMark)}catch(s){ra(this,s)}e.state&=~ip,e.reading||(t=GF(r,e))}let i;return t>0?i=aB(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&sS(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function kge(t,e){if(ue("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?lp(t):(e.needReadable=!1,e.emittedReadable=!0,nB(t))}}function lp(t){let e=t._readableState;ue("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(ue("emitReadable",e.flowing),e.emittedReadable=!0,Nr.nextTick(nB,t))}function nB(t){let e=t._readableState;ue("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,sB(t)}function op(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Nr.nextTick(Nge,t,e))}function Nge(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(ue("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Q.prototype._read=function(t){throw new fge("_read()")};Q.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new tge(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),ue("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Nr.stdout&&t!==Nr.stderr?a:m;n.endEmitted?Nr.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(g,E){ue("onunpipe"),g===r&&E&&E.hasUnpiped===!1&&(E.hasUnpiped=!0,u())}function a(){ue("onend"),t.end()}let l,c=!1;function u(){ue("cleanup"),t.removeListener("close",y),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",p),c=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(ue("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(ue("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=Oge(r,t),t.on("drain",l))}r.on("data",p);function p(g){ue("ondata");let E=t.write(g);ue("dest.write",E),E===!1&&d()}function f(g){if(ue("onerror",g),m(),t.removeListener("error",f),t.listenerCount("error")===0){let E=t._writableState||t._readableState;E&&!E.errorEmitted?ra(t,g):t.emit("error",g)}}oge(t,"error",f);function y(){t.removeListener("finish",h),m()}t.once("close",y);function h(){ue("onfinish"),t.removeListener("close",y),m()}t.once("finish",h);function m(){ue("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(ue("pipe resume"),r.resume()),t};function Oge(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(ue("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(ue("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Q.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=Jpe(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};Q.prototype.on=function(t,e){let r=oi.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,ue("on readable",n.length,n.reading),n.length?lp(this):n.reading||Nr.nextTick(qge,this)),r};Q.prototype.addListener=Q.prototype.on;Q.prototype.removeListener=function(t,e){let r=oi.prototype.removeListener.call(this,t,e);return t==="readable"&&Nr.nextTick(iB,this),r};Q.prototype.off=Q.prototype.removeListener;Q.prototype.removeAllListeners=function(t){let e=oi.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Nr.nextTick(iB,this),e};function iB(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[vs]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function qge(t){ue("readable nexttick read 0"),t.read(0)}Q.prototype.resume=function(){let t=this._readableState;return t.flowing||(ue("resume"),t.flowing=!t.readableListening,Pge(this,t)),t[vs]=!1,this};function Pge(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Nr.nextTick(Lge,t,e))}function Lge(t,e){ue("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),sB(t),e.flowing&&!e.reading&&t.read(0)}Q.prototype.pause=function(){return ue("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ue("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[vs]=!0,this};function sB(t){let e=t._readableState;for(ue("flow",e.flowing);e.flowing&&t.read()!==null;);}Q.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{ra(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=ege(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};Q.prototype[nge]=function(){return oB(this)};Q.prototype.iterator=function(t){return t!==void 0&&yge(t,"options"),oB(this,t)};function oB(t,e){typeof t.read!="function"&&(t=Q.wrap(t,{objectMode:!0}));let r=Mge(t,e);return r.stream=t,r}async function*Mge(t,e){let r=nS;function n(o){this===t?(r(),r=nS):r=o}t.on("readable",n);let i,s=JF(t,{writable:!1},o=>{i=o?VF(i,o):null,r(),r=nS});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new YF(n)}}}catch(o){throw i=VF(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?ia.destroyer(t,null):(t.off("readable",n),s())}}cS(Q.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});cS(ap.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[vs]!==!1},set(t){this[vs]=!!t}}});Q._fromList=aB;function aB(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function sS(t){let e=t._readableState;ue("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Nr.nextTick(Dge,e,t))}function Dge(t,e){if(ue("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Nr.nextTick($ge,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function $ge(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Q.from=function(t,e){return bge(Q,t,e)};var oS;function lB(){return oS===void 0&&(oS={}),oS}Q.fromWeb=function(t,e){return lB().newStreamReadableFromReadableStream(t,e)};Q.toWeb=function(t,e){return lB().newReadableStreamFromStreamReadable(t,e)};Q.wrap=function(t,e){var r,n;return new Q({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){ia.destroyer(t,i),s(i)}}).wrap(t)}});var hp=w((tCe,vB)=>{"use strict";var Ss=Ae(),{ArrayPrototypeSlice:fB,Error:Fge,FunctionPrototypeSymbolHasInstance:hB,ObjectDefineProperty:pB,ObjectDefineProperties:Bge,ObjectSetPrototypeOf:gB,StringPrototypeToLowerCase:jge,Symbol:Uge,SymbolHasInstance:Wge}=je();vB.exports=Ve;Ve.WritableState=Rc;var{EventEmitter:zge}=require("events"),Tc=tp().Stream,{Buffer:cp}=require("buffer"),fp=_s(),{addAbortSignal:Hge}=vc(),{getHighWaterMark:Vge,getDefaultHighWaterMark:Gge}=Sc(),{ERR_INVALID_ARG_TYPE:Kge,ERR_METHOD_NOT_IMPLEMENTED:Yge,ERR_MULTIPLE_CALLBACK:mB,ERR_STREAM_CANNOT_PIPE:Jge,ERR_STREAM_DESTROYED:Ac,ERR_STREAM_ALREADY_FINISHED:Zge,ERR_STREAM_NULL_VALUES:Qge,ERR_STREAM_WRITE_AFTER_END:Xge,ERR_UNKNOWN_ENCODING:yB}=Ft().codes,{errorOrDestroy:sa}=fp;gB(Ve.prototype,Tc.prototype);gB(Ve,Tc);function fS(){}var oa=Uge("kOnFinished");function Rc(t,e,r){typeof r!="boolean"&&(r=e instanceof cn()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Vge(this,t,"writableHighWaterMark",r):Gge(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=tme.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,dp(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[oa]=[]}function dp(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Rc.prototype.getBuffer=function(){return fB(this.buffered,this.bufferedIndex)};pB(Rc.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Ve(t){let e=this instanceof cn();if(!e&&!hB(Ve,this))return new Ve(t);this._writableState=new Rc(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&Hge(t.signal,this)),Tc.call(this,t),fp.construct(this,()=>{let r=this._writableState;r.writing||pS(this,r),gS(this,r)})}pB(Ve,Wge,{__proto__:null,value:function(t){return hB(this,t)?!0:this!==Ve?!1:t&&t._writableState instanceof Rc}});Ve.prototype.pipe=function(){sa(this,new Jge)};function bB(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!cp.isEncoding(r))throw new yB(r);typeof n!="function"&&(n=fS)}if(e===null)throw new Qge;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=cp.from(e,r),r="buffer");else if(e instanceof cp)r="buffer";else if(Tc._isUint8Array(e))e=Tc._uint8ArrayToBuffer(e),r="buffer";else throw new Kge("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new Xge:i.destroyed&&(s=new Ac("write")),s?(Ss.nextTick(n,s),sa(t,s,!0),s):(i.pendingcb++,eme(t,i,e,r,n))}Ve.prototype.write=function(t,e,r){return bB(this,t,e,r)===!0};Ve.prototype.cork=function(){this._writableState.corked++};Ve.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||pS(this,t))};Ve.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=jge(e)),!cp.isEncoding(e))throw new yB(e);return this._writableState.defaultEncoding=e,this};function eme(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==fS&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function uB(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Ac("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function dB(t,e,r,n){--e.pendingcb,n(r),hS(e),sa(t,r)}function tme(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){sa(t,new mB);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?Ss.nextTick(dB,t,r,e,i):dB(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&pS(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},Ss.nextTick(rme,r.afterWriteTickInfo)):wB(t,r,1,i))}function rme({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,wB(t,e,r,n)}function wB(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&hS(e),gS(t,e)}function hS(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Ac("write"))}let r=t[oa].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new Ac("end"))}dp(t)}function pS(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?fS:c=>{for(let u=o;u<r.length;++u)r[u].callback(c)},l=e.allNoop&&o===0?r:fB(r,o);l.allBuffers=e.allBuffers,uB(t,e,!0,e.length,l,"",a),dp(e)}else{do{let{chunk:a,encoding:l,callback:c}=r[o];r[o++]=null;let u=i?1:a.length;uB(t,e,!1,u,a,l,c)}while(o<r.length&&!e.writing);o===r.length?dp(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}Ve.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new Yge("_write()")};Ve.prototype._writev=null;Ve.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=bB(this,t,e);s instanceof Fge&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,gS(this,n,!0),n.ended=!0):n.finished?i=new Zge("end"):n.destroyed&&(i=new Ac("end"))),typeof r=="function"&&(i||n.finished?Ss.nextTick(r,i):n[oa].push(r)),this};function up(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function nme(t,e){let r=!1;function n(i){if(r){sa(t,i??mB());return}if(r=!0,e.pendingcb--,i){let s=e[oa].splice(0);for(let o=0;o<s.length;o++)s[o](i);sa(t,i,e.sync)}else up(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Ss.nextTick(dS,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function ime(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,nme(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function gS(t,e,r){up(e)&&(ime(t,e),e.pendingcb===0&&(r?(e.pendingcb++,Ss.nextTick((n,i)=>{up(i)?dS(n,i):i.pendingcb--},t,e)):up(e)&&(e.pendingcb++,dS(t,e))))}function dS(t,e){e.pendingcb--,e.finished=!0;let r=e[oa].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}Bge(Ve.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var sme=fp.destroy;Ve.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[oa].length)&&Ss.nextTick(hS,r),sme.call(this,t,e),this};Ve.prototype._undestroy=fp.undestroy;Ve.prototype._destroy=function(t,e){e(t)};Ve.prototype[zge.captureRejectionSymbol]=function(t){this.destroy(t)};var uS;function _B(){return uS===void 0&&(uS={}),uS}Ve.fromWeb=function(t,e){return _B().newStreamWritableFromWritableStream(t,e)};Ve.toWeb=function(t){return _B().newWritableStreamFromStreamWritable(t)}});var MB=w((rCe,LB)=>{var mS=Ae(),ome=require("buffer"),{isReadable:ame,isWritable:lme,isIterable:SB,isNodeStream:cme,isReadableNodeStream:EB,isWritableNodeStream:xB,isDuplexNodeStream:ume,isReadableStream:TB,isWritableStream:AB}=an(),RB=qn(),{AbortError:qB,codes:{ERR_INVALID_ARG_TYPE:dme,ERR_INVALID_RETURN_VALUE:IB}}=Ft(),{destroyer:la}=_s(),fme=cn(),PB=xc(),hme=hp(),{createDeferredPromise:CB}=Gt(),kB=tS(),NB=globalThis.Blob||ome.Blob,pme=typeof NB<"u"?function(e){return e instanceof NB}:function(e){return!1},gme=globalThis.AbortController||et().AbortController,{FunctionPrototypeCall:OB}=je(),ai=class extends fme{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};LB.exports=function t(e,r){if(ume(e))return e;if(EB(e))return aa({readable:e});if(xB(e))return aa({writable:e});if(cme(e))return aa({writable:!1,readable:!1});if(TB(e))return aa({readable:PB.fromWeb(e)});if(AB(e))return aa({writable:hme.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=mme(e);if(SB(i))return kB(ai,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=OB(l,i,d=>{if(d!=null)throw new IB("nully","body",d)},d=>{la(c,d)});return c=new ai({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,mS.nextTick(d,null)}catch(p){mS.nextTick(d,p)}})},destroy:a})}throw new IB("Iterable, AsyncIterable or AsyncFunction",r,i)}if(pme(e))return t(e.arrayBuffer());if(SB(e))return kB(ai,e,{objectMode:!0,writable:!1});if(TB(e?.readable)&&AB(e?.writable))return ai.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?EB(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?xB(e?.writable)?e?.writable:t(e.writable):void 0;return aa({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return OB(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{la(i,s)}),i=new ai({objectMode:!0,writable:!1,read(){}})}throw new dme(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function mme(t){let{promise:e,resolve:r}=CB(),n=new gme,i=n.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(mS.nextTick(c),l)return;if(i.aborted)throw new qB(void 0,{cause:i.reason});({promise:e,resolve:r}=CB()),yield a}})(),{signal:i}),write(o,a,l){let c=r;r=null,c({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function aa(t){let e=t.readable&&typeof t.readable.read!="function"?PB.wrap(t.readable):t.readable,r=t.writable,n=!!ame(e),i=!!lme(r),s,o,a,l,c;function u(d){let p=l;l=null,p?p(d):d&&c.destroy(d)}return c=new ai({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(RB(r,d=>{i=!1,d&&la(e,d),u(d)}),c._write=function(d,p,f){r.write(d,p)?f():s=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(s){let d=s;s=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(RB(e,d=>{n=!1,d&&la(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,p){!d&&l!==null&&(d=new qB),a=null,s=null,o=null,l===null?p(d):(l=p,la(r,d),la(e,d))},c}});var cn=w((nCe,FB)=>{"use strict";var{ObjectDefineProperties:yme,ObjectGetOwnPropertyDescriptor:Pn,ObjectKeys:bme,ObjectSetPrototypeOf:DB}=je();FB.exports=Or;var wS=xc(),yr=hp();DB(Or.prototype,wS.prototype);DB(Or,wS);{let t=bme(yr.prototype);for(let e=0;e<t.length;e++){let r=t[e];Or.prototype[r]||(Or.prototype[r]=yr.prototype[r])}}function Or(t){if(!(this instanceof Or))return new Or(t);wS.call(this,t),yr.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}yme(Or.prototype,{writable:{__proto__:null,...Pn(yr.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Pn(yr.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Pn(yr.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Pn(yr.prototype,"writableBuffer")},writableLength:{__proto__:null,...Pn(yr.prototype,"writableLength")},writableFinished:{__proto__:null,...Pn(yr.prototype,"writableFinished")},writableCorked:{__proto__:null,...Pn(yr.prototype,"writableCorked")},writableEnded:{__proto__:null,...Pn(yr.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Pn(yr.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var yS;function $B(){return yS===void 0&&(yS={}),yS}Or.fromWeb=function(t,e){return $B().newStreamDuplexFromReadableWritablePair(t,e)};Or.toWeb=function(t){return $B().newReadableWritablePairFromDuplex(t)};var bS;Or.from=function(t){return bS||(bS=MB()),bS(t,"body")}});var SS=w((iCe,jB)=>{"use strict";var{ObjectSetPrototypeOf:BB,Symbol:wme}=je();jB.exports=Ln;var{ERR_METHOD_NOT_IMPLEMENTED:_me}=Ft().codes,vS=cn(),{getHighWaterMark:vme}=Sc();BB(Ln.prototype,vS.prototype);BB(Ln,vS);var Ic=wme("kCallback");function Ln(t){if(!(this instanceof Ln))return new Ln(t);let e=t?vme(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),vS.call(this,t),this._readableState.sync=!1,this[Ic]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Sme)}function _S(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function Sme(){this._final!==_S&&_S.call(this)}Ln.prototype._final=_S;Ln.prototype._transform=function(t,e,r){throw new _me("_transform()")};Ln.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[Ic]=r})};Ln.prototype._read=function(){if(this[Ic]){let t=this[Ic];this[Ic]=null,t()}}});var xS=w((sCe,WB)=>{"use strict";var{ObjectSetPrototypeOf:UB}=je();WB.exports=ca;var ES=SS();UB(ca.prototype,ES.prototype);UB(ca,ES);function ca(t){if(!(this instanceof ca))return new ca(t);ES.call(this,t)}ca.prototype._transform=function(t,e,r){r(null,t)}});var yp=w((oCe,KB)=>{var Cc=Ae(),{ArrayIsArray:Eme,Promise:xme,SymbolAsyncIterator:Tme,SymbolDispose:Ame}=je(),mp=qn(),{once:Rme}=Gt(),Ime=_s(),zB=cn(),{aggregateTwoErrors:Cme,codes:{ERR_INVALID_ARG_TYPE:qS,ERR_INVALID_RETURN_VALUE:TS,ERR_MISSING_ARGS:kme,ERR_STREAM_DESTROYED:Nme,ERR_STREAM_PREMATURE_CLOSE:Ome},AbortError:qme}=Ft(),{validateFunction:Pme,validateAbortSignal:Lme}=ea(),{isIterable:Es,isReadable:AS,isReadableNodeStream:gp,isNodeStream:HB,isTransformStream:ua,isWebStream:Mme,isReadableStream:RS,isReadableFinished:Dme}=an(),$me=globalThis.AbortController||et().AbortController,IS,CS,kS;function VB(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=mp(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,Ime.destroyer(t,s||new Nme("pipe")))},cleanup:i}}function Fme(t){return Pme(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function NS(t){if(Es(t))return t;if(gp(t))return Bme(t);throw new qS("val",["Readable","Iterable","AsyncIterable"],t)}async function*Bme(t){CS||(CS=xc()),yield*CS.prototype[Tme].call(t)}async function pp(t,e,r,{end:n}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new xme((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=mp(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&(e.end(),await a()),r()}catch(c){r(i!==c?Cme(i,c):c)}finally{l(),e.off("drain",o)}}async function OS(t,e,r,{end:n}){ua(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function jme(...t){return GB(t,Rme(Fme(t)))}function GB(t,e,r){if(t.length===1&&Eme(t[0])&&(t=t[0]),t.length<2)throw new kme("streams");let n=new $me,i=n.signal,s=r?.signal,o=[];Lme(s,"options.signal");function a(){y(new qme)}kS=kS||Gt().addAbortListener;let l;s&&(l=kS(s,a));let c,u,d=[],p=0;function f(b){y(b,--p===0)}function y(b,v){var A;if(b&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=b),!(!c&&!v)){for(;d.length;)d.shift()(c);(A=l)===null||A===void 0||A[Ame](),n.abort(),v&&(c||o.forEach(k=>k()),Cc.nextTick(e,c,u))}}let h;for(let b=0;b<t.length;b++){let v=t[b],A=b<t.length-1,k=b>0,R=A||r?.end!==!1,N=b===t.length-1;if(HB(v)){let I=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var E=I;if(R){let{destroy:P,cleanup:D}=VB(v,A,k);d.push(P),AS(v)&&N&&o.push(D)}v.on("error",I),AS(v)&&N&&o.push(()=>{v.removeListener("error",I)})}if(b===0)if(typeof v=="function"){if(h=v({signal:i}),!Es(h))throw new TS("Iterable, AsyncIterable or Stream","source",h)}else Es(v)||gp(v)||ua(v)?h=v:h=zB.from(v);else if(typeof v=="function"){if(ua(h)){var m;h=NS((m=h)===null||m===void 0?void 0:m.readable)}else h=NS(h);if(h=v(h,{signal:i}),A){if(!Es(h,!0))throw new TS("AsyncIterable",`transform[${b-1}]`,h)}else{var g;IS||(IS=xS());let I=new IS({objectMode:!0}),P=(g=h)===null||g===void 0?void 0:g.then;if(typeof P=="function")p++,P.call(h,B=>{u=B,B!=null&&I.write(B),R&&I.end(),Cc.nextTick(f)},B=>{I.destroy(B),Cc.nextTick(f,B)});else if(Es(h,!0))p++,pp(h,I,f,{end:R});else if(RS(h)||ua(h)){let B=h.readable||h;p++,pp(B,I,f,{end:R})}else throw new TS("AsyncIterable or Promise","destination",h);h=I;let{destroy:D,cleanup:F}=VB(h,!1,!0);d.push(D),N&&o.push(F)}}else if(HB(v)){if(gp(h)){p+=2;let I=Ume(h,v,f,{end:R});AS(v)&&N&&o.push(I)}else if(ua(h)||RS(h)){let I=h.readable||h;p++,pp(I,v,f,{end:R})}else if(Es(h))p++,pp(h,v,f,{end:R});else throw new qS("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=v}else if(Mme(v)){if(gp(h))p++,OS(NS(h),v,f,{end:R});else if(RS(h)||Es(h))p++,OS(h,v,f,{end:R});else if(ua(h))p++,OS(h.readable,v,f,{end:R});else throw new qS("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=v}else h=zB.from(v)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Cc.nextTick(a),h}function Ume(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new Ome)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;Dme(t)?Cc.nextTick(o):t.once("end",o)}else r();return mp(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),mp(e,{readable:!1,writable:!0},r)}KB.exports={pipelineImpl:GB,pipeline:jme}});var LS=w((aCe,ej)=>{"use strict";var{pipeline:Wme}=yp(),bp=cn(),{destroyer:zme}=_s(),{isNodeStream:wp,isReadable:YB,isWritable:JB,isWebStream:PS,isTransformStream:xs,isWritableStream:ZB,isReadableStream:QB}=an(),{AbortError:Hme,codes:{ERR_INVALID_ARG_VALUE:XB,ERR_MISSING_ARGS:Vme}}=Ft(),Gme=qn();ej.exports=function(...e){if(e.length===0)throw new Vme("streams");if(e.length===1)return bp.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=bp.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=bp.from(e[f])}for(let f=0;f<e.length;++f)if(!(!wp(e[f])&&!PS(e[f]))){if(f<e.length-1&&!(YB(e[f])||QB(e[f])||xs(e[f])))throw new XB(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(JB(e[f])||ZB(e[f])||xs(e[f])))throw new XB(`streams[${f}]`,r[f],"must be writable")}let n,i,s,o,a;function l(f){let y=o;o=null,y?y(f):f?a.destroy(f):!p&&!d&&a.destroy()}let c=e[0],u=Wme(e,l),d=!!(JB(c)||ZB(c)||xs(c)),p=!!(YB(u)||QB(u)||xs(u));if(a=new bp({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:p}),d){if(wp(c))a._write=function(y,h,m){c.write(y,h)?m():n=m},a._final=function(y){c.end(),i=y},c.on("drain",function(){if(n){let y=n;n=null,y()}});else if(PS(c)){let h=(xs(c)?c.writable:c).getWriter();a._write=async function(m,g,E){try{await h.ready,h.write(m).catch(()=>{}),E()}catch(b){E(b)}},a._final=async function(m){try{await h.ready,h.close().catch(()=>{}),i=m}catch(g){m(g)}}}let f=xs(u)?u.readable:u;Gme(f,()=>{if(i){let y=i;i=null,y()}})}if(p){if(wp(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(PS(u)){let y=(xs(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:m}=await y.read();if(!a.push(h))return;if(m){a.push(null);return}}catch{return}}}}return a._destroy=function(f,y){!f&&o!==null&&(f=new Hme),s=null,n=null,i=null,o===null?y(f):(o=y,wp(u)&&zme(u,f))},a}});var uj=w((lCe,$S)=>{"use strict";var Kme=globalThis.AbortController||et().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Yme,ERR_INVALID_ARG_TYPE:kc,ERR_MISSING_ARGS:Jme,ERR_OUT_OF_RANGE:Zme},AbortError:un}=Ft(),{validateAbortSignal:Ts,validateInteger:tj,validateObject:As}=ea(),Qme=je().Symbol("kWeak"),Xme=je().Symbol("kResistStopPropagation"),{finished:eye}=qn(),tye=LS(),{addAbortSignalNoValidate:rye}=vc(),{isWritable:nye,isNodeStream:iye}=an(),{deprecate:sye}=Gt(),{ArrayPrototypePush:oye,Boolean:aye,MathFloor:rj,Number:lye,NumberIsNaN:cye,Promise:nj,PromiseReject:ij,PromiseResolve:uye,PromisePrototypeThen:sj,Symbol:aj}=je(),_p=aj("kEmpty"),oj=aj("kEof");function dye(t,e){if(e!=null&&As(e,"options"),e?.signal!=null&&Ts(e.signal,"options.signal"),iye(t)&&!nye(t))throw new Yme("stream",t,"must be writable");let r=tye(this,t);return e!=null&&e.signal&&rye(e.signal,r),r}function vp(t,e){if(typeof t!="function")throw new kc("fn",["Function","AsyncFunction"],t);e!=null&&As(e,"options"),e?.signal!=null&&Ts(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=rj(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=rj(e.highWaterMark)),tj(r,"options.concurrency",1),tj(n,"options.highWaterMark",0),n+=r,async function*(){let s=Gt().AbortSignalAny([e?.signal].filter(aye)),o=this,a=[],l={signal:s},c,u,d=!1,p=0;function f(){d=!0,y()}function y(){p-=1,h()}function h(){u&&!d&&p<r&&a.length<n&&(u(),u=null)}async function m(){try{for await(let g of o){if(d)return;if(s.aborted)throw new un;try{if(g=t(g,l),g===_p)continue;g=uye(g)}catch(E){g=ij(E)}p+=1,sj(g,y,f),a.push(g),c&&(c(),c=null),!d&&(a.length>=n||p>=r)&&await new nj(E=>{u=E})}a.push(oj)}catch(g){let E=ij(g);sj(E,y,f),a.push(E)}finally{d=!0,c&&(c(),c=null)}}m();try{for(;;){for(;a.length>0;){let g=await a[0];if(g===oj)return;if(s.aborted)throw new un;g!==_p&&(yield g),a.shift(),h()}await new nj(g=>{c=g})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function fye(t=void 0){return t!=null&&As(t,"options"),t?.signal!=null&&Ts(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new un({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function lj(t,e=void 0){for await(let r of DS.call(this,t,e))return!0;return!1}async function hye(t,e=void 0){if(typeof t!="function")throw new kc("fn",["Function","AsyncFunction"],t);return!await lj.call(this,async(...r)=>!await t(...r),e)}async function pye(t,e){for await(let r of DS.call(this,t,e))return r}async function gye(t,e){if(typeof t!="function")throw new kc("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),_p}for await(let n of vp.call(this,r,e));}function DS(t,e){if(typeof t!="function")throw new kc("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:_p}return vp.call(this,r,e)}var MS=class extends Jme{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function mye(t,e,r){var n;if(typeof t!="function")throw new kc("reducer",["Function","AsyncFunction"],t);r!=null&&As(r,"options"),r?.signal!=null&&Ts(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new un(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await eye(this.destroy(c)),c}let s=new Kme,o=s.signal;if(r!=null&&r.signal){let c={once:!0,[Qme]:this,[Xme]:!0};r.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new un;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new MS}finally{s.abort()}return e}async function yye(t){t!=null&&As(t,"options"),t?.signal!=null&&Ts(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new un(void 0,{cause:t.signal.reason});oye(e,n)}return e}function bye(t,e){let r=vp.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function cj(t){if(t=lye(t),cye(t))return 0;if(t<0)throw new Zme("number",">= 0",t);return t}function wye(t,e=void 0){return e!=null&&As(e,"options"),e?.signal!=null&&Ts(e.signal,"options.signal"),t=cj(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new un;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new un;t--<=0&&(yield s)}}.call(this)}function _ye(t,e=void 0){return e!=null&&As(e,"options"),e?.signal!=null&&Ts(e.signal,"options.signal"),t=cj(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new un;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new un;if(t-- >0&&(yield s),t<=0)return}}.call(this)}$S.exports.streamReturningOperators={asIndexedPairs:sye(fye,"readable.asIndexedPairs will be removed in a future version."),drop:wye,filter:DS,flatMap:bye,map:vp,take:_ye,compose:dye};$S.exports.promiseReturningOperators={every:hye,forEach:gye,reduce:mye,toArray:yye,some:lj,find:pye}});var FS=w((cCe,dj)=>{"use strict";var{ArrayPrototypePop:vye,Promise:Sye}=je(),{isIterable:Eye,isNodeStream:xye,isWebStream:Tye}=an(),{pipelineImpl:Aye}=yp(),{finished:Rye}=qn();BS();function Iye(...t){return new Sye((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!xye(s)&&!Eye(s)&&!Tye(s)){let o=vye(t);n=o.signal,i=o.end}Aye(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}dj.exports={finished:Rye,pipeline:Iye}});var BS=w((uCe,_j)=>{"use strict";var{Buffer:Cye}=require("buffer"),{ObjectDefineProperty:Mn,ObjectKeys:pj,ReflectApply:gj}=je(),{promisify:{custom:mj}}=Gt(),{streamReturningOperators:fj,promiseReturningOperators:hj}=uj(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:yj}}=Ft(),kye=LS(),{setDefaultHighWaterMark:Nye,getDefaultHighWaterMark:Oye}=Sc(),{pipeline:bj}=yp(),{destroyer:qye}=_s(),wj=qn(),jS=FS(),Nc=an(),Me=_j.exports=tp().Stream;Me.isDestroyed=Nc.isDestroyed;Me.isDisturbed=Nc.isDisturbed;Me.isErrored=Nc.isErrored;Me.isReadable=Nc.isReadable;Me.isWritable=Nc.isWritable;Me.Readable=xc();for(let t of pj(fj)){let r=function(...n){if(new.target)throw yj();return Me.Readable.from(gj(e,this,n))},e=fj[t];Mn(r,"name",{__proto__:null,value:e.name}),Mn(r,"length",{__proto__:null,value:e.length}),Mn(Me.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let t of pj(hj)){let r=function(...n){if(new.target)throw yj();return gj(e,this,n)},e=hj[t];Mn(r,"name",{__proto__:null,value:e.name}),Mn(r,"length",{__proto__:null,value:e.length}),Mn(Me.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}Me.Writable=hp();Me.Duplex=cn();Me.Transform=SS();Me.PassThrough=xS();Me.pipeline=bj;var{addAbortSignal:Pye}=vc();Me.addAbortSignal=Pye;Me.finished=wj;Me.destroy=qye;Me.compose=kye;Me.setDefaultHighWaterMark=Nye;Me.getDefaultHighWaterMark=Oye;Mn(Me,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return jS}});Mn(bj,mj,{__proto__:null,enumerable:!0,get(){return jS.pipeline}});Mn(wj,mj,{__proto__:null,enumerable:!0,get(){return jS.finished}});Me.Stream=Me;Me._isUint8Array=function(e){return e instanceof Uint8Array};Me._uint8ArrayToBuffer=function(e){return Cye.from(e.buffer,e.byteOffset,e.byteLength)}});var vj=w((dCe,se)=>{"use strict";var ht=require("stream");if(ht&&process.env.READABLE_STREAM==="disable"){let t=ht.promises;se.exports._uint8ArrayToBuffer=ht._uint8ArrayToBuffer,se.exports._isUint8Array=ht._isUint8Array,se.exports.isDisturbed=ht.isDisturbed,se.exports.isErrored=ht.isErrored,se.exports.isReadable=ht.isReadable,se.exports.Readable=ht.Readable,se.exports.Writable=ht.Writable,se.exports.Duplex=ht.Duplex,se.exports.Transform=ht.Transform,se.exports.PassThrough=ht.PassThrough,se.exports.addAbortSignal=ht.addAbortSignal,se.exports.finished=ht.finished,se.exports.destroy=ht.destroy,se.exports.pipeline=ht.pipeline,se.exports.compose=ht.compose,Object.defineProperty(ht,"promises",{configurable:!0,enumerable:!0,get(){return t}}),se.exports.Stream=ht.Stream}else{let t=BS(),e=FS(),r=t.Readable.destroy;se.exports=t.Readable,se.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,se.exports._isUint8Array=t._isUint8Array,se.exports.isDisturbed=t.isDisturbed,se.exports.isErrored=t.isErrored,se.exports.isReadable=t.isReadable,se.exports.Readable=t.Readable,se.exports.Writable=t.Writable,se.exports.Duplex=t.Duplex,se.exports.Transform=t.Transform,se.exports.PassThrough=t.PassThrough,se.exports.addAbortSignal=t.addAbortSignal,se.exports.finished=t.finished,se.exports.destroy=t.destroy,se.exports.destroy=r,se.exports.pipeline=t.pipeline,se.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),se.exports.Stream=t.Stream}se.exports.default=se.exports});var Ej=w((fCe,Sj)=>{"use strict";var{Transform:Lye}=vj(),Mye=Vh(),US=class extends Lye{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0}_transform(e,r,n){e&&(this.checksum=Mye.buf(e,this.checksum)>>>0,this.rawSize+=e.length),n(null,e)}digest(e){let r=Buffer.allocUnsafe(4);return r.writeUInt32BE(this.checksum>>>0,0),e?r.toString(e):r}hex(){return this.digest("hex").toUpperCase()}size(){return this.rawSize}};Sj.exports=US});var Tj=w((hCe,xj)=>{"use strict";var{DeflateRaw:Dye}=require("zlib"),$ye=Vh(),WS=class extends Dye{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0,this.compressedSize=0}push(e,r){return e&&(this.compressedSize+=e.length),super.push(e,r)}_transform(e,r,n){e&&(this.checksum=$ye.buf(e,this.checksum)>>>0,this.rawSize+=e.length),super._transform(e,r,n)}digest(e){let r=Buffer.allocUnsafe(4);return r.writeUInt32BE(this.checksum>>>0,0),e?r.toString(e):r}hex(){return this.digest("hex").toUpperCase()}size(e=!1){return e?this.compressedSize:this.rawSize}};xj.exports=WS});var zS=w((pCe,Aj)=>{"use strict";Aj.exports={CRC32Stream:Ej(),DeflateCRC32Stream:Tj()}});var Cj=w((bCe,Ij)=>{var Fye=require("util").inherits,Bye=Vh(),{CRC32Stream:jye}=zS(),{DeflateCRC32Stream:Uye}=zS(),Rj=Nv(),gCe=b_(),mCe=m_(),K=y_(),yCe=Cv(),G=mh(),_t=Ij.exports=function(t){if(!(this instanceof _t))return new _t(t);t=this.options=this._defaults(t),Rj.call(this,t),this._entry=null,this._entries=[],this._archive={centralLength:0,centralOffset:0,comment:"",finish:!1,finished:!1,processing:!1,forceZip64:t.forceZip64,forceLocalTime:t.forceLocalTime}};Fye(_t,Rj);_t.prototype._afterAppend=function(t){this._entries.push(t),t.getGeneralPurposeBit().usesDataDescriptor()&&this._writeDataDescriptor(t),this._archive.processing=!1,this._entry=null,this._archive.finish&&!this._archive.finished&&this._finish()};_t.prototype._appendBuffer=function(t,e,r){e.length===0&&t.setMethod(K.METHOD_STORED);var n=t.getMethod();if(n===K.METHOD_STORED&&(t.setSize(e.length),t.setCompressedSize(e.length),t.setCrc(Bye.buf(e)>>>0)),this._writeLocalFileHeader(t),n===K.METHOD_STORED){this.write(e),this._afterAppend(t),r(null,t);return}else if(n===K.METHOD_DEFLATED){this._smartStream(t,r).end(e);return}else{r(new Error("compression method "+n+" not implemented"));return}};_t.prototype._appendStream=function(t,e,r){t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(K.MIN_VERSION_DATA_DESCRIPTOR),this._writeLocalFileHeader(t);var n=this._smartStream(t,r);e.once("error",function(i){n.emit("error",i),n.end()}),e.pipe(n)};_t.prototype._defaults=function(t){return typeof t!="object"&&(t={}),typeof t.zlib!="object"&&(t.zlib={}),typeof t.zlib.level!="number"&&(t.zlib.level=K.ZLIB_BEST_SPEED),t.forceZip64=!!t.forceZip64,t.forceLocalTime=!!t.forceLocalTime,t};_t.prototype._finish=function(){this._archive.centralOffset=this.offset,this._entries.forEach(function(t){this._writeCentralFileHeader(t)}.bind(this)),this._archive.centralLength=this.offset-this._archive.centralOffset,this.isZip64()&&this._writeCentralDirectoryZip64(),this._writeCentralDirectoryEnd(),this._archive.processing=!1,this._archive.finish=!0,this._archive.finished=!0,this.end()};_t.prototype._normalizeEntry=function(t){t.getMethod()===-1&&t.setMethod(K.METHOD_DEFLATED),t.getMethod()===K.METHOD_DEFLATED&&(t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(K.MIN_VERSION_DATA_DESCRIPTOR)),t.getTime()===-1&&t.setTime(new Date,this._archive.forceLocalTime),t._offsets={file:0,data:0,contents:0}};_t.prototype._smartStream=function(t,e){var r=t.getMethod()===K.METHOD_DEFLATED,n=r?new Uye(this.options.zlib):new jye,i=null;function s(){var o=n.digest().readUInt32BE(0);t.setCrc(o),t.setSize(n.size()),t.setCompressedSize(n.size(!0)),this._afterAppend(t),e(i,t)}return n.once("end",s.bind(this)),n.once("error",function(o){i=o}),n.pipe(this,{end:!1}),n};_t.prototype._writeCentralDirectoryEnd=function(){var t=this._entries.length,e=this._archive.centralLength,r=this._archive.centralOffset;this.isZip64()&&(t=K.ZIP64_MAGIC_SHORT,e=K.ZIP64_MAGIC,r=K.ZIP64_MAGIC),this.write(G.getLongBytes(K.SIG_EOCD)),this.write(K.SHORT_ZERO),this.write(K.SHORT_ZERO),this.write(G.getShortBytes(t)),this.write(G.getShortBytes(t)),this.write(G.getLongBytes(e)),this.write(G.getLongBytes(r));var n=this.getComment(),i=Buffer.byteLength(n);this.write(G.getShortBytes(i)),this.write(n)};_t.prototype._writeCentralDirectoryZip64=function(){this.write(G.getLongBytes(K.SIG_ZIP64_EOCD)),this.write(G.getEightBytes(44)),this.write(G.getShortBytes(K.MIN_VERSION_ZIP64)),this.write(G.getShortBytes(K.MIN_VERSION_ZIP64)),this.write(K.LONG_ZERO),this.write(K.LONG_ZERO),this.write(G.getEightBytes(this._entries.length)),this.write(G.getEightBytes(this._entries.length)),this.write(G.getEightBytes(this._archive.centralLength)),this.write(G.getEightBytes(this._archive.centralOffset)),this.write(G.getLongBytes(K.SIG_ZIP64_EOCD_LOC)),this.write(K.LONG_ZERO),this.write(G.getEightBytes(this._archive.centralOffset+this._archive.centralLength)),this.write(G.getLongBytes(1))};_t.prototype._writeCentralFileHeader=function(t){var e=t.getGeneralPurposeBit(),r=t.getMethod(),n=t._offsets.file,i=t.getSize(),s=t.getCompressedSize();if(t.isZip64()||n>K.ZIP64_MAGIC){i=K.ZIP64_MAGIC,s=K.ZIP64_MAGIC,n=K.ZIP64_MAGIC,t.setVersionNeededToExtract(K.MIN_VERSION_ZIP64);var o=Buffer.concat([G.getShortBytes(K.ZIP64_EXTRA_ID),G.getShortBytes(24),G.getEightBytes(t.getSize()),G.getEightBytes(t.getCompressedSize()),G.getEightBytes(t._offsets.file)],28);t.setExtra(o)}this.write(G.getLongBytes(K.SIG_CFH)),this.write(G.getShortBytes(t.getPlatform()<<8|K.VERSION_MADEBY)),this.write(G.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(G.getShortBytes(r)),this.write(G.getLongBytes(t.getTimeDos())),this.write(G.getLongBytes(t.getCrc())),this.write(G.getLongBytes(s)),this.write(G.getLongBytes(i));var a=t.getName(),l=t.getComment(),c=t.getCentralDirectoryExtra();e.usesUTF8ForNames()&&(a=Buffer.from(a),l=Buffer.from(l)),this.write(G.getShortBytes(a.length)),this.write(G.getShortBytes(c.length)),this.write(G.getShortBytes(l.length)),this.write(K.SHORT_ZERO),this.write(G.getShortBytes(t.getInternalAttributes())),this.write(G.getLongBytes(t.getExternalAttributes())),this.write(G.getLongBytes(n)),this.write(a),this.write(c),this.write(l)};_t.prototype._writeDataDescriptor=function(t){this.write(G.getLongBytes(K.SIG_DD)),this.write(G.getLongBytes(t.getCrc())),t.isZip64()?(this.write(G.getEightBytes(t.getCompressedSize())),this.write(G.getEightBytes(t.getSize()))):(this.write(G.getLongBytes(t.getCompressedSize())),this.write(G.getLongBytes(t.getSize())))};_t.prototype._writeLocalFileHeader=function(t){var e=t.getGeneralPurposeBit(),r=t.getMethod(),n=t.getName(),i=t.getLocalFileDataExtra();t.isZip64()&&(e.useDataDescriptor(!0),t.setVersionNeededToExtract(K.MIN_VERSION_ZIP64)),e.usesUTF8ForNames()&&(n=Buffer.from(n)),t._offsets.file=this.offset,this.write(G.getLongBytes(K.SIG_LFH)),this.write(G.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(G.getShortBytes(r)),this.write(G.getLongBytes(t.getTimeDos())),t._offsets.data=this.offset,e.usesDataDescriptor()?(this.write(K.LONG_ZERO),this.write(K.LONG_ZERO),this.write(K.LONG_ZERO)):(this.write(G.getLongBytes(t.getCrc())),this.write(G.getLongBytes(t.getCompressedSize())),this.write(G.getLongBytes(t.getSize()))),this.write(G.getShortBytes(n.length)),this.write(G.getShortBytes(i.length)),this.write(n),this.write(i),t._offsets.contents=this.offset};_t.prototype.getComment=function(t){return this._archive.comment!==null?this._archive.comment:""};_t.prototype.isZip64=function(){return this._archive.forceZip64||this._entries.length>K.ZIP64_MAGIC_SHORT||this._archive.centralLength>K.ZIP64_MAGIC||this._archive.centralOffset>K.ZIP64_MAGIC};_t.prototype.setComment=function(t){this._archive.comment=t}});var HS=w((wCe,kj)=>{kj.exports={ArchiveEntry:gh(),ZipArchiveEntry:b_(),ArchiveOutputStream:Nv(),ZipArchiveOutputStream:Cj()}});var Oj=w((_Ce,Nj)=>{var Wye=require("util").inherits,GS=HS().ZipArchiveOutputStream,zye=HS().ZipArchiveEntry,VS=Io(),da=Nj.exports=function(t){if(!(this instanceof da))return new da(t);t=this.options=t||{},t.zlib=t.zlib||{},GS.call(this,t),typeof t.level=="number"&&t.level>=0&&(t.zlib.level=t.level,delete t.level),!t.forceZip64&&typeof t.zlib.level=="number"&&t.zlib.level===0&&(t.store=!0),t.namePrependSlash=t.namePrependSlash||!1,t.comment&&t.comment.length>0&&this.setComment(t.comment)};Wye(da,GS);da.prototype._normalizeFileData=function(t){t=VS.defaults(t,{type:"file",name:null,namePrependSlash:this.options.namePrependSlash,linkname:null,date:null,mode:null,store:this.options.store,comment:""});var e=t.type==="directory",r=t.type==="symlink";return t.name&&(t.name=VS.sanitizePath(t.name),!r&&t.name.slice(-1)==="/"?(e=!0,t.type="directory"):e&&(t.name+="/")),(e||r)&&(t.store=!0),t.date=VS.dateify(t.date),t};da.prototype.entry=function(t,e,r){if(typeof r!="function"&&(r=this._emitErrorCallback.bind(this)),e=this._normalizeFileData(e),e.type!=="file"&&e.type!=="directory"&&e.type!=="symlink"){r(new Error(e.type+" entries not currently supported"));return}if(typeof e.name!="string"||e.name.length===0){r(new Error("entry name must be a non-empty string value"));return}if(e.type==="symlink"&&typeof e.linkname!="string"){r(new Error("entry linkname must be a non-empty string value when type equals symlink"));return}var n=new zye(e.name);return n.setTime(e.date,this.options.forceLocalTime),e.namePrependSlash&&n.setName(e.name,!0),e.store&&n.setMethod(0),e.comment.length>0&&n.setComment(e.comment),e.type==="symlink"&&typeof e.mode!="number"&&(e.mode=40960),typeof e.mode=="number"&&(e.type==="symlink"&&(e.mode|=40960),n.setUnixMode(e.mode)),e.type==="symlink"&&typeof e.linkname=="string"&&(t=Buffer.from(e.linkname)),GS.prototype.entry.call(this,n,t,r)};da.prototype.finalize=function(){this.finish()}});var Pj=w((vCe,qj)=>{var Hye=Oj(),Vye=Io(),li=function(t){if(!(this instanceof li))return new li(t);t=this.options=Vye.defaults(t,{comment:"",forceUTC:!1,namePrependSlash:!1,store:!1}),this.supports={directory:!0,symlink:!0},this.engine=new Hye(t)};li.prototype.append=function(t,e,r){this.engine.entry(t,e,r)};li.prototype.finalize=function(){this.engine.finalize()};li.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};li.prototype.pipe=function(){return this.engine.pipe.apply(this.engine,arguments)};li.prototype.unpipe=function(){return this.engine.unpipe.apply(this.engine,arguments)};qj.exports=li});var Mj=w((SCe,Lj)=>{Lj.exports=require("events")});var $j=w((xCe,Dj)=>{Dj.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var KS=w((ACe,Bj)=>{var Fj=$j();Bj.exports=class{constructor(e){this.hwm=e||16,this.head=new Fj(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let r=this.head;this.head=r.next=new Fj(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var fa=w((RCe,jj)=>{function Gye(t){return Buffer.isBuffer(t)||t instanceof Uint8Array}function Kye(t){return Buffer.isEncoding(t)}function Yye(t,e,r){return Buffer.alloc(t,e,r)}function Jye(t){return Buffer.allocUnsafe(t)}function Zye(t){return Buffer.allocUnsafeSlow(t)}function Qye(t,e){return Buffer.byteLength(t,e)}function Xye(t,e){return Buffer.compare(t,e)}function ebe(t,e){return Buffer.concat(t,e)}function tbe(t,e,r,n,i){return Ie(t).copy(e,r,n,i)}function rbe(t,e){return Ie(t).equals(e)}function nbe(t,e,r,n,i){return Ie(t).fill(e,r,n,i)}function ibe(t,e,r){return Buffer.from(t,e,r)}function sbe(t,e,r,n){return Ie(t).includes(e,r,n)}function obe(t,e,r,n){return Ie(t).indexOf(e,r,n)}function abe(t,e,r,n){return Ie(t).lastIndexOf(e,r,n)}function lbe(t){return Ie(t).swap16()}function cbe(t){return Ie(t).swap32()}function ube(t){return Ie(t).swap64()}function Ie(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)}function dbe(t,e,r,n){return Ie(t).toString(e,r,n)}function fbe(t,e,r,n,i){return Ie(t).write(e,r,n,i)}function hbe(t,e){return Ie(t).readDoubleBE(e)}function pbe(t,e){return Ie(t).readDoubleLE(e)}function gbe(t,e){return Ie(t).readFloatBE(e)}function mbe(t,e){return Ie(t).readFloatLE(e)}function ybe(t,e){return Ie(t).readInt32BE(e)}function bbe(t,e){return Ie(t).readInt32LE(e)}function wbe(t,e){return Ie(t).readUInt32BE(e)}function _be(t,e){return Ie(t).readUInt32LE(e)}function vbe(t,e,r){return Ie(t).writeDoubleBE(e,r)}function Sbe(t,e,r){return Ie(t).writeDoubleLE(e,r)}function Ebe(t,e,r){return Ie(t).writeFloatBE(e,r)}function xbe(t,e,r){return Ie(t).writeFloatLE(e,r)}function Tbe(t,e,r){return Ie(t).writeInt32BE(e,r)}function Abe(t,e,r){return Ie(t).writeInt32LE(e,r)}function Rbe(t,e,r){return Ie(t).writeUInt32BE(e,r)}function Ibe(t,e,r){return Ie(t).writeUInt32LE(e,r)}jj.exports={isBuffer:Gye,isEncoding:Kye,alloc:Yye,allocUnsafe:Jye,allocUnsafeSlow:Zye,byteLength:Qye,compare:Xye,concat:ebe,copy:tbe,equals:rbe,fill:nbe,from:ibe,includes:sbe,indexOf:obe,lastIndexOf:abe,swap16:lbe,swap32:cbe,swap64:ube,toBuffer:Ie,toString:dbe,write:fbe,readDoubleBE:hbe,readDoubleLE:pbe,readFloatBE:gbe,readFloatLE:mbe,readInt32BE:ybe,readInt32LE:bbe,readUInt32BE:wbe,readUInt32LE:_be,writeDoubleBE:vbe,writeDoubleLE:Sbe,writeFloatBE:Ebe,writeFloatLE:xbe,writeInt32BE:Tbe,writeInt32LE:Abe,writeUInt32BE:Rbe,writeUInt32LE:Ibe}});var Wj=w((CCe,Uj)=>{var Cbe=fa();Uj.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return Cbe.toString(e,this.encoding)}flush(){return""}}});var Hj=w((NCe,zj)=>{var kbe=fa();zj.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let n=!0;for(let i=Math.max(0,e.byteLength-4),s=e.byteLength;i<s&&n;i++)n=e[i]<=127;if(n)return kbe.toString(e,"utf8")}let r="";for(let n=0,i=e.byteLength;n<i;n++){let s=e[n];if(this.bytesNeeded===0){s<=127?r+=String.fromCharCode(s):(this.bytesSeen=1,s>=194&&s<=223?(this.bytesNeeded=2,this.codePoint=s&31):s>=224&&s<=239?(s===224?this.lowerBoundary=160:s===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=s&15):s>=240&&s<=244?(s===240&&(this.lowerBoundary=144),s===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=s&7):r+="\uFFFD");continue}if(s<this.lowerBoundary||s>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,r+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|s&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(r+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return r}flush(){let e=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}});var Gj=w((qCe,Vj)=>{var Nbe=Wj(),Obe=Hj();Vj.exports=class{constructor(e="utf8"){switch(this.encoding=qbe(e),this.encoding){case"utf8":this.decoder=new Obe;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new Nbe(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let r="";return e&&(r=this.push(e)),r+=this.decoder.flush(),r}};function qbe(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}});var u0=w((PCe,m4)=>{var{EventEmitter:Pbe}=Mj(),Rp=new Error("Stream was destroyed"),YS=new Error("Premature close"),Xj=KS(),Lbe=Gj(),JS=typeof queueMicrotask>"u"?t=>global.process.nextTick(t):queueMicrotask,Ge=(1<<29)-1,dn=1,n0=2,Rs=4,Oc=8,e4=Ge^dn,Mbe=Ge^n0,Dc=16,ha=32,ma=64,ui=128,$c=256,i0=512,Is=1024,ZS=2048,s0=4096,o0=8192,qr=16384,ci=32768,Ip=65536,Cs=131072,t4=$c|i0,Dbe=Dc|Ip,$be=ma|Dc,Fbe=s0|ui,a0=$c|Cs,Bbe=Ge^Dc,jbe=Ge^ma,Ube=Ge^(ma|Ip),Kj=Ge^Ip,Wbe=Ge^$c,zbe=Ge^(ui|o0),Hbe=Ge^Is,Yj=Ge^t4,r4=Ge^ci,Vbe=Ge^ha,n4=Ge^Cs,Gbe=Ge^a0,Dn=1<<18,ga=2<<18,Fc=4<<18,ks=8<<18,Bc=16<<18,di=32<<18,QS=64<<18,pa=128<<18,l0=256<<18,Ns=512<<18,Cp=1024<<18,Kbe=Ge^(Dn|l0),i4=Ge^Fc,Ybe=Ge^(Dn|Ns),Jbe=Ge^Bc,Zbe=Ge^ks,s4=Ge^pa,Qbe=Ge^ga,o4=Ge^Cp,qc=Dc|Dn,a4=Ge^qc,c0=qr|di,fn=Rs|Oc|n0,rr=fn|dn,l4=fn|c0,Xbe=i4&jbe,kp=pa|ci,ewe=kp&a4,c4=rr|ewe,twe=rr|Is|qr,Jj=rr|qr|ui,rwe=rr|Is|ui,nwe=rr|s0|ui|o0,iwe=rr|Dc|Is|qr|Ip|Cs,swe=fn|Is|qr,owe=ha|rr|ci|ma,awe=ci|dn,lwe=rr|Ns|di,cwe=ks|Bc,u4=ks|Dn,uwe=ks|Bc|rr|Dn,Zj=rr|Dn|ks|Cp,dwe=Fc|Dn,fwe=Dn|l0,hwe=rr|Ns|u4|di,pwe=Bc|fn|Ns|di,gwe=ga|rr|pa|Fc,mwe=Ns|di|fn,Sp=Symbol.asyncIterator||Symbol("asyncIterator"),Ep=class{constructor(e,{highWaterMark:r=16384,map:n=null,mapWritable:i,byteLength:s,byteLengthWritable:o}={}){this.stream=e,this.queue=new Xj,this.highWaterMark=r,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=o||s||g4,this.map=i||n,this.afterWrite=wwe.bind(this),this.afterUpdateNextTick=Swe.bind(this)}get ended(){return(this.stream._duplexState&di)!==0}push(e){return(this.stream._duplexState&mwe)!==0?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=ks,!0):(this.stream._duplexState|=cwe,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=Zbe),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|Ns)&i4}autoBatch(e,r){let n=[],i=this.stream;for(n.push(e);(i._duplexState&Zj)===u4;)n.push(i._writableState.shift());if((i._duplexState&rr)!==0)return r(null);i._writev(n,r)}update(){let e=this.stream;e._duplexState|=ga;do{for(;(e._duplexState&Zj)===ks;){let r=this.shift();e._duplexState|=fwe,e._write(r,this.afterWrite)}(e._duplexState&dwe)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=Qbe}updateNonPrimary(){let e=this.stream;if((e._duplexState&hwe)===Ns){e._duplexState=e._duplexState|Dn,e._final(bwe.bind(this));return}if((e._duplexState&fn)===Rs){(e._duplexState&kp)===0&&(e._duplexState|=qc,e._destroy(d4.bind(this)));return}(e._duplexState&c4)===dn&&(e._duplexState=(e._duplexState|qc)&e4,e._open(f4.bind(this)))}continueUpdate(){return(this.stream._duplexState&pa)===0?!1:(this.stream._duplexState&=s4,!0)}updateCallback(){(this.stream._duplexState&gwe)===Fc?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&pa)===0&&(this.stream._duplexState|=pa,(this.stream._duplexState&ga)===0&&JS(this.afterUpdateNextTick))}},XS=class{constructor(e,{highWaterMark:r=16384,map:n=null,mapReadable:i,byteLength:s,byteLengthReadable:o}={}){this.stream=e,this.queue=new Xj,this.highWaterMark=r===0?1:r,this.buffered=0,this.readAhead=r>0,this.error=null,this.pipeline=null,this.byteLength=o||s||g4,this.map=i||n,this.pipeTo=null,this.afterRead=_we.bind(this),this.afterUpdateNextTick=vwe.bind(this)}get ended(){return(this.stream._duplexState&qr)!==0}pipe(e,r){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof r!="function"&&(r=null),this.stream._duplexState|=i0,this.pipeTo=e,this.pipeline=new t0(this.stream,e,r),r&&this.stream.on("error",Qj),Mc(e))e._writableState.pipeline=this.pipeline,r&&e.on("error",Qj),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let n=this.pipeline.done.bind(this.pipeline,e),i=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",n),e.on("close",i),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",ywe.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let r=this.stream;return e===null?(this.highWaterMark=0,r._duplexState=(r._duplexState|Is)&Ube,!1):this.map!==null&&(e=this.map(e),e===null)?(r._duplexState&=Kj,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),r._duplexState=(r._duplexState|ui)&Kj,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=zbe),e}unshift(e){let r=[this.map!==null?this.map(e):e];for(;this.buffered>0;)r.push(this.shift());for(let n=0;n<r.length-1;n++){let i=r[n];this.buffered+=this.byteLength(i),this.queue.push(i)}this.push(r[r.length-1])}read(){let e=this.stream;if((e._duplexState&Jj)===ui){let r=this.shift();return this.pipeTo!==null&&this.pipeTo.write(r)===!1&&(e._duplexState&=Yj),(e._duplexState&ZS)!==0&&e.emit("data",r),r}return this.readAhead===!1&&(e._duplexState|=Cs,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&Jj)===ui&&(e._duplexState&t4)!==0;){let r=this.shift();this.pipeTo!==null&&this.pipeTo.write(r)===!1&&(e._duplexState&=Yj),(e._duplexState&ZS)!==0&&e.emit("data",r)}}update(){let e=this.stream;e._duplexState|=ha;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&iwe)===Cs;)e._duplexState|=Dbe,e._read(this.afterRead),this.drain();(e._duplexState&nwe)===Fbe&&(e._duplexState|=o0,e.emit("readable")),(e._duplexState&$be)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=Vbe}updateNonPrimary(){let e=this.stream;if((e._duplexState&rwe)===Is&&(e._duplexState=(e._duplexState|qr)&Hbe,e.emit("end"),(e._duplexState&l4)===c0&&(e._duplexState|=Rs),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&fn)===Rs){(e._duplexState&kp)===0&&(e._duplexState|=qc,e._destroy(d4.bind(this)));return}(e._duplexState&c4)===dn&&(e._duplexState=(e._duplexState|qc)&e4,e._open(f4.bind(this)))}continueUpdate(){return(this.stream._duplexState&ci)===0?!1:(this.stream._duplexState&=r4,!0)}updateCallback(){(this.stream._duplexState&owe)===ma?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&awe)===0&&(this.stream._duplexState|=ci,(this.stream._duplexState&ha)===0&&JS(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&ci)===0&&(this.stream._duplexState|=ci,(this.stream._duplexState&ha)===0&&JS(this.afterUpdateNextTick))}},e0=class{constructor(e){this.data=null,this.afterTransform=xwe.bind(e),this.afterFinal=null}},t0=class{constructor(e,r,n){this.from=e,this.to=r,this.afterPipe=n,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,r){if(r&&(this.error=r),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&qr)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&qr)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function ywe(){this.stream._duplexState|=i0,this.updateCallback()}function bwe(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&fn)===0&&(e._duplexState|=di,e.emit("finish")),(e._duplexState&l4)===c0&&(e._duplexState|=Rs),e._duplexState&=Ybe,(e._duplexState&ga)===0?this.update():this.updateNextTick()}function d4(t){let e=this.stream;!t&&this.error!==Rp&&(t=this.error),t&&e.emit("error",t),e._duplexState|=Oc,e.emit("close");let r=e._readableState,n=e._writableState;if(r!==null&&r.pipeline!==null&&r.pipeline.done(e,t),n!==null){for(;n.drains!==null&&n.drains.length>0;)n.drains.shift().resolve(!1);n.pipeline!==null&&n.pipeline.done(e,t)}}function wwe(t){let e=this.stream;t&&e.destroy(t),e._duplexState&=Kbe,this.drains!==null&&Ewe(this.drains),(e._duplexState&uwe)===Bc&&(e._duplexState&=Jbe,(e._duplexState&QS)===QS&&e.emit("drain")),this.updateCallback()}function _we(t){t&&this.stream.destroy(t),this.stream._duplexState&=Bbe,this.readAhead===!1&&(this.stream._duplexState&$c)===0&&(this.stream._duplexState&=n4),this.updateCallback()}function vwe(){(this.stream._duplexState&ha)===0&&(this.stream._duplexState&=r4,this.update())}function Swe(){(this.stream._duplexState&ga)===0&&(this.stream._duplexState&=s4,this.update())}function Ewe(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function f4(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&Rs)===0&&((e._duplexState&twe)===0&&(e._duplexState|=ma),(e._duplexState&lwe)===0&&(e._duplexState|=Fc),e.emit("open")),e._duplexState&=a4,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function xwe(t,e){e!=null&&this.push(e),this._writableState.afterWrite(t)}function Twe(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=ZS|a0,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=s0,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=QS,this._writableState.updateNextTick())}var Pc=class extends Pbe{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",Lwe.bind(this))),this.on("newListener",Twe)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&Oc)!==0}get destroying(){return(this._duplexState&fn)!==0}destroy(e){(this._duplexState&fn)===0&&(e||(e=Rp),this._duplexState=(this._duplexState|Rs)&Xbe,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=n0,this._predestroy(),this._duplexState&=Mbe,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},xp=class t extends Pc{constructor(e){super(e),this._duplexState|=dn|di|Cs,this._readableState=new XS(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=n4),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let r=new Lbe(e),n=this._readableState.map||Iwe;return this._readableState.map=i,this;function i(s){let o=r.push(s);return o===""&&(s.byteLength!==0||r.remaining>0)?null:n(o)}}_read(e){e(null)}pipe(e,r){return this._readableState.updateNextTick(),this._readableState.pipe(e,r),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=a0,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?Gbe:Wbe,this}static _fromAsyncIterator(e,r){let n,i=new t({...r,read(o){e.next().then(s).then(o.bind(null,null)).catch(o)},predestroy(){n=e.return()},destroy(o){if(!n)return o(null);n.then(o.bind(null,null)).catch(o)}});return i;function s(o){o.done?i.push(null):i.push(o.value)}}static from(e,r){if(Owe(e))return e;if(e[Sp])return this._fromAsyncIterator(e[Sp](),r);Array.isArray(e)||(e=e===void 0?[]:[e]);let n=0;return new t({...r,read(i){this.push(n===e.length?null:e[n++]),i(null)}})}static isBackpressured(e){return(e._duplexState&swe)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&$c)===0}[Sp](){let e=this,r=null,n=null,i=null;return this.on("error",c=>{r=c}),this.on("readable",s),this.on("close",o),{[Sp](){return this},next(){return new Promise(function(c,u){n=c,i=u;let d=e.read();d!==null?a(d):(e._duplexState&Oc)!==0&&a(null)})},return(){return l(null)},throw(c){return l(c)}};function s(){n!==null&&a(e.read())}function o(){n!==null&&a(null)}function a(c){i!==null&&(r?i(r):c===null&&(e._duplexState&qr)===0?i(Rp):n({value:c,done:c===null}),i=n=null)}function l(c){return e.destroy(c),new Promise((u,d)=>{if(e._duplexState&Oc)return u({value:void 0,done:!0});e.once("close",function(){c?d(c):u({value:void 0,done:!0})})})}}},Tp=class extends Pc{constructor(e){super(e),this._duplexState|=dn|qr,this._writableState=new Ep(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=Cp}uncork(){this._duplexState&=o4,this._writableState.updateNextTick()}_writev(e,r){r(null)}_write(e,r){this._writableState.autoBatch(e,r)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&pwe)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let r=e._writableState,i=(Mwe(e)?Math.min(1,r.queue.length):r.queue.length)+(e._duplexState&l0?1:0);return i===0?Promise.resolve(!0):(r.drains===null&&(r.drains=[]),new Promise(s=>{r.drains.push({writes:i,resolve:s})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},Lc=class extends xp{constructor(e){super(e),this._duplexState=dn|this._duplexState&Cs,this._writableState=new Ep(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=Cp}uncork(){this._duplexState&=o4,this._writableState.updateNextTick()}_writev(e,r){r(null)}_write(e,r){this._writableState.autoBatch(e,r)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},Ap=class extends Lc{constructor(e){super(e),this._transformState=new e0(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,r){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let r=this._transformState.data;this._transformState.data=null,e(null),this._transform(r,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,r){r(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(Awe.bind(this))}},r0=class extends Ap{};function Awe(t,e){let r=this._transformState.afterFinal;if(t)return r(t);e!=null&&this.push(e),this.push(null),r(null)}function Rwe(...t){return new Promise((e,r)=>h4(...t,n=>{if(n)return r(n);e()}))}function h4(t,...e){let r=Array.isArray(t)?[...t,...e]:[t,...e],n=r.length&&typeof r[r.length-1]=="function"?r.pop():null;if(r.length<2)throw new Error("Pipeline requires at least 2 streams");let i=r[0],s=null,o=null;for(let c=1;c<r.length;c++)s=r[c],Mc(i)?i.pipe(s,l):(a(i,!0,c>1,l),i.pipe(s)),i=s;if(n){let c=!1,u=Mc(s)||!!(s._writableState&&s._writableState.autoDestroy);s.on("error",d=>{o===null&&(o=d)}),s.on("finish",()=>{c=!0,u||n(o)}),u&&s.on("close",()=>n(o||(c?null:YS)))}return s;function a(c,u,d,p){c.on("error",p),c.on("close",f);function f(){if(u&&c._readableState&&!c._readableState.ended||d&&c._writableState&&!c._writableState.ended)return p(YS)}}function l(c){if(!(!c||o)){o=c;for(let u of r)u.destroy(c)}}}function Iwe(t){return t}function p4(t){return!!t._readableState||!!t._writableState}function Mc(t){return typeof t._duplexState=="number"&&p4(t)}function Cwe(t){return!!t._readableState&&t._readableState.ended}function kwe(t){return!!t._writableState&&t._writableState.ended}function Nwe(t,e={}){let r=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&r===Rp?null:r}function Owe(t){return Mc(t)&&t.readable}function qwe(t){return(t._duplexState&dn)!==dn||(t._duplexState&kp)!==0}function Pwe(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function g4(t){return Pwe(t)?t.byteLength:1024}function Qj(){}function Lwe(){this.destroy(new Error("Stream aborted."))}function Mwe(t){return t._writev!==Tp.prototype._writev&&t._writev!==Lc.prototype._writev}m4.exports={pipeline:h4,pipelinePromise:Rwe,isStream:p4,isStreamx:Mc,isEnded:Cwe,isFinished:kwe,isDisturbed:qwe,getStreamError:Nwe,Stream:Pc,Writable:Tp,Readable:xp,Duplex:Lc,Transform:Ap,PassThrough:r0}});var h0=w(ba=>{var ge=fa(),Dwe="0000000000000000000",$we="7777777777777777777",Np=48,y4=ge.from([117,115,116,97,114,0]),Fwe=ge.from([Np,Np]),Bwe=ge.from([117,115,116,97,114,32]),jwe=ge.from([32,0]),Uwe=4095,jc=257,f0=263;ba.decodeLongPath=function(e,r){return ya(e,0,e.length,r)};ba.encodePax=function(e){let r="";e.name&&(r+=d0(" path="+e.name+`
`)),e.linkname&&(r+=d0(" linkpath="+e.linkname+`
`));let n=e.pax;if(n)for(let i in n)r+=d0(" "+i+"="+n[i]+`
`);return ge.from(r)};ba.decodePax=function(e){let r={};for(;e.length;){let n=0;for(;n<e.length&&e[n]!==32;)n++;let i=parseInt(ge.toString(e.subarray(0,n)),10);if(!i)return r;let s=ge.toString(e.subarray(n+1,i-1)),o=s.indexOf("=");if(o===-1)return r;r[s.slice(0,o)]=s.slice(o+1),e=e.subarray(i)}return r};ba.encode=function(e){let r=ge.alloc(512),n=e.name,i="";if(e.typeflag===5&&n[n.length-1]!=="/"&&(n+="/"),ge.byteLength(n)!==n.length)return null;for(;ge.byteLength(n)>100;){let s=n.indexOf("/");if(s===-1)return null;i+=i?"/"+n.slice(0,s):n.slice(0,s),n=n.slice(s+1)}return ge.byteLength(n)>100||ge.byteLength(i)>155||e.linkname&&ge.byteLength(e.linkname)>100?null:(ge.write(r,n),ge.write(r,hi(e.mode&Uwe,6),100),ge.write(r,hi(e.uid,6),108),ge.write(r,hi(e.gid,6),116),Ywe(e.size,r,124),ge.write(r,hi(e.mtime.getTime()/1e3|0,11),136),r[156]=Np+Gwe(e.type),e.linkname&&ge.write(r,e.linkname,157),ge.copy(y4,r,jc),ge.copy(Fwe,r,f0),e.uname&&ge.write(r,e.uname,265),e.gname&&ge.write(r,e.gname,297),ge.write(r,hi(e.devmajor||0,6),329),ge.write(r,hi(e.devminor||0,6),337),i&&ge.write(r,i,345),ge.write(r,hi(w4(r),6),148),r)};ba.decode=function(e,r,n){let i=e[156]===0?0:e[156]-Np,s=ya(e,0,100,r),o=fi(e,100,8),a=fi(e,108,8),l=fi(e,116,8),c=fi(e,124,12),u=fi(e,136,12),d=Vwe(i),p=e[157]===0?null:ya(e,157,100,r),f=ya(e,265,32),y=ya(e,297,32),h=fi(e,329,8),m=fi(e,337,8),g=w4(e);if(g===256)return null;if(g!==fi(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(Wwe(e))e[345]&&(s=ya(e,345,155,r)+"/"+s);else if(!zwe(e)){if(!n)throw new Error("Invalid tar header: unknown format.")}return i===0&&s&&s[s.length-1]==="/"&&(i=5),{name:s,mode:o,uid:a,gid:l,size:c,mtime:new Date(1e3*u),type:d,linkname:p,uname:f,gname:y,devmajor:h,devminor:m,pax:null}};function Wwe(t){return ge.equals(y4,t.subarray(jc,jc+6))}function zwe(t){return ge.equals(Bwe,t.subarray(jc,jc+6))&&ge.equals(jwe,t.subarray(f0,f0+2))}function Hwe(t,e,r){return typeof t!="number"?r:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function Vwe(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function Gwe(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function b4(t,e,r,n){for(;r<n;r++)if(t[r]===e)return r;return n}function w4(t){let e=256;for(let r=0;r<148;r++)e+=t[r];for(let r=156;r<512;r++)e+=t[r];return e}function hi(t,e){return t=t.toString(8),t.length>e?$we.slice(0,e)+" ":Dwe.slice(0,e-t.length)+t+" "}function Kwe(t,e,r){e[r]=128;for(let n=11;n>0;n--)e[r+n]=t&255,t=Math.floor(t/256)}function Ywe(t,e,r){t.toString(8).length>11?Kwe(t,e,r):ge.write(e,hi(t,11),r)}function Jwe(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;let r=[],n;for(n=t.length-1;n>0;n--){let o=t[n];e?r.push(o):r.push(255-o)}let i=0,s=r.length;for(n=0;n<s;n++)i+=r[n]*Math.pow(256,n);return e?i:-1*i}function fi(t,e,r){if(t=t.subarray(e,e+r),e=0,t[e]&128)return Jwe(t);{for(;e<t.length&&t[e]===32;)e++;let n=Hwe(b4(t,32,e,t.length),t.length,t.length);for(;e<n&&t[e]===0;)e++;return n===e?0:parseInt(ge.toString(t.subarray(e,n)),8)}}function ya(t,e,r,n){return ge.toString(t.subarray(e,b4(t,0,e,e+r)),n)}function d0(t){let e=ge.byteLength(t),r=Math.floor(Math.log(e)/Math.log(10))+1;return e+r>=Math.pow(10,r)&&r++,e+r+t}});var x4=w((MCe,E4)=>{var{Writable:Zwe,Readable:Qwe,getStreamError:_4}=u0(),Xwe=KS(),v4=fa(),wa=h0(),e_e=v4.alloc(0),g0=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new Xwe,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return e_e;let r=this._next(e);if(e===r.byteLength)return r;let n=[r];for(;(e-=r.byteLength)>0;)r=this._next(e),n.push(r);return v4.concat(n)}_next(e){let r=this.queue.peek(),n=r.byteLength-this._offset;if(e>=n){let i=this._offset?r.subarray(this._offset,r.byteLength):r;return this.queue.shift(),this._offset=0,this.buffered-=n,this.shifted+=n,i}return this.buffered-=e,this.shifted+=e,r.subarray(this._offset,this._offset+=e)}},m0=class extends Qwe{constructor(e,r,n){super(),this.header=r,this.offset=n,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(_4(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=S4(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},y0=class extends Zwe{constructor(e){super(e),e||(e={}),this._buffer=new g0,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=p0,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=wa.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=wa.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=wa.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=wa.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?wa.decodePax(e):Object.assign({},this._paxGlobal,wa.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=S4(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(r){return this._continueWrite(r),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let r=this._stream.push(e);return this._missing===0?(this._stream.push(null),r&&this._stream._detach(),r&&this._locked===!1):r}_createStream(){return new m0(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let r=this._callback;this._callback=p0,r(e)}_write(e,r){this._callback=r,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(_4(this)),e(null)}[Symbol.asyncIterator](){let e=null,r=null,n=null,i=null,s=null,o=this;return this.on("entry",c),this.on("error",p=>{e=p}),this.on("close",u),{[Symbol.asyncIterator](){return this},next(){return new Promise(l)},return(){return d(null)},throw(p){return d(p)}};function a(p){if(!s)return;let f=s;s=null,f(p)}function l(p,f){if(e)return f(e);if(i){p({value:i,done:!1}),i=null;return}r=p,n=f,a(null),o._finished&&r&&(r({value:void 0,done:!0}),r=n=null)}function c(p,f,y){s=y,f.on("error",p0),r?(r({value:f,done:!1}),r=n=null):i=f}function u(){a(e),r&&(e?n(e):r({value:void 0,done:!0}),r=n=null)}function d(p){return o.destroy(p),a(p),new Promise((f,y)=>{if(o.destroyed)return f({value:void 0,done:!0});o.once("close",function(){p?y(p):f({value:void 0,done:!0})})})}}};E4.exports=function(e){return new y0(e)};function p0(){}function S4(t){return t&=511,t&&512-t}});var A4=w((DCe,b0)=>{var T4={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{b0.exports=require("fs").constants||T4}catch{b0.exports=T4}});var N4=w(($Ce,k4)=>{var{Readable:t_e,Writable:r_e,getStreamError:R4}=u0(),Os=fa(),_a=A4(),Op=h0(),n_e=493,i_e=420,I4=Os.alloc(1024),_0=class extends r_e{constructor(e,r,n){super({mapWritable:o_e,eagerOpen:!0}),this.written=0,this.header=r,this._callback=n,this._linkname=null,this._isLinkname=r.type==="symlink"&&!r.linkname,this._isVoid=r.type!=="file"&&r.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let r=this._callback;this._callback=null,r(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,r){if(this._isLinkname)return this._linkname=this._linkname?Os.concat([this._linkname,e]):e,r(null);if(this._isVoid)return e.byteLength>0?r(new Error("No body allowed for this entry")):r();if(this.written+=e.byteLength,this._pack.push(e))return r();this._pack._drain=r}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?Os.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),C4(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return R4(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},v0=class extends t_e{constructor(e){super(e),this._drain=w0,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,r,n){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof r=="function"&&(n=r,r=null),n||(n=w0),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=s_e(e.mode)),e.mode||(e.mode=e.type==="directory"?n_e:i_e),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof r=="string"&&(r=Os.from(r));let i=new _0(this,e,n);return Os.isBuffer(r)?(e.size=r.byteLength,i.write(r),i.end(),i):(i._isVoid,i)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(I4),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let r=Op.encode(e);if(r){this.push(r);return}}this._encodePax(e)}_encodePax(e){let r=Op.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:r.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(Op.encode(n)),this.push(r),C4(this,r.byteLength),n.size=e.size,n.type=e.type,this.push(Op.encode(n))}_doDrain(){let e=this._drain;this._drain=w0,e()}_predestroy(){let e=R4(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let r=this._pending.shift();r.destroy(e),r._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};k4.exports=function(e){return new v0(e)};function s_e(t){switch(t&_a.S_IFMT){case _a.S_IFBLK:return"block-device";case _a.S_IFCHR:return"character-device";case _a.S_IFDIR:return"directory";case _a.S_IFIFO:return"fifo";case _a.S_IFLNK:return"symlink"}return"file"}function w0(){}function C4(t,e){e&=511,e&&t.push(I4.subarray(0,512-e))}function o_e(t){return Os.isBuffer(t)?t:Os.from(t)}});var O4=w(S0=>{S0.extract=x4();S0.pack=N4()});var L4=w((BCe,P4)=>{var a_e=require("zlib"),l_e=O4(),q4=Io(),$n=function(t){if(!(this instanceof $n))return new $n(t);t=this.options=q4.defaults(t,{gzip:!1}),typeof t.gzipOptions!="object"&&(t.gzipOptions={}),this.supports={directory:!0,symlink:!0},this.engine=l_e.pack(t),this.compressor=!1,t.gzip&&(this.compressor=a_e.createGzip(t.gzipOptions),this.compressor.on("error",this._onCompressorError.bind(this)))};$n.prototype._onCompressorError=function(t){this.engine.emit("error",t)};$n.prototype.append=function(t,e,r){var n=this;e.mtime=e.date;function i(o,a){if(o){r(o);return}n.engine.entry(e,a,function(l){r(l,e)})}if(e.sourceType==="buffer")i(null,t);else if(e.sourceType==="stream"&&e.stats){e.size=e.stats.size;var s=n.engine.entry(e,function(o){r(o,e)});t.pipe(s)}else e.sourceType==="stream"&&q4.collectStream(t,i)};$n.prototype.finalize=function(){this.engine.finalize()};$n.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};$n.prototype.pipe=function(t,e){return this.compressor?this.engine.pipe.apply(this.engine,[this.compressor]).pipe(t,e):this.engine.pipe.apply(this.engine,arguments)};$n.prototype.unpipe=function(){return this.compressor?this.compressor.unpipe.apply(this.compressor,arguments):this.engine.unpipe.apply(this.engine,arguments)};P4.exports=$n});var $4=w((jCe,D4)=>{"use strict";function c_e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u_e=new Int32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function M4(t){if(Buffer.isBuffer(t))return t;if(typeof t=="number")return Buffer.alloc(t);if(typeof t=="string")return Buffer.from(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function d_e(t){let e=M4(4);return e.writeInt32BE(t,0),e}function E0(t,e){t=M4(t),Buffer.isBuffer(e)&&(e=e.readUInt32BE(0));let r=~~e^-1;for(var n=0;n<t.length;n++)r=u_e[(r^t[n])&255]^r>>>8;return r^-1}function x0(){return d_e(E0.apply(null,arguments))}x0.signed=function(){return E0.apply(null,arguments)};x0.unsigned=function(){return E0.apply(null,arguments)>>>0};var f_e=x0,h_e=c_e(f_e);D4.exports=h_e});var U4=w((UCe,j4)=>{var p_e=require("util").inherits,F4=f_().Transform,g_e=$4(),B4=Io(),pi=function(t){if(!(this instanceof pi))return new pi(t);t=this.options=B4.defaults(t,{}),F4.call(this,t),this.supports={directory:!0,symlink:!0},this.files=[]};p_e(pi,F4);pi.prototype._transform=function(t,e,r){r(null,t)};pi.prototype._writeStringified=function(){var t=JSON.stringify(this.files);this.write(t)};pi.prototype.append=function(t,e,r){var n=this;e.crc32=0;function i(s,o){if(s){r(s);return}e.size=o.length||0,e.crc32=g_e.unsigned(o),n.files.push(e),r(null,e)}e.sourceType==="buffer"?i(null,t):e.sourceType==="stream"&&B4.collectStream(t,i)};pi.prototype.finalize=function(){this._writeStringified(),this.end()};j4.exports=pi});var T0=w((WCe,W4)=>{var m_e=TM(),Uc={},gi=function(t,e){return gi.create(t,e)};gi.create=function(t,e){if(Uc[t]){var r=new m_e(t,e);return r.setFormat(t),r.setModule(new Uc[t](e)),r}else throw new Error("create("+t+"): format not registered")};gi.registerFormat=function(t,e){if(Uc[t])throw new Error("register("+t+"): format already registered");if(typeof e!="function")throw new Error("register("+t+"): format module invalid");if(typeof e.prototype.append!="function"||typeof e.prototype.finalize!="function")throw new Error("register("+t+"): format module missing methods");Uc[t]=e};gi.isRegisteredFormat=function(t){return!!Uc[t]};gi.registerFormat("zip",Pj());gi.registerFormat("tar",L4());gi.registerFormat("json",U4());W4.exports=gi});var me=w(Ct=>{"use strict";var A0=Symbol.for("yaml.alias"),z4=Symbol.for("yaml.document"),qp=Symbol.for("yaml.map"),H4=Symbol.for("yaml.pair"),R0=Symbol.for("yaml.scalar"),Pp=Symbol.for("yaml.seq"),Fn=Symbol.for("yaml.node.type"),y_e=t=>!!t&&typeof t=="object"&&t[Fn]===A0,b_e=t=>!!t&&typeof t=="object"&&t[Fn]===z4,w_e=t=>!!t&&typeof t=="object"&&t[Fn]===qp,__e=t=>!!t&&typeof t=="object"&&t[Fn]===H4,V4=t=>!!t&&typeof t=="object"&&t[Fn]===R0,v_e=t=>!!t&&typeof t=="object"&&t[Fn]===Pp;function G4(t){if(t&&typeof t=="object")switch(t[Fn]){case qp:case Pp:return!0}return!1}function S_e(t){if(t&&typeof t=="object")switch(t[Fn]){case A0:case qp:case R0:case Pp:return!0}return!1}var E_e=t=>(V4(t)||G4(t))&&!!t.anchor;Ct.ALIAS=A0;Ct.DOC=z4;Ct.MAP=qp;Ct.NODE_TYPE=Fn;Ct.PAIR=H4;Ct.SCALAR=R0;Ct.SEQ=Pp;Ct.hasAnchor=E_e;Ct.isAlias=y_e;Ct.isCollection=G4;Ct.isDocument=b_e;Ct.isMap=w_e;Ct.isNode=S_e;Ct.isPair=__e;Ct.isScalar=V4;Ct.isSeq=v_e});var Wc=w(I0=>{"use strict";var pt=me(),Yt=Symbol("break visit"),K4=Symbol("skip children"),hn=Symbol("remove node");function Lp(t,e){let r=Y4(e);pt.isDocument(t)?va(null,t.contents,r,Object.freeze([t]))===hn&&(t.contents=null):va(null,t,r,Object.freeze([]))}Lp.BREAK=Yt;Lp.SKIP=K4;Lp.REMOVE=hn;function va(t,e,r,n){let i=J4(t,e,r,n);if(pt.isNode(i)||pt.isPair(i))return Z4(t,n,i),va(t,i,r,n);if(typeof i!="symbol"){if(pt.isCollection(e)){n=Object.freeze(n.concat(e));for(let s=0;s<e.items.length;++s){let o=va(s,e.items[s],r,n);if(typeof o=="number")s=o-1;else{if(o===Yt)return Yt;o===hn&&(e.items.splice(s,1),s-=1)}}}else if(pt.isPair(e)){n=Object.freeze(n.concat(e));let s=va("key",e.key,r,n);if(s===Yt)return Yt;s===hn&&(e.key=null);let o=va("value",e.value,r,n);if(o===Yt)return Yt;o===hn&&(e.value=null)}}return i}async function Mp(t,e){let r=Y4(e);pt.isDocument(t)?await Sa(null,t.contents,r,Object.freeze([t]))===hn&&(t.contents=null):await Sa(null,t,r,Object.freeze([]))}Mp.BREAK=Yt;Mp.SKIP=K4;Mp.REMOVE=hn;async function Sa(t,e,r,n){let i=await J4(t,e,r,n);if(pt.isNode(i)||pt.isPair(i))return Z4(t,n,i),Sa(t,i,r,n);if(typeof i!="symbol"){if(pt.isCollection(e)){n=Object.freeze(n.concat(e));for(let s=0;s<e.items.length;++s){let o=await Sa(s,e.items[s],r,n);if(typeof o=="number")s=o-1;else{if(o===Yt)return Yt;o===hn&&(e.items.splice(s,1),s-=1)}}}else if(pt.isPair(e)){n=Object.freeze(n.concat(e));let s=await Sa("key",e.key,r,n);if(s===Yt)return Yt;s===hn&&(e.key=null);let o=await Sa("value",e.value,r,n);if(o===Yt)return Yt;o===hn&&(e.value=null)}}return i}function Y4(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function J4(t,e,r,n){if(typeof r=="function")return r(t,e,n);if(pt.isMap(e))return r.Map?.(t,e,n);if(pt.isSeq(e))return r.Seq?.(t,e,n);if(pt.isPair(e))return r.Pair?.(t,e,n);if(pt.isScalar(e))return r.Scalar?.(t,e,n);if(pt.isAlias(e))return r.Alias?.(t,e,n)}function Z4(t,e,r){let n=e[e.length-1];if(pt.isCollection(n))n.items[t]=r;else if(pt.isPair(n))t==="key"?n.key=r:n.value=r;else if(pt.isDocument(n))n.contents=r;else{let i=pt.isAlias(n)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}I0.visit=Lp;I0.visitAsync=Mp});var C0=w(X4=>{"use strict";var Q4=me(),x_e=Wc(),T_e={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},A_e=t=>t.replace(/[!,[\]{}]/g,e=>T_e[e]),zc=class t{constructor(e,r){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},t.defaultYaml,e),this.tags=Object.assign({},t.defaultTags,r)}clone(){let e=new t(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){let e=new t(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:t.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},t.defaultTags);break}return e}add(e,r){this.atNextDocument&&(this.yaml={explicit:t.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},t.defaultTags),this.atNextDocument=!1);let n=e.trim().split(/[ \t]+/),i=n.shift();switch(i){case"%TAG":{if(n.length!==2&&(r(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;let[s,o]=n;return this.tags[s]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length!==1)return r(0,"%YAML directive should contain exactly one part"),!1;let[s]=n;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{let o=/^\d+\.\d+$/.test(s);return r(6,`Unsupported YAML version ${s}`,o),!1}}default:return r(0,`Unknown directive ${i}`,!0),!1}}tagName(e,r){if(e==="!")return"!";if(e[0]!=="!")return r(`Not a valid tag: ${e}`),null;if(e[1]==="<"){let o=e.slice(2,-1);return o==="!"||o==="!!"?(r(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&r("Verbatim tags must end with a >"),o)}let[,n,i]=e.match(/^(.*!)([^!]*)$/s);i||r(`The ${e} tag has no suffix`);let s=this.tags[n];if(s)try{return s+decodeURIComponent(i)}catch(o){return r(String(o)),null}return n==="!"?e:(r(`Could not resolve tag: ${e}`),null)}tagString(e){for(let[r,n]of Object.entries(this.tags))if(e.startsWith(n))return r+A_e(e.substring(n.length));return e[0]==="!"?e:`!<${e}>`}toString(e){let r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags),i;if(e&&n.length>0&&Q4.isNode(e.contents)){let s={};x_e.visit(e.contents,(o,a)=>{Q4.isNode(a)&&a.tag&&(s[a.tag]=!0)}),i=Object.keys(s)}else i=[];for(let[s,o]of n)s==="!!"&&o==="tag:yaml.org,2002:"||(!e||i.some(a=>a.startsWith(o)))&&r.push(`%TAG ${s} ${o}`);return r.join(`
`)}};zc.defaultYaml={explicit:!1,version:"1.2"};zc.defaultTags={"!!":"tag:yaml.org,2002:"};X4.Directives=zc});var Dp=w(Hc=>{"use strict";var e5=me(),R_e=Wc();function I_e(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){let r=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(r)}return!0}function t5(t){let e=new Set;return R_e.visit(t,{Value(r,n){n.anchor&&e.add(n.anchor)}}),e}function r5(t,e){for(let r=1;;++r){let n=`${t}${r}`;if(!e.has(n))return n}}function C_e(t,e){let r=[],n=new Map,i=null;return{onAnchor:s=>{r.push(s),i??(i=t5(t));let o=r5(e,i);return i.add(o),o},setAnchors:()=>{for(let s of r){let o=n.get(s);if(typeof o=="object"&&o.anchor&&(e5.isScalar(o.node)||e5.isCollection(o.node)))o.node.anchor=o.anchor;else{let a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=s,a}}},sourceObjects:n}}Hc.anchorIsValid=I_e;Hc.anchorNames=t5;Hc.createNodeAnchors=C_e;Hc.findNewAnchor=r5});var k0=w(n5=>{"use strict";function Vc(t,e,r,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let i=0,s=n.length;i<s;++i){let o=n[i],a=Vc(t,n,String(i),o);a===void 0?delete n[i]:a!==o&&(n[i]=a)}else if(n instanceof Map)for(let i of Array.from(n.keys())){let s=n.get(i),o=Vc(t,n,i,s);o===void 0?n.delete(i):o!==s&&n.set(i,o)}else if(n instanceof Set)for(let i of Array.from(n)){let s=Vc(t,n,i,i);s===void 0?n.delete(i):s!==i&&(n.delete(i),n.add(s))}else for(let[i,s]of Object.entries(n)){let o=Vc(t,n,i,s);o===void 0?delete n[i]:o!==s&&(n[i]=o)}return t.call(e,r,n)}n5.applyReviver=Vc});var mi=w(s5=>{"use strict";var k_e=me();function i5(t,e,r){if(Array.isArray(t))return t.map((n,i)=>i5(n,String(i),r));if(t&&typeof t.toJSON=="function"){if(!r||!k_e.hasAnchor(t))return t.toJSON(e,r);let n={aliasCount:0,count:1,res:void 0};r.anchors.set(t,n),r.onCreate=s=>{n.res=s,delete r.onCreate};let i=t.toJSON(e,r);return r.onCreate&&r.onCreate(i),i}return typeof t=="bigint"&&!r?.keep?Number(t):t}s5.toJS=i5});var $p=w(a5=>{"use strict";var N_e=k0(),o5=me(),O_e=mi(),N0=class{constructor(e){Object.defineProperty(this,o5.NODE_TYPE,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:r,maxAliasCount:n,onAnchor:i,reviver:s}={}){if(!o5.isDocument(e))throw new TypeError("A document argument is required");let o={anchors:new Map,doc:e,keep:!0,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof n=="number"?n:100},a=O_e.toJS(this,"",o);if(typeof i=="function")for(let{count:l,res:c}of o.anchors.values())i(c,l);return typeof s=="function"?N_e.applyReviver(s,{"":a},"",a):a}};a5.NodeBase=N0});var Gc=w(l5=>{"use strict";var q_e=Dp(),P_e=Wc(),Ea=me(),L_e=$p(),M_e=mi(),O0=class extends L_e.NodeBase{constructor(e){super(Ea.ALIAS),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,r){let n;r?.aliasResolveCache?n=r.aliasResolveCache:(n=[],P_e.visit(e,{Node:(s,o)=>{(Ea.isAlias(o)||Ea.hasAnchor(o))&&n.push(o)}}),r&&(r.aliasResolveCache=n));let i;for(let s of n){if(s===this)break;s.anchor===this.source&&(i=s)}return i}toJSON(e,r){if(!r)return{source:this.source};let{anchors:n,doc:i,maxAliasCount:s}=r,o=this.resolve(i,r);if(!o){let l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let a=n.get(o);if(a||(M_e.toJS(o,null,r),a=n.get(o)),a?.res===void 0){let l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(s>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=Fp(i,o,n)),a.count*a.aliasCount>s)){let l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(e,r,n){let i=`*${this.source}`;if(e){if(q_e.anchorIsValid(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let s=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(s)}if(e.implicitKey)return`${i} `}return i}};function Fp(t,e,r){if(Ea.isAlias(e)){let n=e.resolve(t),i=r&&n&&r.get(n);return i?i.count*i.aliasCount:0}else if(Ea.isCollection(e)){let n=0;for(let i of e.items){let s=Fp(t,i,r);s>n&&(n=s)}return n}else if(Ea.isPair(e)){let n=Fp(t,e.key,r),i=Fp(t,e.value,r);return Math.max(n,i)}return 1}l5.Alias=O0});var nt=w(q0=>{"use strict";var D_e=me(),$_e=$p(),F_e=mi(),B_e=t=>!t||typeof t!="function"&&typeof t!="object",yi=class extends $_e.NodeBase{constructor(e){super(D_e.SCALAR),this.value=e}toJSON(e,r){return r?.keep?this.value:F_e.toJS(this.value,e,r)}toString(){return String(this.value)}};yi.BLOCK_FOLDED="BLOCK_FOLDED";yi.BLOCK_LITERAL="BLOCK_LITERAL";yi.PLAIN="PLAIN";yi.QUOTE_DOUBLE="QUOTE_DOUBLE";yi.QUOTE_SINGLE="QUOTE_SINGLE";q0.Scalar=yi;q0.isScalarValue=B_e});var Kc=w(u5=>{"use strict";var j_e=Gc(),qs=me(),c5=nt(),U_e="tag:yaml.org,2002:";function W_e(t,e,r){if(e){let n=r.filter(s=>s.tag===e),i=n.find(s=>!s.format)??n[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return r.find(n=>n.identify?.(t)&&!n.format)}function z_e(t,e,r){if(qs.isDocument(t)&&(t=t.contents),qs.isNode(t))return t;if(qs.isPair(t)){let d=r.schema[qs.MAP].createNode?.(r.schema,null,r);return d.items.push(t),d}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());let{aliasDuplicateObjects:n,onAnchor:i,onTagObj:s,schema:o,sourceObjects:a}=r,l;if(n&&t&&typeof t=="object"){if(l=a.get(t),l)return l.anchor??(l.anchor=i(t)),new j_e.Alias(l.anchor);l={anchor:null,node:null},a.set(t,l)}e?.startsWith("!!")&&(e=U_e+e.slice(2));let c=W_e(t,e,o.tags);if(!c){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){let d=new c5.Scalar(t);return l&&(l.node=d),d}c=t instanceof Map?o[qs.MAP]:Symbol.iterator in Object(t)?o[qs.SEQ]:o[qs.MAP]}s&&(s(c),delete r.onTagObj);let u=c?.createNode?c.createNode(r.schema,t,r):typeof c?.nodeClass?.from=="function"?c.nodeClass.from(r.schema,t,r):new c5.Scalar(t);return e?u.tag=e:c.default||(u.tag=c.tag),l&&(l.node=u),u}u5.createNode=z_e});var jp=w(Bp=>{"use strict";var H_e=Kc(),pn=me(),V_e=$p();function P0(t,e,r){let n=r;for(let i=e.length-1;i>=0;--i){let s=e[i];if(typeof s=="number"&&Number.isInteger(s)&&s>=0){let o=[];o[s]=n,n=o}else n=new Map([[s,n]])}return H_e.createNode(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}var d5=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done,L0=class extends V_e.NodeBase{constructor(e,r){super(e),Object.defineProperty(this,"schema",{value:r,configurable:!0,enumerable:!1,writable:!0})}clone(e){let r=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(r.schema=e),r.items=r.items.map(n=>pn.isNode(n)||pn.isPair(n)?n.clone(e):n),this.range&&(r.range=this.range.slice()),r}addIn(e,r){if(d5(e))this.add(r);else{let[n,...i]=e,s=this.get(n,!0);if(pn.isCollection(s))s.addIn(i,r);else if(s===void 0&&this.schema)this.set(n,P0(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}deleteIn(e){let[r,...n]=e;if(n.length===0)return this.delete(r);let i=this.get(r,!0);if(pn.isCollection(i))return i.deleteIn(n);throw new Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}getIn(e,r){let[n,...i]=e,s=this.get(n,!0);return i.length===0?!r&&pn.isScalar(s)?s.value:s:pn.isCollection(s)?s.getIn(i,r):void 0}hasAllNullValues(e){return this.items.every(r=>{if(!pn.isPair(r))return!1;let n=r.value;return n==null||e&&pn.isScalar(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(e){let[r,...n]=e;if(n.length===0)return this.has(r);let i=this.get(r,!0);return pn.isCollection(i)?i.hasIn(n):!1}setIn(e,r){let[n,...i]=e;if(i.length===0)this.set(n,r);else{let s=this.get(n,!0);if(pn.isCollection(s))s.setIn(i,r);else if(s===void 0&&this.schema)this.set(n,P0(this.schema,i,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}}};Bp.Collection=L0;Bp.collectionFromPath=P0;Bp.isEmptyPath=d5});var Yc=w(Up=>{"use strict";var G_e=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function M0(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}var K_e=(t,e,r)=>t.endsWith(`
`)?M0(r,e):r.includes(`
`)?`
`+M0(r,e):(t.endsWith(" ")?"":" ")+r;Up.indentComment=M0;Up.lineComment=K_e;Up.stringifyComment=G_e});var h5=w(Jc=>{"use strict";var Y_e="flow",D0="block",Wp="quoted";function J_e(t,e,r="flow",{indentAtStart:n,lineWidth:i=80,minContentWidth:s=20,onFold:o,onOverflow:a}={}){if(!i||i<0)return t;i<s&&(s=0);let l=Math.max(1+s,1+i-e.length);if(t.length<=l)return t;let c=[],u={},d=i-e.length;typeof n=="number"&&(n>i-Math.max(2,s)?c.push(0):d=i-n);let p,f,y=!1,h=-1,m=-1,g=-1;r===D0&&(h=f5(t,h,e.length),h!==-1&&(d=h+l));for(let b;b=t[h+=1];){if(r===Wp&&b==="\\"){switch(m=h,t[h+1]){case"x":h+=3;break;case"u":h+=5;break;case"U":h+=9;break;default:h+=1}g=h}if(b===`
`)r===D0&&(h=f5(t,h,e.length)),d=h+e.length+l,p=void 0;else{if(b===" "&&f&&f!==" "&&f!==`
`&&f!=="	"){let v=t[h+1];v&&v!==" "&&v!==`
`&&v!=="	"&&(p=h)}if(h>=d)if(p)c.push(p),d=p+l,p=void 0;else if(r===Wp){for(;f===" "||f==="	";)f=b,b=t[h+=1],y=!0;let v=h>g+1?h-2:m-1;if(u[v])return t;c.push(v),u[v]=!0,d=v+l,p=void 0}else y=!0}f=b}if(y&&a&&a(),c.length===0)return t;o&&o();let E=t.slice(0,c[0]);for(let b=0;b<c.length;++b){let v=c[b],A=c[b+1]||t.length;v===0?E=`
${e}${t.slice(0,A)}`:(r===Wp&&u[v]&&(E+=`${t[v]}\\`),E+=`
${e}${t.slice(v+1,A)}`)}return E}function f5(t,e,r){let n=e,i=e+1,s=t[i];for(;s===" "||s==="	";)if(e<i+r)s=t[++e];else{do s=t[++e];while(s&&s!==`
`);n=e,i=e+1,s=t[i]}return n}Jc.FOLD_BLOCK=D0;Jc.FOLD_FLOW=Y_e;Jc.FOLD_QUOTED=Wp;Jc.foldFlowLines=J_e});var Qc=w(p5=>{"use strict";var Pr=nt(),bi=h5(),Hp=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Vp=t=>/^(%|---|\.\.\.)/m.test(t);function Z_e(t,e,r){if(!e||e<0)return!1;let n=e-r,i=t.length;if(i<=n)return!1;for(let s=0,o=0;s<i;++s)if(t[s]===`
`){if(s-o>n)return!0;if(o=s+1,i-o<=n)return!1}return!0}function Zc(t,e){let r=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return r;let{implicitKey:n}=e,i=e.options.doubleQuotedMinMultiLineLength,s=e.indent||(Vp(t)?"  ":""),o="",a=0;for(let l=0,c=r[l];c;c=r[++l])if(c===" "&&r[l+1]==="\\"&&r[l+2]==="n"&&(o+=r.slice(a,l)+"\\ ",l+=1,a=l,c="\\"),c==="\\")switch(r[l+1]){case"u":{o+=r.slice(a,l);let u=r.substr(l+2,4);switch(u){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:u.substr(0,2)==="00"?o+="\\x"+u.substr(2):o+=r.substr(l,6)}l+=5,a=l+1}break;case"n":if(n||r[l+2]==='"'||r.length<i)l+=1;else{for(o+=r.slice(a,l)+`

`;r[l+2]==="\\"&&r[l+3]==="n"&&r[l+4]!=='"';)o+=`
`,l+=2;o+=s,r[l+2]===" "&&(o+="\\"),l+=1,a=l+1}break;default:l+=1}return o=a?o+r.slice(a):r,n?o:bi.foldFlowLines(o,s,bi.FOLD_QUOTED,Hp(e,!1))}function $0(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return Zc(t,e);let r=e.indent||(Vp(t)?"  ":""),n="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${r}`)+"'";return e.implicitKey?n:bi.foldFlowLines(n,r,bi.FOLD_FLOW,Hp(e,!1))}function xa(t,e){let{singleQuote:r}=e.options,n;if(r===!1)n=Zc;else{let i=t.includes('"'),s=t.includes("'");i&&!s?n=$0:s&&!i?n=Zc:n=r?$0:Zc}return n(t,e)}var F0;try{F0=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{F0=/\n+(?!\n|$)/g}function zp({comment:t,type:e,value:r},n,i,s){let{blockQuote:o,commentString:a,lineWidth:l}=n.options;if(!o||/\n[\t ]+$/.test(r))return xa(r,n);let c=n.indent||(n.forceBlockIndent||Vp(r)?"  ":""),u=o==="literal"?!0:o==="folded"||e===Pr.Scalar.BLOCK_FOLDED?!1:e===Pr.Scalar.BLOCK_LITERAL?!0:!Z_e(r,l,c.length);if(!r)return u?`|
`:`>
`;let d,p;for(p=r.length;p>0;--p){let A=r[p-1];if(A!==`
`&&A!=="	"&&A!==" ")break}let f=r.substring(p),y=f.indexOf(`
`);y===-1?d="-":r===f||y!==f.length-1?(d="+",s&&s()):d="",f&&(r=r.slice(0,-f.length),f[f.length-1]===`
`&&(f=f.slice(0,-1)),f=f.replace(F0,`$&${c}`));let h=!1,m,g=-1;for(m=0;m<r.length;++m){let A=r[m];if(A===" ")h=!0;else if(A===`
`)g=m;else break}let E=r.substring(0,g<m?g+1:m);E&&(r=r.substring(E.length),E=E.replace(/\n+/g,`$&${c}`));let v=(h?c?"2":"1":"")+d;if(t&&(v+=" "+a(t.replace(/ ?[\r\n]+/g," ")),i&&i()),!u){let A=r.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`),k=!1,R=Hp(n,!0);o!=="folded"&&e!==Pr.Scalar.BLOCK_FOLDED&&(R.onOverflow=()=>{k=!0});let N=bi.foldFlowLines(`${E}${A}${f}`,c,bi.FOLD_BLOCK,R);if(!k)return`>${v}
${c}${N}`}return r=r.replace(/\n+/g,`$&${c}`),`|${v}
${c}${E}${r}${f}`}function Q_e(t,e,r,n){let{type:i,value:s}=t,{actualString:o,implicitKey:a,indent:l,indentStep:c,inFlow:u}=e;if(a&&s.includes(`
`)||u&&/[[\]{},]/.test(s))return xa(s,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return a||u||!s.includes(`
`)?xa(s,e):zp(t,e,r,n);if(!a&&!u&&i!==Pr.Scalar.PLAIN&&s.includes(`
`))return zp(t,e,r,n);if(Vp(s)){if(l==="")return e.forceBlockIndent=!0,zp(t,e,r,n);if(a&&l===c)return xa(s,e)}let d=s.replace(/\n+/g,`$&
${l}`);if(o){let p=h=>h.default&&h.tag!=="tag:yaml.org,2002:str"&&h.test?.test(d),{compat:f,tags:y}=e.doc.schema;if(y.some(p)||f?.some(p))return xa(s,e)}return a?d:bi.foldFlowLines(d,l,bi.FOLD_FLOW,Hp(e,!1))}function X_e(t,e,r,n){let{implicitKey:i,inFlow:s}=e,o=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)}),{type:a}=t;a!==Pr.Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=Pr.Scalar.QUOTE_DOUBLE);let l=u=>{switch(u){case Pr.Scalar.BLOCK_FOLDED:case Pr.Scalar.BLOCK_LITERAL:return i||s?xa(o.value,e):zp(o,e,r,n);case Pr.Scalar.QUOTE_DOUBLE:return Zc(o.value,e);case Pr.Scalar.QUOTE_SINGLE:return $0(o.value,e);case Pr.Scalar.PLAIN:return Q_e(o,e,r,n);default:return null}},c=l(a);if(c===null){let{defaultKeyType:u,defaultStringType:d}=e.options,p=i&&u||d;if(c=l(p),c===null)throw new Error(`Unsupported default string type ${p}`)}return c}p5.stringifyString=X_e});var Xc=w(B0=>{"use strict";var eve=Dp(),wi=me(),tve=Yc(),rve=Qc();function nve(t,e){let r=Object.assign({blockQuote:!0,commentString:tve.stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e),n;switch(r.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:t,flowCollectionPadding:r.flowCollectionPadding?" ":"",indent:"",indentStep:typeof r.indent=="number"?" ".repeat(r.indent):"  ",inFlow:n,options:r}}function ive(t,e){if(e.tag){let i=t.filter(s=>s.tag===e.tag);if(i.length>0)return i.find(s=>s.format===e.format)??i[0]}let r,n;if(wi.isScalar(e)){n=e.value;let i=t.filter(s=>s.identify?.(n));if(i.length>1){let s=i.filter(o=>o.test);s.length>0&&(i=s)}r=i.find(s=>s.format===e.format)??i.find(s=>!s.format)}else n=e,r=t.find(i=>i.nodeClass&&n instanceof i.nodeClass);if(!r){let i=n?.constructor?.name??(n===null?"null":typeof n);throw new Error(`Tag not resolved for ${i} value`)}return r}function sve(t,e,{anchors:r,doc:n}){if(!n.directives)return"";let i=[],s=(wi.isScalar(t)||wi.isCollection(t))&&t.anchor;s&&eve.anchorIsValid(s)&&(r.add(s),i.push(`&${s}`));let o=t.tag??(e.default?null:e.tag);return o&&i.push(n.directives.tagString(o)),i.join(" ")}function ove(t,e,r,n){if(wi.isPair(t))return t.toString(e,r,n);if(wi.isAlias(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let i,s=wi.isNode(t)?t:e.doc.createNode(t,{onTagObj:l=>i=l});i??(i=ive(e.doc.schema.tags,s));let o=sve(s,i,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);let a=typeof i.stringify=="function"?i.stringify(s,e,r,n):wi.isScalar(s)?rve.stringifyString(s,e,r,n):s.toString(e,r,n);return o?wi.isScalar(s)||a[0]==="{"||a[0]==="["?`${o} ${a}`:`${o}
${e.indent}${a}`:a}B0.createStringifyContext=nve;B0.stringify=ove});var b5=w(y5=>{"use strict";var Bn=me(),g5=nt(),m5=Xc(),eu=Yc();function ave({key:t,value:e},r,n,i){let{allNullValues:s,doc:o,indent:a,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:d}}=r,p=Bn.isNode(t)&&t.comment||null;if(d){if(p)throw new Error("With simple keys, key nodes cannot have comments");if(Bn.isCollection(t)||!Bn.isNode(t)&&typeof t=="object"){let R="With simple keys, collection cannot be used as a key value";throw new Error(R)}}let f=!d&&(!t||p&&e==null&&!r.inFlow||Bn.isCollection(t)||(Bn.isScalar(t)?t.type===g5.Scalar.BLOCK_FOLDED||t.type===g5.Scalar.BLOCK_LITERAL:typeof t=="object"));r=Object.assign({},r,{allNullValues:!1,implicitKey:!f&&(d||!s),indent:a+l});let y=!1,h=!1,m=m5.stringify(t,r,()=>y=!0,()=>h=!0);if(!f&&!r.inFlow&&m.length>1024){if(d)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");f=!0}if(r.inFlow){if(s||e==null)return y&&n&&n(),m===""?"?":f?`? ${m}`:m}else if(s&&!d||e==null&&f)return m=`? ${m}`,p&&!y?m+=eu.lineComment(m,r.indent,c(p)):h&&i&&i(),m;y&&(p=null),f?(p&&(m+=eu.lineComment(m,r.indent,c(p))),m=`? ${m}
${a}:`):(m=`${m}:`,p&&(m+=eu.lineComment(m,r.indent,c(p))));let g,E,b;Bn.isNode(e)?(g=!!e.spaceBefore,E=e.commentBefore,b=e.comment):(g=!1,E=null,b=null,e&&typeof e=="object"&&(e=o.createNode(e))),r.implicitKey=!1,!f&&!p&&Bn.isScalar(e)&&(r.indentAtStart=m.length+1),h=!1,!u&&l.length>=2&&!r.inFlow&&!f&&Bn.isSeq(e)&&!e.flow&&!e.tag&&!e.anchor&&(r.indent=r.indent.substring(2));let v=!1,A=m5.stringify(e,r,()=>v=!0,()=>h=!0),k=" ";if(p||g||E){if(k=g?`
`:"",E){let R=c(E);k+=`
${eu.indentComment(R,r.indent)}`}A===""&&!r.inFlow?k===`
`&&b&&(k=`

`):k+=`
${r.indent}`}else if(!f&&Bn.isCollection(e)){let R=A[0],N=A.indexOf(`
`),I=N!==-1,P=r.inFlow??e.flow??e.items.length===0;if(I||!P){let D=!1;if(I&&(R==="&"||R==="!")){let F=A.indexOf(" ");R==="&"&&F!==-1&&F<N&&A[F+1]==="!"&&(F=A.indexOf(" ",F+1)),(F===-1||N<F)&&(D=!0)}D||(k=`
${r.indent}`)}}else(A===""||A[0]===`
`)&&(k="");return m+=k+A,r.inFlow?v&&n&&n():b&&!v?m+=eu.lineComment(m,r.indent,c(b)):h&&i&&i(),m}y5.stringifyPair=ave});var U0=w(j0=>{"use strict";var w5=require("process");function lve(t,...e){t==="debug"&&console.log(...e)}function cve(t,e){(t==="debug"||t==="warn")&&(typeof w5.emitWarning=="function"?w5.emitWarning(e):console.warn(e))}j0.debug=lve;j0.warn=cve});var Jp=w(Yp=>{"use strict";var tu=me(),_5=nt(),Gp="<<",Kp={identify:t=>t===Gp||typeof t=="symbol"&&t.description===Gp,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new _5.Scalar(Symbol(Gp)),{addToJSMap:v5}),stringify:()=>Gp},uve=(t,e)=>(Kp.identify(e)||tu.isScalar(e)&&(!e.type||e.type===_5.Scalar.PLAIN)&&Kp.identify(e.value))&&t?.doc.schema.tags.some(r=>r.tag===Kp.tag&&r.default);function v5(t,e,r){if(r=t&&tu.isAlias(r)?r.resolve(t.doc):r,tu.isSeq(r))for(let n of r.items)W0(t,e,n);else if(Array.isArray(r))for(let n of r)W0(t,e,n);else W0(t,e,r)}function W0(t,e,r){let n=t&&tu.isAlias(r)?r.resolve(t.doc):r;if(!tu.isMap(n))throw new Error("Merge sources must be maps or map aliases");let i=n.toJSON(null,t,Map);for(let[s,o]of i)e instanceof Map?e.has(s)||e.set(s,o):e instanceof Set?e.add(s):Object.prototype.hasOwnProperty.call(e,s)||Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}Yp.addMergeToJSMap=v5;Yp.isMergeKey=uve;Yp.merge=Kp});var H0=w(x5=>{"use strict";var dve=U0(),S5=Jp(),fve=Xc(),E5=me(),z0=mi();function hve(t,e,{key:r,value:n}){if(E5.isNode(r)&&r.addToJSMap)r.addToJSMap(t,e,n);else if(S5.isMergeKey(t,r))S5.addMergeToJSMap(t,e,n);else{let i=z0.toJS(r,"",t);if(e instanceof Map)e.set(i,z0.toJS(n,i,t));else if(e instanceof Set)e.add(i);else{let s=pve(r,i,t),o=z0.toJS(n,s,t);s in e?Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[s]=o}}return e}function pve(t,e,r){if(e===null)return"";if(typeof e!="object")return String(e);if(E5.isNode(t)&&r?.doc){let n=fve.createStringifyContext(r.doc,{});n.anchors=new Set;for(let s of r.anchors.keys())n.anchors.add(s.anchor);n.inFlow=!0,n.inStringifyKey=!0;let i=t.toString(n);if(!r.mapKeyWarned){let s=JSON.stringify(i);s.length>40&&(s=s.substring(0,36)+'..."'),dve.warn(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${s}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return i}return JSON.stringify(e)}x5.addPairToJSMap=hve});var _i=w(V0=>{"use strict";var T5=Kc(),gve=b5(),mve=H0(),Zp=me();function yve(t,e,r){let n=T5.createNode(t,void 0,r),i=T5.createNode(e,void 0,r);return new Qp(n,i)}var Qp=class t{constructor(e,r=null){Object.defineProperty(this,Zp.NODE_TYPE,{value:Zp.PAIR}),this.key=e,this.value=r}clone(e){let{key:r,value:n}=this;return Zp.isNode(r)&&(r=r.clone(e)),Zp.isNode(n)&&(n=n.clone(e)),new t(r,n)}toJSON(e,r){let n=r?.mapAsMap?new Map:{};return mve.addPairToJSMap(r,n,this)}toString(e,r,n){return e?.doc?gve.stringifyPair(this,e,r,n):JSON.stringify(this)}};V0.Pair=Qp;V0.createPair=yve});var G0=w(R5=>{"use strict";var Ps=me(),A5=Xc(),Xp=Yc();function bve(t,e,r){return(e.inFlow??t.flow?_ve:wve)(t,e,r)}function wve({comment:t,items:e},r,{blockItemPrefix:n,flowChars:i,itemIndent:s,onChompKeep:o,onComment:a}){let{indent:l,options:{commentString:c}}=r,u=Object.assign({},r,{indent:s,type:null}),d=!1,p=[];for(let y=0;y<e.length;++y){let h=e[y],m=null;if(Ps.isNode(h))!d&&h.spaceBefore&&p.push(""),eg(r,p,h.commentBefore,d),h.comment&&(m=h.comment);else if(Ps.isPair(h)){let E=Ps.isNode(h.key)?h.key:null;E&&(!d&&E.spaceBefore&&p.push(""),eg(r,p,E.commentBefore,d))}d=!1;let g=A5.stringify(h,u,()=>m=null,()=>d=!0);m&&(g+=Xp.lineComment(g,s,c(m))),d&&m&&(d=!1),p.push(n+g)}let f;if(p.length===0)f=i.start+i.end;else{f=p[0];for(let y=1;y<p.length;++y){let h=p[y];f+=h?`
${l}${h}`:`
`}}return t?(f+=`
`+Xp.indentComment(c(t),l),a&&a()):d&&o&&o(),f}function _ve({items:t},e,{flowChars:r,itemIndent:n}){let{indent:i,indentStep:s,flowCollectionPadding:o,options:{commentString:a}}=e;n+=s;let l=Object.assign({},e,{indent:n,inFlow:!0,type:null}),c=!1,u=0,d=[];for(let y=0;y<t.length;++y){let h=t[y],m=null;if(Ps.isNode(h))h.spaceBefore&&d.push(""),eg(e,d,h.commentBefore,!1),h.comment&&(m=h.comment);else if(Ps.isPair(h)){let E=Ps.isNode(h.key)?h.key:null;E&&(E.spaceBefore&&d.push(""),eg(e,d,E.commentBefore,!1),E.comment&&(c=!0));let b=Ps.isNode(h.value)?h.value:null;b?(b.comment&&(m=b.comment),b.commentBefore&&(c=!0)):h.value==null&&E?.comment&&(m=E.comment)}m&&(c=!0);let g=A5.stringify(h,l,()=>m=null);y<t.length-1&&(g+=","),m&&(g+=Xp.lineComment(g,n,a(m))),!c&&(d.length>u||g.includes(`
`))&&(c=!0),d.push(g),u=d.length}let{start:p,end:f}=r;if(d.length===0)return p+f;if(!c){let y=d.reduce((h,m)=>h+m.length+2,2);c=e.options.lineWidth>0&&y>e.options.lineWidth}if(c){let y=p;for(let h of d)y+=h?`
${s}${i}${h}`:`
`;return`${y}
${i}${f}`}else return`${p}${o}${d.join(" ")}${o}${f}`}function eg({indent:t,options:{commentString:e}},r,n,i){if(n&&i&&(n=n.replace(/^\n+/,"")),n){let s=Xp.indentComment(e(n),t);r.push(s.trimStart())}}R5.stringifyCollection=bve});var Si=w(Y0=>{"use strict";var vve=G0(),Sve=H0(),Eve=jp(),vi=me(),tg=_i(),xve=nt();function ru(t,e){let r=vi.isScalar(e)?e.value:e;for(let n of t)if(vi.isPair(n)&&(n.key===e||n.key===r||vi.isScalar(n.key)&&n.key.value===r))return n}var K0=class extends Eve.Collection{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(vi.MAP,e),this.items=[]}static from(e,r,n){let{keepUndefined:i,replacer:s}=n,o=new this(e),a=(l,c)=>{if(typeof s=="function")c=s.call(r,l,c);else if(Array.isArray(s)&&!s.includes(l))return;(c!==void 0||i)&&o.items.push(tg.createPair(l,c,n))};if(r instanceof Map)for(let[l,c]of r)a(l,c);else if(r&&typeof r=="object")for(let l of Object.keys(r))a(l,r[l]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,r){let n;vi.isPair(e)?n=e:!e||typeof e!="object"||!("key"in e)?n=new tg.Pair(e,e?.value):n=new tg.Pair(e.key,e.value);let i=ru(this.items,n.key),s=this.schema?.sortMapEntries;if(i){if(!r)throw new Error(`Key ${n.key} already set`);vi.isScalar(i.value)&&xve.isScalarValue(n.value)?i.value.value=n.value:i.value=n.value}else if(s){let o=this.items.findIndex(a=>s(n,a)<0);o===-1?this.items.push(n):this.items.splice(o,0,n)}else this.items.push(n)}delete(e){let r=ru(this.items,e);return r?this.items.splice(this.items.indexOf(r),1).length>0:!1}get(e,r){let i=ru(this.items,e)?.value;return(!r&&vi.isScalar(i)?i.value:i)??void 0}has(e){return!!ru(this.items,e)}set(e,r){this.add(new tg.Pair(e,r),!0)}toJSON(e,r,n){let i=n?new n:r?.mapAsMap?new Map:{};r?.onCreate&&r.onCreate(i);for(let s of this.items)Sve.addPairToJSMap(r,i,s);return i}toString(e,r,n){if(!e)return JSON.stringify(this);for(let i of this.items)if(!vi.isPair(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),vve.stringifyCollection(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:r})}};Y0.YAMLMap=K0;Y0.findPair=ru});var Ta=w(C5=>{"use strict";var Tve=me(),I5=Si(),Ave={collection:"map",default:!0,nodeClass:I5.YAMLMap,tag:"tag:yaml.org,2002:map",resolve(t,e){return Tve.isMap(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,r)=>I5.YAMLMap.from(t,e,r)};C5.map=Ave});var Ei=w(k5=>{"use strict";var Rve=Kc(),Ive=G0(),Cve=jp(),ng=me(),kve=nt(),Nve=mi(),J0=class extends Cve.Collection{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(ng.SEQ,e),this.items=[]}add(e){this.items.push(e)}delete(e){let r=rg(e);return typeof r!="number"?!1:this.items.splice(r,1).length>0}get(e,r){let n=rg(e);if(typeof n!="number")return;let i=this.items[n];return!r&&ng.isScalar(i)?i.value:i}has(e){let r=rg(e);return typeof r=="number"&&r<this.items.length}set(e,r){let n=rg(e);if(typeof n!="number")throw new Error(`Expected a valid index, not ${e}.`);let i=this.items[n];ng.isScalar(i)&&kve.isScalarValue(r)?i.value=r:this.items[n]=r}toJSON(e,r){let n=[];r?.onCreate&&r.onCreate(n);let i=0;for(let s of this.items)n.push(Nve.toJS(s,String(i++),r));return n}toString(e,r,n){return e?Ive.stringifyCollection(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:r}):JSON.stringify(this)}static from(e,r,n){let{replacer:i}=n,s=new this(e);if(r&&Symbol.iterator in Object(r)){let o=0;for(let a of r){if(typeof i=="function"){let l=r instanceof Set?a:String(o++);a=i.call(r,l,a)}s.items.push(Rve.createNode(a,void 0,n))}}return s}};function rg(t){let e=ng.isScalar(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}k5.YAMLSeq=J0});var Aa=w(O5=>{"use strict";var Ove=me(),N5=Ei(),qve={collection:"seq",default:!0,nodeClass:N5.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(t,e){return Ove.isSeq(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,r)=>N5.YAMLSeq.from(t,e,r)};O5.seq=qve});var nu=w(q5=>{"use strict";var Pve=Qc(),Lve={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,r,n){return e=Object.assign({actualString:!0},e),Pve.stringifyString(t,e,r,n)}};q5.string=Lve});var ig=w(M5=>{"use strict";var P5=nt(),L5={identify:t=>t==null,createNode:()=>new P5.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new P5.Scalar(null),stringify:({source:t},e)=>typeof t=="string"&&L5.test.test(t)?t:e.options.nullStr};M5.nullTag=L5});var Z0=w($5=>{"use strict";var Mve=nt(),D5={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new Mve.Scalar(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},r){if(t&&D5.test.test(t)){let n=t[0]==="t"||t[0]==="T";if(e===n)return t}return e?r.options.trueStr:r.options.falseStr}};$5.boolTag=D5});var Ra=w(F5=>{"use strict";function Dve({format:t,minFractionDigits:e,tag:r,value:n}){if(typeof n=="bigint")return String(n);let i=typeof n=="number"?n:Number(n);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let s=Object.is(n,-0)?"-0":JSON.stringify(n);if(!t&&e&&(!r||r==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let o=s.indexOf(".");o<0&&(o=s.length,s+=".");let a=e-(s.length-o-1);for(;a-- >0;)s+="0"}return s}F5.stringifyNumber=Dve});var X0=w(sg=>{"use strict";var $ve=nt(),Q0=Ra(),Fve={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Q0.stringifyNumber},Bve={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():Q0.stringifyNumber(t)}},jve={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){let e=new $ve.Scalar(parseFloat(t)),r=t.indexOf(".");return r!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-r-1),e},stringify:Q0.stringifyNumber};sg.float=jve;sg.floatExp=Bve;sg.floatNaN=Fve});var tE=w(ag=>{"use strict";var B5=Ra(),og=t=>typeof t=="bigint"||Number.isInteger(t),eE=(t,e,r,{intAsBigInt:n})=>n?BigInt(t):parseInt(t.substring(e),r);function j5(t,e,r){let{value:n}=t;return og(n)&&n>=0?r+n.toString(e):B5.stringifyNumber(t)}var Uve={identify:t=>og(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,r)=>eE(t,2,8,r),stringify:t=>j5(t,8,"0o")},Wve={identify:og,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,r)=>eE(t,0,10,r),stringify:B5.stringifyNumber},zve={identify:t=>og(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,r)=>eE(t,2,16,r),stringify:t=>j5(t,16,"0x")};ag.int=Wve;ag.intHex=zve;ag.intOct=Uve});var W5=w(U5=>{"use strict";var Hve=Ta(),Vve=ig(),Gve=Aa(),Kve=nu(),Yve=Z0(),rE=X0(),nE=tE(),Jve=[Hve.map,Gve.seq,Kve.string,Vve.nullTag,Yve.boolTag,nE.intOct,nE.int,nE.intHex,rE.floatNaN,rE.floatExp,rE.float];U5.schema=Jve});var V5=w(H5=>{"use strict";var Zve=nt(),Qve=Ta(),Xve=Aa();function z5(t){return typeof t=="bigint"||Number.isInteger(t)}var lg=({value:t})=>JSON.stringify(t),eSe=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:lg},{identify:t=>t==null,createNode:()=>new Zve.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:lg},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:lg},{identify:z5,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:r})=>r?BigInt(t):parseInt(t,10),stringify:({value:t})=>z5(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:lg}],tSe={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},rSe=[Qve.map,Xve.seq].concat(eSe,tSe);H5.schema=rSe});var sE=w(G5=>{"use strict";var iu=require("buffer"),iE=nt(),nSe=Qc(),iSe={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof iu.Buffer=="function")return iu.Buffer.from(t,"base64");if(typeof atob=="function"){let r=atob(t.replace(/[\n\r]/g,"")),n=new Uint8Array(r.length);for(let i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:r},n,i,s){if(!r)return"";let o=r,a;if(typeof iu.Buffer=="function")a=o instanceof iu.Buffer?o.toString("base64"):iu.Buffer.from(o.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=iE.Scalar.BLOCK_LITERAL),e!==iE.Scalar.QUOTE_DOUBLE){let l=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),c=Math.ceil(a.length/l),u=new Array(c);for(let d=0,p=0;d<c;++d,p+=l)u[d]=a.substr(p,l);a=u.join(e===iE.Scalar.BLOCK_LITERAL?`
`:" ")}return nSe.stringifyString({comment:t,type:e,value:a},n,i,s)}};G5.binary=iSe});var dg=w(ug=>{"use strict";var cg=me(),oE=_i(),sSe=nt(),oSe=Ei();function K5(t,e){if(cg.isSeq(t))for(let r=0;r<t.items.length;++r){let n=t.items[r];if(!cg.isPair(n)){if(cg.isMap(n)){n.items.length>1&&e("Each pair must have its own sequence indicator");let i=n.items[0]||new oE.Pair(new sSe.Scalar(null));if(n.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${n.commentBefore}
${i.key.commentBefore}`:n.commentBefore),n.comment){let s=i.value??i.key;s.comment=s.comment?`${n.comment}
${s.comment}`:n.comment}n=i}t.items[r]=cg.isPair(n)?n:new oE.Pair(n)}}else e("Expected a sequence for this tag");return t}function Y5(t,e,r){let{replacer:n}=r,i=new oSe.YAMLSeq(t);i.tag="tag:yaml.org,2002:pairs";let s=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof n=="function"&&(o=n.call(e,String(s++),o));let a,l;if(Array.isArray(o))if(o.length===2)a=o[0],l=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){let c=Object.keys(o);if(c.length===1)a=c[0],l=o[a];else throw new TypeError(`Expected tuple with one key, not ${c.length} keys`)}else a=o;i.items.push(oE.createPair(a,l,r))}return i}var aSe={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:K5,createNode:Y5};ug.createPairs=Y5;ug.pairs=aSe;ug.resolvePairs=K5});var cE=w(lE=>{"use strict";var J5=me(),aE=mi(),su=Si(),lSe=Ei(),Z5=dg(),Ls=class t extends lSe.YAMLSeq{constructor(){super(),this.add=su.YAMLMap.prototype.add.bind(this),this.delete=su.YAMLMap.prototype.delete.bind(this),this.get=su.YAMLMap.prototype.get.bind(this),this.has=su.YAMLMap.prototype.has.bind(this),this.set=su.YAMLMap.prototype.set.bind(this),this.tag=t.tag}toJSON(e,r){if(!r)return super.toJSON(e);let n=new Map;r?.onCreate&&r.onCreate(n);for(let i of this.items){let s,o;if(J5.isPair(i)?(s=aE.toJS(i.key,"",r),o=aE.toJS(i.value,s,r)):s=aE.toJS(i,"",r),n.has(s))throw new Error("Ordered maps must not include duplicate keys");n.set(s,o)}return n}static from(e,r,n){let i=Z5.createPairs(e,r,n),s=new this;return s.items=i.items,s}};Ls.tag="tag:yaml.org,2002:omap";var cSe={collection:"seq",identify:t=>t instanceof Map,nodeClass:Ls,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){let r=Z5.resolvePairs(t,e),n=[];for(let{key:i}of r.items)J5.isScalar(i)&&(n.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):n.push(i.value));return Object.assign(new Ls,r)},createNode:(t,e,r)=>Ls.from(t,e,r)};lE.YAMLOMap=Ls;lE.omap=cSe});var r3=w(uE=>{"use strict";var Q5=nt();function X5({value:t,source:e},r){return e&&(t?e3:t3).test.test(e)?e:t?r.options.trueStr:r.options.falseStr}var e3={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Q5.Scalar(!0),stringify:X5},t3={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new Q5.Scalar(!1),stringify:X5};uE.falseTag=t3;uE.trueTag=e3});var n3=w(fg=>{"use strict";var uSe=nt(),dE=Ra(),dSe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:dE.stringifyNumber},fSe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():dE.stringifyNumber(t)}},hSe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){let e=new uSe.Scalar(parseFloat(t.replace(/_/g,""))),r=t.indexOf(".");if(r!==-1){let n=t.substring(r+1).replace(/_/g,"");n[n.length-1]==="0"&&(e.minFractionDigits=n.length)}return e},stringify:dE.stringifyNumber};fg.float=hSe;fg.floatExp=fSe;fg.floatNaN=dSe});var s3=w(au=>{"use strict";var i3=Ra(),ou=t=>typeof t=="bigint"||Number.isInteger(t);function hg(t,e,r,{intAsBigInt:n}){let i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),n){switch(r){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}let o=BigInt(t);return i==="-"?BigInt(-1)*o:o}let s=parseInt(t,r);return i==="-"?-1*s:s}function fE(t,e,r){let{value:n}=t;if(ou(n)){let i=n.toString(e);return n<0?"-"+r+i.substr(1):r+i}return i3.stringifyNumber(t)}var pSe={identify:ou,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,r)=>hg(t,2,2,r),stringify:t=>fE(t,2,"0b")},gSe={identify:ou,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,r)=>hg(t,1,8,r),stringify:t=>fE(t,8,"0")},mSe={identify:ou,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,r)=>hg(t,0,10,r),stringify:i3.stringifyNumber},ySe={identify:ou,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,r)=>hg(t,2,16,r),stringify:t=>fE(t,16,"0x")};au.int=mSe;au.intBin=pSe;au.intHex=ySe;au.intOct=gSe});var pE=w(hE=>{"use strict";var mg=me(),pg=_i(),gg=Si(),Ms=class t extends gg.YAMLMap{constructor(e){super(e),this.tag=t.tag}add(e){let r;mg.isPair(e)?r=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?r=new pg.Pair(e.key,null):r=new pg.Pair(e,null),gg.findPair(this.items,r.key)||this.items.push(r)}get(e,r){let n=gg.findPair(this.items,e);return!r&&mg.isPair(n)?mg.isScalar(n.key)?n.key.value:n.key:n}set(e,r){if(typeof r!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof r}`);let n=gg.findPair(this.items,e);n&&!r?this.items.splice(this.items.indexOf(n),1):!n&&r&&this.items.push(new pg.Pair(e))}toJSON(e,r){return super.toJSON(e,r,Set)}toString(e,r,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),r,n);throw new Error("Set items must all have null values")}static from(e,r,n){let{replacer:i}=n,s=new this(e);if(r&&Symbol.iterator in Object(r))for(let o of r)typeof i=="function"&&(o=i.call(r,o,o)),s.items.push(pg.createPair(o,null,n));return s}};Ms.tag="tag:yaml.org,2002:set";var bSe={collection:"map",identify:t=>t instanceof Set,nodeClass:Ms,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,r)=>Ms.from(t,e,r),resolve(t,e){if(mg.isMap(t)){if(t.hasAllNullValues(!0))return Object.assign(new Ms,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};hE.YAMLSet=Ms;hE.set=bSe});var mE=w(yg=>{"use strict";var wSe=Ra();function gE(t,e){let r=t[0],n=r==="-"||r==="+"?t.substring(1):t,i=o=>e?BigInt(o):Number(o),s=n.replace(/_/g,"").split(":").reduce((o,a)=>o*i(60)+i(a),i(0));return r==="-"?i(-1)*s:s}function o3(t){let{value:e}=t,r=o=>o;if(typeof e=="bigint")r=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return wSe.stringifyNumber(t);let n="";e<0&&(n="-",e*=r(-1));let i=r(60),s=[e%i];return e<60?s.unshift(0):(e=(e-s[0])/i,s.unshift(e%i),e>=60&&(e=(e-s[0])/i,s.unshift(e))),n+s.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}var _Se={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:r})=>gE(t,r),stringify:o3},vSe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>gE(t,!1),stringify:o3},a3={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){let e=t.match(a3.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,r,n,i,s,o,a]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0,c=Date.UTC(r,n-1,i,s||0,o||0,a||0,l),u=e[8];if(u&&u!=="Z"){let d=gE(u,!1);Math.abs(d)<30&&(d*=60),c-=6e4*d}return new Date(c)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""};yg.floatTime=vSe;yg.intTime=_Se;yg.timestamp=a3});var u3=w(c3=>{"use strict";var SSe=Ta(),ESe=ig(),xSe=Aa(),TSe=nu(),ASe=sE(),l3=r3(),yE=n3(),bg=s3(),RSe=Jp(),ISe=cE(),CSe=dg(),kSe=pE(),bE=mE(),NSe=[SSe.map,xSe.seq,TSe.string,ESe.nullTag,l3.trueTag,l3.falseTag,bg.intBin,bg.intOct,bg.int,bg.intHex,yE.floatNaN,yE.floatExp,yE.float,ASe.binary,RSe.merge,ISe.omap,CSe.pairs,kSe.set,bE.intTime,bE.floatTime,bE.timestamp];c3.schema=NSe});var _3=w(vE=>{"use strict";var p3=Ta(),OSe=ig(),g3=Aa(),qSe=nu(),PSe=Z0(),wE=X0(),_E=tE(),LSe=W5(),MSe=V5(),m3=sE(),lu=Jp(),y3=cE(),b3=dg(),d3=u3(),w3=pE(),wg=mE(),f3=new Map([["core",LSe.schema],["failsafe",[p3.map,g3.seq,qSe.string]],["json",MSe.schema],["yaml11",d3.schema],["yaml-1.1",d3.schema]]),h3={binary:m3.binary,bool:PSe.boolTag,float:wE.float,floatExp:wE.floatExp,floatNaN:wE.floatNaN,floatTime:wg.floatTime,int:_E.int,intHex:_E.intHex,intOct:_E.intOct,intTime:wg.intTime,map:p3.map,merge:lu.merge,null:OSe.nullTag,omap:y3.omap,pairs:b3.pairs,seq:g3.seq,set:w3.set,timestamp:wg.timestamp},DSe={"tag:yaml.org,2002:binary":m3.binary,"tag:yaml.org,2002:merge":lu.merge,"tag:yaml.org,2002:omap":y3.omap,"tag:yaml.org,2002:pairs":b3.pairs,"tag:yaml.org,2002:set":w3.set,"tag:yaml.org,2002:timestamp":wg.timestamp};function $Se(t,e,r){let n=f3.get(e);if(n&&!t)return r&&!n.includes(lu.merge)?n.concat(lu.merge):n.slice();let i=n;if(!i)if(Array.isArray(t))i=[];else{let s=Array.from(f3.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${s} or define customTags array`)}if(Array.isArray(t))for(let s of t)i=i.concat(s);else typeof t=="function"&&(i=t(i.slice()));return r&&(i=i.concat(lu.merge)),i.reduce((s,o)=>{let a=typeof o=="string"?h3[o]:o;if(!a){let l=JSON.stringify(o),c=Object.keys(h3).map(u=>JSON.stringify(u)).join(", ");throw new Error(`Unknown custom tag ${l}; use one of ${c}`)}return s.includes(a)||s.push(a),s},[])}vE.coreKnownTags=DSe;vE.getTags=$Se});var xE=w(v3=>{"use strict";var SE=me(),FSe=Ta(),BSe=Aa(),jSe=nu(),_g=_3(),USe=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0,EE=class t{constructor({compat:e,customTags:r,merge:n,resolveKnownTags:i,schema:s,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(e)?_g.getTags(e,"compat"):e?_g.getTags(null,e):null,this.name=typeof s=="string"&&s||"core",this.knownTags=i?_g.coreKnownTags:{},this.tags=_g.getTags(r,this.name,n),this.toStringOptions=a??null,Object.defineProperty(this,SE.MAP,{value:FSe.map}),Object.defineProperty(this,SE.SCALAR,{value:jSe.string}),Object.defineProperty(this,SE.SEQ,{value:BSe.seq}),this.sortMapEntries=typeof o=="function"?o:o===!0?USe:null}clone(){let e=Object.create(t.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};v3.Schema=EE});var E3=w(S3=>{"use strict";var WSe=me(),TE=Xc(),cu=Yc();function zSe(t,e){let r=[],n=e.directives===!0;if(e.directives!==!1&&t.directives){let l=t.directives.toString(t);l?(r.push(l),n=!0):t.directives.docStart&&(n=!0)}n&&r.push("---");let i=TE.createStringifyContext(t,e),{commentString:s}=i.options;if(t.commentBefore){r.length!==1&&r.unshift("");let l=s(t.commentBefore);r.unshift(cu.indentComment(l,""))}let o=!1,a=null;if(t.contents){if(WSe.isNode(t.contents)){if(t.contents.spaceBefore&&n&&r.push(""),t.contents.commentBefore){let u=s(t.contents.commentBefore);r.push(cu.indentComment(u,""))}i.forceBlockIndent=!!t.comment,a=t.contents.comment}let l=a?void 0:()=>o=!0,c=TE.stringify(t.contents,i,()=>a=null,l);a&&(c+=cu.lineComment(c,"",s(a))),(c[0]==="|"||c[0]===">")&&r[r.length-1]==="---"?r[r.length-1]=`--- ${c}`:r.push(c)}else r.push(TE.stringify(t.contents,i));if(t.directives?.docEnd)if(t.comment){let l=s(t.comment);l.includes(`
`)?(r.push("..."),r.push(cu.indentComment(l,""))):r.push(`... ${l}`)}else r.push("...");else{let l=t.comment;l&&o&&(l=l.replace(/^\n+/,"")),l&&((!o||a)&&r[r.length-1]!==""&&r.push(""),r.push(cu.indentComment(s(l),"")))}return r.join(`
`)+`
`}S3.stringifyDocument=zSe});var uu=w(x3=>{"use strict";var HSe=Gc(),Ia=jp(),br=me(),VSe=_i(),GSe=mi(),KSe=xE(),YSe=E3(),AE=Dp(),JSe=k0(),ZSe=Kc(),RE=C0(),IE=class t{constructor(e,r,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,br.NODE_TYPE,{value:br.DOC});let i=null;typeof r=="function"||Array.isArray(r)?i=r:n===void 0&&r&&(n=r,r=void 0);let s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},n);this.options=s;let{version:o}=s;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new RE.Directives({version:o}),this.setSchema(o,n),this.contents=e===void 0?null:this.createNode(e,i,n)}clone(){let e=Object.create(t.prototype,{[br.NODE_TYPE]:{value:br.DOC}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=br.isNode(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Ca(this.contents)&&this.contents.add(e)}addIn(e,r){Ca(this.contents)&&this.contents.addIn(e,r)}createAlias(e,r){if(!e.anchor){let n=AE.anchorNames(this);e.anchor=!r||n.has(r)?AE.findNewAnchor(r||"a",n):r}return new HSe.Alias(e.anchor)}createNode(e,r,n){let i;if(typeof r=="function")e=r.call({"":e},"",e),i=r;else if(Array.isArray(r)){let m=E=>typeof E=="number"||E instanceof String||E instanceof Number,g=r.filter(m).map(String);g.length>0&&(r=r.concat(g)),i=r}else n===void 0&&r&&(n=r,r=void 0);let{aliasDuplicateObjects:s,anchorPrefix:o,flow:a,keepUndefined:l,onTagObj:c,tag:u}=n??{},{onAnchor:d,setAnchors:p,sourceObjects:f}=AE.createNodeAnchors(this,o||"a"),y={aliasDuplicateObjects:s??!0,keepUndefined:l??!1,onAnchor:d,onTagObj:c,replacer:i,schema:this.schema,sourceObjects:f},h=ZSe.createNode(e,u,y);return a&&br.isCollection(h)&&(h.flow=!0),p(),h}createPair(e,r,n={}){let i=this.createNode(e,null,n),s=this.createNode(r,null,n);return new VSe.Pair(i,s)}delete(e){return Ca(this.contents)?this.contents.delete(e):!1}deleteIn(e){return Ia.isEmptyPath(e)?this.contents==null?!1:(this.contents=null,!0):Ca(this.contents)?this.contents.deleteIn(e):!1}get(e,r){return br.isCollection(this.contents)?this.contents.get(e,r):void 0}getIn(e,r){return Ia.isEmptyPath(e)?!r&&br.isScalar(this.contents)?this.contents.value:this.contents:br.isCollection(this.contents)?this.contents.getIn(e,r):void 0}has(e){return br.isCollection(this.contents)?this.contents.has(e):!1}hasIn(e){return Ia.isEmptyPath(e)?this.contents!==void 0:br.isCollection(this.contents)?this.contents.hasIn(e):!1}set(e,r){this.contents==null?this.contents=Ia.collectionFromPath(this.schema,[e],r):Ca(this.contents)&&this.contents.set(e,r)}setIn(e,r){Ia.isEmptyPath(e)?this.contents=r:this.contents==null?this.contents=Ia.collectionFromPath(this.schema,Array.from(e),r):Ca(this.contents)&&this.contents.setIn(e,r)}setSchema(e,r={}){typeof e=="number"&&(e=String(e));let n;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new RE.Directives({version:"1.1"}),n={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new RE.Directives({version:e}),n={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{let i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(r.schema instanceof Object)this.schema=r.schema;else if(n)this.schema=new KSe.Schema(Object.assign(n,r));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:r,mapAsMap:n,maxAliasCount:i,onAnchor:s,reviver:o}={}){let a={anchors:new Map,doc:this,keep:!e,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},l=GSe.toJS(this.contents,r??"",a);if(typeof s=="function")for(let{count:c,res:u}of a.anchors.values())s(u,c);return typeof o=="function"?JSe.applyReviver(o,{"":l},"",l):l}toJSON(e,r){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:r})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){let r=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${r}`)}return YSe.stringifyDocument(this,e)}};function Ca(t){if(br.isCollection(t))return!0;throw new Error("Expected a YAML collection as document contents")}x3.Document=IE});var hu=w(fu=>{"use strict";var du=class extends Error{constructor(e,r,n,i){super(),this.name=e,this.code=n,this.message=i,this.pos=r}},CE=class extends du{constructor(e,r,n){super("YAMLParseError",e,r,n)}},kE=class extends du{constructor(e,r,n){super("YAMLWarning",e,r,n)}},QSe=(t,e)=>r=>{if(r.pos[0]===-1)return;r.linePos=r.pos.map(a=>e.linePos(a));let{line:n,col:i}=r.linePos[0];r.message+=` at line ${n}, column ${i}`;let s=i-1,o=t.substring(e.lineStarts[n-1],e.lineStarts[n]).replace(/[\n\r]+$/,"");if(s>=60&&o.length>80){let a=Math.min(s-39,o.length-79);o="\u2026"+o.substring(a),s-=a-1}if(o.length>80&&(o=o.substring(0,79)+"\u2026"),n>1&&/^ *$/.test(o.substring(0,s))){let a=t.substring(e.lineStarts[n-2],e.lineStarts[n-1]);a.length>80&&(a=a.substring(0,79)+`\u2026
`),o=a+o}if(/[^ ]/.test(o)){let a=1,l=r.linePos[1];l?.line===n&&l.col>i&&(a=Math.max(1,Math.min(l.col-i,80-s)));let c=" ".repeat(s)+"^".repeat(a);r.message+=`:

${o}
${c}
`}};fu.YAMLError=du;fu.YAMLParseError=CE;fu.YAMLWarning=kE;fu.prettifyError=QSe});var pu=w(T3=>{"use strict";function XSe(t,{flow:e,indicator:r,next:n,offset:i,onError:s,parentIndent:o,startOnNewline:a}){let l=!1,c=a,u=a,d="",p="",f=!1,y=!1,h=null,m=null,g=null,E=null,b=null,v=null,A=null;for(let N of t)switch(y&&(N.type!=="space"&&N.type!=="newline"&&N.type!=="comma"&&s(N.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),y=!1),h&&(c&&N.type!=="comment"&&N.type!=="newline"&&s(h,"TAB_AS_INDENT","Tabs are not allowed as indentation"),h=null),N.type){case"space":!e&&(r!=="doc-start"||n?.type!=="flow-collection")&&N.source.includes("	")&&(h=N),u=!0;break;case"comment":{u||s(N,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let I=N.source.substring(1)||" ";d?d+=p+I:d=I,p="",c=!1;break}case"newline":c?d?d+=N.source:(!v||r!=="seq-item-ind")&&(l=!0):p+=N.source,c=!0,f=!0,(m||g)&&(E=N),u=!0;break;case"anchor":m&&s(N,"MULTIPLE_ANCHORS","A node can have at most one anchor"),N.source.endsWith(":")&&s(N.offset+N.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),m=N,A??(A=N.offset),c=!1,u=!1,y=!0;break;case"tag":{g&&s(N,"MULTIPLE_TAGS","A node can have at most one tag"),g=N,A??(A=N.offset),c=!1,u=!1,y=!0;break}case r:(m||g)&&s(N,"BAD_PROP_ORDER",`Anchors and tags must be after the ${N.source} indicator`),v&&s(N,"UNEXPECTED_TOKEN",`Unexpected ${N.source} in ${e??"collection"}`),v=N,c=r==="seq-item-ind"||r==="explicit-key-ind",u=!1;break;case"comma":if(e){b&&s(N,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),b=N,c=!1,u=!1;break}default:s(N,"UNEXPECTED_TOKEN",`Unexpected ${N.type} token`),c=!1,u=!1}let k=t[t.length-1],R=k?k.offset+k.source.length:i;return y&&n&&n.type!=="space"&&n.type!=="newline"&&n.type!=="comma"&&(n.type!=="scalar"||n.source!=="")&&s(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),h&&(c&&h.indent<=o||n?.type==="block-map"||n?.type==="block-seq")&&s(h,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:b,found:v,spaceBefore:l,comment:d,hasNewline:f,anchor:m,tag:g,newlineAfterProp:E,end:R,start:A??R}}T3.resolveProps=XSe});var vg=w(A3=>{"use strict";function NE(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(let e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(let e of t.items){for(let r of e.start)if(r.type==="newline")return!0;if(e.sep){for(let r of e.sep)if(r.type==="newline")return!0}if(NE(e.key)||NE(e.value))return!0}return!1;default:return!0}}A3.containsNewline=NE});var OE=w(R3=>{"use strict";var e0e=vg();function t0e(t,e,r){if(e?.type==="flow-collection"){let n=e.end[0];n.indent===t&&(n.source==="]"||n.source==="}")&&e0e.containsNewline(e)&&r(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}R3.flowIndentCheck=t0e});var qE=w(C3=>{"use strict";var I3=me();function r0e(t,e,r){let{uniqueKeys:n}=t.options;if(n===!1)return!1;let i=typeof n=="function"?n:(s,o)=>s===o||I3.isScalar(s)&&I3.isScalar(o)&&s.value===o.value;return e.some(s=>i(s.key,r))}C3.mapIncludes=r0e});var L3=w(P3=>{"use strict";var k3=_i(),n0e=Si(),N3=pu(),i0e=vg(),O3=OE(),s0e=qE(),q3="All mapping items must start at the same column";function o0e({composeNode:t,composeEmptyNode:e},r,n,i,s){let o=s?.nodeClass??n0e.YAMLMap,a=new o(r.schema);r.atRoot&&(r.atRoot=!1);let l=n.offset,c=null;for(let u of n.items){let{start:d,key:p,sep:f,value:y}=u,h=N3.resolveProps(d,{indicator:"explicit-key-ind",next:p??f?.[0],offset:l,onError:i,parentIndent:n.indent,startOnNewline:!0}),m=!h.found;if(m){if(p&&(p.type==="block-seq"?i(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in p&&p.indent!==n.indent&&i(l,"BAD_INDENT",q3)),!h.anchor&&!h.tag&&!f){c=h.end,h.comment&&(a.comment?a.comment+=`
`+h.comment:a.comment=h.comment);continue}(h.newlineAfterProp||i0e.containsNewline(p))&&i(p??d[d.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else h.found?.indent!==n.indent&&i(l,"BAD_INDENT",q3);r.atKey=!0;let g=h.end,E=p?t(r,p,h,i):e(r,g,d,null,h,i);r.schema.compat&&O3.flowIndentCheck(n.indent,p,i),r.atKey=!1,s0e.mapIncludes(r,a.items,E)&&i(g,"DUPLICATE_KEY","Map keys must be unique");let b=N3.resolveProps(f??[],{indicator:"map-value-ind",next:y,offset:E.range[2],onError:i,parentIndent:n.indent,startOnNewline:!p||p.type==="block-scalar"});if(l=b.end,b.found){m&&(y?.type==="block-map"&&!b.hasNewline&&i(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict&&h.start<b.found.offset-1024&&i(E.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let v=y?t(r,y,b,i):e(r,l,f,null,b,i);r.schema.compat&&O3.flowIndentCheck(n.indent,y,i),l=v.range[2];let A=new k3.Pair(E,v);r.options.keepSourceTokens&&(A.srcToken=u),a.items.push(A)}else{m&&i(E.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),b.comment&&(E.comment?E.comment+=`
`+b.comment:E.comment=b.comment);let v=new k3.Pair(E);r.options.keepSourceTokens&&(v.srcToken=u),a.items.push(v)}}return c&&c<l&&i(c,"IMPOSSIBLE","Map comment with trailing content"),a.range=[n.offset,l,c??l],a}P3.resolveBlockMap=o0e});var D3=w(M3=>{"use strict";var a0e=Ei(),l0e=pu(),c0e=OE();function u0e({composeNode:t,composeEmptyNode:e},r,n,i,s){let o=s?.nodeClass??a0e.YAMLSeq,a=new o(r.schema);r.atRoot&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let l=n.offset,c=null;for(let{start:u,value:d}of n.items){let p=l0e.resolveProps(u,{indicator:"seq-item-ind",next:d,offset:l,onError:i,parentIndent:n.indent,startOnNewline:!0});if(!p.found)if(p.anchor||p.tag||d)d?.type==="block-seq"?i(p.end,"BAD_INDENT","All sequence items must start at the same column"):i(l,"MISSING_CHAR","Sequence item without - indicator");else{c=p.end,p.comment&&(a.comment=p.comment);continue}let f=d?t(r,d,p,i):e(r,p.end,u,null,p,i);r.schema.compat&&c0e.flowIndentCheck(n.indent,d,i),l=f.range[2],a.items.push(f)}return a.range=[n.offset,l,c??l],a}M3.resolveBlockSeq=u0e});var ka=w($3=>{"use strict";function d0e(t,e,r,n){let i="";if(t){let s=!1,o="";for(let a of t){let{source:l,type:c}=a;switch(c){case"space":s=!0;break;case"comment":{r&&!s&&n(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let u=l.substring(1)||" ";i?i+=o+u:i=u,o="";break}case"newline":i&&(o+=l),s=!0;break;default:n(a,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}e+=l.length}}return{comment:i,offset:e}}$3.resolveEnd=d0e});var U3=w(j3=>{"use strict";var f0e=me(),h0e=_i(),F3=Si(),p0e=Ei(),g0e=ka(),B3=pu(),m0e=vg(),y0e=qE(),PE="Block collections are not allowed within flow collections",LE=t=>t&&(t.type==="block-map"||t.type==="block-seq");function b0e({composeNode:t,composeEmptyNode:e},r,n,i,s){let o=n.start.source==="{",a=o?"flow map":"flow sequence",l=s?.nodeClass??(o?F3.YAMLMap:p0e.YAMLSeq),c=new l(r.schema);c.flow=!0;let u=r.atRoot;u&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let d=n.offset+n.start.source.length;for(let m=0;m<n.items.length;++m){let g=n.items[m],{start:E,key:b,sep:v,value:A}=g,k=B3.resolveProps(E,{flow:a,indicator:"explicit-key-ind",next:b??v?.[0],offset:d,onError:i,parentIndent:n.indent,startOnNewline:!1});if(!k.found){if(!k.anchor&&!k.tag&&!v&&!A){m===0&&k.comma?i(k.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):m<n.items.length-1&&i(k.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),k.comment&&(c.comment?c.comment+=`
`+k.comment:c.comment=k.comment),d=k.end;continue}!o&&r.options.strict&&m0e.containsNewline(b)&&i(b,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(m===0)k.comma&&i(k.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(k.comma||i(k.start,"MISSING_CHAR",`Missing , between ${a} items`),k.comment){let R="";e:for(let N of E)switch(N.type){case"comma":case"space":break;case"comment":R=N.source.substring(1);break e;default:break e}if(R){let N=c.items[c.items.length-1];f0e.isPair(N)&&(N=N.value??N.key),N.comment?N.comment+=`
`+R:N.comment=R,k.comment=k.comment.substring(R.length+1)}}if(!o&&!v&&!k.found){let R=A?t(r,A,k,i):e(r,k.end,v,null,k,i);c.items.push(R),d=R.range[2],LE(A)&&i(R.range,"BLOCK_IN_FLOW",PE)}else{r.atKey=!0;let R=k.end,N=b?t(r,b,k,i):e(r,R,E,null,k,i);LE(b)&&i(N.range,"BLOCK_IN_FLOW",PE),r.atKey=!1;let I=B3.resolveProps(v??[],{flow:a,indicator:"map-value-ind",next:A,offset:N.range[2],onError:i,parentIndent:n.indent,startOnNewline:!1});if(I.found){if(!o&&!k.found&&r.options.strict){if(v)for(let F of v){if(F===I.found)break;if(F.type==="newline"){i(F,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}k.start<I.found.offset-1024&&i(I.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else A&&("source"in A&&A.source?.[0]===":"?i(A,"MISSING_CHAR",`Missing space after : in ${a}`):i(I.start,"MISSING_CHAR",`Missing , or : between ${a} items`));let P=A?t(r,A,I,i):I.found?e(r,I.end,v,null,I,i):null;P?LE(A)&&i(P.range,"BLOCK_IN_FLOW",PE):I.comment&&(N.comment?N.comment+=`
`+I.comment:N.comment=I.comment);let D=new h0e.Pair(N,P);if(r.options.keepSourceTokens&&(D.srcToken=g),o){let F=c;y0e.mapIncludes(r,F.items,N)&&i(R,"DUPLICATE_KEY","Map keys must be unique"),F.items.push(D)}else{let F=new F3.YAMLMap(r.schema);F.flow=!0,F.items.push(D);let B=(P??N).range;F.range=[N.range[0],B[1],B[2]],c.items.push(F)}d=P?P.range[2]:I.end}}let p=o?"}":"]",[f,...y]=n.end,h=d;if(f?.source===p)h=f.offset+f.source.length;else{let m=a[0].toUpperCase()+a.substring(1),g=u?`${m} must end with a ${p}`:`${m} in block collection must be sufficiently indented and end with a ${p}`;i(d,u?"MISSING_CHAR":"BAD_INDENT",g),f&&f.source.length!==1&&y.unshift(f)}if(y.length>0){let m=g0e.resolveEnd(y,h,r.options.strict,i);m.comment&&(c.comment?c.comment+=`
`+m.comment:c.comment=m.comment),c.range=[n.offset,h,m.offset]}else c.range=[n.offset,h,h];return c}j3.resolveFlowCollection=b0e});var z3=w(W3=>{"use strict";var w0e=me(),_0e=nt(),v0e=Si(),S0e=Ei(),E0e=L3(),x0e=D3(),T0e=U3();function ME(t,e,r,n,i,s){let o=r.type==="block-map"?E0e.resolveBlockMap(t,e,r,n,s):r.type==="block-seq"?x0e.resolveBlockSeq(t,e,r,n,s):T0e.resolveFlowCollection(t,e,r,n,s),a=o.constructor;return i==="!"||i===a.tagName?(o.tag=a.tagName,o):(i&&(o.tag=i),o)}function A0e(t,e,r,n,i){let s=n.tag,o=s?e.directives.tagName(s.source,p=>i(s,"TAG_RESOLVE_FAILED",p)):null;if(r.type==="block-seq"){let{anchor:p,newlineAfterProp:f}=n,y=p&&s?p.offset>s.offset?p:s:p??s;y&&(!f||f.offset<y.offset)&&i(y,"MISSING_CHAR","Missing newline after block sequence props")}let a=r.type==="block-map"?"map":r.type==="block-seq"?"seq":r.start.source==="{"?"map":"seq";if(!s||!o||o==="!"||o===v0e.YAMLMap.tagName&&a==="map"||o===S0e.YAMLSeq.tagName&&a==="seq")return ME(t,e,r,i,o);let l=e.schema.tags.find(p=>p.tag===o&&p.collection===a);if(!l){let p=e.schema.knownTags[o];if(p?.collection===a)e.schema.tags.push(Object.assign({},p,{default:!1})),l=p;else return p?i(s,"BAD_COLLECTION_TYPE",`${p.tag} used for ${a} collection, but expects ${p.collection??"scalar"}`,!0):i(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),ME(t,e,r,i,o)}let c=ME(t,e,r,i,o,l),u=l.resolve?.(c,p=>i(s,"TAG_RESOLVE_FAILED",p),e.options)??c,d=w0e.isNode(u)?u:new _0e.Scalar(u);return d.range=c.range,d.tag=o,l?.format&&(d.format=l.format),d}W3.composeCollection=A0e});var $E=w(H3=>{"use strict";var DE=nt();function R0e(t,e,r){let n=e.offset,i=I0e(e,t.options.strict,r);if(!i)return{value:"",type:null,comment:"",range:[n,n,n]};let s=i.mode===">"?DE.Scalar.BLOCK_FOLDED:DE.Scalar.BLOCK_LITERAL,o=e.source?C0e(e.source):[],a=o.length;for(let h=o.length-1;h>=0;--h){let m=o[h][1];if(m===""||m==="\r")a=h;else break}if(a===0){let h=i.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"",m=n+i.length;return e.source&&(m+=e.source.length),{value:h,type:s,comment:i.comment,range:[n,m,m]}}let l=e.indent+i.indent,c=e.offset+i.length,u=0;for(let h=0;h<a;++h){let[m,g]=o[h];if(g===""||g==="\r")i.indent===0&&m.length>l&&(l=m.length);else{m.length<l&&r(c+m.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(l=m.length),u=h,l===0&&!t.atRoot&&r(c,"BAD_INDENT","Block scalar values in collections must be indented");break}c+=m.length+g.length+1}for(let h=o.length-1;h>=a;--h)o[h][0].length>l&&(a=h+1);let d="",p="",f=!1;for(let h=0;h<u;++h)d+=o[h][0].slice(l)+`
`;for(let h=u;h<a;++h){let[m,g]=o[h];c+=m.length+g.length+1;let E=g[g.length-1]==="\r";if(E&&(g=g.slice(0,-1)),g&&m.length<l){let v=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;r(c-g.length-(E?2:1),"BAD_INDENT",v),m=""}s===DE.Scalar.BLOCK_LITERAL?(d+=p+m.slice(l)+g,p=`
`):m.length>l||g[0]==="	"?(p===" "?p=`
`:!f&&p===`
`&&(p=`

`),d+=p+m.slice(l)+g,p=`
`,f=!0):g===""?p===`
`?d+=`
`:p=`
`:(d+=p+g,p=" ",f=!1)}switch(i.chomp){case"-":break;case"+":for(let h=a;h<o.length;++h)d+=`
`+o[h][0].slice(l);d[d.length-1]!==`
`&&(d+=`
`);break;default:d+=`
`}let y=n+i.length+e.source.length;return{value:d,type:s,comment:i.comment,range:[n,y,y]}}function I0e({offset:t,props:e},r,n){if(e[0].type!=="block-scalar-header")return n(e[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:i}=e[0],s=i[0],o=0,a="",l=-1;for(let p=1;p<i.length;++p){let f=i[p];if(!a&&(f==="-"||f==="+"))a=f;else{let y=Number(f);!o&&y?o=y:l===-1&&(l=t+p)}}l!==-1&&n(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let c=!1,u="",d=i.length;for(let p=1;p<e.length;++p){let f=e[p];switch(f.type){case"space":c=!0;case"newline":d+=f.source.length;break;case"comment":r&&!c&&n(f,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),d+=f.source.length,u=f.source.substring(1);break;case"error":n(f,"UNEXPECTED_TOKEN",f.message),d+=f.source.length;break;default:{let y=`Unexpected token in block scalar header: ${f.type}`;n(f,"UNEXPECTED_TOKEN",y);let h=f.source;h&&typeof h=="string"&&(d+=h.length)}}}return{mode:s,indent:o,chomp:a,comment:u,length:d}}function C0e(t){let e=t.split(/\n( *)/),r=e[0],n=r.match(/^( *)/),s=[n?.[1]?[n[1],r.slice(n[1].length)]:["",r]];for(let o=1;o<e.length;o+=2)s.push([e[o],e[o+1]]);return s}H3.resolveBlockScalar=R0e});var BE=w(G3=>{"use strict";var FE=nt(),k0e=ka();function N0e(t,e,r){let{offset:n,type:i,source:s,end:o}=t,a,l,c=(p,f,y)=>r(n+p,f,y);switch(i){case"scalar":a=FE.Scalar.PLAIN,l=O0e(s,c);break;case"single-quoted-scalar":a=FE.Scalar.QUOTE_SINGLE,l=q0e(s,c);break;case"double-quoted-scalar":a=FE.Scalar.QUOTE_DOUBLE,l=P0e(s,c);break;default:return r(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[n,n+s.length,n+s.length]}}let u=n+s.length,d=k0e.resolveEnd(o,u,e,r);return{value:l,type:a,comment:d.comment,range:[n,u,d.offset]}}function O0e(t,e){let r="";switch(t[0]){case"	":r="a tab character";break;case",":r="flow indicator character ,";break;case"%":r="directive indicator character %";break;case"|":case">":{r=`block scalar indicator ${t[0]}`;break}case"@":case"`":{r=`reserved character ${t[0]}`;break}}return r&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${r}`),V3(t)}function q0e(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),V3(t.slice(1,-1)).replace(/''/g,"'")}function V3(t){let e,r;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),r=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,r=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=e.exec(t);if(!n)return t;let i=n[1],s=" ",o=e.lastIndex;for(r.lastIndex=o;n=r.exec(t);)n[1]===""?s===`
`?i+=s:s=`
`:(i+=s+n[1],s=" "),o=r.lastIndex;let a=/[ \t]*(.*)/sy;return a.lastIndex=o,n=a.exec(t),i+s+(n?.[1]??"")}function P0e(t,e){let r="";for(let n=1;n<t.length-1;++n){let i=t[n];if(!(i==="\r"&&t[n+1]===`
`))if(i===`
`){let{fold:s,offset:o}=L0e(t,n);r+=s,n=o}else if(i==="\\"){let s=t[++n],o=M0e[s];if(o)r+=o;else if(s===`
`)for(s=t[n+1];s===" "||s==="	";)s=t[++n+1];else if(s==="\r"&&t[n+1]===`
`)for(s=t[++n+1];s===" "||s==="	";)s=t[++n+1];else if(s==="x"||s==="u"||s==="U"){let a={x:2,u:4,U:8}[s];r+=D0e(t,n+1,a,e),n+=a}else{let a=t.substr(n-1,2);e(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),r+=a}}else if(i===" "||i==="	"){let s=n,o=t[n+1];for(;o===" "||o==="	";)o=t[++n+1];o!==`
`&&!(o==="\r"&&t[n+2]===`
`)&&(r+=n>s?t.slice(s,n+1):i)}else r+=i}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),r}function L0e(t,e){let r="",n=t[e+1];for(;(n===" "||n==="	"||n===`
`||n==="\r")&&!(n==="\r"&&t[e+2]!==`
`);)n===`
`&&(r+=`
`),e+=1,n=t[e+1];return r||(r=" "),{fold:r,offset:e}}var M0e={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function D0e(t,e,r,n){let i=t.substr(e,r),o=i.length===r&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(o)){let a=t.substr(e-2,r+2);return n(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(o)}G3.resolveFlowScalar=N0e});var J3=w(Y3=>{"use strict";var Ds=me(),K3=nt(),$0e=$E(),F0e=BE();function B0e(t,e,r,n){let{value:i,type:s,comment:o,range:a}=e.type==="block-scalar"?$0e.resolveBlockScalar(t,e,n):F0e.resolveFlowScalar(e,t.options.strict,n),l=r?t.directives.tagName(r.source,d=>n(r,"TAG_RESOLVE_FAILED",d)):null,c;t.options.stringKeys&&t.atKey?c=t.schema[Ds.SCALAR]:l?c=j0e(t.schema,i,l,r,n):e.type==="scalar"?c=U0e(t,i,e,n):c=t.schema[Ds.SCALAR];let u;try{let d=c.resolve(i,p=>n(r??e,"TAG_RESOLVE_FAILED",p),t.options);u=Ds.isScalar(d)?d:new K3.Scalar(d)}catch(d){let p=d instanceof Error?d.message:String(d);n(r??e,"TAG_RESOLVE_FAILED",p),u=new K3.Scalar(i)}return u.range=a,u.source=i,s&&(u.type=s),l&&(u.tag=l),c.format&&(u.format=c.format),o&&(u.comment=o),u}function j0e(t,e,r,n,i){if(r==="!")return t[Ds.SCALAR];let s=[];for(let a of t.tags)if(!a.collection&&a.tag===r)if(a.default&&a.test)s.push(a);else return a;for(let a of s)if(a.test?.test(e))return a;let o=t.knownTags[r];return o&&!o.collection?(t.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,r!=="tag:yaml.org,2002:str"),t[Ds.SCALAR])}function U0e({atKey:t,directives:e,schema:r},n,i,s){let o=r.tags.find(a=>(a.default===!0||t&&a.default==="key")&&a.test?.test(n))||r[Ds.SCALAR];if(r.compat){let a=r.compat.find(l=>l.default&&l.test?.test(n))??r[Ds.SCALAR];if(o.tag!==a.tag){let l=e.tagString(o.tag),c=e.tagString(a.tag),u=`Value may be parsed as either ${l} or ${c}`;s(i,"TAG_RESOLVE_FAILED",u,!0)}}return o}Y3.composeScalar=B0e});var Q3=w(Z3=>{"use strict";function W0e(t,e,r){if(e){r??(r=e.length);for(let n=r-1;n>=0;--n){let i=e[n];switch(i.type){case"space":case"comment":case"newline":t-=i.source.length;continue}for(i=e[++n];i?.type==="space";)t+=i.source.length,i=e[++n];break}}return t}Z3.emptyScalarPosition=W0e});var tU=w(UE=>{"use strict";var z0e=Gc(),H0e=me(),V0e=z3(),X3=J3(),G0e=ka(),K0e=Q3(),Y0e={composeNode:eU,composeEmptyNode:jE};function eU(t,e,r,n){let i=t.atKey,{spaceBefore:s,comment:o,anchor:a,tag:l}=r,c,u=!0;switch(e.type){case"alias":c=J0e(t,e,n),(a||l)&&n(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=X3.composeScalar(t,e,l,n),a&&(c.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=V0e.composeCollection(Y0e,t,e,r,n),a&&(c.anchor=a.source.substring(1));break;default:{let d=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;n(e,"UNEXPECTED_TOKEN",d),c=jE(t,e.offset,void 0,null,r,n),u=!1}}return a&&c.anchor===""&&n(a,"BAD_ALIAS","Anchor cannot be an empty string"),i&&t.options.stringKeys&&(!H0e.isScalar(c)||typeof c.value!="string"||c.tag&&c.tag!=="tag:yaml.org,2002:str")&&n(l??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),s&&(c.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?c.comment=o:c.commentBefore=o),t.options.keepSourceTokens&&u&&(c.srcToken=e),c}function jE(t,e,r,n,{spaceBefore:i,comment:s,anchor:o,tag:a,end:l},c){let u={type:"scalar",offset:K0e.emptyScalarPosition(e,r,n),indent:-1,source:""},d=X3.composeScalar(t,u,a,c);return o&&(d.anchor=o.source.substring(1),d.anchor===""&&c(o,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(d.spaceBefore=!0),s&&(d.comment=s,d.range[2]=l),d}function J0e({options:t},{offset:e,source:r,end:n},i){let s=new z0e.Alias(r.substring(1));s.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string"),s.source.endsWith(":")&&i(e+r.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);let o=e+r.length,a=G0e.resolveEnd(n,o,t.strict,i);return s.range=[e,o,a.offset],a.comment&&(s.comment=a.comment),s}UE.composeEmptyNode=jE;UE.composeNode=eU});var iU=w(nU=>{"use strict";var Z0e=uu(),rU=tU(),Q0e=ka(),X0e=pu();function eEe(t,e,{offset:r,start:n,value:i,end:s},o){let a=Object.assign({_directives:e},t),l=new Z0e.Document(void 0,a),c={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},u=X0e.resolveProps(n,{indicator:"doc-start",next:i??s?.[0],offset:r,onError:o,parentIndent:0,startOnNewline:!0});u.found&&(l.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!u.hasNewline&&o(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=i?rU.composeNode(c,i,u,o):rU.composeEmptyNode(c,u.end,n,null,u,o);let d=l.contents.range[2],p=Q0e.resolveEnd(s,d,!1,o);return p.comment&&(l.comment=p.comment),l.range=[r,d,p.offset],l}nU.composeDoc=eEe});var zE=w(aU=>{"use strict";var tEe=require("process"),rEe=C0(),nEe=uu(),gu=hu(),sU=me(),iEe=iU(),sEe=ka();function mu(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];let{offset:e,source:r}=t;return[e,e+(typeof r=="string"?r.length:1)]}function oU(t){let e="",r=!1,n=!1;for(let i=0;i<t.length;++i){let s=t[i];switch(s[0]){case"#":e+=(e===""?"":n?`

`:`
`)+(s.substring(1)||" "),r=!0,n=!1;break;case"%":t[i+1]?.[0]!=="#"&&(i+=1),r=!1;break;default:r||(n=!0),r=!1}}return{comment:e,afterEmptyLine:n}}var WE=class{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(r,n,i,s)=>{let o=mu(r);s?this.warnings.push(new gu.YAMLWarning(o,n,i)):this.errors.push(new gu.YAMLParseError(o,n,i))},this.directives=new rEe.Directives({version:e.version||"1.2"}),this.options=e}decorate(e,r){let{comment:n,afterEmptyLine:i}=oU(this.prelude);if(n){let s=e.contents;if(r)e.comment=e.comment?`${e.comment}
${n}`:n;else if(i||e.directives.docStart||!s)e.commentBefore=n;else if(sU.isCollection(s)&&!s.flow&&s.items.length>0){let o=s.items[0];sU.isPair(o)&&(o=o.key);let a=o.commentBefore;o.commentBefore=a?`${n}
${a}`:n}else{let o=s.commentBefore;s.commentBefore=o?`${n}
${o}`:n}}r?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:oU(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,r=!1,n=-1){for(let i of e)yield*this.next(i);yield*this.end(r,n)}*next(e){switch(tEe.env.LOG_STREAM&&console.dir(e,{depth:null}),e.type){case"directive":this.directives.add(e.source,(r,n,i)=>{let s=mu(e);s[0]+=r,this.onError(s,"BAD_DIRECTIVE",n,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let r=iEe.composeDoc(this.options,this.directives,e,this.onError);this.atDirectives&&!r.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(r,!1),this.doc&&(yield this.doc),this.doc=r,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let r=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new gu.YAMLParseError(mu(e),"UNEXPECTED_TOKEN",r);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){let n="Unexpected doc-end without preceding document";this.errors.push(new gu.YAMLParseError(mu(e),"UNEXPECTED_TOKEN",n));break}this.doc.directives.docEnd=!0;let r=sEe.resolveEnd(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),r.comment){let n=this.doc.comment;this.doc.comment=n?`${n}
${r.comment}`:r.comment}this.doc.range[2]=r.offset;break}default:this.errors.push(new gu.YAMLParseError(mu(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,r=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let n=Object.assign({_directives:this.directives},this.options),i=new nEe.Document(void 0,n);this.atDirectives&&this.onError(r,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,r,r],this.decorate(i,!1),yield i}}};aU.Composer=WE});var uU=w(Sg=>{"use strict";var oEe=$E(),aEe=BE(),lEe=hu(),lU=Qc();function cEe(t,e=!0,r){if(t){let n=(i,s,o)=>{let a=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(r)r(a,s,o);else throw new lEe.YAMLParseError([a,a+1],s,o)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return aEe.resolveFlowScalar(t,e,n);case"block-scalar":return oEe.resolveBlockScalar({options:{strict:e}},t,n)}}return null}function uEe(t,e){let{implicitKey:r=!1,indent:n,inFlow:i=!1,offset:s=-1,type:o="PLAIN"}=e,a=lU.stringifyString({type:o,value:t},{implicitKey:r,indent:n>0?" ".repeat(n):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),l=e.end??[{type:"newline",offset:-1,indent:n,source:`
`}];switch(a[0]){case"|":case">":{let c=a.indexOf(`
`),u=a.substring(0,c),d=a.substring(c+1)+`
`,p=[{type:"block-scalar-header",offset:s,indent:n,source:u}];return cU(p,l)||p.push({type:"newline",offset:-1,indent:n,source:`
`}),{type:"block-scalar",offset:s,indent:n,props:p,source:d}}case'"':return{type:"double-quoted-scalar",offset:s,indent:n,source:a,end:l};case"'":return{type:"single-quoted-scalar",offset:s,indent:n,source:a,end:l};default:return{type:"scalar",offset:s,indent:n,source:a,end:l}}}function dEe(t,e,r={}){let{afterKey:n=!1,implicitKey:i=!1,inFlow:s=!1,type:o}=r,a="indent"in t?t.indent:null;if(n&&typeof a=="number"&&(a+=2),!o)switch(t.type){case"single-quoted-scalar":o="QUOTE_SINGLE";break;case"double-quoted-scalar":o="QUOTE_DOUBLE";break;case"block-scalar":{let c=t.props[0];if(c.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o=c.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:o="PLAIN"}let l=lU.stringifyString({type:o,value:e},{implicitKey:i||a===null,indent:a!==null&&a>0?" ".repeat(a):"",inFlow:s,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":fEe(t,l);break;case'"':HE(t,l,"double-quoted-scalar");break;case"'":HE(t,l,"single-quoted-scalar");break;default:HE(t,l,"scalar")}}function fEe(t,e){let r=e.indexOf(`
`),n=e.substring(0,r),i=e.substring(r+1)+`
`;if(t.type==="block-scalar"){let s=t.props[0];if(s.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s.source=n,t.source=i}else{let{offset:s}=t,o="indent"in t?t.indent:-1,a=[{type:"block-scalar-header",offset:s,indent:o,source:n}];cU(a,"end"in t?t.end:void 0)||a.push({type:"newline",offset:-1,indent:o,source:`
`});for(let l of Object.keys(t))l!=="type"&&l!=="offset"&&delete t[l];Object.assign(t,{type:"block-scalar",indent:o,props:a,source:i})}}function cU(t,e){if(e)for(let r of e)switch(r.type){case"space":case"comment":t.push(r);break;case"newline":return t.push(r),!0}return!1}function HE(t,e,r){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=r,t.source=e;break;case"block-scalar":{let n=t.props.slice(1),i=e.length;t.props[0].type==="block-scalar-header"&&(i-=t.props[0].source.length);for(let s of n)s.offset+=i;delete t.props,Object.assign(t,{type:r,source:e,end:n});break}case"block-map":case"block-seq":{let i={type:"newline",offset:t.offset+e.length,indent:t.indent,source:`
`};delete t.items,Object.assign(t,{type:r,source:e,end:[i]});break}default:{let n="indent"in t?t.indent:-1,i="end"in t&&Array.isArray(t.end)?t.end.filter(s=>s.type==="space"||s.type==="comment"||s.type==="newline"):[];for(let s of Object.keys(t))s!=="type"&&s!=="offset"&&delete t[s];Object.assign(t,{type:r,indent:n,source:e,end:i})}}}Sg.createScalarToken=uEe;Sg.resolveAsScalar=cEe;Sg.setScalarValue=dEe});var fU=w(dU=>{"use strict";var hEe=t=>"type"in t?xg(t):Eg(t);function xg(t){switch(t.type){case"block-scalar":{let e="";for(let r of t.props)e+=xg(r);return e+t.source}case"block-map":case"block-seq":{let e="";for(let r of t.items)e+=Eg(r);return e}case"flow-collection":{let e=t.start.source;for(let r of t.items)e+=Eg(r);for(let r of t.end)e+=r.source;return e}case"document":{let e=Eg(t);if(t.end)for(let r of t.end)e+=r.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(let r of t.end)e+=r.source;return e}}}function Eg({start:t,key:e,sep:r,value:n}){let i="";for(let s of t)i+=s.source;if(e&&(i+=xg(e)),r)for(let s of r)i+=s.source;return n&&(i+=xg(n)),i}dU.stringify=hEe});var mU=w(gU=>{"use strict";var VE=Symbol("break visit"),pEe=Symbol("skip children"),hU=Symbol("remove item");function $s(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),pU(Object.freeze([]),t,e)}$s.BREAK=VE;$s.SKIP=pEe;$s.REMOVE=hU;$s.itemAtPath=(t,e)=>{let r=t;for(let[n,i]of e){let s=r?.[n];if(s&&"items"in s)r=s.items[i];else return}return r};$s.parentCollection=(t,e)=>{let r=$s.itemAtPath(t,e.slice(0,-1)),n=e[e.length-1][0],i=r?.[n];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function pU(t,e,r){let n=r(e,t);if(typeof n=="symbol")return n;for(let i of["key","value"]){let s=e[i];if(s&&"items"in s){for(let o=0;o<s.items.length;++o){let a=pU(Object.freeze(t.concat([[i,o]])),s.items[o],r);if(typeof a=="number")o=a-1;else{if(a===VE)return VE;a===hU&&(s.items.splice(o,1),o-=1)}}typeof n=="function"&&i==="key"&&(n=n(e,t))}}return typeof n=="function"?n(e,t):n}gU.visit=$s});var Tg=w(Jt=>{"use strict";var GE=uU(),gEe=fU(),mEe=mU(),KE="\uFEFF",YE="",JE="",ZE="",yEe=t=>!!t&&"items"in t,bEe=t=>!!t&&(t.type==="scalar"||t.type==="single-quoted-scalar"||t.type==="double-quoted-scalar"||t.type==="block-scalar");function wEe(t){switch(t){case KE:return"<BOM>";case YE:return"<DOC>";case JE:return"<FLOW_END>";case ZE:return"<SCALAR>";default:return JSON.stringify(t)}}function _Ee(t){switch(t){case KE:return"byte-order-mark";case YE:return"doc-mode";case JE:return"flow-error-end";case ZE:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}Jt.createScalarToken=GE.createScalarToken;Jt.resolveAsScalar=GE.resolveAsScalar;Jt.setScalarValue=GE.setScalarValue;Jt.stringify=gEe.stringify;Jt.visit=mEe.visit;Jt.BOM=KE;Jt.DOCUMENT=YE;Jt.FLOW_END=JE;Jt.SCALAR=ZE;Jt.isCollection=yEe;Jt.isScalar=bEe;Jt.prettyToken=wEe;Jt.tokenType=_Ee});var ex=w(bU=>{"use strict";var yu=Tg();function Lr(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var yU=new Set("0123456789ABCDEFabcdef"),vEe=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Ag=new Set(",[]{}"),SEe=new Set(` ,[]{}
\r	`),QE=t=>!t||SEe.has(t),XE=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,r=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!r;let n=this.next??"stream";for(;n&&(r||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,r=this.buffer[e];for(;r===" "||r==="	";)r=this.buffer[++e];return!r||r==="#"||r===`
`?!0:r==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let r=this.buffer[e];if(this.indentNext>0){let n=0;for(;r===" ";)r=this.buffer[++n+e];if(r==="\r"){let i=this.buffer[n+e+1];if(i===`
`||!i&&!this.atEnd)return e+n+1}return r===`
`||n>=this.indentNext||!r&&!this.atEnd?e+n:-1}if(r==="-"||r==="."){let n=this.buffer.substr(e,3);if((n==="---"||n==="...")&&Lr(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===yu.BOM&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let r=e.length,n=e.indexOf("#");for(;n!==-1;){let s=e[n-1];if(s===" "||s==="	"){r=n-1;break}else n=e.indexOf("#",n+1)}for(;;){let s=e[r-1];if(s===" "||s==="	")r-=1;else break}let i=(yield*this.pushCount(r))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){let r=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-r),yield*this.pushNewline(),"stream"}return yield yu.DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let r=this.peek(3);if((r==="---"||r==="...")&&Lr(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,r==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Lr(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[e,r]=this.peek(2);if(!r&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&Lr(r)){let n=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=n,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let e=this.getLine();if(e===null)return this.setNext("doc");let r=yield*this.pushIndicators();switch(e[r]){case"#":yield*this.pushCount(e.length-r);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(QE),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return r+=yield*this.parseBlockScalarHeader(),r+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-r),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,r,n=-1;do e=yield*this.pushNewline(),e>0?(r=yield*this.pushSpaces(!1),this.indentValue=n=r):r=0,r+=yield*this.pushSpaces(!0);while(e+r>0);let i=this.getLine();if(i===null)return this.setNext("flow");if((n!==-1&&n<this.indentNext&&i[0]!=="#"||n===0&&(i.startsWith("---")||i.startsWith("..."))&&Lr(i[3]))&&!(n===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield yu.FLOW_END,yield*this.parseLineStart();let s=0;for(;i[s]===",";)s+=yield*this.pushCount(1),s+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(s+=yield*this.pushIndicators(),i[s]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-s),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(QE),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let o=this.charAt(1);if(this.flowKey||Lr(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let e=this.charAt(0),r=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;r!==-1&&this.buffer[r+1]==="'";)r=this.buffer.indexOf("'",r+2);else for(;r!==-1;){let s=0;for(;this.buffer[r-1-s]==="\\";)s+=1;if(s%2===0)break;r=this.buffer.indexOf('"',r+1)}let n=this.buffer.substring(0,r),i=n.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){let s=this.continueScalar(i+1);if(s===-1)break;i=n.indexOf(`
`,s)}i!==-1&&(r=i-(n[i-1]==="\r"?2:1))}if(r===-1){if(!this.atEnd)return this.setNext("quoted-scalar");r=this.buffer.length}return yield*this.pushToIndex(r+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let r=this.buffer[++e];if(r==="+")this.blockScalarKeep=!0;else if(r>"0"&&r<="9")this.blockScalarIndent=Number(r)-1;else if(r!=="-")break}return yield*this.pushUntil(r=>Lr(r)||r==="#")}*parseBlockScalar(){let e=this.pos-1,r=0,n;e:for(let s=this.pos;n=this.buffer[s];++s)switch(n){case" ":r+=1;break;case`
`:e=s,r=0;break;case"\r":{let o=this.buffer[s+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=r:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{let s=this.continueScalar(e+1);if(s===-1)break;e=this.buffer.indexOf(`
`,s)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let i=e+1;for(n=this.buffer[i];n===" ";)n=this.buffer[++i];if(n==="	"){for(;n==="	"||n===" "||n==="\r"||n===`
`;)n=this.buffer[++i];e=i-1}else if(!this.blockScalarKeep)do{let s=e-1,o=this.buffer[s];o==="\r"&&(o=this.buffer[--s]);let a=s;for(;o===" ";)o=this.buffer[--s];if(o===`
`&&s>=this.pos&&s+1+r>a)e=s;else break}while(!0);return yield yu.SCALAR,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let e=this.flowLevel>0,r=this.pos-1,n=this.pos-1,i;for(;i=this.buffer[++n];)if(i===":"){let s=this.buffer[n+1];if(Lr(s)||e&&Ag.has(s))break;r=n}else if(Lr(i)){let s=this.buffer[n+1];if(i==="\r"&&(s===`
`?(n+=1,i=`
`,s=this.buffer[n+1]):r=n),s==="#"||e&&Ag.has(s))break;if(i===`
`){let o=this.continueScalar(n+1);if(o===-1)break;n=Math.max(n,o-2)}}else{if(e&&Ag.has(i))break;r=n}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield yu.SCALAR,yield*this.pushToIndex(r+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,r){let n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(r&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(QE))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{let e=this.flowLevel>0,r=this.charAt(1);if(Lr(r)||e&&Ag.has(r))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,r=this.buffer[e];for(;!Lr(r)&&r!==">";)r=this.buffer[++e];return yield*this.pushToIndex(r===">"?e+1:e,!1)}else{let e=this.pos+1,r=this.buffer[e];for(;r;)if(vEe.has(r))r=this.buffer[++e];else if(r==="%"&&yU.has(this.buffer[e+1])&&yU.has(this.buffer[e+2]))r=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){let e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let r=this.pos-1,n;do n=this.buffer[++r];while(n===" "||e&&n==="	");let i=r-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=r),i}*pushUntil(e){let r=this.pos,n=this.buffer[r];for(;!e(n);)n=this.buffer[++r];return yield*this.pushToIndex(r,!1)}};bU.Lexer=XE});var rx=w(wU=>{"use strict";var tx=class{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let r=0,n=this.lineStarts.length;for(;r<n;){let s=r+n>>1;this.lineStarts[s]<e?r=s+1:n=s}if(this.lineStarts[r]===e)return{line:r+1,col:1};if(r===0)return{line:0,col:e};let i=this.lineStarts[r-1];return{line:r,col:e-i+1}}}};wU.LineCounter=tx});var ix=w(xU=>{"use strict";var EEe=require("process"),_U=Tg(),xEe=ex();function xi(t,e){for(let r=0;r<t.length;++r)if(t[r].type===e)return!0;return!1}function vU(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function EU(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Rg(t){switch(t.type){case"document":return t.start;case"block-map":{let e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Na(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function SU(t){if(t.start.type==="flow-seq-start")for(let e of t.items)e.sep&&!e.value&&!xi(e.start,"explicit-key-ind")&&!xi(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,EU(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}var nx=class{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new xEe.Lexer,this.onNewLine=e}*parse(e,r=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let n of this.lexer.lex(e,r))yield*this.next(n);r||(yield*this.end())}*next(e){if(this.source=e,EEe.env.LOG_TOKENS&&console.log("|",_U.prettyToken(e)),this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}let r=_U.tokenType(e);if(r)if(r==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=r,yield*this.step(),r){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{let n=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if(this.type==="doc-end"&&e?.type!=="doc-end"){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){let r=e??this.stack.pop();if(!r)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield r;else{let n=this.peek(1);switch(r.type==="block-scalar"?r.indent="indent"in n?n.indent:0:r.type==="flow-collection"&&n.type==="document"&&(r.indent=0),r.type==="flow-collection"&&SU(r),n.type){case"document":n.value=r;break;case"block-scalar":n.props.push(r);break;case"block-map":{let i=n.items[n.items.length-1];if(i.value){n.items.push({start:[],key:r,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=r;else{Object.assign(i,{key:r,sep:[]}),this.onKeyLine=!i.explicitKey;return}break}case"block-seq":{let i=n.items[n.items.length-1];i.value?n.items.push({start:[],value:r}):i.value=r;break}case"flow-collection":{let i=n.items[n.items.length-1];!i||i.value?n.items.push({start:[],key:r,sep:[]}):i.sep?i.value=r:Object.assign(i,{key:r,sep:[]});return}default:yield*this.pop(),yield*this.pop(r)}if((n.type==="document"||n.type==="block-map"||n.type==="block-seq")&&(r.type==="block-map"||r.type==="block-seq")){let i=r.items[r.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&vU(i.start)===-1&&(r.indent===0||i.start.every(s=>s.type!=="comment"||s.indent<r.indent))&&(n.type==="document"?n.end=i.start:n.items.push({start:i.start}),r.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{vU(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let r=this.startBlockValue(e);r?this.stack.push(r):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){let r=Rg(this.peek(2)),n=Na(r),i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];let s={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){let r=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,r.value){let n="end"in r.value?r.value.end:void 0;(Array.isArray(n)?n[n.length-1]:void 0)?.type==="comment"?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"space":case"comment":if(r.value)e.items.push({start:[this.sourceToken]});else if(r.sep)r.sep.push(this.sourceToken);else{if(this.atIndentedComment(r.start,e.indent)){let i=e.items[e.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,r.start),i.push(this.sourceToken),e.items.pop();return}}r.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let n=!this.onKeyLine&&this.indent===e.indent,i=n&&(r.sep||r.explicitKey)&&this.type!=="seq-item-ind",s=[];if(i&&r.sep&&!r.value){let o=[];for(let a=0;a<r.sep.length;++a){let l=r.sep[a];switch(l.type){case"newline":o.push(a);break;case"space":break;case"comment":l.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(s=r.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":i||r.value?(s.push(this.sourceToken),e.items.push({start:s}),this.onKeyLine=!0):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"explicit-key-ind":!r.sep&&!r.explicitKey?(r.start.push(this.sourceToken),r.explicitKey=!0):i||r.value?(s.push(this.sourceToken),e.items.push({start:s,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(r.explicitKey)if(r.sep)if(r.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(xi(r.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(EU(r.key)&&!xi(r.sep,"newline")){let o=Na(r.start),a=r.key,l=r.sep;l.push(this.sourceToken),delete r.key,delete r.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:a,sep:l}]})}else s.length>0?r.sep=r.sep.concat(s,this.sourceToken):r.sep.push(this.sourceToken);else if(xi(r.start,"newline"))Object.assign(r,{key:null,sep:[this.sourceToken]});else{let o=Na(r.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else r.sep?r.value||i?e.items.push({start:s,key:null,sep:[this.sourceToken]}):xi(r.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let o=this.flowScalar(this.type);i||r.value?(e.items.push({start:s,key:o,sep:[]}),this.onKeyLine=!0):r.sep?this.stack.push(o):(Object.assign(r,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{let o=this.startBlockValue(e);if(o){if(o.type==="block-seq"){if(!r.explicitKey&&r.sep&&!xi(r.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else n&&e.items.push({start:s});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){let r=e.items[e.items.length-1];switch(this.type){case"newline":if(r.value){let n="end"in r.value?r.value.end:void 0;(Array.isArray(n)?n[n.length-1]:void 0)?.type==="comment"?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else r.start.push(this.sourceToken);return;case"space":case"comment":if(r.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(r.start,e.indent)){let i=e.items[e.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,r.start),i.push(this.sourceToken),e.items.pop();return}}r.start.push(this.sourceToken)}return;case"anchor":case"tag":if(r.value||this.indent<=e.indent)break;r.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;r.value||xi(r.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return}if(this.indent>e.indent){let n=this.startBlockValue(e);if(n){this.stack.push(n);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){let r=e.items[e.items.length-1];if(this.type==="flow-error-end"){let n;do yield*this.pop(),n=this.peek(1);while(n?.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!r||r.sep?e.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return;case"map-value-ind":!r||r.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!r||r.value?e.items.push({start:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let i=this.flowScalar(this.type);!r||r.value?e.items.push({start:[],key:i,sep:[]}):r.sep?this.stack.push(i):Object.assign(r,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{let n=this.peek(2);if(n.type==="block-map"&&(this.type==="map-value-ind"&&n.indent===e.indent||this.type==="newline"&&!n.items[n.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&n.type!=="flow-collection"){let i=Rg(n),s=Na(i);SU(e);let o=e.end.splice(1,e.end.length);o.push(this.sourceToken);let a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let r=Rg(e),n=Na(r);return n.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;let r=Rg(e),n=Na(r);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,r){return this.type!=="comment"||this.indent<=r?!1:e.every(n=>n.type==="newline"||n.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}};xU.Parser=nx});var CU=w(wu=>{"use strict";var TU=zE(),TEe=uu(),bu=hu(),AEe=U0(),REe=me(),IEe=rx(),AU=ix();function RU(t){let e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new IEe.LineCounter||null,prettyErrors:e}}function CEe(t,e={}){let{lineCounter:r,prettyErrors:n}=RU(e),i=new AU.Parser(r?.addNewLine),s=new TU.Composer(e),o=Array.from(s.compose(i.parse(t)));if(n&&r)for(let a of o)a.errors.forEach(bu.prettifyError(t,r)),a.warnings.forEach(bu.prettifyError(t,r));return o.length>0?o:Object.assign([],{empty:!0},s.streamInfo())}function IU(t,e={}){let{lineCounter:r,prettyErrors:n}=RU(e),i=new AU.Parser(r?.addNewLine),s=new TU.Composer(e),o=null;for(let a of s.compose(i.parse(t),!0,t.length))if(!o)o=a;else if(o.options.logLevel!=="silent"){o.errors.push(new bu.YAMLParseError(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return n&&r&&(o.errors.forEach(bu.prettifyError(t,r)),o.warnings.forEach(bu.prettifyError(t,r))),o}function kEe(t,e,r){let n;typeof e=="function"?n=e:r===void 0&&e&&typeof e=="object"&&(r=e);let i=IU(t,r);if(!i)return null;if(i.warnings.forEach(s=>AEe.warn(i.options.logLevel,s)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:n},r))}function NEe(t,e,r){let n=null;if(typeof e=="function"||Array.isArray(e)?n=e:r===void 0&&e&&(r=e),typeof r=="string"&&(r=r.length),typeof r=="number"){let i=Math.round(r);r=i<1?void 0:i>8?{indent:8}:{indent:i}}if(t===void 0){let{keepUndefined:i}=r??e??{};if(!i)return}return REe.isDocument(t)&&!n?t.toString(r):new TEe.Document(t,n,r).toString(r)}wu.parse=kEe;wu.parseAllDocuments=CEe;wu.parseDocument=IU;wu.stringify=NEe});var NU=w(Te=>{"use strict";var OEe=zE(),qEe=uu(),PEe=xE(),sx=hu(),LEe=Gc(),Ti=me(),MEe=_i(),DEe=nt(),$Ee=Si(),FEe=Ei(),BEe=Tg(),jEe=ex(),UEe=rx(),WEe=ix(),Ig=CU(),kU=Wc();Te.Composer=OEe.Composer;Te.Document=qEe.Document;Te.Schema=PEe.Schema;Te.YAMLError=sx.YAMLError;Te.YAMLParseError=sx.YAMLParseError;Te.YAMLWarning=sx.YAMLWarning;Te.Alias=LEe.Alias;Te.isAlias=Ti.isAlias;Te.isCollection=Ti.isCollection;Te.isDocument=Ti.isDocument;Te.isMap=Ti.isMap;Te.isNode=Ti.isNode;Te.isPair=Ti.isPair;Te.isScalar=Ti.isScalar;Te.isSeq=Ti.isSeq;Te.Pair=MEe.Pair;Te.Scalar=DEe.Scalar;Te.YAMLMap=$Ee.YAMLMap;Te.YAMLSeq=FEe.YAMLSeq;Te.CST=BEe;Te.Lexer=jEe.Lexer;Te.LineCounter=UEe.LineCounter;Te.Parser=WEe.Parser;Te.parse=Ig.parse;Te.parseAllDocuments=Ig.parseAllDocuments;Te.parseDocument=Ig.parseDocument;Te.stringify=Ig.stringify;Te.visit=kU.visit;Te.visitAsync=kU.visitAsync});var P6={};Ka(P6,{WEBVIEW_STYLES:()=>q6});var q6,bx=Ju(()=>{"use strict";q6=`
:root {
  --vscode-font-family: var(--vscode-editor-font-family, system-ui, -apple-system, sans-serif);
  --vscode-font-size: var(--vscode-editor-font-size, 13px);
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: var(--vscode-font-family);
  font-size: var(--vscode-font-size);
  color: var(--vscode-foreground);
  background: var(--vscode-editor-background);
  padding: 16px;
  line-height: 1.5;
  position: relative;
}
h2 { font-size: 1.2em; font-weight: 600; margin-bottom: 16px; }

/* URL input section */
.url-section { display: flex; gap: 8px; margin-bottom: 12px; }
.url-input {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid var(--vscode-input-border, #3c3c3c);
  background: var(--vscode-input-background);
  color: var(--vscode-input-foreground);
  border-radius: 4px;
  font-size: inherit;
}
.url-input:focus { outline: 1px solid var(--vscode-focusBorder); border-color: var(--vscode-focusBorder); }
.url-input.has-url { border-color: var(--vscode-textLink-foreground); }
.btn-load { padding: 8px 16px; white-space: nowrap; }
.auth-toggle {
  display: flex; align-items: center; gap: 4px; padding: 8px;
  background: transparent;
  border: 1px solid var(--vscode-input-border, #3c3c3c);
  border-radius: 4px; cursor: pointer; color: var(--vscode-foreground);
}
.auth-toggle.active { background: var(--vscode-button-secondaryBackground); border-color: var(--vscode-focusBorder); }
.auth-section { display: none; margin-bottom: 12px; }
.auth-section.visible { display: block; }
.auth-input {
  width: 100%; padding: 8px 12px;
  border: 1px solid var(--vscode-input-border, #3c3c3c);
  background: var(--vscode-input-background);
  color: var(--vscode-input-foreground);
  border-radius: 4px; font-size: inherit; font-family: monospace;
}
.source-info {
  display: flex; align-items: center; justify-content: space-between;
  gap: 8px; font-size: 0.85em; color: var(--vscode-descriptionForeground);
  margin-bottom: 8px; padding: 4px 8px;
  background: var(--vscode-textBlockQuote-background); border-radius: 4px;
}
.source-info span { word-break: break-all; flex: 1; }
.btn-reset {
  padding: 2px 6px; font-size: 0.9em; background: transparent;
  border: 1px solid var(--vscode-input-border);
  color: var(--vscode-foreground); cursor: pointer; border-radius: 3px; opacity: 0.7;
}
.btn-reset:hover { opacity: 1; background: var(--vscode-button-secondaryBackground); }

.search-container { margin-bottom: 12px; }
.search-input {
  width: 100%; padding: 8px 12px;
  border: 1px solid var(--vscode-input-border, #3c3c3c);
  background: var(--vscode-input-background);
  color: var(--vscode-input-foreground);
  border-radius: 4px; font-size: inherit;
}
.search-input:focus { outline: 1px solid var(--vscode-focusBorder); border-color: var(--vscode-focusBorder); }
.config-section { display: flex; gap: 16px; align-items: center; margin-bottom: 12px; flex-wrap: wrap; }
.config-item { display: flex; align-items: center; gap: 8px; }
.config-item label { font-weight: 500; }
select {
  padding: 6px 10px;
  border: 1px solid var(--vscode-dropdown-border, #3c3c3c);
  background: var(--vscode-dropdown-background);
  color: var(--vscode-dropdown-foreground);
  border-radius: 4px; font-size: inherit; min-width: 120px;
}
.toolbar {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: 12px; padding: 8px 0;
  border-bottom: 1px solid var(--vscode-panel-border, #3c3c3c);
}
.toolbar-buttons { display: flex; gap: 8px; }
.toolbar-info { font-size: 0.9em; color: var(--vscode-descriptionForeground); }
.toolbar-info strong { color: var(--vscode-foreground); }
button {
  padding: 6px 12px; border: none; border-radius: 4px;
  font-size: inherit; cursor: pointer; transition: opacity 0.15s;
}
button:hover { opacity: 0.9; }
button:disabled { opacity: 0.5; cursor: not-allowed; }
.btn-secondary { background: var(--vscode-button-secondaryBackground); color: var(--vscode-button-secondaryForeground); }
.btn-primary { background: var(--vscode-button-background); color: var(--vscode-button-foreground); font-weight: 500; }
.tree-container {
  max-height: 400px; overflow-y: auto;
  border: 1px solid var(--vscode-panel-border, #3c3c3c);
  border-radius: 4px; margin-bottom: 16px;
}
.tree-node { user-select: none; }
.tree-folder { border-bottom: 1px solid var(--vscode-panel-border, #2d2d2d); }
.tree-folder:last-child { border-bottom: none; }
.tree-folder-header {
  display: flex; align-items: center; padding: 8px 12px; cursor: pointer;
  background: var(--vscode-sideBar-background, #252526);
}
.tree-folder-header:hover { background: var(--vscode-list-hoverBackground); }
.tree-folder-icon { margin-right: 8px; transition: transform 0.15s; }
.tree-folder.collapsed .tree-folder-icon { transform: rotate(-90deg); }
.tree-folder-label { flex: 1; font-weight: 500; }
.tree-folder-checkbox { margin-left: 8px; }
.tree-children { padding-left: 24px; }
.tree-folder.collapsed .tree-children { display: none; }
.tree-endpoint { display: flex; align-items: center; padding: 6px 12px; cursor: pointer; }
.tree-endpoint:hover { background: var(--vscode-list-hoverBackground); }
.tree-endpoint.hidden { display: none; }
.tree-endpoint-checkbox { margin-right: 8px; }
.tree-endpoint-method {
  font-family: monospace; font-size: 0.85em; font-weight: 600;
  padding: 2px 6px; border-radius: 3px; margin-right: 8px;
  min-width: 60px; text-align: center;
}
.method-get { background: #61affe22; color: #61affe; }
.method-post { background: #49cc9022; color: #49cc90; }
.method-put { background: #fca13022; color: #fca130; }
.method-patch { background: #50e3c222; color: #50e3c2; }
.method-delete { background: #f93e3e22; color: #f93e3e; }
.tree-endpoint-path { font-family: monospace; font-size: 0.9em; color: var(--vscode-foreground); flex: 1; }
.btn-send {
  background: transparent;
  border: 1px solid var(--vscode-button-secondaryBackground);
  color: var(--vscode-descriptionForeground);
  padding: 2px 8px; font-size: 0.75em; border-radius: 3px;
  margin-left: auto; cursor: pointer; transition: all 0.15s;
}
.btn-send:hover {
  background: var(--vscode-button-background);
  color: var(--vscode-button-foreground);
  border-color: var(--vscode-button-background);
}
input[type="checkbox"] { width: 16px; height: 16px; cursor: pointer; accent-color: var(--vscode-checkbox-background); }
.generate-section { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; padding-top: 12px; }
.btn-gen {
  padding: 8px 12px; font-size: 0.9em; border: none; border-radius: 4px;
  cursor: pointer; font-weight: 500; transition: all 0.15s;
}
.btn-gen:disabled { opacity: 0.5; cursor: not-allowed; }
.btn-pytest { background: #306998; color: white; }
.btn-pytest:hover:not(:disabled) { background: #4B8BBE; }
.btn-java { background: #f89820; color: white; }
.btn-java:hover:not(:disabled) { background: #E76F00; }
.btn-postman { background: #FF6C37; color: white; }
.btn-postman:hover:not(:disabled) { background: #E85A2A; }
.btn-collection { background: var(--vscode-button-secondaryBackground); color: var(--vscode-button-secondaryForeground); }
.btn-collection:hover:not(:disabled) { background: var(--vscode-button-background); color: var(--vscode-button-foreground); }
.loading-overlay {
  position: absolute; top: 0; left: 0; right: 0; bottom: 0;
  background: var(--vscode-editor-background); opacity: 0.95;
  display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100;
}
.spinner {
  display: inline-block; width: 24px; height: 24px;
  border: 3px solid var(--vscode-progressBar-background);
  border-top-color: transparent; border-radius: 50%;
  animation: spin 1s linear infinite; margin-bottom: 12px;
}
@keyframes spin { to { transform: rotate(360deg); } }
.empty-state { text-align: center; padding: 40px; color: var(--vscode-descriptionForeground); }

/* Tabs */
.tabs { display: flex; border-bottom: 1px solid var(--vscode-panel-border, #3c3c3c); margin-bottom: 16px; }
.tab {
  padding: 8px 16px; cursor: pointer; border: none; background: transparent;
  color: var(--vscode-descriptionForeground); font-size: inherit;
  border-bottom: 2px solid transparent; margin-bottom: -1px;
}
.tab:hover { color: var(--vscode-foreground); }
.tab.active { color: var(--vscode-foreground); border-bottom-color: var(--vscode-focusBorder); }

/* Collections */
.collection-toolbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
.collection-item { display: flex; align-items: center; padding: 6px 12px; cursor: pointer; border-radius: 4px; }
.collection-item:hover { background: var(--vscode-list-hoverBackground); }
.collection-icon { margin-right: 8px; font-size: 1.1em; }
.collection-name { flex: 1; }
.collection-actions { display: flex; gap: 4px; }
.btn-icon {
  background: transparent; border: none; color: var(--vscode-descriptionForeground);
  cursor: pointer; padding: 2px 6px; border-radius: 3px; font-size: 0.9em;
}
.btn-icon:hover { background: var(--vscode-button-secondaryBackground); color: var(--vscode-foreground); }
.btn-icon.btn-run { color: #49cc90; }
.btn-icon.btn-run:hover { background: #49cc9022; color: #49cc90; }
.request-item { display: flex; align-items: center; padding: 4px 12px 4px 36px; cursor: pointer; }
.request-item:hover { background: var(--vscode-list-hoverBackground); }
.request-method {
  font-family: monospace; font-size: 0.8em; font-weight: 600;
  padding: 1px 4px; border-radius: 2px; margin-right: 8px; min-width: 40px; text-align: center;
}
.request-name { flex: 1; font-size: 0.9em; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.folder-item { display: flex; align-items: center; padding: 4px 12px 4px 24px; cursor: pointer; }
.folder-item:hover { background: var(--vscode-list-hoverBackground); }
.folder-icon { margin-right: 6px; }
.nested-folder { padding-left: 48px; }
.nested-request { padding-left: 60px; }
.empty-collection { padding: 12px 24px; color: var(--vscode-descriptionForeground); font-size: 0.9em; font-style: italic; }

/* Snippets Panel */
.snippets-panel {
  position: fixed; right: 0; top: 0; width: 280px; height: 100%;
  background: var(--vscode-sideBar-background);
  border-left: 1px solid var(--vscode-panel-border);
  z-index: 100; overflow-y: auto;
  transform: translateX(100%); transition: transform 0.2s ease;
}
.snippets-panel.visible { transform: translateX(0); }
.panel-header {
  display: flex; justify-content: space-between; align-items: center;
  padding: 12px; border-bottom: 1px solid var(--vscode-panel-border); font-weight: 600;
}
.snippet-category { margin-bottom: 8px; }
.category-header {
  font-weight: 600; padding: 8px 12px;
  background: var(--vscode-sideBarSectionHeader-background);
  border-bottom: 1px solid var(--vscode-panel-border);
  font-size: 0.85em; color: var(--vscode-descriptionForeground);
}
.snippet-item { display: flex; align-items: center; gap: 8px; padding: 8px 12px; cursor: pointer; font-size: 0.9em; }
.snippet-item:hover { background: var(--vscode-list-hoverBackground); }

/* Tests List in Request */
.request-tests { padding: 4px 12px 8px 48px; }
.tests-list { margin-bottom: 4px; }
.test-item { display: flex; align-items: center; gap: 6px; padding: 2px 6px; font-size: 11px; border-radius: 3px; margin-bottom: 2px; }
.test-passed { background: rgba(40, 167, 69, 0.15); }
.test-passed .test-icon { color: #28a745; }
.test-failed { background: rgba(220, 53, 69, 0.15); }
.test-failed .test-icon { color: #dc3545; }
.test-pending { opacity: 0.7; }
.test-name { flex: 1; }
.test-actual { margin-left: auto; color: var(--vscode-errorForeground); font-size: 10px; }
.add-test-btn {
  display: inline-flex; align-items: center; gap: 4px; padding: 2px 8px;
  background: transparent; border: 1px dashed var(--vscode-panel-border);
  color: var(--vscode-descriptionForeground); cursor: pointer; font-size: 11px; border-radius: 3px;
}
.add-test-btn:hover { background: var(--vscode-list-hoverBackground); color: var(--vscode-foreground); }
.remove-test-btn {
  background: transparent; border: none; color: var(--vscode-foreground);
  opacity: 0.4; cursor: pointer; padding: 0 2px; font-size: 10px;
}
.remove-test-btn:hover { opacity: 1; color: var(--vscode-errorForeground); }

/* Modal Base */
.modal {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex; align-items: center; justify-content: center; z-index: 1000;
}
.modal-content {
  background: var(--vscode-editor-background);
  border: 1px solid var(--vscode-panel-border);
  border-radius: 8px; width: 450px; max-width: 90%; max-height: 90vh; overflow: auto;
}
.modal-large { width: 600px; }
.modal-header {
  display: flex; align-items: center; gap: 8px; padding: 12px 16px;
  border-bottom: 1px solid var(--vscode-panel-border); font-weight: 600;
}
.modal-header .close-btn {
  margin-left: auto; background: transparent; border: none;
  color: var(--vscode-foreground); font-size: 18px; cursor: pointer; padding: 4px 8px;
}
.modal-body { padding: 16px; }
.modal-footer {
  display: flex; justify-content: flex-end; gap: 8px; padding: 12px 16px;
  border-top: 1px solid var(--vscode-panel-border);
}

/* Form Elements */
.form-group { margin-bottom: 16px; }
.form-group label { display: block; margin-bottom: 6px; font-size: 12px; font-weight: 500; }
.form-group input, .form-group select, .form-group textarea {
  width: 100%; padding: 8px 10px;
  background: var(--vscode-input-background);
  border: 1px solid var(--vscode-input-border);
  color: var(--vscode-input-foreground);
  border-radius: 4px; font-size: 13px;
}
.form-group textarea { font-family: var(--vscode-editor-font-family); resize: vertical; min-height: 80px; }
.form-group small { display: block; margin-top: 4px; color: var(--vscode-descriptionForeground); font-size: 11px; }

/* Format Selector */
.format-selector { display: flex; gap: 12px; }
.format-option {
  flex: 1; padding: 16px;
  border: 2px solid var(--vscode-panel-border);
  border-radius: 8px; cursor: pointer; text-align: center;
}
.format-option:hover { border-color: var(--vscode-focusBorder); }
.format-option.selected { border-color: var(--vscode-focusBorder); background: var(--vscode-list-activeSelectionBackground); }
.format-icon { font-size: 28px; margin-bottom: 8px; }
.format-name { font-weight: 600; }
.format-desc { font-size: 11px; color: var(--vscode-descriptionForeground); }

/* Export Preview */
.export-preview { margin-top: 16px; border: 1px solid var(--vscode-panel-border); border-radius: 4px; }
.preview-header {
  display: flex; justify-content: space-between; align-items: center; padding: 8px 12px;
  background: var(--vscode-sideBarSectionHeader-background);
  border-bottom: 1px solid var(--vscode-panel-border);
}
.export-preview pre {
  margin: 0; padding: 12px; max-height: 250px; overflow: auto;
  font-family: var(--vscode-editor-font-family); font-size: 12px; line-height: 1.4;
}

/* Path Examples */
.path-examples { margin-top: 12px; padding: 10px; background: var(--vscode-textBlockQuote-background); border-radius: 4px; }
.path-examples .example-header { font-weight: 500; margin-bottom: 8px; font-size: 12px; }
.path-examples .example { padding: 4px 8px; cursor: pointer; font-size: 12px; border-radius: 3px; }
.path-examples .example:hover { background: var(--vscode-list-hoverBackground); }
.path-examples code { font-family: var(--vscode-editor-font-family); color: var(--vscode-textLink-foreground); }

/* Expression Help */
.expression-help { margin-top: 16px; }
.help-section { margin-bottom: 12px; padding: 10px; background: var(--vscode-textBlockQuote-background); border-radius: 4px; }
.help-title { font-weight: 600; margin-bottom: 6px; font-size: 12px; }
.help-section code {
  font-family: var(--vscode-editor-font-family);
  background: var(--vscode-textCodeBlock-background);
  padding: 2px 6px; border-radius: 3px; font-size: 12px;
}
.examples-list .example-item { padding: 6px 8px; cursor: pointer; border-radius: 3px; margin-top: 4px; }
.examples-list .example-item:hover { background: var(--vscode-list-hoverBackground); }

/* Extractions List */
.extractions-list { margin-top: 8px; padding-top: 8px; border-top: 1px dashed var(--vscode-panel-border); }
.extractions-list .section-label { font-size: 11px; color: var(--vscode-descriptionForeground); margin-bottom: 4px; }
.extraction-item { display: flex; align-items: center; gap: 8px; padding: 4px 0; font-size: 12px; }
.extraction-item .var-name { font-family: var(--vscode-editor-font-family); color: var(--vscode-symbolIcon-variableForeground); }
.extraction-item .var-path { color: var(--vscode-descriptionForeground); flex: 1; }
.extraction-item .remove-btn {
  background: transparent; border: none; color: var(--vscode-foreground);
  opacity: 0.5; cursor: pointer; padding: 2px 6px;
}
.extraction-item .remove-btn:hover { opacity: 1; color: var(--vscode-errorForeground); }

/* EVA Section */
.eva-section {
  margin-top: 32px; padding-top: 24px;
  border-top: 1px solid var(--vscode-panel-border);
}
.eva-header { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.eva-title { font-weight: 600; font-size: 1em; }
.eva-controls { display: flex; gap: 8px; margin-bottom: 8px; }
.btn-eva-upload { display: flex; align-items: center; gap: 6px; }
.eva-archive-name {
  font-size: 0.85em; color: var(--vscode-descriptionForeground);
  font-family: monospace; margin-bottom: 12px; min-height: 1.2em;
}
.eva-result {
  margin-top: 12px; padding: 12px;
  background: var(--vscode-textBlockQuote-background);
  border-radius: 6px; border: 1px solid var(--vscode-panel-border);
}
.eva-result.eva-loading { display: flex; align-items: center; gap: 12px; justify-content: center; padding: 24px; }
.eva-result.eva-error { color: var(--vscode-errorForeground); }
.eva-score-header { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
.eva-score { font-size: 2em; font-weight: 700; }
.eva-grade { padding: 4px 10px; border-radius: 4px; color: white; font-weight: 600; font-size: 0.9em; }
.eva-metrics { display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 16px; }
.eva-metric {
  display: flex; flex-direction: column; gap: 2px;
  padding: 8px 12px; background: var(--vscode-sideBar-background);
  border-radius: 4px; min-width: 70px;
}
.metric-label { font-size: 0.75em; color: var(--vscode-descriptionForeground); }
.metric-value { font-size: 1.1em; font-weight: 600; }
.eva-bars { margin-bottom: 12px; }
.eva-bar-row { display: flex; align-items: center; gap: 8px; margin-bottom: 6px; }
.eva-bar-label { width: 60px; font-size: 0.85em; color: var(--vscode-descriptionForeground); }
.eva-bar { flex: 1; height: 8px; background: var(--vscode-scrollbarSlider-background); border-radius: 4px; overflow: hidden; }
.eva-bar-fill { height: 100%; background: var(--vscode-progressBar-background); border-radius: 4px; transition: width 0.3s; }
.eva-bar-value { width: 28px; text-align: right; font-size: 0.85em; font-weight: 500; }
.eva-bar-weight { width: 30px; font-size: 0.75em; color: var(--vscode-descriptionForeground); }
.eva-grade-desc { font-size: 0.85em; color: var(--vscode-descriptionForeground); margin-bottom: 8px; font-style: italic; }
.eva-version { font-size: 0.7em; color: var(--vscode-descriptionForeground); margin-left: 8px; }
.eva-calc { font-size: 0.8em; color: var(--vscode-descriptionForeground); font-family: monospace; margin-bottom: 12px; }
.eva-issues { margin-bottom: 12px; display: flex; flex-direction: column; gap: 6px; }
.eva-issue { display: flex; align-items: center; gap: 8px; padding: 6px 10px; border-radius: 4px; font-size: 0.85em; }
.eva-issue.eva-critical { background: rgba(239, 68, 68, 0.15); border-left: 3px solid #ef4444; }
.eva-issue.eva-warning { background: rgba(249, 115, 22, 0.15); border-left: 3px solid #f97316; }
.eva-issue.eva-info { background: rgba(234, 179, 8, 0.15); border-left: 3px solid #eab308; }
.issue-icon { font-size: 1em; }
.issue-title { font-weight: 600; white-space: nowrap; }
.issue-details { color: var(--vscode-descriptionForeground); font-size: 0.9em; overflow: hidden; text-overflow: ellipsis; }
.eva-coverage { display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; padding: 8px 0; border-top: 1px dashed var(--vscode-panel-border); border-bottom: 1px dashed var(--vscode-panel-border); }
.eva-coverage-item { display: flex; gap: 8px; align-items: center; }
.coverage-label { font-size: 0.8em; color: var(--vscode-descriptionForeground); }
.coverage-value { font-size: 0.9em; font-weight: 600; font-family: monospace; }
.eva-recommendations { font-size: 0.85em; margin-top: 12px; }
.eva-recommendations ul { margin: 8px 0 0 20px; }
.eva-recommendations li { margin-bottom: 4px; color: var(--vscode-descriptionForeground); }
`});var M6={};Ka(M6,{WEBVIEW_SCRIPTS:()=>L6});var L6,wx=Ju(()=>{"use strict";L6=`
const vscode = acquireVsCodeApi();

// SVG Icons
const ICONS = {
  folder: '<span class="icon"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 14.5 4H7.414l-1-1A2 2 0 0 0 4.914 2H1.5z"/></svg></span>',
  folderOpen: '<span class="icon"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M1 3.5A1.5 1.5 0 0 1 2.5 2h2.764a1.5 1.5 0 0 1 1.06.44l.707.707H13.5A1.5 1.5 0 0 1 15 4.5v1H2.5A1.5 1.5 0 0 0 1 7v-3.5zm.646 4.354A.5.5 0 0 1 2 7.5h11a.5.5 0 0 1 .49.598l-1 5A.5.5 0 0 1 12 13.5H2.5a.5.5 0 0 1-.49-.402l-1-5a.5.5 0 0 1 .136-.244z"/></svg></span>',
  file: '<span class="icon"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.5L9.5 0H4zm5.5 0v3a1.5 1.5 0 0 0 1.5 1.5h3L9.5 0z"/></svg></span>',
  key: '<span class="icon"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M10.5 0a5.5 5.5 0 0 0-4.97 7.862l-4.823 4.83A1 1 0 0 0 0 13.4V15a1 1 0 0 0 1 1h1.6a1 1 0 0 0 .708-.293l.293-.293H5v-1.5a.5.5 0 0 1 .5-.5H7v-1.5a.5.5 0 0 1 .5-.5h.585l.862-.863A5.5 5.5 0 1 0 10.5 0zm1.5 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/></svg></span>',
  python: '<span class="icon"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M7.8 1C4.5 1 4.6 2.4 4.6 2.4l.003 1.5H8v.4H3s-2.3-.2-2.3 3.3 2 3.4 2 3.4h1.2V9.4s-.1-2 2-2h3.4s1.9 0 1.9-1.8V2.8S11.6 1 7.8 1zm-1.9 1c.3 0 .6.3.6.6s-.3.6-.6.6-.6-.3-.6-.6.3-.6.6-.6z"/><path d="M8.2 15c3.3 0 3.2-1.4 3.2-1.4l-.003-1.5H8v-.4h5s2.3.2 2.3-3.3-2-3.4-2-3.4h-1.2v1.6s.1 2-2 2H6.7s-1.9 0-1.9 1.8v2.8S4.4 15 8.2 15zm1.9-1c-.3 0-.6-.3-.6-.6s.3-.6.6-.6.6.3.6.6-.3.6-.6.6z"/></svg></span>',
  java: '<span class="icon"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M5.5 9.5c0 .3.2.5.4.6.3.1.6.2 1 .2.3 0 .6 0 .9-.1.3-.1.4-.3.4-.6 0-.2-.1-.4-.3-.5-.2-.1-.5-.2-.9-.3-.6-.1-1.1-.3-1.4-.5s-.5-.6-.5-1c0-.5.2-.9.6-1.2.4-.3.9-.4 1.6-.4s1.2.1 1.6.4c.4.3.6.7.6 1.2h-1c0-.3-.1-.5-.3-.6-.2-.2-.5-.2-.9-.2-.3 0-.6.1-.8.2-.2.1-.3.3-.3.5 0 .2.1.3.3.4.2.1.5.2.9.3.6.1 1.1.3 1.4.5.3.3.5.6.5 1.1 0 .5-.2.9-.6 1.2-.4.3-1 .4-1.7.4-.7 0-1.3-.2-1.7-.5-.4-.3-.6-.7-.6-1.3h1.1zM12.3 5.4c-.2-.2-.5-.3-.8-.3-.4 0-.7.1-.9.4-.2.3-.3.6-.3 1.1v3.2h-1V4.6h1v.6c.3-.5.8-.7 1.4-.7.5 0 .9.2 1.2.5.3.3.4.8.4 1.4v3.4h-1V6.5c0-.5-.1-.8-.3-1.1zM4.5 13c.8.5 2 .9 3.5.9s2.7-.3 3.5-.9c-.8.3-2 .5-3.5.5s-2.7-.2-3.5-.5zM11.5 12c-.5.4-1.5.7-3.5.7s-3-.3-3.5-.7c.5.6 2 1 3.5 1s3-.4 3.5-1z"/></svg></span>',
  postman: '<span class="icon"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zm0 12.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11z"/><path d="M10.5 5.5L8 8l-2 2v1.5L8.5 9l2.5-2.5-.5-1z"/><path d="M5 7l1-1 2.5 2.5L7 10 5 7z"/></svg></span>',
  collection: '<span class="icon"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M2.5 3A1.5 1.5 0 0 0 1 4.5v.793A.5.5 0 0 0 1 5.5v5A1.5 1.5 0 0 0 2.5 12h11a1.5 1.5 0 0 0 1.5-1.5v-5a.5.5 0 0 0 0-.207V4.5A1.5 1.5 0 0 0 13.5 3h-11zm0 1h11a.5.5 0 0 1 .5.5V5H2v-.5a.5.5 0 0 1 .5-.5zm-.5 3h12v3.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5V7z"/></svg></span>',
  chevronDown: '<span class="icon icon-sm"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg></span>',
  add: '<span class="icon"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2z"/></svg></span>',
  play: '<span class="icon"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M4 2.5a.5.5 0 0 1 .764-.424l8.5 5.5a.5.5 0 0 1 0 .848l-8.5 5.5A.5.5 0 0 1 4 13.5v-11z"/></svg></span>',
  code: '<span class="icon"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M5.854 4.854a.5.5 0 1 0-.708-.708l-3.5 3.5a.5.5 0 0 0 0 .708l3.5 3.5a.5.5 0 0 0 .708-.708L2.707 8l3.147-3.146zm4.292 0a.5.5 0 0 1 .708-.708l3.5 3.5a.5.5 0 0 1 0 .708l-3.5 3.5a.5.5 0 0 1-.708-.708L13.293 8l-3.147-3.146z"/></svg></span>',
  upload: '<span class="icon"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/><path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/></svg></span>',
  trash: '<span class="icon"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/><path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/></svg></span>',
  addFolder: '<span class="icon"><svg viewBox="0 0 16 16" fill="currentColor"><path d="M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a.5.5 0 0 0 0-1h-8a.5.5 0 0 1-.5-.5v-7h13a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 14.5 4H7.414l-1-1A2 2 0 0 0 4.914 2H1.5zm11 7a.5.5 0 0 1 .5.5v2h2a.5.5 0 0 1 0 1h-2v2a.5.5 0 0 1-1 0v-2h-2a.5.5 0 0 1 0-1h2v-2a.5.5 0 0 1 .5-.5z"/></svg></span>',
};

let state = {
  tree: [],
  selectedCount: 0,
  totalCount: 0,
  framework: 'pytest',
  generateNegative: true,
  generateUniversal: true,
  searchQuery: '',
  urlInput: '',
  showAuth: false,
  authHeader: '',
  isLoading: false,
  loadingMessage: '',
  sourceUrl: '',
  activeTab: 'endpoints',
  collections: [],
  expandedCollections: new Set(),
  snippetLibrary: {},
  snippetPanelVisible: false,
  snippetTargetCollectionId: null,
  snippetTargetRequestId: null,
  evaResult: null,
  evaLoading: false,
  evaArchivePath: null
};

function init() {
  render();
  vscode.postMessage({ type: 'ready' });
}

window.addEventListener('message', event => {
  const message = event.data;
  switch (message.type) {
    case 'setEndpoints':
      try {
        state.tree = message.tree || [];
        state.totalCount = countEndpoints(state.tree);
        state.selectedCount = state.totalCount;
        state.isLoading = false;
        render();
      } catch (err) {
        console.error('[Webview] Error processing setEndpoints:', err);
        state.isLoading = false;
        render();
      }
      break;
    case 'generationComplete':
      enableUI();
      break;
    case 'loading':
      state.isLoading = true;
      state.loadingMessage = message.message || 'Loading...';
      render();
      break;
    case 'sourceUrl':
      state.sourceUrl = message.url || '';
      break;
    case 'error':
      state.isLoading = false;
      showError(message.error);
      render();
      break;
    case 'setCollections':
      state.collections = message.collections || [];
      render();
      break;
    case 'expandCollection':
      state.expandedCollections.add(message.collectionId);
      render();
      break;
    case 'setSnippetLibrary':
      state.snippetLibrary = message.library || {};
      render();
      break;
    case 'exportPreview':
      showExportPreview(message.code);
      break;
    case 'evaLoading':
      state.evaLoading = true;
      state.evaResult = null;
      render();
      break;
    case 'evaResult':
      state.evaLoading = false;
      state.evaResult = message.result;
      render();
      break;
    case 'evaError':
      state.evaLoading = false;
      state.evaResult = { error: message.error };
      render();
      break;
    case 'setEvaArchive':
      state.evaArchivePath = message.path;
      render();
      break;
  }
});

function countEndpoints(tree) {
  let count = 0;
  for (const folder of tree) { count += folder.children?.length || 0; }
  return count;
}

function countSelected(tree) {
  let count = 0;
  for (const folder of tree) {
    for (const child of folder.children || []) {
      if (child.checked) count++;
    }
  }
  return count;
}

function render() {
  try {
    renderInner();
  } catch (err) {
    console.error('[Webview] Render error:', err);
    document.getElementById('app').innerHTML = '<div class="empty-state">Error rendering: ' + err.message + '</div>';
  }
}

function renderInner() {
  const app = document.getElementById('app');
  const loadingHtml = state.isLoading ? \`<div class="loading-overlay"><div class="spinner"></div><div>\${state.loadingMessage}</div></div>\` : '';
  const tabsHtml = \`<div class="tabs"><button class="tab \${state.activeTab === 'endpoints' ? 'active' : ''}" onclick="switchTab('endpoints')">Endpoints</button><button class="tab \${state.activeTab === 'collections' ? 'active' : ''}" onclick="switchTab('collections')">Collections (\${state.collections.length})</button></div>\`;

  if (state.activeTab === 'collections') {
    app.innerHTML = tabsHtml + renderCollectionsTab() + loadingHtml;
    return;
  }

  if (state.tree.length === 0 && !state.isLoading) {
    app.innerHTML = tabsHtml + renderEmptyState() + loadingHtml;
    return;
  }

  state.selectedCount = countSelected(state.tree);
  app.innerHTML = tabsHtml + renderEndpointsTab() + loadingHtml;
}

function renderEmptyState() {
  return \`<div style="text-align: left;">
    <p style="margin-bottom: 16px; color: var(--vscode-foreground);">Load an OpenAPI specification to generate tests.</p>
    <div class="url-section">
      <input type="text" class="url-input \${state.urlInput ? 'has-url' : ''}" placeholder="Paste Swagger URL or spec URL..." value="\${state.urlInput}" oninput="handleUrlInput(this.value)" onkeypress="if(event.key==='Enter') loadFromUrl()">
      <button class="btn-secondary btn-browse" onclick="browseFile()" title="Open file">\${ICONS.folderOpen}</button>
      <button class="auth-toggle \${state.showAuth ? 'active' : ''}" onclick="toggleAuth()" title="Add authorization header">\${ICONS.key}</button>
      <button class="btn-primary btn-load" onclick="loadFromUrl()" \${!state.urlInput ? 'disabled' : ''}>Load</button>
    </div>
    <div class="auth-section \${state.showAuth ? 'visible' : ''}">
      <input type="text" class="auth-input" placeholder="Authorization header (e.g., Bearer token123...)" value="\${state.authHeader}" oninput="handleAuthInput(this.value)">
    </div>
    <p style="margin-top: 24px; font-size: 0.9em; color: var(--vscode-descriptionForeground);">Or right-click on a .json/.yaml file and select<br>"Pe4King: Select & Generate Tests"</p>
    <p style="margin-top: 16px; font-size: 0.85em; color: var(--vscode-descriptionForeground);"><strong>Supported URLs:</strong><br>\u2022 Direct spec: /v3/api-docs, /swagger.json<br>\u2022 Swagger UI: /swagger-ui/<br>\u2022 Base URL (auto-detects spec)</p>

    <div class="eva-section">
      <div class="eva-header">
        <span class="eva-title">EVA \u2014 Test Quality Analysis</span>
      </div>
      <p style="font-size: 0.85em; color: var(--vscode-descriptionForeground); margin: 8px 0;">Upload test archive (.zip) to evaluate quality</p>
      <div class="eva-controls">
        <button class="btn-secondary btn-eva-upload" onclick="browseTestArchive()" title="Select test archive">\${ICONS.upload} Select Archive</button>
        <button class="btn-primary btn-eva-run" onclick="runEva()" \${!state.evaArchivePath ? 'disabled' : ''}>Run EVA</button>
      </div>
      <div id="evaArchiveName" class="eva-archive-name">\${state.evaArchivePath ? state.evaArchivePath.split(/[\\\\/]/).pop() : ''}</div>
      \${renderEvaResult()}
    </div>
  </div>\`;
}

function renderEvaResult() {
  if (state.evaLoading) {
    return '<div class="eva-result eva-loading"><div class="spinner"></div> Analyzing tests...</div>';
  }
  if (!state.evaResult) return '';
  if (state.evaResult.error) {
    return '<div class="eva-result eva-error">Error: ' + state.evaResult.error + '</div>';
  }
  const r = state.evaResult;
  const gradeColors = { S: '#a855f7', A: '#22c55e', B: '#06b6d4', C: '#eab308', D: '#f97316', F: '#ef4444' };
  const gradeColor = gradeColors[r.grade] || '#888';
  const depthLevel = Math.ceil((r.oracleDepth || 0) / 25);
  const hasIssues = !r.compilation?.pass || r.antiPatterns?.found?.length > 0 || r.copyPaste?.detected || r.badNaming?.count > 0;

  return \`<div class="eva-result">
    <div class="eva-score-header">
      <span class="eva-score" style="color: \${gradeColor}">\${r.total}</span>
      <span class="eva-grade" style="background: \${gradeColor}">[\${r.grade}]</span>
      \${r.version ? '<span class="eva-version">v' + r.version + '</span>' : ''}
    </div>
    <div class="eva-grade-desc">\${r.gradeDesc || ''}</div>
    \${r.baseTotal !== undefined ? '<div class="eva-calc">Base: ' + r.baseTotal + ' - Penalties: ' + (r.totalPenalty || 0) + (r.compilation?.multiplier < 1 ? ' \xD7 0.5' : '') + '</div>' : ''}

    \${hasIssues ? '<div class="eva-issues">' + renderEvaIssues(r) + '</div>' : ''}

    <div class="eva-metrics">
      <div class="eva-metric"><span class="metric-label">Files</span><span class="metric-value">\${r.summary.files}</span></div>
      <div class="eva-metric"><span class="metric-label">Tests</span><span class="metric-value">\${r.summary.tests}</span></div>
      <div class="eva-metric"><span class="metric-label">Strong</span><span class="metric-value">\${r.summary.strong}</span></div>
      <div class="eva-metric"><span class="metric-label">Weak</span><span class="metric-value">\${r.summary.weak}</span></div>
    </div>
    <div class="eva-coverage">
      <div class="eva-coverage-item"><span class="coverage-label">Negative</span><span class="coverage-value">\${r.negativeCovered}/\${r.negativeTotal}</span></div>
      <div class="eva-coverage-item"><span class="coverage-label">Edge Cases</span><span class="coverage-value">\${r.edgeCovered}/\${r.edgeTotal}</span></div>
      <div class="eva-coverage-item"><span class="coverage-label">Depth</span><span class="coverage-value">L\${depthLevel} (\${r.oracleDepth}/100)</span></div>
    </div>
    <div class="eva-bars">
      \${renderEvaBar('Oracle', r.scores.oracle, '30%')}
      \${renderEvaBar('Mutation', r.scores.mutation, '25%')}
      \${renderEvaBar('Negative', r.scores.negative, '20%')}
      \${renderEvaBar('Edge', r.scores.edge, '15%')}
      \${renderEvaBar('Structure', r.scores.structure, '10%')}
    </div>
    \${r.recommendations?.length ? '<div class="eva-recommendations"><strong>\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0430\u0446\u0438\u0438:</strong><ul>' + r.recommendations.map(rec => '<li>' + rec + '</li>').join('') + '</ul></div>' : ''}
  </div>\`;
}

function renderEvaIssues(r) {
  let html = '';

  // Compilation errors
  if (r.compilation && !r.compilation.pass) {
    html += '<div class="eva-issue eva-critical"><span class="issue-icon">\u26A0\uFE0F</span><span class="issue-title">Compilation \xD7 0.5</span>';
    html += '<div class="issue-details">' + r.compilation.errors.map(e => e.name + ' (\xD7' + e.count + ')').join(', ') + '</div></div>';
  }

  // Anti-patterns
  if (r.antiPatterns?.found?.length > 0) {
    html += '<div class="eva-issue eva-warning"><span class="issue-icon">\u{1F6AB}</span><span class="issue-title">Anti-patterns -' + r.antiPatterns.totalPenalty + '</span>';
    html += '<div class="issue-details">' + r.antiPatterns.found.slice(0, 4).map(a => a.name).join(', ') + '</div></div>';
  }

  // Copy-paste
  if (r.copyPaste?.detected) {
    html += '<div class="eva-issue eva-warning"><span class="issue-icon">\u{1F4CB}</span><span class="issue-title">Copy-paste -' + r.copyPaste.penalty + '</span>';
    html += '<div class="issue-details">' + r.copyPaste.sequence + ' sequential (' + r.copyPaste.prefix + '*)</div></div>';
  }

  // Bad naming
  if (r.badNaming?.count > 0) {
    html += '<div class="eva-issue eva-info"><span class="issue-icon">\u{1F4DB}</span><span class="issue-title">Bad naming -' + r.badNaming.penalty + '</span>';
    html += '<div class="issue-details">' + r.badNaming.found.slice(0, 4).join(', ') + '</div></div>';
  }

  return html;
}

function renderEvaBar(label, score, weight) {
  const pct = Math.round(score);
  return \`<div class="eva-bar-row">
    <span class="eva-bar-label">\${label}</span>
    <div class="eva-bar"><div class="eva-bar-fill" style="width: \${pct}%"></div></div>
    <span class="eva-bar-value">\${pct}</span>
    <span class="eva-bar-weight">\${weight}</span>
  </div>\`;
}

function browseTestArchive() {
  vscode.postMessage({ type: 'browseTestArchive' });
}

function runEva() {
  if (!state.evaArchivePath) return;
  vscode.postMessage({ type: 'runEva', archivePath: state.evaArchivePath });
}

function renderEndpointsTab() {
  const sourceInfo = state.sourceUrl
    ? \`<div class="source-info"><span>\${ICONS.file} \${state.sourceUrl}</span><button class="btn-reset" onclick="resetSpec()" title="Load different spec">\u2715</button></div>\`
    : \`<div class="source-info"><span>\${ICONS.file} Local file</span><button class="btn-reset" onclick="resetSpec()" title="Load different spec">\u2715</button></div>\`;

  return \`\${sourceInfo}
    <div class="search-container"><input type="text" class="search-input" placeholder="Search endpoints..." value="\${state.searchQuery}" oninput="handleSearch(this.value)"></div>
    <div class="config-section">
      <div class="config-item"><input type="checkbox" id="neg" \${state.generateNegative ? 'checked' : ''} onchange="handleNegativeChange(this.checked)"><label for="neg">Negative tests</label></div>
      <div class="config-item"><input type="checkbox" id="univ" \${state.generateUniversal ? 'checked' : ''} onchange="handleUniversalChange(this.checked)"><label for="univ">Security tests</label></div>
    </div>
    <div class="toolbar">
      <div class="toolbar-buttons">
        <button class="btn-secondary" onclick="selectAll()">All</button>
        <button class="btn-secondary" onclick="deselectAll()">None</button>
        <button class="btn-secondary" onclick="toggleAllFolders()">Toggle</button>
      </div>
      <div class="toolbar-info">Selected: <strong>\${state.selectedCount}</strong> / \${state.totalCount}</div>
    </div>
    <div class="tree-container">\${renderTree(state.tree)}</div>
    <div class="generate-section">
      <button class="btn-gen btn-pytest" onclick="generate('pytest')" \${state.selectedCount === 0 ? 'disabled' : ''} title="Generate pytest tests">\${ICONS.python} pytest</button>
      <button class="btn-gen btn-java" onclick="generate('rest-assured')" \${state.selectedCount === 0 ? 'disabled' : ''} title="Generate REST Assured tests">\${ICONS.java} REST Assured</button>
      <button class="btn-gen btn-postman" onclick="generate('postman')" \${state.selectedCount === 0 ? 'disabled' : ''} title="Export Postman collection">\${ICONS.postman} Postman</button>
      <button class="btn-gen btn-collection" onclick="addToCollection()" \${state.selectedCount === 0 ? 'disabled' : ''} title="Add to collection">\${ICONS.collection} Collection</button>
    </div>\`;
}

function renderTree(tree) {
  return tree.map(folder => \`
    <div class="tree-node tree-folder" data-folder-id="\${folder.id}">
      <div class="tree-folder-header" onclick="toggleFolder('\${folder.id}')">
        <span class="tree-folder-icon">\${ICONS.chevronDown}</span>
        <span class="tree-folder-label">\${folder.label}</span>
        <input type="checkbox" class="tree-folder-checkbox" \${isFolderChecked(folder) ? 'checked' : ''} onclick="event.stopPropagation(); toggleFolderCheck('\${folder.id}')">
      </div>
      <div class="tree-children">\${(folder.children || []).map(ep => renderEndpoint(ep, folder.id)).join('')}</div>
    </div>
  \`).join('');
}

function renderEndpoint(endpoint, folderId) {
  const methodClass = 'method-' + endpoint.method.toLowerCase();
  const isHidden = state.searchQuery && !endpoint.path.toLowerCase().includes(state.searchQuery.toLowerCase()) && !endpoint.method.toLowerCase().includes(state.searchQuery.toLowerCase());
  return \`<div class="tree-node tree-endpoint \${isHidden ? 'hidden' : ''}" data-endpoint-id="\${endpoint.id}">
    <input type="checkbox" class="tree-endpoint-checkbox" \${endpoint.checked ? 'checked' : ''} onchange="toggleEndpoint('\${folderId}', '\${endpoint.id}')">
    <span class="tree-endpoint-method \${methodClass}">\${endpoint.method}</span>
    <span class="tree-endpoint-path">\${endpoint.path}</span>
    <button class="btn-send" onclick="event.stopPropagation(); openRequest('\${endpoint.id}')" title="Send Request">\${ICONS.play}</button>
  </div>\`;
}

function isFolderChecked(folder) { return folder.children?.every(c => c.checked) || false; }
function handleSearch(query) { state.searchQuery = query; render(); }
function handleNegativeChange(checked) { state.generateNegative = checked; }
function handleUniversalChange(checked) { state.generateUniversal = checked; }
function handleUrlInput(value) {
  state.urlInput = value;
  const btn = document.querySelector('.btn-load');
  if (btn) btn.disabled = !value;
  const input = document.querySelector('.url-input');
  if (input) input.classList.toggle('has-url', !!value);
}
function handleAuthInput(value) { state.authHeader = value; }
function toggleAuth() { state.showAuth = !state.showAuth; render(); }
function loadFromUrl() {
  if (!state.urlInput) return;
  state.isLoading = true;
  state.loadingMessage = 'Loading specification...';
  render();
  vscode.postMessage({ type: 'loadUrl', url: state.urlInput, authHeader: state.authHeader || undefined });
}
function browseFile() { vscode.postMessage({ type: 'browseFile' }); }
function openRequest(endpointId) { vscode.postMessage({ type: 'openRequest', endpointId }); }
function toggleFolder(folderId) { document.querySelector('[data-folder-id="' + folderId + '"]').classList.toggle('collapsed'); }
function toggleAllFolders() {
  const folders = document.querySelectorAll('.tree-folder');
  const allCollapsed = Array.from(folders).every(f => f.classList.contains('collapsed'));
  folders.forEach(f => allCollapsed ? f.classList.remove('collapsed') : f.classList.add('collapsed'));
}
function toggleFolderCheck(folderId) {
  const folder = state.tree.find(f => f.id === folderId);
  if (!folder) return;
  const newState = !isFolderChecked(folder);
  folder.children?.forEach(c => { c.checked = newState; });
  render();
}
function toggleEndpoint(folderId, endpointId) {
  const folder = state.tree.find(f => f.id === folderId);
  if (!folder) return;
  const endpoint = folder.children?.find(e => e.id === endpointId);
  if (!endpoint) return;
  endpoint.checked = !endpoint.checked;
  render();
}
function selectAll() { state.tree.forEach(f => f.children?.forEach(c => { c.checked = true; })); render(); }
function deselectAll() { state.tree.forEach(f => f.children?.forEach(c => { c.checked = false; })); render(); }
function generate(framework) {
  const selectedIds = [];
  state.tree.forEach(folder => { folder.children?.forEach(ep => { if (ep.checked) selectedIds.push(ep.id); }); });
  if (selectedIds.length === 0) return;
  disableUI();
  vscode.postMessage({ type: 'generate', selectedIds, framework, generateNegative: state.generateNegative, generateUniversal: state.generateUniversal });
}
function addToCollection() {
  const selectedIds = [];
  state.tree.forEach(folder => { folder.children?.forEach(ep => { if (ep.checked) selectedIds.push(ep.id); }); });
  if (selectedIds.length === 0) return;
  vscode.postMessage({ type: 'addToCollection', selectedIds });
}
function disableUI() { document.querySelectorAll('.btn-gen').forEach(btn => btn.disabled = true); }
function enableUI() { document.querySelectorAll('.btn-gen').forEach(btn => btn.disabled = state.selectedCount === 0); }
function showError(error) { enableUI(); console.error(error); }
function resetSpec() {
  state.tree = []; state.selectedCount = 0; state.totalCount = 0;
  state.sourceUrl = ''; state.urlInput = ''; state.authHeader = '';
  state.showAuth = false; state.searchQuery = '';
  vscode.postMessage({ type: 'reset' });
  render();
}

// ========== Collections ==========
function switchTab(tab) { state.activeTab = tab; vscode.postMessage({ type: 'switchTab', tab }); render(); }

function renderCollectionsTab() {
  return \`<div class="collection-toolbar">
    <span style="font-weight: 500;">Saved Requests</span>
    <button class="btn-secondary" onclick="createCollection()">+ New Collection</button>
  </div>
  <div class="tree-container" style="max-height: 500px;">
    \${state.collections.length === 0 ? '<div class="empty-state"><p>No collections yet</p><p style="font-size: 0.9em; margin-top: 8px;">Create a collection to save your requests</p></div>' : state.collections.map(c => renderCollection(c)).join('')}
  </div>
  \${renderSnippetsPanel()}\`;
}

function renderCollection(collection) {
  const isExpanded = state.expandedCollections.has(collection.id);
  const childrenHtml = isExpanded ? \`<div class="tree-children">
    \${collection.children?.length === 0 ? '<div class="empty-collection">Empty collection - send a request and save it here</div>' : (collection.children || []).map(child => child.type === 'folder' ? renderCollectionFolder(child, collection.id) : renderSavedRequest(child, collection.id)).join('')}
  </div>\` : '';
  return \`<div class="tree-node tree-folder \${isExpanded ? '' : 'collapsed'}">
    <div class="tree-folder-header" onclick="toggleCollection('\${collection.id}')">
      <span class="tree-folder-icon">\${ICONS.chevronDown}</span>
      <span class="collection-icon">\${ICONS.folder}</span>
      <span class="tree-folder-label">\${collection.name}</span>
      <div class="collection-actions">
        <button class="btn-icon btn-run" onclick="event.stopPropagation(); runCollection('\${collection.id}')" title="Run Collection">\${ICONS.play}</button>
        <button class="btn-icon" onclick="event.stopPropagation(); addFolder('\${collection.id}')" title="Add folder">\${ICONS.addFolder}</button>
        <button class="btn-icon" onclick="event.stopPropagation(); showExportCodeModal('\${collection.id}')" title="Export to Code">\${ICONS.code}</button>
        <button class="btn-icon" onclick="event.stopPropagation(); exportCollection('\${collection.id}')" title="Export to Postman">\${ICONS.upload}</button>
        <button class="btn-icon" onclick="event.stopPropagation(); deleteCollection('\${collection.id}')" title="Delete">\${ICONS.trash}</button>
      </div>
    </div>
    \${childrenHtml}
  </div>\`;
}

function renderCollectionFolder(folder, collectionId) {
  return \`<div class="folder-item" onclick="event.stopPropagation();">
    <span class="folder-icon">\${ICONS.folderOpen}</span>
    <span class="collection-name">\${folder.name}</span>
    <div class="collection-actions"><button class="btn-icon" onclick="event.stopPropagation(); deleteFolder('\${collectionId}', '\${folder.id}')" title="Delete">\${ICONS.trash}</button></div>
  </div>
  \${(folder.children || []).map(child => child.type === 'folder' ? '<div class="nested-folder">' + renderCollectionFolder(child, collectionId) + '</div>' : renderSavedRequest(child, collectionId, true)).join('')}\`;
}

function renderSavedRequest(request, collectionId, nested = false) {
  const methodClass = 'method-' + request.method.toLowerCase();
  const tests = request.tests || [];
  const extractions = request.extractVariables || [];
  const extractionsHtml = extractions.length > 0 ? \`<div class="extractions-list"><div class="section-label">Variables:</div>\${extractions.map((ext, i) => \`<div class="extraction-item"><span class="var-name">{{\${ext.name}}}</span><span class="var-path">\${ext.path}</span><button class="remove-btn" onclick="event.stopPropagation(); removeExtraction('\${collectionId}', '\${request.id}', \${i})">\xD7</button></div>\`).join('')}</div>\` : '';
  const hasTestScript = request.scripts?.test?.trim();
  const testsHtml = \`<div class="request-tests">\${extractionsHtml}\${hasTestScript ? \`<div class="tests-list"><div class="test-item test-pending"><span class="test-icon">\u25CB</span><span class="test-name">Python Tests</span></div></div>\` : ''}</div>\`;
  return \`<div class="request-item \${nested ? 'nested-request' : ''}" onclick="openSavedRequest('\${collectionId}', '\${request.id}')">
    <span class="request-method \${methodClass}">\${request.method}</span>
    <span class="request-name" title="\${request.url}">\${request.name}</span>
    <span class="tests-badge" style="font-size:10px;color:var(--vscode-descriptionForeground);">\${hasTestScript ? '(tests)' : ''}</span>
    <div class="collection-actions"><button class="btn-icon" onclick="event.stopPropagation(); deleteSavedRequest('\${collectionId}', '\${request.id}')" title="Delete">\${ICONS.trash}</button></div>
  </div>\${testsHtml}\`;
}

function getTestDisplayName(test) {
  switch (test.type) {
    case 'status': return 'Status = ' + test.expected;
    case 'statusFamily': return 'Status is ' + test.expected;
    case 'notEmpty': return 'Body not empty';
    case 'hasJsonBody': return 'Body is JSON';
    case 'hasField': return 'Has "' + test.field + '"';
    case 'fieldNotNull': return '"' + test.field + '" not null';
    case 'fieldEquals': return '"' + test.field + '" = ' + test.expected;
    case 'responseTime': return 'Time < ' + test.maxMs + 'ms';
    case 'headerExists': return 'Has "' + test.header + '"';
    case 'headerEquals': return '"' + test.header + '" = ' + test.expected;
    case 'custom': return test.description || test.expression?.substring(0, 30) + '...';
    default: return test.type;
  }
}

function toggleCollection(collectionId) {
  if (state.expandedCollections.has(collectionId)) state.expandedCollections.delete(collectionId);
  else state.expandedCollections.add(collectionId);
  render();
}
function createCollection() { vscode.postMessage({ type: 'promptCreateCollection' }); }
function deleteCollection(collectionId) { state.expandedCollections.delete(collectionId); vscode.postMessage({ type: 'deleteCollection', collectionId }); }
function addFolder(collectionId, parentFolderId) { vscode.postMessage({ type: 'promptCreateFolder', collectionId, parentFolderId }); }
function deleteFolder(collectionId, folderId) { vscode.postMessage({ type: 'deleteFolder', collectionId, folderId }); }
function openSavedRequest(collectionId, requestId) { vscode.postMessage({ type: 'openSavedRequest', collectionId, requestId }); }
function deleteSavedRequest(collectionId, requestId) { vscode.postMessage({ type: 'deleteRequest', collectionId, requestId }); }
function exportCollection(collectionId) { vscode.postMessage({ type: 'exportCollection', collectionId }); }
function runCollection(collectionId) { vscode.postMessage({ type: 'runCollection', collectionId }); }

// ========== Variables Extraction ==========
let currentExtractionCollectionId = null;
let currentExtractionRequestId = null;

function showAddExtraction(collectionId, requestId) {
  currentExtractionCollectionId = collectionId;
  currentExtractionRequestId = requestId;
  document.getElementById('extractionName').value = '';
  document.getElementById('extractionPath').value = '';
  document.getElementById('addExtractionModal').style.display = 'flex';
}
function closeExtractionModal() { document.getElementById('addExtractionModal').style.display = 'none'; }
function setExtractionPath(path) { document.getElementById('extractionPath').value = path; }
function saveExtraction() {
  const name = document.getElementById('extractionName').value.trim();
  const path = document.getElementById('extractionPath').value.trim();
  const scope = document.getElementById('extractionScope').value;
  if (!name || !path) { alert('Name and path are required'); return; }
  vscode.postMessage({ type: 'addExtraction', collectionId: currentExtractionCollectionId, requestId: currentExtractionRequestId, extraction: { name, path, scope } });
  closeExtractionModal();
}
function removeExtraction(collectionId, requestId, index) { vscode.postMessage({ type: 'removeExtraction', collectionId, requestId, index }); }

// ========== Export to Code ==========
let selectedExportFormat = null;
let exportingCollectionId = null;

function showExportCodeModal(collectionId) {
  exportingCollectionId = collectionId;
  selectedExportFormat = null;
  document.querySelectorAll('.format-option').forEach(el => el.classList.remove('selected'));
  document.getElementById('exportCodeOptions').style.display = 'none';
  document.getElementById('exportCodePreview').style.display = 'none';
  document.getElementById('previewCodeBtn').style.display = 'none';
  document.getElementById('saveCodeBtn').style.display = 'none';
  document.getElementById('exportBaseUrl').value = '';
  document.getElementById('exportClassName').value = '';
  document.getElementById('exportCodeModal').style.display = 'flex';
}
function closeExportCodeModal() { document.getElementById('exportCodeModal').style.display = 'none'; exportingCollectionId = null; }
function selectExportFormat(format) {
  selectedExportFormat = format;
  document.querySelectorAll('.format-option').forEach(el => el.classList.toggle('selected', el.dataset.format === format));
  document.getElementById('exportCodeOptions').style.display = 'block';
  document.getElementById('previewCodeBtn').style.display = 'inline-flex';
  document.getElementById('saveCodeBtn').style.display = 'inline-flex';
  document.getElementById('exportClassName').placeholder = format === 'pytest' ? 'test_api' : 'ApiTest';
}
function getExportConfig() {
  return {
    format: selectedExportFormat,
    baseUrl: document.getElementById('exportBaseUrl').value || 'http://localhost:8080',
    className: document.getElementById('exportClassName').value || (selectedExportFormat === 'pytest' ? 'test_api' : 'ApiTest'),
    moduleName: document.getElementById('exportClassName').value || 'test_api',
    includeVariables: document.getElementById('exportIncludeVariables').checked,
    includeSetup: document.getElementById('exportIncludeSetup').checked
  };
}
function previewExportCode() {
  if (!selectedExportFormat || !exportingCollectionId) return;
  vscode.postMessage({ type: 'previewExportCode', collectionId: exportingCollectionId, config: getExportConfig() });
}
function saveExportCode() {
  if (!selectedExportFormat || !exportingCollectionId) return;
  vscode.postMessage({ type: 'saveExportCode', collectionId: exportingCollectionId, config: getExportConfig() });
  closeExportCodeModal();
}
function showExportPreview(code) {
  document.getElementById('exportCodeContent').textContent = code;
  document.getElementById('exportCodePreview').style.display = 'block';
}
function copyExportCode() { navigator.clipboard.writeText(document.getElementById('exportCodeContent').textContent); }

// ========== Custom Snippet ==========
let customSnippetCollectionId = null;
let customSnippetRequestId = null;

function showCustomSnippetModal(collectionId, requestId) {
  customSnippetCollectionId = collectionId;
  customSnippetRequestId = requestId;
  document.getElementById('customSnippetDescription').value = '';
  document.getElementById('customSnippetExpression').value = '';
  document.getElementById('customSnippetModal').style.display = 'flex';
}
function closeCustomSnippetModal() { document.getElementById('customSnippetModal').style.display = 'none'; }
function setCustomExpression(expr) { document.getElementById('customSnippetExpression').value = expr; }
function saveCustomSnippet() {
  const expression = document.getElementById('customSnippetExpression').value.trim();
  const description = document.getElementById('customSnippetDescription').value.trim();
  if (!expression) { alert('Expression is required'); return; }
  vscode.postMessage({ type: 'addTestSnippet', collectionId: customSnippetCollectionId, requestId: customSnippetRequestId, snippet: { type: 'custom', enabled: true, expression, description: description || expression.substring(0, 50) } });
  closeCustomSnippetModal();
}

// ========== Test Snippets ==========
function showSnippetsPanel(collectionId, requestId) {
  state.snippetTargetCollectionId = collectionId;
  state.snippetTargetRequestId = requestId;
  state.snippetPanelVisible = true;
  if (Object.keys(state.snippetLibrary).length === 0) vscode.postMessage({ type: 'getSnippetLibrary' });
  render();
}
function hideSnippetsPanel() { state.snippetPanelVisible = false; state.snippetTargetCollectionId = null; state.snippetTargetRequestId = null; render(); }
function addSnippet(type, config) {
  if (!state.snippetTargetCollectionId || !state.snippetTargetRequestId) return;
  vscode.postMessage({ type: 'addTestSnippet', collectionId: state.snippetTargetCollectionId, requestId: state.snippetTargetRequestId, snippet: { type, enabled: true, ...config } });
  hideSnippetsPanel();
}
function removeTest(collectionId, requestId, index) { vscode.postMessage({ type: 'removeTestSnippet', collectionId, requestId, index }); }

function renderSnippetsPanel() {
  if (!state.snippetPanelVisible) return '';
  const lib = state.snippetLibrary;
  return \`<div class="snippets-panel visible">
    <div class="panel-header"><span>Add Test</span><button class="btn-icon" onclick="hideSnippetsPanel()">\xD7</button></div>
    \${Object.entries(lib).map(([category, snippets]) => \`<div class="snippet-category"><div class="category-header">\${category}</div>\${(snippets || []).map(s => \`<div class="snippet-item" onclick="addSnippet('\${s.type}', \${JSON.stringify(s.defaultConfig).replace(/"/g, '&quot;')})"><span>\${s.name}</span></div>\`).join('')}</div>\`).join('')}
    <div class="snippet-category"><div class="category-header">Custom</div><div class="snippet-item" onclick="hideSnippetsPanel(); showCustomSnippetModal(state.snippetTargetCollectionId, state.snippetTargetRequestId)"><span>Custom JS Expression...</span></div></div>
  </div>\`;
}

init();
`});var $6={};Ka($6,{WEBVIEW_MODALS:()=>D6});var D6,_x=Ju(()=>{"use strict";D6=`
<!-- Add Extraction Modal -->
<div class="modal" id="addExtractionModal" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <span>Extract Variable from Response</span>
      <button class="close-btn" onclick="closeExtractionModal()">\xD7</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label>Variable Name</label>
        <input type="text" id="extractionName" placeholder="userId" />
        <small>Use as {{userId}} in other requests</small>
      </div>
      <div class="form-group">
        <label>Path to Value</label>
        <input type="text" id="extractionPath" placeholder="$.id or user.name" />
        <small>JSONPath or dot notation</small>
      </div>
      <div class="form-group">
        <label>Scope</label>
        <select id="extractionScope">
          <option value="collection">Collection (available everywhere)</option>
          <option value="folder">Folder (current folder only)</option>
        </select>
      </div>
      <div class="path-examples">
        <div class="example-header">Examples:</div>
        <div class="example" onclick="setExtractionPath('$.id')"><code>$.id</code> \u2014 root field</div>
        <div class="example" onclick="setExtractionPath('$.user.name')"><code>$.user.name</code> \u2014 nested</div>
        <div class="example" onclick="setExtractionPath('$.items[0].id')"><code>$.items[0].id</code> \u2014 array</div>
        <div class="example" onclick="setExtractionPath('$status')"><code>$status</code> \u2014 HTTP status</div>
        <div class="example" onclick="setExtractionPath('$header.Authorization')"><code>$header.X</code> \u2014 header</div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-secondary" onclick="closeExtractionModal()">Cancel</button>
      <button class="btn-primary" onclick="saveExtraction()">Add</button>
    </div>
  </div>
</div>

<!-- Export Modal -->
<div class="modal" id="exportCodeModal" style="display: none;">
  <div class="modal-content modal-large">
    <div class="modal-header">
      <span>Export Collection to Code</span>
      <button class="close-btn" onclick="closeExportCodeModal()">\xD7</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label>Format</label>
        <div class="format-selector">
          <div class="format-option" data-format="pytest" onclick="selectExportFormat('pytest')">
            <div class="format-icon">\u{1F40D}</div>
            <div class="format-name">pytest</div>
            <div class="format-desc">Python + requests</div>
          </div>
          <div class="format-option" data-format="rest-assured" onclick="selectExportFormat('rest-assured')">
            <div class="format-icon">\u2615</div>
            <div class="format-name">REST Assured</div>
            <div class="format-desc">Java + JUnit 5</div>
          </div>
        </div>
      </div>
      <div id="exportCodeOptions" style="display: none;">
        <div class="form-group">
          <label>Base URL</label>
          <input type="text" id="exportBaseUrl" placeholder="http://localhost:8080" />
        </div>
        <div class="form-group">
          <label>Class/Module Name</label>
          <input type="text" id="exportClassName" placeholder="ApiTest" />
        </div>
        <div class="form-group">
          <label><input type="checkbox" id="exportIncludeVariables" checked /> Include variable handling</label>
        </div>
        <div class="form-group">
          <label><input type="checkbox" id="exportIncludeSetup" checked /> Include setup/teardown</label>
        </div>
      </div>
      <div id="exportCodePreview" class="export-preview" style="display: none;">
        <div class="preview-header">
          <span>Preview</span>
          <button class="btn-secondary btn-sm" onclick="copyExportCode()">Copy</button>
        </div>
        <pre><code id="exportCodeContent"></code></pre>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-secondary" onclick="closeExportCodeModal()">Cancel</button>
      <button class="btn-secondary" id="previewCodeBtn" onclick="previewExportCode()" style="display: none;">Preview</button>
      <button class="btn-primary" id="saveCodeBtn" onclick="saveExportCode()" style="display: none;">Save Files</button>
    </div>
  </div>
</div>

<!-- Custom Snippet Modal -->
<div class="modal" id="customSnippetModal" style="display: none;">
  <div class="modal-content modal-large">
    <div class="modal-header">
      <span>Custom Test Expression</span>
      <button class="close-btn" onclick="closeCustomSnippetModal()">\xD7</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label>Description</label>
        <input type="text" id="customSnippetDescription" placeholder="What this test checks" />
      </div>
      <div class="form-group">
        <label>JavaScript Expression</label>
        <textarea id="customSnippetExpression" rows="4" placeholder="response.body.items.length > 0"></textarea>
        <small>Expression must return truthy value to pass</small>
      </div>
      <div class="expression-help">
        <div class="help-section">
          <div class="help-title">Available Variables</div>
          <code>response.status</code> \u2014 HTTP status code<br>
          <code>response.body</code> \u2014 Parsed response body<br>
          <code>response.headers</code> \u2014 Response headers<br>
          <code>response.time</code> \u2014 Response time (ms)
        </div>
        <div class="help-section">
          <div class="help-title">Helper Functions</div>
          <code>len(arr)</code> \u2014 Array/string length<br>
          <code>all(arr, fn)</code> \u2014 All items match<br>
          <code>any(arr, fn)</code> \u2014 Any item matches<br>
          <code>between(val, min, max)</code> \u2014 Range check
        </div>
        <div class="help-section">
          <div class="help-title">Examples (click to use)</div>
          <div class="examples-list">
            <div class="example-item" onclick="setCustomExpression('response.body.items.length > 0')">
              <code>response.body.items.length > 0</code>
            </div>
            <div class="example-item" onclick="setCustomExpression('response.status === 200 && response.time < 500')">
              <code>response.status === 200 && response.time < 500</code>
            </div>
            <div class="example-item" onclick="setCustomExpression('all(response.body.users, u => u.active)')">
              <code>all(response.body.users, u => u.active)</code>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn-secondary" onclick="closeCustomSnippetModal()">Cancel</button>
      <button class="btn-primary" onclick="saveCustomSnippet()">Add Test</button>
    </div>
  </div>
</div>
`});var j6={};Ka(j6,{ICONS:()=>vx,ICONS_CSS:()=>B6,icon:()=>F6});function F6(t,e){let r=vx[t];return`<span class="${e?`icon ${e}`:"icon"}">${r}</span>`}var vx,B6,Sx=Ju(()=>{"use strict";vx={folder:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 14.5 4H7.414l-1-1A2 2 0 0 0 4.914 2H1.5z"/></svg>',folderOpen:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M1 3.5A1.5 1.5 0 0 1 2.5 2h2.764a1.5 1.5 0 0 1 1.06.44l.707.707H13.5A1.5 1.5 0 0 1 15 4.5v1H2.5A1.5 1.5 0 0 0 1 7v-3.5zm.646 4.354A.5.5 0 0 1 2 7.5h11a.5.5 0 0 1 .49.598l-1 5A.5.5 0 0 1 12 13.5H2.5a.5.5 0 0 1-.49-.402l-1-5a.5.5 0 0 1 .136-.244z"/></svg>',file:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.5L9.5 0H4zm5.5 0v3a1.5 1.5 0 0 0 1.5 1.5h3L9.5 0z"/></svg>',key:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M10.5 0a5.5 5.5 0 0 0-4.97 7.862l-4.823 4.83A1 1 0 0 0 0 13.4V15a1 1 0 0 0 1 1h1.6a1 1 0 0 0 .708-.293l.293-.293H5v-1.5a.5.5 0 0 1 .5-.5H7v-1.5a.5.5 0 0 1 .5-.5h.585l.862-.863A5.5 5.5 0 1 0 10.5 0zm1.5 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/></svg>',close:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/></svg>',add:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2z"/></svg>',python:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M7.8 1C4.5 1 4.6 2.4 4.6 2.4l.003 1.5H8v.4H3s-2.3-.2-2.3 3.3 2 3.4 2 3.4h1.2V9.4s-.1-2 2-2h3.4s1.9 0 1.9-1.8V2.8S11.6 1 7.8 1zm-1.9 1c.3 0 .6.3.6.6s-.3.6-.6.6-.6-.3-.6-.6.3-.6.6-.6z"/><path d="M8.2 15c3.3 0 3.2-1.4 3.2-1.4l-.003-1.5H8v-.4h5s2.3.2 2.3-3.3-2-3.4-2-3.4h-1.2v1.6s.1 2-2 2H6.7s-1.9 0-1.9 1.8v2.8S4.4 15 8.2 15zm1.9-1c-.3 0-.6-.3-.6-.6s.3-.6.6-.6.6.3.6.6-.3.6-.6.6z"/></svg>',java:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M5.5 9.5c0 .3.2.5.4.6.3.1.6.2 1 .2.3 0 .6 0 .9-.1.3-.1.4-.3.4-.6 0-.2-.1-.4-.3-.5-.2-.1-.5-.2-.9-.3-.6-.1-1.1-.3-1.4-.5s-.5-.6-.5-1c0-.5.2-.9.6-1.2.4-.3.9-.4 1.6-.4s1.2.1 1.6.4c.4.3.6.7.6 1.2h-1c0-.3-.1-.5-.3-.6-.2-.2-.5-.2-.9-.2-.3 0-.6.1-.8.2-.2.1-.3.3-.3.5 0 .2.1.3.3.4.2.1.5.2.9.3.6.1 1.1.3 1.4.5.3.3.5.6.5 1.1 0 .5-.2.9-.6 1.2-.4.3-1 .4-1.7.4-.7 0-1.3-.2-1.7-.5-.4-.3-.6-.7-.6-1.3h1.1z"/><path d="M12.3 5.4c-.2-.2-.5-.3-.8-.3-.4 0-.7.1-.9.4-.2.3-.3.6-.3 1.1v3.2h-1V4.6h1v.6c.3-.5.8-.7 1.4-.7.5 0 .9.2 1.2.5.3.3.4.8.4 1.4v3.4h-1V6.5c0-.5-.1-.8-.3-1.1z"/><path d="M4.5 13c.8.5 2 .9 3.5.9s2.7-.3 3.5-.9c-.8.3-2 .5-3.5.5s-2.7-.2-3.5-.5z"/><path d="M11.5 12c-.5.4-1.5.7-3.5.7s-3-.3-3.5-.7c.5.6 2 1 3.5 1s3-.4 3.5-1z"/></svg>',postman:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zm0 12.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11z"/><path d="M10.5 5.5L8 8l-2 2v1.5L8.5 9l2.5-2.5-.5-1z"/><path d="M5 7l1-1 2.5 2.5L7 10 5 7z"/></svg>',collection:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M2.5 3A1.5 1.5 0 0 0 1 4.5v.793A.5.5 0 0 0 1 5.5v5A1.5 1.5 0 0 0 2.5 12h11a1.5 1.5 0 0 0 1.5-1.5v-5a.5.5 0 0 0 0-.207V4.5A1.5 1.5 0 0 0 13.5 3h-11zm0 1h11a.5.5 0 0 1 .5.5V5H2v-.5a.5.5 0 0 1 .5-.5zm-.5 3h12v3.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5V7z"/></svg>',check:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/></svg>',cross:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/></svg>',warning:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/></svg>',play:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M4 2.5a.5.5 0 0 1 .764-.424l8.5 5.5a.5.5 0 0 1 0 .848l-8.5 5.5A.5.5 0 0 1 4 13.5v-11z"/></svg>',chevronDown:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>',chevronRight:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg>',export:'<svg viewBox="0 0 16 16" fill="currentColor"><path d="M8.5 1.5A1.5 1.5 0 0 0 7 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4.5L8.5 1.5zm1 9.5v-1H7v-2h2.5V7L13 10l-3.5 3v-2z"/></svg>'};B6=`
/* SVG Icons */
.icon {
  display: inline-flex; align-items: center; justify-content: center;
  width: 16px; height: 16px; flex-shrink: 0; vertical-align: middle;
}
.icon svg { width: 100%; height: 100%; fill: currentColor; }
.icon-sm { width: 12px; height: 12px; }
.icon-lg { width: 20px; height: 20px; }
.icon-xl { width: 28px; height: 28px; }
.icon-success { color: #28a745; }
.icon-error { color: #dc3545; }
.icon-warning { color: #ffc107; }
`});var Ex=w((Cqe,W6)=>{W6.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var Gg=w(H6=>{var z6={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function Hxe(t){return function(...e){return e.length&&(t=t.replace(/\{(\d)\}/g,(r,n)=>e[n]||"")),new Error("ADM-ZIP: "+t)}}for(let t of Object.keys(z6))H6[t]=Hxe(z6[t])});var J6=w((Nqe,Y6)=>{var Vxe=require("fs"),gt=require("path"),V6=Ex(),Gxe=Gg(),Kxe=typeof process=="object"&&process.platform==="win32",G6=t=>typeof t=="object"&&t!==null,K6=new Uint32Array(256).map((t,e)=>{for(let r=0;r<8;r++)(e&1)!==0?e=3988292384^e>>>1:e>>>=1;return e>>>0});function Ze(t){this.sep=gt.sep,this.fs=Vxe,G6(t)&&G6(t.fs)&&typeof t.fs.statSync=="function"&&(this.fs=t.fs)}Y6.exports=Ze;Ze.prototype.makeDir=function(t){let e=this;function r(n){let i=n.split(e.sep)[0];n.split(e.sep).forEach(function(s){if(!(!s||s.substr(-1,1)===":")){i+=e.sep+s;var o;try{o=e.fs.statSync(i)}catch{e.fs.mkdirSync(i)}if(o&&o.isFile())throw Gxe.FILE_IN_THE_WAY(`"${i}"`)}})}r(t)};Ze.prototype.writeFileTo=function(t,e,r,n){let i=this;if(i.fs.existsSync(t)){if(!r)return!1;var s=i.fs.statSync(t);if(s.isDirectory())return!1}var o=gt.dirname(t);i.fs.existsSync(o)||i.makeDir(o);var a;try{a=i.fs.openSync(t,"w",438)}catch{i.fs.chmodSync(t,438),a=i.fs.openSync(t,"w",438)}if(a)try{i.fs.writeSync(a,e,0,e.length,0)}finally{i.fs.closeSync(a)}return i.fs.chmodSync(t,n||438),!0};Ze.prototype.writeFileToAsync=function(t,e,r,n,i){typeof n=="function"&&(i=n,n=void 0);let s=this;s.fs.exists(t,function(o){if(o&&!r)return i(!1);s.fs.stat(t,function(a,l){if(o&&l.isDirectory())return i(!1);var c=gt.dirname(t);s.fs.exists(c,function(u){u||s.makeDir(c),s.fs.open(t,"w",438,function(d,p){d?s.fs.chmod(t,438,function(){s.fs.open(t,"w",438,function(f,y){s.fs.write(y,e,0,e.length,0,function(){s.fs.close(y,function(){s.fs.chmod(t,n||438,function(){i(!0)})})})})}):p?s.fs.write(p,e,0,e.length,0,function(){s.fs.close(p,function(){s.fs.chmod(t,n||438,function(){i(!0)})})}):s.fs.chmod(t,n||438,function(){i(!0)})})})})})};Ze.prototype.findFiles=function(t){let e=this;function r(n,i,s){typeof i=="boolean"&&(s=i,i=void 0);let o=[];return e.fs.readdirSync(n).forEach(function(a){let l=gt.join(n,a),c=e.fs.statSync(l);(!i||i.test(l))&&o.push(gt.normalize(l)+(c.isDirectory()?e.sep:"")),c.isDirectory()&&s&&(o=o.concat(r(l,i,s)))}),o}return r(t,void 0,!0)};Ze.prototype.findFilesAsync=function(t,e){let r=this,n=[];r.fs.readdir(t,function(i,s){if(i)return e(i);let o=s.length;if(!o)return e(null,n);s.forEach(function(a){a=gt.join(t,a),r.fs.stat(a,function(l,c){if(l)return e(l);c&&(n.push(gt.normalize(a)+(c.isDirectory()?r.sep:"")),c.isDirectory()?r.findFilesAsync(a,function(u,d){if(u)return e(u);n=n.concat(d),--o||e(null,n)}):--o||e(null,n))})})})};Ze.prototype.getAttributes=function(){};Ze.prototype.setAttributes=function(){};Ze.crc32update=function(t,e){return K6[(t^e)&255]^t>>>8};Ze.crc32=function(t){typeof t=="string"&&(t=Buffer.from(t,"utf8"));let e=t.length,r=-1;for(let n=0;n<e;)r=Ze.crc32update(r,t[n++]);return~r>>>0};Ze.methodToString=function(t){switch(t){case V6.STORED:return"STORED ("+t+")";case V6.DEFLATED:return"DEFLATED ("+t+")";default:return"UNSUPPORTED ("+t+")"}};Ze.canonical=function(t){if(!t)return"";let e=gt.posix.normalize("/"+t.split("\\").join("/"));return gt.join(".",e)};Ze.zipnamefix=function(t){if(!t)return"";let e=gt.posix.normalize("/"+t.split("\\").join("/"));return gt.posix.join(".",e)};Ze.findLast=function(t,e){if(!Array.isArray(t))throw new TypeError("arr is not array");let r=t.length>>>0;for(let n=r-1;n>=0;n--)if(e(t[n],n,t))return t[n]};Ze.sanitize=function(t,e){t=gt.resolve(gt.normalize(t));for(var r=e.split("/"),n=0,i=r.length;n<i;n++){var s=gt.normalize(gt.join(t,r.slice(n,i).join(gt.sep)));if(s.indexOf(t)===0)return s}return gt.normalize(gt.join(t,gt.basename(e)))};Ze.toBuffer=function(e,r){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?r(e):Buffer.alloc(0)};Ze.readBigUInt64LE=function(t,e){var r=Buffer.from(t.slice(e,e+8));return r.swap64(),parseInt(`0x${r.toString("hex")}`)};Ze.fromDOS2Date=function(t){return new Date((t>>25&127)+1980,Math.max((t>>21&15)-1,0),Math.max(t>>16&31,1),t>>11&31,t>>5&63,(t&31)<<1)};Ze.fromDate2DOS=function(t){let e=0,r=0;return t.getFullYear()>1979&&(e=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDate(),r=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>1),e<<16|r};Ze.isWin=Kxe;Ze.crcTable=K6});var Q6=w((Oqe,Z6)=>{var Yxe=require("path");Z6.exports=function(t,{fs:e}){var r=t||"",n=s(),i=null;function s(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return r&&e.existsSync(r)?(i=e.statSync(r),n.directory=i.isDirectory(),n.mtime=i.mtime,n.atime=i.atime,n.executable=(73&i.mode)!==0,n.readonly=(128&i.mode)===0,n.hidden=Yxe.basename(r)[0]==="."):console.warn("Invalid path: "+r),{get directory(){return n.directory},get readOnly(){return n.readonly},get hidden(){return n.hidden},get mtime(){return n.mtime},get atime(){return n.atime},get executable(){return n.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:r,isDirectory:n.directory,isReadOnly:n.readonly,isHidden:n.hidden,isExecutable:n.executable,mTime:n.mtime,aTime:n.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var eW=w((qqe,X6)=>{X6.exports={efs:!0,encode:t=>Buffer.from(t,"utf8"),decode:t=>t.toString("utf8")}});var Fa=w((Pqe,$a)=>{$a.exports=J6();$a.exports.Constants=Ex();$a.exports.Errors=Gg();$a.exports.FileAttr=Q6();$a.exports.decoder=eW()});var rW=w((Lqe,tW)=>{var Ii=Fa(),j=Ii.Constants;tW.exports=function(){var t=20,e=10,r=0,n=0,i=0,s=0,o=0,a=0,l=0,c=0,u=0,d=0,p=0,f=0,y=0;t|=Ii.isWin?2560:768,r|=j.FLG_EFS;let h={extraLen:0},m=b=>Math.max(0,b)>>>0,g=b=>Math.max(0,b)&65535,E=b=>Math.max(0,b)&255;return i=Ii.fromDate2DOS(new Date),{get made(){return t},set made(b){t=b},get version(){return e},set version(b){e=b},get flags(){return r},set flags(b){r=b},get flags_efs(){return(r&j.FLG_EFS)>0},set flags_efs(b){b?r|=j.FLG_EFS:r&=~j.FLG_EFS},get flags_desc(){return(r&j.FLG_DESC)>0},set flags_desc(b){b?r|=j.FLG_DESC:r&=~j.FLG_DESC},get method(){return n},set method(b){switch(b){case j.STORED:this.version=10;case j.DEFLATED:default:this.version=20}n=b},get time(){return Ii.fromDOS2Date(this.timeval)},set time(b){this.timeval=Ii.fromDate2DOS(b)},get timeval(){return i},set timeval(b){i=m(b)},get timeHighByte(){return E(i>>>8)},get crc(){return s},set crc(b){s=m(b)},get compressedSize(){return o},set compressedSize(b){o=m(b)},get size(){return a},set size(b){a=m(b)},get fileNameLength(){return l},set fileNameLength(b){l=b},get extraLength(){return c},set extraLength(b){c=b},get extraLocalLength(){return h.extraLen},set extraLocalLength(b){h.extraLen=b},get commentLength(){return u},set commentLength(b){u=b},get diskNumStart(){return d},set diskNumStart(b){d=m(b)},get inAttr(){return p},set inAttr(b){p=m(b)},get attr(){return f},set attr(b){f=m(b)},get fileAttr(){return(f||0)>>16&4095},get offset(){return y},set offset(b){y=m(b)},get encrypted(){return(r&j.FLG_ENC)===j.FLG_ENC},get centralHeaderSize(){return j.CENHDR+l+c+u},get realDataOffset(){return y+j.LOCHDR+h.fnameLen+h.extraLen},get localHeader(){return h},loadLocalHeaderFromBinary:function(b){var v=b.slice(y,y+j.LOCHDR);if(v.readUInt32LE(0)!==j.LOCSIG)throw Ii.Errors.INVALID_LOC();h.version=v.readUInt16LE(j.LOCVER),h.flags=v.readUInt16LE(j.LOCFLG),h.method=v.readUInt16LE(j.LOCHOW),h.time=v.readUInt32LE(j.LOCTIM),h.crc=v.readUInt32LE(j.LOCCRC),h.compressedSize=v.readUInt32LE(j.LOCSIZ),h.size=v.readUInt32LE(j.LOCLEN),h.fnameLen=v.readUInt16LE(j.LOCNAM),h.extraLen=v.readUInt16LE(j.LOCEXT);let A=y+j.LOCHDR+h.fnameLen,k=A+h.extraLen;return b.slice(A,k)},loadFromBinary:function(b){if(b.length!==j.CENHDR||b.readUInt32LE(0)!==j.CENSIG)throw Ii.Errors.INVALID_CEN();t=b.readUInt16LE(j.CENVEM),e=b.readUInt16LE(j.CENVER),r=b.readUInt16LE(j.CENFLG),n=b.readUInt16LE(j.CENHOW),i=b.readUInt32LE(j.CENTIM),s=b.readUInt32LE(j.CENCRC),o=b.readUInt32LE(j.CENSIZ),a=b.readUInt32LE(j.CENLEN),l=b.readUInt16LE(j.CENNAM),c=b.readUInt16LE(j.CENEXT),u=b.readUInt16LE(j.CENCOM),d=b.readUInt16LE(j.CENDSK),p=b.readUInt16LE(j.CENATT),f=b.readUInt32LE(j.CENATX),y=b.readUInt32LE(j.CENOFF)},localHeaderToBinary:function(){var b=Buffer.alloc(j.LOCHDR);return b.writeUInt32LE(j.LOCSIG,0),b.writeUInt16LE(e,j.LOCVER),b.writeUInt16LE(r,j.LOCFLG),b.writeUInt16LE(n,j.LOCHOW),b.writeUInt32LE(i,j.LOCTIM),b.writeUInt32LE(s,j.LOCCRC),b.writeUInt32LE(o,j.LOCSIZ),b.writeUInt32LE(a,j.LOCLEN),b.writeUInt16LE(l,j.LOCNAM),b.writeUInt16LE(h.extraLen,j.LOCEXT),b},centralHeaderToBinary:function(){var b=Buffer.alloc(j.CENHDR+l+c+u);return b.writeUInt32LE(j.CENSIG,0),b.writeUInt16LE(t,j.CENVEM),b.writeUInt16LE(e,j.CENVER),b.writeUInt16LE(r,j.CENFLG),b.writeUInt16LE(n,j.CENHOW),b.writeUInt32LE(i,j.CENTIM),b.writeUInt32LE(s,j.CENCRC),b.writeUInt32LE(o,j.CENSIZ),b.writeUInt32LE(a,j.CENLEN),b.writeUInt16LE(l,j.CENNAM),b.writeUInt16LE(c,j.CENEXT),b.writeUInt16LE(u,j.CENCOM),b.writeUInt16LE(d,j.CENDSK),b.writeUInt16LE(p,j.CENATT),b.writeUInt32LE(f,j.CENATX),b.writeUInt32LE(y,j.CENOFF),b},toJSON:function(){let b=function(v){return v+" bytes"};return{made:t,version:e,flags:r,method:Ii.methodToString(n),time:this.time,crc:"0x"+s.toString(16).toUpperCase(),compressedSize:b(o),size:b(a),fileNameLength:b(l),extraLength:b(c),commentLength:b(u),diskNumStart:d,inAttr:p,attr:f,offset:y,centralHeaderSize:b(j.CENHDR+l+c+u)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var iW=w((Mqe,nW)=>{var Ba=Fa(),Ke=Ba.Constants;nW.exports=function(){var t=0,e=0,r=0,n=0,i=0;return{get diskEntries(){return t},set diskEntries(s){t=e=s},get totalEntries(){return e},set totalEntries(s){e=t=s},get size(){return r},set size(s){r=s},get offset(){return n},set offset(s){n=s},get commentLength(){return i},set commentLength(s){i=s},get mainHeaderSize(){return Ke.ENDHDR+i},loadFromBinary:function(s){if((s.length!==Ke.ENDHDR||s.readUInt32LE(0)!==Ke.ENDSIG)&&(s.length<Ke.ZIP64HDR||s.readUInt32LE(0)!==Ke.ZIP64SIG))throw Ba.Errors.INVALID_END();s.readUInt32LE(0)===Ke.ENDSIG?(t=s.readUInt16LE(Ke.ENDSUB),e=s.readUInt16LE(Ke.ENDTOT),r=s.readUInt32LE(Ke.ENDSIZ),n=s.readUInt32LE(Ke.ENDOFF),i=s.readUInt16LE(Ke.ENDCOM)):(t=Ba.readBigUInt64LE(s,Ke.ZIP64SUB),e=Ba.readBigUInt64LE(s,Ke.ZIP64TOT),r=Ba.readBigUInt64LE(s,Ke.ZIP64SIZE),n=Ba.readBigUInt64LE(s,Ke.ZIP64OFF),i=0)},toBinary:function(){var s=Buffer.alloc(Ke.ENDHDR+i);return s.writeUInt32LE(Ke.ENDSIG,0),s.writeUInt32LE(0,4),s.writeUInt16LE(t,Ke.ENDSUB),s.writeUInt16LE(e,Ke.ENDTOT),s.writeUInt32LE(r,Ke.ENDSIZ),s.writeUInt32LE(n,Ke.ENDOFF),s.writeUInt16LE(i,Ke.ENDCOM),s.fill(" ",Ke.ENDHDR),s},toJSON:function(){let s=function(o,a){let l=o.toString(16).toUpperCase();for(;l.length<a;)l="0"+l;return"0x"+l};return{diskEntries:t,totalEntries:e,size:r+" bytes",offset:s(n,4),commentLength:i}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Tx=w(xx=>{xx.EntryHeader=rW();xx.MainHeader=iW()});var oW=w(($qe,sW)=>{sW.exports=function(t){var e=require("zlib"),r={chunkSize:(parseInt(t.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(t,r)},deflateAsync:function(n){var i=e.createDeflateRaw(r),s=[],o=0;i.on("data",function(a){s.push(a),o+=a.length}),i.on("end",function(){var a=Buffer.alloc(o),l=0;a.fill(0);for(var c=0;c<s.length;c++){var u=s[c];u.copy(a,l),l+=u.length}n&&n(a)}),i.end(t)}}}});var lW=w((Fqe,aW)=>{var Jxe=+(process.versions?process.versions.node:"").split(".")[0]||0;aW.exports=function(t,e){var r=require("zlib");let n=Jxe>=15&&e>0?{maxOutputLength:e}:{};return{inflate:function(){return r.inflateRawSync(t,n)},inflateAsync:function(i){var s=r.createInflateRaw(n),o=[],a=0;s.on("data",function(l){o.push(l),a+=l.length}),s.on("end",function(){var l=Buffer.alloc(a),c=0;l.fill(0);for(var u=0;u<o.length;u++){var d=o[u];d.copy(l,c),c+=d.length}i&&i(l)}),s.end(t)}}}});var hW=w((Bqe,fW)=>{"use strict";var{randomFillSync:cW}=require("crypto"),Zxe=Gg(),Qxe=new Uint32Array(256).map((t,e)=>{for(let r=0;r<8;r++)(e&1)!==0?e=e>>>1^3988292384:e>>>=1;return e>>>0}),dW=(t,e)=>Math.imul(t,e)>>>0,uW=(t,e)=>Qxe[(t^e)&255]^t>>>8,Su=()=>typeof cW=="function"?cW(Buffer.alloc(12)):Su.node();Su.node=()=>{let t=Buffer.alloc(12),e=t.length;for(let r=0;r<e;r++)t[r]=Math.random()*256&255;return t};var Kg={genSalt:Su};function Yg(t){let e=Buffer.isBuffer(t)?t:Buffer.from(t);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let r=0;r<e.length;r++)this.updateKeys(e[r])}Yg.prototype.updateKeys=function(t){let e=this.keys;return e[0]=uW(e[0],t),e[1]+=e[0]&255,e[1]=dW(e[1],134775813)+1,e[2]=uW(e[2],e[1]>>>24),t};Yg.prototype.next=function(){let t=(this.keys[2]|2)>>>0;return dW(t,t^1)>>8&255};function Xxe(t){let e=new Yg(t);return function(r){let n=Buffer.alloc(r.length),i=0;for(let s of r)n[i++]=e.updateKeys(s^e.next());return n}}function eTe(t){let e=new Yg(t);return function(r,n,i=0){n||(n=Buffer.alloc(r.length));for(let s of r){let o=e.next();n[i++]=s^o,e.updateKeys(s)}return n}}function tTe(t,e,r){if(!t||!Buffer.isBuffer(t)||t.length<12)return Buffer.alloc(0);let n=Xxe(r),i=n(t.slice(0,12)),s=(e.flags&8)===8?e.timeHighByte:e.crc>>>24;if(i[11]!==s)throw Zxe.WRONG_PASSWORD();return n(t.slice(12))}function rTe(t){Buffer.isBuffer(t)&&t.length>=12?Kg.genSalt=function(){return t.slice(0,12)}:t==="node"?Kg.genSalt=Su.node:Kg.genSalt=Su}function nTe(t,e,r,n=!1){t==null&&(t=Buffer.alloc(0)),Buffer.isBuffer(t)||(t=Buffer.from(t.toString()));let i=eTe(r),s=Kg.genSalt();s[11]=e.crc>>>24&255,n&&(s[10]=e.crc>>>16&255);let o=Buffer.alloc(t.length+12);return i(s,o),i(t,o,12)}fW.exports={decrypt:tTe,encrypt:nTe,_salter:rTe}});var pW=w(Jg=>{Jg.Deflater=oW();Jg.Inflater=lW();Jg.ZipCrypto=hW()});var Rx=w((Uqe,gW)=>{var Re=Fa(),iTe=Tx(),Qe=Re.Constants,Ax=pW();gW.exports=function(t,e){var r=new iTe.EntryHeader,n=Buffer.alloc(0),i=Buffer.alloc(0),s=!1,o=null,a=Buffer.alloc(0),l=Buffer.alloc(0),c=!0;let u=t,d=typeof u.decoder=="object"?u.decoder:Re.decoder;c=d.hasOwnProperty("efs")?d.efs:!1;function p(){return!e||!(e instanceof Uint8Array)?Buffer.alloc(0):(l=r.loadLocalHeaderFromBinary(e),e.slice(r.realDataOffset,r.realDataOffset+r.compressedSize))}function f(b){if(r.flags_desc){let v={},A=r.realDataOffset+r.compressedSize;if(e.readUInt32LE(A)==Qe.LOCSIG||e.readUInt32LE(A)==Qe.CENSIG)throw Re.Errors.DESCRIPTOR_NOT_EXIST();if(e.readUInt32LE(A)==Qe.EXTSIG)v.crc=e.readUInt32LE(A+Qe.EXTCRC),v.compressedSize=e.readUInt32LE(A+Qe.EXTSIZ),v.size=e.readUInt32LE(A+Qe.EXTLEN);else if(e.readUInt16LE(A+12)===19280)v.crc=e.readUInt32LE(A+Qe.EXTCRC-4),v.compressedSize=e.readUInt32LE(A+Qe.EXTSIZ-4),v.size=e.readUInt32LE(A+Qe.EXTLEN-4);else throw Re.Errors.DESCRIPTOR_UNKNOWN();if(v.compressedSize!==r.compressedSize||v.size!==r.size||v.crc!==r.crc)throw Re.Errors.DESCRIPTOR_FAULTY();if(Re.crc32(b)!==v.crc)return!1}else if(Re.crc32(b)!==r.localHeader.crc)return!1;return!0}function y(b,v,A){if(typeof v>"u"&&typeof b=="string"&&(A=b,b=void 0),s)return b&&v&&v(Buffer.alloc(0),Re.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var k=p();if(k.length===0)return b&&v&&v(k),k;if(r.encrypted){if(typeof A!="string"&&!Buffer.isBuffer(A))throw Re.Errors.INVALID_PASS_PARAM();k=Ax.ZipCrypto.decrypt(k,r,A)}var R=Buffer.alloc(r.size);switch(r.method){case Re.Constants.STORED:if(k.copy(R),f(R))return b&&v&&v(R),R;throw b&&v&&v(R,Re.Errors.BAD_CRC()),Re.Errors.BAD_CRC();case Re.Constants.DEFLATED:var N=new Ax.Inflater(k,r.size);if(b)N.inflateAsync(function(I){I.copy(I,0),v&&(f(I)?v(I):v(I,Re.Errors.BAD_CRC()))});else{if(N.inflate(R).copy(R,0),!f(R))throw Re.Errors.BAD_CRC(`"${d.decode(n)}"`);return R}break;default:throw b&&v&&v(Buffer.alloc(0),Re.Errors.UNKNOWN_METHOD()),Re.Errors.UNKNOWN_METHOD()}}function h(b,v){if((!o||!o.length)&&Buffer.isBuffer(e))return b&&v&&v(p()),p();if(o.length&&!s){var A;switch(r.method){case Re.Constants.STORED:return r.compressedSize=r.size,A=Buffer.alloc(o.length),o.copy(A),b&&v&&v(A),A;default:case Re.Constants.DEFLATED:var k=new Ax.Deflater(o);if(b)k.deflateAsync(function(N){A=Buffer.alloc(N.length),r.compressedSize=N.length,N.copy(A),v&&v(A)});else{var R=k.deflate();return r.compressedSize=R.length,R}k=null;break}}else if(b&&v)v(Buffer.alloc(0));else return Buffer.alloc(0)}function m(b,v){return(b.readUInt32LE(v+4)<<4)+b.readUInt32LE(v)}function g(b){try{for(var v=0,A,k,R;v+4<b.length;)A=b.readUInt16LE(v),v+=2,k=b.readUInt16LE(v),v+=2,R=b.slice(v,v+k),v+=k,Qe.ID_ZIP64===A&&E(R)}catch{throw Re.Errors.EXTRA_FIELD_PARSE_ERROR()}}function E(b){var v,A,k,R;b.length>=Qe.EF_ZIP64_SCOMP&&(v=m(b,Qe.EF_ZIP64_SUNCOMP),r.size===Qe.EF_ZIP64_OR_32&&(r.size=v)),b.length>=Qe.EF_ZIP64_RHO&&(A=m(b,Qe.EF_ZIP64_SCOMP),r.compressedSize===Qe.EF_ZIP64_OR_32&&(r.compressedSize=A)),b.length>=Qe.EF_ZIP64_DSN&&(k=m(b,Qe.EF_ZIP64_RHO),r.offset===Qe.EF_ZIP64_OR_32&&(r.offset=k)),b.length>=Qe.EF_ZIP64_DSN+4&&(R=b.readUInt32LE(Qe.EF_ZIP64_DSN),r.diskNumStart===Qe.EF_ZIP64_OR_16&&(r.diskNumStart=R))}return{get entryName(){return d.decode(n)},get rawEntryName(){return n},set entryName(b){n=Re.toBuffer(b,d.encode);var v=n[n.length-1];s=v===47||v===92,r.fileNameLength=n.length},get efs(){return typeof c=="function"?c(this.entryName):c},get extra(){return a},set extra(b){a=b,r.extraLength=b.length,g(b)},get comment(){return d.decode(i)},set comment(b){if(i=Re.toBuffer(b,d.encode),r.commentLength=i.length,i.length>65535)throw Re.Errors.COMMENT_TOO_LONG()},get name(){var b=d.decode(n);return s?b.substr(b.length-1).split("/").pop():b.split("/").pop()},get isDirectory(){return s},getCompressedData:function(){return h(!1,null)},getCompressedDataAsync:function(b){h(!0,b)},setData:function(b){o=Re.toBuffer(b,Re.decoder.encode),!s&&o.length?(r.size=o.length,r.method=Re.Constants.DEFLATED,r.crc=Re.crc32(b),r.changed=!0):r.method=Re.Constants.STORED},getData:function(b){return r.changed?o:y(!1,null,b)},getDataAsync:function(b,v){r.changed?b(o):y(!0,b,v)},set attr(b){r.attr=b},get attr(){return r.attr},set header(b){r.loadFromBinary(b)},get header(){return r},packCentralHeader:function(){r.flags_efs=this.efs,r.extraLength=a.length;var b=r.centralHeaderToBinary(),v=Re.Constants.CENHDR;return n.copy(b,v),v+=n.length,a.copy(b,v),v+=r.extraLength,i.copy(b,v),b},packLocalHeader:function(){let b=0;r.flags_efs=this.efs,r.extraLocalLength=l.length;let v=r.localHeaderToBinary(),A=Buffer.alloc(v.length+n.length+r.extraLocalLength);return v.copy(A,b),b+=v.length,n.copy(A,b),b+=n.length,l.copy(A,b),b+=l.length,A},toJSON:function(){let b=function(v){return"<"+(v&&v.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:r.toJSON(),compressedData:b(e),data:b(o)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var bW=w((Wqe,yW)=>{var mW=Rx(),sTe=Tx(),kt=Fa();yW.exports=function(t,e){var r=[],n={},i=Buffer.alloc(0),s=new sTe.MainHeader,o=!1,a=null;let l=new Set,c=e,{noSort:u,decoder:d}=c;t?y(c.readEntries):o=!0;function p(){let m=new Set;for(let g of Object.keys(n)){let E=g.split("/");if(E.pop(),!!E.length)for(let b=0;b<E.length;b++){let v=E.slice(0,b+1).join("/")+"/";m.add(v)}}for(let g of m)if(!(g in n)){let E=new mW(c);E.entryName=g,E.attr=16,E.temporary=!0,r.push(E),n[E.entryName]=E,l.add(E)}}function f(){if(o=!0,n={},s.diskEntries>(t.length-s.offset)/kt.Constants.CENHDR)throw kt.Errors.DISK_ENTRY_TOO_LARGE();r=new Array(s.diskEntries);for(var m=s.offset,g=0;g<r.length;g++){var E=m,b=new mW(c,t);b.header=t.slice(E,E+=kt.Constants.CENHDR),b.entryName=t.slice(E,E+=b.header.fileNameLength),b.header.extraLength&&(b.extra=t.slice(E,E+=b.header.extraLength)),b.header.commentLength&&(b.comment=t.slice(E,E+b.header.commentLength)),m+=b.header.centralHeaderSize,r[g]=b,n[b.entryName]=b}l.clear(),p()}function y(m){var g=t.length-kt.Constants.ENDHDR,E=Math.max(0,g-65535),b=E,v=t.length,A=-1,k=0;for(typeof c.trailingSpace=="boolean"&&c.trailingSpace&&(E=0),g;g>=b;g--)if(t[g]===80){if(t.readUInt32LE(g)===kt.Constants.ENDSIG){A=g,k=g,v=g+kt.Constants.ENDHDR,b=g-kt.Constants.END64HDR;continue}if(t.readUInt32LE(g)===kt.Constants.END64SIG){b=E;continue}if(t.readUInt32LE(g)===kt.Constants.ZIP64SIG){A=g,v=g+kt.readBigUInt64LE(t,g+kt.Constants.ZIP64SIZE)+kt.Constants.ZIP64LEAD;break}}if(A==-1)throw kt.Errors.INVALID_FORMAT();s.loadFromBinary(t.slice(A,v)),s.commentLength&&(i=t.slice(k+kt.Constants.ENDHDR)),m&&f()}function h(){r.length>1&&!u&&r.sort((m,g)=>m.entryName.toLowerCase().localeCompare(g.entryName.toLowerCase()))}return{get entries(){return o||f(),r.filter(m=>!l.has(m))},get comment(){return d.decode(i)},set comment(m){i=kt.toBuffer(m,d.encode),s.commentLength=i.length},getEntryCount:function(){return o?r.length:s.diskEntries},forEach:function(m){this.entries.forEach(m)},getEntry:function(m){return o||f(),n[m]||null},setEntry:function(m){o||f(),r.push(m),n[m.entryName]=m,s.totalEntries=r.length},deleteFile:function(m,g=!0){o||f();let E=n[m];this.getEntryChildren(E,g).map(v=>v.entryName).forEach(this.deleteEntry)},deleteEntry:function(m){o||f();let g=n[m],E=r.indexOf(g);E>=0&&(r.splice(E,1),delete n[m],s.totalEntries=r.length)},getEntryChildren:function(m,g=!0){if(o||f(),typeof m=="object")if(m.isDirectory&&g){let E=[],b=m.entryName;for(let v of r)v.entryName.startsWith(b)&&E.push(v);return E}else return[m];return[]},getChildCount:function(m){if(m&&m.isDirectory){let g=this.getEntryChildren(m);return g.includes(m)?g.length-1:g.length}return 0},compressToBuffer:function(){o||f(),h();let m=[],g=[],E=0,b=0;s.size=0,s.offset=0;let v=0;for(let R of this.entries){let N=R.getCompressedData();R.header.offset=b;let I=R.packLocalHeader(),P=I.length+N.length;b+=P,m.push(I),m.push(N);let D=R.packCentralHeader();g.push(D),s.size+=D.length,E+=P+D.length,v++}E+=s.mainHeaderSize,s.offset=b,s.totalEntries=v,b=0;let A=Buffer.alloc(E);for(let R of m)R.copy(A,b),b+=R.length;for(let R of g)R.copy(A,b),b+=R.length;let k=s.toBinary();return i&&i.copy(k,kt.Constants.ENDHDR),k.copy(A,b),t=A,o=!1,A},toAsyncBuffer:function(m,g,E,b){try{o||f(),h();let v=[],A=[],k=0,R=0,N=0;s.size=0,s.offset=0;let I=function(P){if(P.length>0){let D=P.shift(),F=D.entryName+D.extra.toString();E&&E(F),D.getCompressedDataAsync(function(B){b&&b(F),D.header.offset=R;let te=D.packLocalHeader(),ye=te.length+B.length;R+=ye,v.push(te),v.push(B);let de=D.packCentralHeader();A.push(de),s.size+=de.length,k+=ye+de.length,N++,I(P)})}else{k+=s.mainHeaderSize,s.offset=R,s.totalEntries=N,R=0;let D=Buffer.alloc(k);v.forEach(function(B){B.copy(D,R),R+=B.length}),A.forEach(function(B){B.copy(D,R),R+=B.length});let F=s.toBinary();i&&i.copy(F,kt.Constants.ENDHDR),F.copy(D,R),t=D,o=!1,m(D)}};I(Array.from(this.entries))}catch(v){g(v)}}}}});var vW=w((zqe,_W)=>{var Ye=Fa(),Xe=require("path"),oTe=Rx(),aTe=bW(),Us=(...t)=>Ye.findLast(t,e=>typeof e=="boolean"),wW=(...t)=>Ye.findLast(t,e=>typeof e=="string"),lTe=(...t)=>Ye.findLast(t,e=>typeof e=="function"),cTe={noSort:!1,readEntries:!1,method:Ye.Constants.NONE,fs:null};_W.exports=function(t,e){let r=null,n=Object.assign(Object.create(null),cTe);t&&typeof t=="object"&&(t instanceof Uint8Array||(Object.assign(n,t),t=n.input?n.input:void 0,n.input&&delete n.input),Buffer.isBuffer(t)&&(r=t,n.method=Ye.Constants.BUFFER,t=void 0)),Object.assign(n,e);let i=new Ye(n);if((typeof n.decoder!="object"||typeof n.decoder.encode!="function"||typeof n.decoder.decode!="function")&&(n.decoder=Ye.decoder),t&&typeof t=="string")if(i.fs.existsSync(t))n.method=Ye.Constants.FILE,n.filename=t,r=i.fs.readFileSync(t);else throw Ye.Errors.INVALID_FILENAME();let s=new aTe(r,n),{canonical:o,sanitize:a,zipnamefix:l}=Ye;function c(f){if(f&&s){var y;if(typeof f=="string"&&(y=s.getEntry(Xe.posix.normalize(f))),typeof f=="object"&&typeof f.entryName<"u"&&typeof f.header<"u"&&(y=s.getEntry(f.entryName)),y)return y}return null}function u(f){let{join:y,normalize:h,sep:m}=Xe.posix;return y(".",h(m+f.split("\\").join(m)+m))}function d(f){return f instanceof RegExp?(function(y){return function(h){return y.test(h)}})(f):typeof f!="function"?()=>!0:f}let p=(f,y)=>{let h=y.slice(-1);return h=h===i.sep?i.sep:"",Xe.relative(f,y)+h};return{readFile:function(f,y){var h=c(f);return h&&h.getData(y)||null},childCount:function(f){let y=c(f);if(y)return s.getChildCount(y)},readFileAsync:function(f,y){var h=c(f);h?h.getDataAsync(y):y(null,"getEntry failed for:"+f)},readAsText:function(f,y){var h=c(f);if(h){var m=h.getData();if(m&&m.length)return m.toString(y||"utf8")}return""},readAsTextAsync:function(f,y,h){var m=c(f);m?m.getDataAsync(function(g,E){if(E){y(g,E);return}g&&g.length?y(g.toString(h||"utf8")):y("")}):y("")},deleteFile:function(f,y=!0){var h=c(f);h&&s.deleteFile(h.entryName,y)},deleteEntry:function(f){var y=c(f);y&&s.deleteEntry(y.entryName)},addZipComment:function(f){s.comment=f},getZipComment:function(){return s.comment||""},addZipEntryComment:function(f,y){var h=c(f);h&&(h.comment=y)},getZipEntryComment:function(f){var y=c(f);return y&&y.comment||""},updateFile:function(f,y){var h=c(f);h&&h.setData(y)},addLocalFile:function(f,y,h,m){if(i.fs.existsSync(f)){y=y?u(y):"";let g=Xe.win32.basename(Xe.win32.normalize(f));y+=h||g;let E=i.fs.statSync(f),b=E.isFile()?i.fs.readFileSync(f):Buffer.alloc(0);E.isDirectory()&&(y+=i.sep),this.addFile(y,b,m,E)}else throw Ye.Errors.FILE_NOT_FOUND(f)},addLocalFileAsync:function(f,y){f=typeof f=="object"?f:{localPath:f};let h=Xe.resolve(f.localPath),{comment:m}=f,{zipPath:g,zipName:E}=f,b=this;i.fs.stat(h,function(v,A){if(v)return y(v,!1);g=g?u(g):"";let k=Xe.win32.basename(Xe.win32.normalize(h));if(g+=E||k,A.isFile())i.fs.readFile(h,function(R,N){return R?y(R,!1):(b.addFile(g,N,m,A),setImmediate(y,void 0,!0))});else if(A.isDirectory())return g+=i.sep,b.addFile(g,Buffer.alloc(0),m,A),setImmediate(y,void 0,!0)})},addLocalFolder:function(f,y,h){if(h=d(h),y=y?u(y):"",f=Xe.normalize(f),i.fs.existsSync(f)){let m=i.findFiles(f),g=this;if(m.length)for(let E of m){let b=Xe.join(y,p(f,E));h(b)&&g.addLocalFile(E,Xe.dirname(b))}}else throw Ye.Errors.FILE_NOT_FOUND(f)},addLocalFolderAsync:function(f,y,h,m){m=d(m),h=h?u(h):"",f=Xe.normalize(f);var g=this;i.fs.open(f,"r",function(E){if(E&&E.code==="ENOENT")y(void 0,Ye.Errors.FILE_NOT_FOUND(f));else if(E)y(void 0,E);else{var b=i.findFiles(f),v=-1,A=function(){if(v+=1,v<b.length){var k=b[v],R=p(f,k).split("\\").join("/");R=R.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),m(R)?i.fs.stat(k,function(N,I){N&&y(void 0,N),I.isFile()?i.fs.readFile(k,function(P,D){P?y(void 0,P):(g.addFile(h+R,D,"",I),A())}):(g.addFile(h+R+"/",Buffer.alloc(0),"",I),A())}):process.nextTick(()=>{A()})}else y(!0,void 0)};A()}})},addLocalFolderAsync2:function(f,y){let h=this;f=typeof f=="object"?f:{localPath:f},localPath=Xe.resolve(u(f.localPath));let{zipPath:m,filter:g,namefix:E}=f;g instanceof RegExp?g=(function(A){return function(k){return A.test(k)}})(g):typeof g!="function"&&(g=function(){return!0}),m=m?u(m):"",E=="latin1"&&(E=A=>A.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof E!="function"&&(E=A=>A);let b=A=>Xe.join(m,E(p(localPath,A))),v=A=>Xe.win32.basename(Xe.win32.normalize(E(A)));i.fs.open(localPath,"r",function(A){A&&A.code==="ENOENT"?y(void 0,Ye.Errors.FILE_NOT_FOUND(localPath)):A?y(void 0,A):i.findFilesAsync(localPath,function(k,R){if(k)return y(k);R=R.filter(N=>g(b(N))),R.length||y(void 0,!1),setImmediate(R.reverse().reduce(function(N,I){return function(P,D){if(P||D===!1)return setImmediate(N,P,!1);h.addLocalFileAsync({localPath:I,zipPath:Xe.dirname(b(I)),zipName:v(I)},N)}},y))})})},addLocalFolderPromise:function(f,y){return new Promise((h,m)=>{this.addLocalFolderAsync2(Object.assign({localPath:f},y),(g,E)=>{g&&m(g),E&&h(this)})})},addFile:function(f,y,h,m){f=l(f);let g=c(f),E=g!=null;E||(g=new oTe(n),g.entryName=f),g.comment=h||"";let b=typeof m=="object"&&m instanceof i.fs.Stats;b&&(g.header.time=m.mtime);var v=g.isDirectory?16:0;let A=g.isDirectory?16384:32768;return b?A|=4095&m.mode:typeof m=="number"?A|=4095&m:A|=g.isDirectory?493:420,v=(v|A<<16)>>>0,g.attr=v,g.setData(y),E||s.setEntry(g),g},getEntries:function(f){return s.password=f,s?s.entries:[]},getEntry:function(f){return c(f)},getEntryCount:function(){return s.getEntryCount()},forEach:function(f){return s.forEach(f)},extractEntryTo:function(f,y,h,m,g,E){m=Us(!1,m),g=Us(!1,g),h=Us(!0,h),E=wW(g,E);var b=c(f);if(!b)throw Ye.Errors.NO_ENTRY();var v=o(b.entryName),A=a(y,E&&!b.isDirectory?E:h?v:Xe.basename(v));if(b.isDirectory){var k=s.getEntryChildren(b);return k.forEach(function(I){if(I.isDirectory)return;var P=I.getData();if(!P)throw Ye.Errors.CANT_EXTRACT_FILE();var D=o(I.entryName),F=a(y,h?D:Xe.basename(D));let B=g?I.header.fileAttr:void 0;i.writeFileTo(F,P,m,B)}),!0}var R=b.getData(s.password);if(!R)throw Ye.Errors.CANT_EXTRACT_FILE();if(i.fs.existsSync(A)&&!m)throw Ye.Errors.CANT_OVERRIDE();let N=g?f.header.fileAttr:void 0;return i.writeFileTo(A,R,m,N),!0},test:function(f){if(!s)return!1;for(var y in s.entries)try{if(y.isDirectory)continue;var h=s.entries[y].getData(f);if(!h)return!1}catch{return!1}return!0},extractAllTo:function(f,y,h,m){if(h=Us(!1,h),m=wW(h,m),y=Us(!1,y),!s)throw Ye.Errors.NO_ZIP();s.entries.forEach(function(g){var E=a(f,o(g.entryName));if(g.isDirectory){i.makeDir(E);return}var b=g.getData(m);if(!b)throw Ye.Errors.CANT_EXTRACT_FILE();let v=h?g.header.fileAttr:void 0;i.writeFileTo(E,b,y,v);try{i.fs.utimesSync(E,g.header.time,g.header.time)}catch{throw Ye.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(f,y,h,m){if(m=lTe(y,h,m),h=Us(!1,h),y=Us(!1,y),!m)return new Promise((A,k)=>{this.extractAllToAsync(f,y,h,function(R){R?k(R):A(this)})});if(!s){m(Ye.Errors.NO_ZIP());return}f=Xe.resolve(f);let g=A=>a(f,Xe.normalize(o(A.entryName))),E=(A,k)=>new Error(A+': "'+k+'"'),b=[],v=[];s.entries.forEach(A=>{A.isDirectory?b.push(A):v.push(A)});for(let A of b){let k=g(A),R=h?A.header.fileAttr:void 0;try{i.makeDir(k),R&&i.fs.chmodSync(k,R),i.fs.utimesSync(k,A.header.time,A.header.time)}catch{m(E("Unable to create folder",k))}}v.reverse().reduce(function(A,k){return function(R){if(R)A(R);else{let N=Xe.normalize(o(k.entryName)),I=a(f,N);k.getDataAsync(function(P,D){if(D)A(D);else if(!P)A(Ye.Errors.CANT_EXTRACT_FILE());else{let F=h?k.header.fileAttr:void 0;i.writeFileToAsync(I,P,y,F,function(B){B||A(E("Unable to write file",I)),i.fs.utimes(I,k.header.time,k.header.time,function(te){te?A(E("Unable to set times",I)):A()})})}})}}},m)()},writeZip:function(f,y){if(arguments.length===1&&typeof f=="function"&&(y=f,f=""),!f&&n.filename&&(f=n.filename),!!f){var h=s.compressToBuffer();if(h){var m=i.writeFileTo(f,h,!0);typeof y=="function"&&y(m?null:new Error("failed"),"")}}},writeZipPromise:function(f,y){let{overwrite:h,perm:m}=Object.assign({overwrite:!0},y);return new Promise((g,E)=>{!f&&n.filename&&(f=n.filename),f||E("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(b=>{let v=A=>A?g(A):E("ADM-ZIP: Wasn't able to write zip file");i.writeFileToAsync(f,b,h,m,v)},E)})},toBufferPromise:function(){return new Promise((f,y)=>{s.toAsyncBuffer(f,y)})},toBuffer:function(f,y,h,m){return typeof f=="function"?(s.toAsyncBuffer(f,y,h,m),null):s.compressToBuffer()}}}});var yTe={};Ka(yTe,{activate:()=>fTe,deactivate:()=>mTe});module.exports=Ya(yTe);var X=st(require("vscode")),wr=st(require("fs")),Zt=st(require("path")),xW=st(T0());var Og=st(require("fs")),OU=st(require("path")),ox=st(NU());var Cg=class{constructor(e){this.cache=new Map;this.resolving=new Set;this.spec=e}resolve(e){if(!e||typeof e!="object")return e;let r=e;if(!("$ref"in r))return this.resolveNested(r);let n=r.$ref;if(this.cache.has(n))return this.cache.get(n);if(this.resolving.has(n))return console.warn(`Circular reference detected: ${n}`),{type:"object",description:`Circular ref: ${n}`};this.resolving.add(n);try{let i=this.resolveRef(n),s=this.resolve(i);return this.cache.set(n,s),s}finally{this.resolving.delete(n)}}resolveRef(e){if(!e.startsWith("#/"))return console.warn(`External refs not supported: ${e}`),{type:"object"};let r=e.slice(2).split("/"),n=this.spec;for(let i of r){if(!n||typeof n!="object")return console.warn(`Cannot resolve ref: ${e}`),{type:"object"};n=n[i]}return n||(console.warn(`Ref not found: ${e}`),{type:"object"})}resolveNested(e){let r={...e};if(r.properties&&typeof r.properties=="object"){let n=r.properties,i={};for(let[s,o]of Object.entries(n))i[s]=this.resolve(o);r.properties=i}if(r.items&&(r.items=this.resolve(r.items)),Array.isArray(r.allOf)){let n=this.mergeAllOf(r.allOf);delete r.allOf,Object.assign(r,n)}if(Array.isArray(r.oneOf)&&r.oneOf.length>0){let n=this.resolve(r.oneOf[0]);delete r.oneOf,Object.assign(r,n)}if(Array.isArray(r.anyOf)&&r.anyOf.length>0){let n=this.resolve(r.anyOf[0]);delete r.anyOf,Object.assign(r,n)}return r.additionalProperties&&typeof r.additionalProperties=="object"&&(r.additionalProperties=this.resolve(r.additionalProperties)),r}mergeAllOf(e){let r={type:"object",properties:{},required:[]};for(let n of e){let i=this.resolve(n);i.properties&&Object.assign(r.properties,i.properties),Array.isArray(i.required)&&r.required.push(...i.required);for(let[s,o]of Object.entries(i))s!=="properties"&&s!=="required"&&o!==void 0&&(r[s]=o)}return r.required=[...new Set(r.required)],r}};var kg=class{constructor(e,r=5){this.resolver=e,this.maxDepth=r}visit(e,r="",n=0){if(n>this.maxDepth)return[];let i=this.resolver.resolve(e);if(!i)return[];let s=this.getFieldType(i),o=[];switch(s){case"object":o.push(...this.visitObject(i,r,n));break;case"array":o.push(...this.visitArray(i,r,n));break;default:r&&o.push(this.createField(r,i))}return o}visitObject(e,r,n){let i=[],s=e.properties,o=e.required||[];if(!s)return i;for(let[a,l]of Object.entries(s)){let c=r?`${r}.${a}`:a,u=this.resolver.resolve(l),d=this.getFieldType(u),p=this.createField(c,u,a,o.includes(a));if(i.push(p),d==="object"&&u.properties){let f=this.visitObject(u,c,n+1);p.nested=f,i.push(...f)}else if(d==="array"){let f=this.visitArray(u,c,n+1);p.nested=f,i.push(...f)}}return i}visitArray(e,r,n){let i=[],s=e.items;if(!s)return i;let o=this.resolver.resolve(s),a=this.getFieldType(o),l=`${r}[0]`;return a==="object"&&o.properties?i.push(...this.visitObject(o,l,n+1)):a!=="object"&&i.push(this.createField(l,o)),i}createField(e,r,n,i=!1){return{name:n||e.split(".").pop()||e,path:e,fieldType:this.getFieldType(r),format:r.format,required:i,nullable:r.nullable||!1,enumValues:Array.isArray(r.enum)?r.enum.map(s=>String(s)):void 0,description:r.description,minimum:r.minimum,maximum:r.maximum,exclusiveMinimum:r.exclusiveMinimum,exclusiveMaximum:r.exclusiveMaximum,minLength:r.minLength,maxLength:r.maxLength,pattern:r.pattern,minItems:r.minItems,maxItems:r.maxItems,uniqueItems:r.uniqueItems,example:r.example}}getFieldType(e){switch(e.type){case"string":return"string";case"integer":return"integer";case"number":return"number";case"boolean":return"boolean";case"array":return"array";default:return e.properties?"object":"object"}}};var zEe=["200","201","202","204"],HEe=["get","post","put","patch","delete"],Fs=class{constructor(e){this.spec=this.loadSpec(e),this.resolver=new Cg(this.spec),this.visitor=new kg(this.resolver)}parse(){let e=this.spec.info||{};return{title:e.title||"API",version:e.version||"1.0.0",baseUrl:this.extractBaseUrl(),endpoints:this.parseEndpoints()}}loadSpec(e){if(typeof e=="object")return e;if(Og.existsSync(e)){let r=Og.readFileSync(e,"utf-8"),n=OU.extname(e).toLowerCase();return n===".yaml"||n===".yml"?ox.parse(r):JSON.parse(r)}try{return JSON.parse(e)}catch{return ox.parse(e)}}extractBaseUrl(){let e=this.spec.servers;if(e&&e.length>0)return e[0].url;let r=this.spec.host,n=this.spec.basePath||"",i=this.spec.schemes||["https"];return r?`${i[0]}://${r}${n}`:"http://localhost:8080"}parseEndpoints(){let e=this.spec.paths||{},r=[];for(let[n,i]of Object.entries(e))if(!(!i||typeof i!="object"))for(let s of HEe){let o=i[s];if(!o)continue;let a=this.parseOperation(n,s.toUpperCase(),o,i);r.push(a)}return r}parseOperation(e,r,n,i){let s=this.parseParameters(n,i),{schema:o,example:a,required:l}=this.parseRequestBody(n),{statusCode:c,fields:u,hasSchema:d}=this.parseResponse(n),p=this.parseSecurity(n);return{method:r,path:e,operationId:n.operationId,summary:n.summary,description:n.description,tags:n.tags,pathParams:s.filter(f=>f.in==="path"),queryParams:s.filter(f=>f.in==="query"),headerParams:s.filter(f=>f.in==="header"),formDataParams:(()=>{let f=s.filter(y=>y.in==="formData");return f.length>0&&console.log("[Parser] formDataParams for",e,":",f.map(y=>y.name)),f})(),consumes:n.consumes,requestBodySchema:o,requestBodyExample:a,requestBodyRequired:l,successStatus:c,responseFields:u,hasResponseSchema:d,security:p}}parseParameters(e,r){let n=[],i=[...r.parameters||[],...e.parameters||[]];for(let s of i){let o=this.resolver.resolve(s);if(!o||!o.name)continue;o.in==="formData"&&console.log("[Parser] Found formData param:",o.name,"type:",o.type);let a=o.schema||{type:o.type||"string",format:o.format,enum:o.enum},l=this.resolver.resolve(a);n.push({name:o.name,in:o.in,required:o.required||o.in==="path",schema:{name:o.name,path:o.name,fieldType:this.getFieldType(l),format:l.format,required:o.required||!1,nullable:!1,enumValues:Array.isArray(l.enum)?l.enum.map(c=>String(c)):void 0},example:o.example})}return n}getFieldType(e){switch(e.type){case"string":return"string";case"integer":return"integer";case"number":return"number";case"boolean":return"boolean";case"array":return"array";default:return e.properties?"object":"object"}}parseRequestBody(e){let r=e.requestBody;if(r)return this.parseOpenAPI3RequestBody(r);let n=e.parameters||[];console.log("[Parser] parseRequestBody - looking for body param in",n.length,"parameters");for(let i of n){let s=this.resolver.resolve(i);if(console.log("[Parser] parseRequestBody - param in:",s?.in),s&&s.in==="body")return console.log("[Parser] parseRequestBody - found body param!"),this.parseSwagger2BodyParam(s)}return console.log("[Parser] parseRequestBody - no body param found"),{schema:void 0,example:void 0,required:!1}}parseOpenAPI3RequestBody(e){let r=this.resolver.resolve(e),i=(r.content||{})["application/json"];if(!i?.schema)return{schema:void 0,example:void 0,required:r.required||!1};let s=this.resolver.resolve(i.schema),o=this.visitor.visit(s),a;if(i.example!==void 0)a=i.example;else if(i.examples&&typeof i.examples=="object"){let l=i.examples,c=Object.values(l)[0];c?.value!==void 0&&(a=c.value)}else s.example!==void 0&&(a=s.example);return{schema:o,example:a,required:r.required||!1}}parseSwagger2BodyParam(e){let r=e.schema;if(console.log("[Parser] parseSwagger2BodyParam - paramSchema:",JSON.stringify(r)),!r)return{schema:void 0,example:void 0,required:e.required||!1};let n=this.resolver.resolve(r);console.log("[Parser] parseSwagger2BodyParam - resolved properties:",n?.properties?Object.keys(n.properties):"none");let i=this.visitor.visit(n);console.log("[Parser] parseSwagger2BodyParam - fields count:",i.length,"fields:",i.map(o=>o.name));let s;return n.example!==void 0&&(s=n.example),{schema:i,example:s,required:e.required||!1}}parseResponse(e){let r=e.responses||{},n,i=200;for(let d of zEe)if(r[d]){n=this.resolver.resolve(r[d]),i=parseInt(d,10);break}if(!n)return{statusCode:200,fields:[],hasSchema:!1};let s=n.schema;if(s){let d=this.resolver.resolve(s);if(!!(d.properties||d.items||d.type)){let f=this.visitor.visit(d);return{statusCode:i,fields:f,hasSchema:f.length>0}}}let a=(n.content||{})["application/json"];if(!a?.schema)return{statusCode:i,fields:[],hasSchema:!1};let l=this.resolver.resolve(a.schema);if(!!!(l.properties||l.items||l.type))return{statusCode:i,fields:[],hasSchema:!1};let u=this.visitor.visit(l);return{statusCode:i,fields:u,hasSchema:u.length>0}}parseSecurity(e){let r=e.security||this.spec.security;if(!r||r.length===0)return;let n=this.spec.components?.securitySchemes||this.spec.securityDefinitions||{},i=[];for(let s of r)for(let o of Object.keys(s)){let a=n[o];a&&i.push({type:a.type,scheme:a.scheme,name:a.name,in:a.in})}return i.length>0?i:void 0}};var MU=["' OR '1'='1","1; DROP TABLE users--","' UNION SELECT * FROM users--"],VEe=["<script>alert('xss')</script>","javascript:alert(1)","<img src=x onerror=alert(1)>"],qU=["invalid_cursor_abc123","!!!NOT_A_CURSOR!!!","../../../etc/passwd"];function _u(t){let e=[];return t.security&&t.security.length>0&&(e.push(...GEe(t)),e.push(...ZEe(t))),t.pathParams.length>0&&e.push(...KEe(t)),t.queryParams.length>0&&(e.push(...YEe(t)),e.push(...QEe(t))),t.requestBodySchema&&t.requestBodySchema.length>0&&e.push(...JEe(t)),["POST","PUT","PATCH"].includes(t.method)&&e.push(...XEe(t)),e.push(exe(t)),e}function GEe(t){let e=[];return e.push({category:"auth",name:"no_auth_token",description:"Request without authentication should return 401",modification:{removeAuth:!0},expectedStatus:401}),e.push({category:"auth",name:"invalid_auth_token",description:"Request with invalid token should return 401",modification:{invalidAuth:"Bearer invalid_token_12345"},expectedStatus:401}),e.push({category:"auth",name:"malformed_auth_header",description:"Request with malformed auth header should return 401",modification:{invalidAuth:"NotBearer token"},expectedStatus:401}),e}function KEe(t){let e=[];for(let r of t.pathParams)e.push({category:"validation",name:`path_${r.name}_not_found`,description:`Non-existent ${r.name} should return 404`,modification:{pathParamOverride:{[r.name]:"non_existent_id_99999999"}},expectedStatus:404}),(r.schema.fieldType==="integer"||r.schema.format==="uuid")&&e.push({category:"validation",name:`path_${r.name}_invalid_format`,description:`Invalid format for ${r.name} should return 400`,modification:{pathParamOverride:{[r.name]:"not-a-valid-format!@#"}},expectedStatus:400}),e.push({category:"injection",name:`path_${r.name}_sql_injection`,description:`SQL injection in ${r.name} should be rejected`,modification:{pathParamOverride:{[r.name]:MU[0]}},expectedStatus:400,expectedContains:void 0});return e}function YEe(t){let e=[],r=t.queryParams.find(s=>["limit","page_size","pageSize","per_page","perPage"].includes(s.name)),n=t.queryParams.find(s=>["offset","page","skip"].includes(s.name));r&&(e.push({category:"pagination",name:"negative_limit",description:"Negative limit should return 400",modification:{queryParamOverride:{[r.name]:"-1"}},expectedStatus:400}),e.push({category:"pagination",name:"excessive_limit",description:"Excessively large limit should return 400 or be capped",modification:{queryParamOverride:{[r.name]:"999999999"}},expectedStatus:400})),n&&e.push({category:"pagination",name:"negative_offset",description:"Negative offset should return 400",modification:{queryParamOverride:{[n.name]:"-1"}},expectedStatus:400});let i=t.queryParams.filter(s=>s.schema.fieldType==="string"&&!s.schema.enumValues);if(i.length>0){let s=i[0];e.push({category:"injection",name:`query_${s.name}_xss`,description:`XSS payload in ${s.name} should be sanitized`,modification:{queryParamOverride:{[s.name]:VEe[0]}},expectedStatus:400})}return e}function JEe(t){let e=[];if(!["POST","PUT","PATCH"].includes(t.method))return e;t.requestBodyRequired&&(e.push({category:"validation",name:"empty_request_body",description:"Empty request body should return 400",modification:{bodyOverride:{}},expectedStatus:400}),e.push({category:"validation",name:"invalid_json_body",description:"Invalid JSON should return 400",modification:{bodyOverride:"{invalid json}"},expectedStatus:400}));let r=t.requestBodySchema?.filter(i=>i.required)||[];if(r.length>0){let i=r[0];e.push({category:"validation",name:`missing_required_${i.name}`,description:`Missing required field '${i.name}' should return 400`,modification:{bodyOverride:{_missing_field:i.name}},expectedStatus:400})}let n=t.requestBodySchema?.filter(i=>i.fieldType==="string")||[];if(n.length>0){let i=n[0];e.push({category:"validation",name:`wrong_type_${i.name}`,description:`Wrong type for '${i.name}' should return 400`,modification:{bodyOverride:{[i.name]:12345}},expectedStatus:400})}if(n.length>0){let i=n[0];e.push({category:"injection",name:`body_${i.name}_sql_injection`,description:`SQL injection in '${i.name}' should be rejected`,modification:{bodyOverride:{[i.name]:MU[0]}},expectedStatus:400})}return e}function ZEe(t){let e=[];return t.security?.find(n=>n.type==="oauth2")&&(e.push({category:"scope",name:"wrong_oauth_scope",description:"Request with wrong OAuth2 scope should return 403",modification:{wrongScope:"wrong:scope:value"},expectedStatus:403}),e.push({category:"scope",name:"insufficient_scope",description:"Request with insufficient scope should return 403",modification:{wrongScope:"read:only"},expectedStatus:403})),e}function QEe(t){let e=[],r=t.queryParams.find(n=>["cursor","next_cursor","page_token","pageToken","after","before"].includes(n.name));return r&&(e.push({category:"pagination",name:"invalid_cursor_format",description:"Invalid cursor format should return 400",modification:{queryParamOverride:{[r.name]:qU[0]}},expectedStatus:400}),e.push({category:"pagination",name:"malformed_cursor_path_traversal",description:"Path traversal in cursor should return 400",modification:{queryParamOverride:{[r.name]:qU[2]}},expectedStatus:400}),e.push({category:"pagination",name:"empty_cursor",description:"Empty cursor should return 400 or be ignored",modification:{queryParamOverride:{[r.name]:""}},expectedStatus:400})),e}function XEe(t){let e=[];e.push({category:"content_type",name:"wrong_content_type_xml",description:"XML content type should return 415",modification:{overrideContentType:"application/xml",bodyOverride:"<xml>not json</xml>"},expectedStatus:415}),e.push({category:"content_type",name:"wrong_content_type_text",description:"Plain text content type should return 415",modification:{overrideContentType:"text/plain",bodyOverride:"plain text body"},expectedStatus:415}),t.requestBodyRequired&&e.push({category:"content_type",name:"missing_content_type",description:"Missing content type header should return 415 or 400",modification:{overrideContentType:"",bodyOverride:"{}"},expectedStatus:415});let r=t.consumes?.includes("application/x-www-form-urlencoded"),n=!t.consumes||t.consumes.includes("application/json");return r&&!n&&e.push({category:"content_type",name:"json_when_form_expected",description:"JSON content when form-data expected should return 415",modification:{overrideContentType:"application/json",bodyOverride:{test:"value"}},expectedStatus:415}),n&&!r&&e.push({category:"content_type",name:"form_when_json_expected",description:"Form-data content when JSON expected should return 415",modification:{overrideContentType:"application/x-www-form-urlencoded",useFormData:!0,bodyOverride:"key=value"},expectedStatus:415}),e}function exe(t){let e=["GET","POST","PUT","PATCH","DELETE"].filter(n=>n!==t.method),r=t.method==="GET"?"DELETE":"GET";return{category:"method",name:"method_not_allowed",description:`${r} on ${t.method}-only endpoint should return 405`,modification:{overrideMethod:r},expectedStatus:405}}var Ai=class{};var qg=class{forField(e,r="data"){let n=this.buildAccessor(e.path,r);if(e.enumValues&&e.enumValues.length>0)return this.oneOf(n,e.enumValues);if(e.format){let i=this.forFormat(n,e.format);if(i)return i}return this.forType(n,e.fieldType,e.nullable)}arrayNotEmpty(e,r="data"){return`assert len(${this.buildAccessor(e,r)}) > 0, "Expected non-empty array at ${e}"`}fromAssertion(e,r="data"){let n=this.buildAccessor(e.path,r);switch(e.matcher){case"notNull":return`assert ${n} is not None`;case"isNull":return`assert ${n} is None`;case"equals":return`assert ${n} == ${this.toPythonValue(e.value)}`;case"notEquals":return`assert ${n} != ${this.toPythonValue(e.value)}`;case"contains":return`assert "${e.value}" in ${n}`;case"matchesPattern":return`assert re.match(r"${e.value}", ${n})`;case"oneOf":let i=e.value;return`assert ${n} in ${this.toPythonList(i)}`;case"isType":return`assert isinstance(${n}, ${this.toPythonType(e.value)})`;case"notEmpty":return`assert len(${n}) > 0`;case"isEmpty":return`assert len(${n}) == 0`;case"greaterThan":return`assert ${n} > ${e.value}`;case"greaterThanOrEqual":return`assert ${n} >= ${e.value}`;case"lessThan":return`assert ${n} < ${e.value}`;case"lessThanOrEqual":return`assert ${n} <= ${e.value}`;case"hasSize":return`assert len(${n}) == ${e.value}`;case"hasSizeGreaterThan":return`assert len(${n}) > ${e.value}`;case"hasSizeLessThan":return`assert len(${n}) < ${e.value}`;case"hasMinLength":return`assert len(${n}) >= ${e.value}`;case"hasMaxLength":return`assert len(${n}) <= ${e.value}`;default:return`assert ${n} is not None`}}buildAccessor(e,r){let n=e.split(/\.|\[(\d+)\]/).filter(Boolean),i=r;for(let s of n)/^\d+$/.test(s)?i+=`[${s}]`:i+=`["${s}"]`;return i}oneOf(e,r){return`assert ${e} in ${this.toPythonList(r)}`}forFormat(e,r){return{uuid:`assert re.match(r"^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$", ${e}, re.IGNORECASE)`,email:`assert "@" in ${e}`,uri:`assert ${e}.startswith(("http://", "https://"))`,url:`assert ${e}.startswith(("http://", "https://"))`,date:`assert re.match(r"^\\d{4}-\\d{2}-\\d{2}$", ${e})`,"date-time":`assert re.match(r"^\\d{4}-\\d{2}-\\d{2}", ${e})`,int32:`assert isinstance(${e}, int)`,int64:`assert isinstance(${e}, int)`,float:`assert isinstance(${e}, (int, float))`,double:`assert isinstance(${e}, (int, float))`}[r]||null}forType(e,r,n){if(n)return`assert ${e} is None or isinstance(${e}, ${this.getTypeClass(r)})`;switch(r){case"string":return`assert ${e} is not None`;case"integer":case"number":return`assert isinstance(${e}, (int, float))`;case"boolean":return`assert isinstance(${e}, bool)`;case"array":return`assert isinstance(${e}, list)`;case"object":return`assert isinstance(${e}, dict)`;default:return`assert ${e} is not None`}}getTypeClass(e){switch(e){case"string":return"str";case"integer":return"int";case"number":return"(int, float)";case"boolean":return"bool";case"array":return"list";case"object":return"dict";default:return"object"}}toPythonValue(e){return typeof e=="string"?`"${e}"`:typeof e=="boolean"?e?"True":"False":e===null?"None":String(e)}toPythonList(e){return`[${e.map(n=>`"${n}"`).join(", ")}]`}toPythonType(e){return{string:"str",integer:"int",number:"(int, float)",boolean:"bool",array:"list",object:"dict"}[e]||"object"}};var DU=`"""
API Tests generated by Pe4King
Source: {source}
Generated: {generatedAt}
"""

import pytest
import requests
import re
from typing import Any, Dict


BASE_URL = "{baseUrl}"


# ============================================================================
# API Tests
# ============================================================================
`,$U=`
def {testName}(api_client):
    """
    {displayName}
    Endpoint: {method} {path}
    """
    # Arrange
{arrange}

    # Act
    response = {request}

    # Assert
    assert response.status_code == {statusCode}
{assertions}
`,FU=`
@pytest.mark.skip(reason="{disabledReason}")
def {testName}(api_client):
    """
    {displayName}
    Expected: {statusCode}
    """
    # TODO: Implement negative test
    # - For 400: Send invalid/malformed request body
    # - For 401: Remove or invalidate auth token
    # - For 404: Use non-existent resource ID
    pass
`,BU=`"""
Security & Validation Tests generated by Pe4King
Source: {source}
Generated: {generatedAt}

These tests verify common security patterns and input validation
that should pass for any well-designed API.
"""

import pytest
import requests
from typing import Dict


BASE_URL = "{baseUrl}"


`,jU=`
@pytest.mark.security
def test_{endpoint_name}_no_auth():
    """
    {description}
    Endpoint: {method} {path}
    """
    response = requests.{method_lower}(
        f"{BASE_URL}{path}",
        headers={"Content-Type": "application/json"}
    )
    assert response.status_code == 401, f"Expected 401, got {response.status_code}"
`,UU=`
@pytest.mark.security
def test_{endpoint_name}_invalid_auth():
    """
    {description}
    Endpoint: {method} {path}
    """
    response = requests.{method_lower}(
        f"{BASE_URL}{path}",
        headers={
            "Content-Type": "application/json",
            "Authorization": "{invalid_token}"
        }
    )
    assert response.status_code == 401, f"Expected 401, got {response.status_code}"
`;var WU=`
@pytest.mark.security
def test_{endpoint_name}_{test_name}():
    """
    {description}
    Endpoint: {method} {path}
    Payload: {payload}
    """
    response = requests.{method_lower}(
        f"{BASE_URL}{path}",
        headers={"Content-Type": "application/json"},
        {request_args}
    )
    # Should NOT return 200 or 500 (injection should be blocked)
    assert response.status_code not in [200, 500], \\
        f"Potential injection vulnerability: got {response.status_code}"
`,zU=`
@pytest.mark.validation
def test_{endpoint_name}_method_not_allowed():
    """
    {description}
    Testing {wrong_method} on {method}-only endpoint
    """
    response = requests.{wrong_method_lower}(
        f"{BASE_URL}{path}",
        headers={"Content-Type": "application/json"}
    )
    assert response.status_code == 405, f"Expected 405, got {response.status_code}"
`,HU=`
@pytest.mark.security
def test_{endpoint_name}_{test_name}():
    """
    {description}
    Endpoint: {method} {path}
    Wrong scope: {wrong_scope}
    """
    response = requests.{method_lower}(
        f"{BASE_URL}{path}",
        headers={
            "Content-Type": "application/json",
            "Authorization": "Bearer token_with_wrong_scope"
        }
    )
    # Wrong OAuth2 scope should return 403 Forbidden
    assert response.status_code == 403, f"Expected 403, got {response.status_code}"
`,VU=`
@pytest.mark.validation
def test_{endpoint_name}_{test_name}():
    """
    {description}
    Endpoint: {method} {path}
    """
    response = requests.{method_lower}(
        f"{BASE_URL}{path}",
        headers={"Content-Type": "application/json"},
        params={{query_params}}
    )
    # Invalid pagination should return 400
    assert response.status_code == 400, f"Expected 400, got {response.status_code}"
`,GU=`
@pytest.mark.validation
def test_{endpoint_name}_{test_name}():
    """
    {description}
    Endpoint: {method} {path}
    Content-Type: {content_type}
    """
    response = requests.{method_lower}(
        f"{BASE_URL}{path}",
        headers={"Content-Type": "{content_type}"},
        data={body}
    )
    # Wrong content type should return 415 Unsupported Media Type
    assert response.status_code in [415, 400], f"Expected 415/400, got {response.status_code}"
`,KU=`"""
Pytest configuration and fixtures.
"""

import pytest
import requests
import os
from typing import Any, Dict


def pytest_configure(config):
    """Configure pytest."""
    config.addinivalue_line("markers", "smoke: mark test as smoke test")
    config.addinivalue_line("markers", "regression: mark test as regression test")


@pytest.fixture(scope="session")
def base_url() -> str:
    """Base URL from environment or default."""
    return os.getenv("API_BASE_URL", "{baseUrl}")


@pytest.fixture(scope="session")
def auth_token() -> str:
    """Auth token from environment."""
    return os.getenv("API_TOKEN", "")


@pytest.fixture(scope="session")
def headers(auth_token: str) -> Dict[str, str]:
    """Common headers for all requests."""
    h = {
        "Content-Type": "application/json",
        "Accept": "application/json",
    }
    if auth_token:
        h["Authorization"] = f"Bearer {auth_token}"
    return h


@pytest.fixture
def api_client(base_url: str, headers: Dict[str, str]):
    """Simple API client fixture."""
    class ApiClient:
        def __init__(self):
            self.base_url = base_url
            self.headers = headers

        def get(self, path: str, **kwargs) -> requests.Response:
            return requests.get(f"{self.base_url}{path}", headers=self.headers, **kwargs)

        def post(self, path: str, json: Any = None, **kwargs) -> requests.Response:
            return requests.post(f"{self.base_url}{path}", headers=self.headers, json=json, **kwargs)

        def put(self, path: str, json: Any = None, **kwargs) -> requests.Response:
            return requests.put(f"{self.base_url}{path}", headers=self.headers, json=json, **kwargs)

        def patch(self, path: str, json: Any = None, **kwargs) -> requests.Response:
            return requests.patch(f"{self.base_url}{path}", headers=self.headers, json=json, **kwargs)

        def delete(self, path: str, **kwargs) -> requests.Response:
            return requests.delete(f"{self.base_url}{path}", headers=self.headers, **kwargs)

    return ApiClient()
`;var Pg=class extends Ai{constructor(){super(),this.matchers=new qg}get name(){return"pytest"}get fileExtension(){return".py"}render(e){let r=[];return r.push({filename:"test_api.py",content:this.renderMainFile(e),language:"python"}),e.config.generateUniversalTests&&r.push({filename:"test_security.py",content:this.renderUniversalTestsFile(e),language:"python"}),r.push({filename:"conftest.py",content:KU.replace(/{baseUrl}/g,e.config.baseUrl),language:"python"}),r.push({filename:"requirements.txt",content:`pytest>=7.0.0
requests>=2.28.0
`,language:"text"}),r}renderMainFile(e){let r=DU.replace(/{source}/g,e.meta.source).replace(/{generatedAt}/g,e.meta.generatedAt).replace(/{baseUrl}/g,e.config.baseUrl);for(let n of e.endpoints)for(let i of n.scenarios)r+=this.renderTest(n,i);return r}renderUniversalTestsFile(e){let r=BU.replace(/{source}/g,e.meta.source).replace(/{generatedAt}/g,e.meta.generatedAt).replace(/{baseUrl}/g,e.config.baseUrl);for(let n of e.endpoints){let i=n.endpoint,s=_u(i);for(let o of s)r+=this.renderUniversalTest(i,o)}return r}renderUniversalTest(e,r){let n=this.sanitizeName(e.operationId||`${e.method}_${e.path}`),i=this.buildPathWithOverrides(e,r.modification.pathParamOverride);switch(r.category){case"auth":return r.modification.removeAuth?jU.replace(/{endpoint_name}/g,n).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{method_lower}/g,e.method.toLowerCase()).replace(/{path}/g,i):UU.replace(/{endpoint_name}/g,n).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{method_lower}/g,e.method.toLowerCase()).replace(/{path}/g,i).replace(/{invalid_token}/g,r.modification.invalidAuth||"invalid");case"injection":let s=r.modification.pathParamOverride?Object.values(r.modification.pathParamOverride)[0]:r.modification.bodyOverride?JSON.stringify(r.modification.bodyOverride):"";return WU.replace(/{endpoint_name}/g,n).replace(/{test_name}/g,r.name).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{method_lower}/g,e.method.toLowerCase()).replace(/{path}/g,i).replace(/{payload}/g,s.replace(/"/g,'\\"')).replace(/{request_args}/g,this.buildRequestArgs(r));case"method":let o=r.modification.overrideMethod||"GET";return zU.replace(/{endpoint_name}/g,n).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{wrong_method}/g,o).replace(/{wrong_method_lower}/g,o.toLowerCase()).replace(/{path}/g,i);case"scope":return HU.replace(/{endpoint_name}/g,n).replace(/{test_name}/g,this.sanitizeName(r.name)).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{method_lower}/g,e.method.toLowerCase()).replace(/{path}/g,i).replace(/{wrong_scope}/g,r.modification.wrongScope||"wrong:scope");case"pagination":let a=r.modification.queryParamOverride?Object.entries(r.modification.queryParamOverride).map(([u,d])=>`"${u}": "${d}"`).join(", "):"";return VU.replace(/{endpoint_name}/g,n).replace(/{test_name}/g,this.sanitizeName(r.name)).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{method_lower}/g,e.method.toLowerCase()).replace(/{path}/g,i).replace(/{query_params}/g,a);case"content_type":let l=r.modification.overrideContentType||"text/plain",c=typeof r.modification.bodyOverride=="string"?`"${r.modification.bodyOverride}"`:JSON.stringify(r.modification.bodyOverride);return GU.replace(/{endpoint_name}/g,n).replace(/{test_name}/g,this.sanitizeName(r.name)).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{method_lower}/g,e.method.toLowerCase()).replace(/{path}/g,i).replace(/{content_type}/g,l).replace(/{body}/g,c);default:return`
@pytest.mark.validation
def test_${n}_${this.sanitizeName(r.name)}():
    """
    ${r.description}
    Endpoint: ${e.method} ${e.path}
    """
    response = requests.${e.method.toLowerCase()}(
        f"{BASE_URL}${i}",
        headers={"Content-Type": "application/json"},
        ${this.buildRequestArgs(r)}
    )
    assert response.status_code in [400, 404, 422], f"Got {response.status_code}"
`}}buildPathWithOverrides(e,r){let n=e.path;if(r)for(let[i,s]of Object.entries(r))n=n.replace(`{${i}}`,s);for(let i of e.pathParams)n=n.replace(`{${i.name}}`,`{${i.name}}`);return n}buildRequestArgs(e){let r=[];if(e.modification.queryParamOverride){let n=Object.entries(e.modification.queryParamOverride).map(([i,s])=>`"${i}": "${s}"`).join(", ");r.push(`params={${n}}`)}if(e.modification.bodyOverride){let n=JSON.stringify(e.modification.bodyOverride);r.push(`json=${n}`)}return r.join(`,
        `)||"timeout=10"}sanitizeName(e){return e.replace(/[^a-zA-Z0-9_]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").toLowerCase()}renderTest(e,r){let{endpoint:n}=e;if(r.disabled)return FU.replace(/{testName}/g,r.name).replace(/{displayName}/g,r.displayName).replace(/{statusCode}/g,String(r.expected.statusCode)).replace(/{disabledReason}/g,r.disabledReason||"TODO: Implement");let i=this.buildArrange(n,r),s=this.buildRequest(n,r),o=this.buildAssertions(r);return $U.replace(/{testName}/g,r.name).replace(/{displayName}/g,r.displayName).replace(/{method}/g,n.method).replace(/{path}/g,n.path).replace(/{arrange}/g,i).replace(/{request}/g,s).replace(/{statusCode}/g,String(r.expected.statusCode)).replace(/{assertions}/g,o)}buildArrange(e,r){let n=[];if(r.request.pathParams)for(let[s,o]of Object.entries(r.request.pathParams))n.push(`    ${s} = "${o}"`);let i=`"${e.path}"`;if(e.pathParams.length>0&&(i=`f"${e.path.replace(/\{(\w+)\}/g,"{$1}")}"`),n.push(`    path = ${i}`),r.request.body){let s=JSON.stringify(r.request.body,null,8).replace(/: true([,\n\r\}])/g,": True$1").replace(/: false([,\n\r\}])/g,": False$1").replace(/: null([,\n\r\}])/g,": None$1").split(`
`).map((o,a)=>a===0?o:"    "+o).join(`
`);n.push(`    body = ${s}`)}return n.join(`
`)}buildRequest(e,r){let n=e.method.toLowerCase(),i=r.request.body!==void 0,s=r.request.queryParams&&Object.keys(r.request.queryParams).length>0,o=`api_client.${n}(path`;if(i&&(o+=", json=body"),s){let a=this.toPythonDict(r.request.queryParams);o+=`, params=${a}`}return o+=")",o}toPythonDict(e){return e?`{${Object.entries(e).map(([n,i])=>{let s=typeof i=="string"?`"${i}"`:String(i);return`"${n}": ${s}`}).join(", ")}}`:"{}"}buildAssertions(e){let r=[],n=[204,202];if(e.expected.contentType&&!n.includes(e.expected.statusCode)&&r.push(`    assert response.headers.get("Content-Type", "").startswith("${e.expected.contentType}")`),e.expected.assertions.length===0)return r.push("    # No response schema defined - only status code validated"),r.join(`
`);r.push("    data = response.json()"),r.push("");let i=new Set;for(let s of e.expected.assertions){let o=s.path.match(/^([^[]+)\[0\]/);if(o){let l=o[1];i.has(l)||(i.add(l),r.push(`    ${this.matchers.arrayNotEmpty(l)}`))}let a=this.matchers.fromAssertion(s);r.push(`    ${a}`)}return r.join(`
`)}};var Lg=class{forField(e){let r=this.toJsonPath(e.path);if(e.enumValues&&e.enumValues.length>0)return`.body("${r}", oneOf(${e.enumValues.map(n=>`"${n}"`).join(", ")}))`;if(e.format){let n=this.forFormat(r,e.format);if(n)return n}return this.forType(r,e.fieldType,e.nullable)}arrayNotEmpty(e){return`.body("${e}", not(empty()))`}fromAssertion(e){let r=this.toJsonPath(e.path);switch(e.matcher){case"notNull":return`.body("${r}", notNullValue())`;case"isNull":return`.body("${r}", nullValue())`;case"equals":return`.body("${r}", equalTo(${this.toJavaValue(e.value)}))`;case"notEquals":return`.body("${r}", not(equalTo(${this.toJavaValue(e.value)})))`;case"contains":return`.body("${r}", containsString("${e.value}"))`;case"matchesPattern":return`.body("${r}", matchesPattern("${this.escapeJavaString(e.value)}"))`;case"oneOf":let n=e.value;return`.body("${r}", oneOf(${n.map(i=>`"${i}"`).join(", ")}))`;case"isType":return`.body("${r}", isA(${this.toJavaClass(e.value)}))`;case"notEmpty":return`.body("${r}", not(empty()))`;case"isEmpty":return`.body("${r}", empty())`;case"greaterThan":return`.body("${r}", greaterThan(${e.value}))`;case"greaterThanOrEqual":return`.body("${r}", greaterThanOrEqualTo(${e.value}))`;case"lessThan":return`.body("${r}", lessThan(${e.value}))`;case"lessThanOrEqual":return`.body("${r}", lessThanOrEqualTo(${e.value}))`;case"hasSize":return`.body("${r}", hasSize(${e.value}))`;case"hasSizeGreaterThan":return`.body("${r}", hasSize(greaterThan(${e.value})))`;case"hasSizeLessThan":return`.body("${r}", hasSize(lessThan(${e.value})))`;case"hasMinLength":return`.body("${r}.length()", greaterThanOrEqualTo(${e.value}))`;case"hasMaxLength":return`.body("${r}.length()", lessThanOrEqualTo(${e.value}))`;default:return`.body("${r}", notNullValue())`}}toJsonPath(e){return e}forFormat(e,r){return{uuid:`.body("${e}", matchesPattern("[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"))`,email:`.body("${e}", containsString("@"))`,uri:`.body("${e}", matchesPattern("^https?://.*"))`,url:`.body("${e}", matchesPattern("^https?://.*"))`,date:`.body("${e}", matchesPattern("\\\\d{4}-\\\\d{2}-\\\\d{2}"))`,"date-time":`.body("${e}", matchesPattern("\\\\d{4}-\\\\d{2}-\\\\d{2}.*"))`,int32:`.body("${e}", isA(Integer.class))`,int64:`.body("${e}", isA(Long.class))`,float:`.body("${e}", isA(Float.class))`,double:`.body("${e}", isA(Double.class))`}[r]||null}forType(e,r,n){if(n)return`.body("${e}", anyOf(nullValue(), notNullValue()))`;switch(r){case"string":return`.body("${e}", notNullValue())`;case"integer":return`.body("${e}", isA(Number.class))`;case"number":return`.body("${e}", isA(Number.class))`;case"boolean":return`.body("${e}", isA(Boolean.class))`;case"array":return`.body("${e}", not(empty()))`;case"object":return`.body("${e}", notNullValue())`;default:return`.body("${e}", notNullValue())`}}toJavaValue(e){return typeof e=="string"?`"${e}"`:typeof e=="boolean"?e?"true":"false":e===null?"null":String(e)}toJavaClass(e){return{string:"String.class",integer:"Integer.class",number:"Number.class",boolean:"Boolean.class",array:"List.class",object:"Map.class"}[e]||"Object.class"}escapeJavaString(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n")}escapeJavaRegex(e){return e.replace(/\\/g,"\\\\\\\\").replace(/"/g,'\\"')}};var YU=`package {package};

import io.restassured.RestAssured;
import io.restassured.http.ContentType;
import io.restassured.response.Response;
import io.restassured.specification.RequestSpecification;
import org.junit.jupiter.api.*;
import org.junit.jupiter.api.MethodOrderer.OrderAnnotation;
import static io.restassured.RestAssured.*;
import static org.hamcrest.Matchers.*;

import java.io.File;
import java.util.Map;
import java.util.List;
import java.util.HashMap;

/**
 * API Tests generated by Pe4King
 * Source: {source}
 * Generated: {generatedAt}
 */
@TestMethodOrder(OrderAnnotation.class)
public class {className} {

    private static RequestSpecification spec;
    private static RequestSpecification specNoAuth;

    @BeforeAll
    static void setup() {
        String baseUrl = System.getenv().getOrDefault("API_BASE_URL", "{baseUrl}");
        String token = System.getenv().getOrDefault("API_TOKEN", "");

        specNoAuth = given()
            .baseUri(baseUrl)
            .contentType(ContentType.JSON)
            .accept(ContentType.JSON);

        spec = given()
            .baseUri(baseUrl)
            .contentType(ContentType.JSON)
            .accept(ContentType.JSON);

        if (!token.isEmpty()) {
            spec = spec.header("Authorization", "Bearer " + token);
        }

        RestAssured.enableLoggingOfRequestAndResponseIfValidationFails();
    }

`,JU=`
    @Test
    @Order({order})
    @DisplayName("{displayName}")
    void {methodName}() {
        // Arrange
{arrange}

        // Act & Assert
        given()
            .spec({specName})
{requestBody}
        .when()
            .{httpMethod}({pathExpr})
        .then()
            .log().ifValidationFails()
            .statusCode({statusCode}){assertions}
    }
`,ZU=`
    @Test
    @Order({order})
    @DisplayName("{displayName}")
    void {methodName}() {
        // Arrange
{arrange}
        File testFile = new File("test-upload.txt");

        // Act & Assert
        given()
            .spec({specName})
            .contentType("multipart/form-data")
            .multiPart("file", testFile)
{requestBody}
        .when()
            .{httpMethod}({pathExpr})
        .then()
            .log().ifValidationFails()
            .statusCode({statusCode}){assertions}
    }
`,QU=`
    @Test
    @Order({order})
    @DisplayName("{displayName}")
    void {methodName}() {
        // Act & Assert - Non-existent resource
        given()
            .spec(spec)
{requestBody}
        .when()
            .{httpMethod}({pathExpr})
        .then()
            .log().ifValidationFails()
            .statusCode(404);
    }
`,ax=`
    @Test
    @Order({order})
    @DisplayName("{displayName}")
    void {methodName}() {
        // Act & Assert - Invalid/empty body
        given()
            .spec(spec)
            .body("{}")
        .when()
            .{httpMethod}({pathExpr})
        .then()
            .log().ifValidationFails()
            .statusCode(anyOf(equalTo(400), equalTo(422)));
    }
`,XU=`
    @Test
    @Order({order})
    @DisplayName("{displayName}")
    void {methodName}() {
        // Act & Assert - No auth token
        given()
            .spec(specNoAuth)
{requestBody}
        .when()
            .{httpMethod}({pathExpr})
        .then()
            .log().ifValidationFails()
            .statusCode(anyOf(equalTo(401), equalTo(403)));
    }
`;var e6=`package {package};

import io.restassured.RestAssured;
import io.restassured.http.ContentType;
import io.restassured.specification.RequestSpecification;
import org.junit.jupiter.api.*;
import org.junit.jupiter.api.Tag;
import static io.restassured.RestAssured.*;
import static org.hamcrest.Matchers.*;

/**
 * Security & Validation Tests generated by Pe4King
 * Source: {source}
 * Generated: {generatedAt}
 *
 * These tests verify common security patterns and input validation
 * that should pass for any well-designed API.
 */
@TestMethodOrder(MethodOrderer.OrderAnnotation.class)
public class {className} {

    private static final String BASE_URL = System.getenv().getOrDefault("API_BASE_URL", "{baseUrl}");
    private static final String VALID_TOKEN = System.getenv().getOrDefault("API_TOKEN", "");

    @BeforeAll
    static void setup() {
        RestAssured.enableLoggingOfRequestAndResponseIfValidationFails();
    }

`,t6=`
    @Test
    @Tag("security")
    @DisplayName("[{method}] {path} - No authentication")
    void test_{endpoint_name}_no_auth() {
        // {description}
        given()
            .baseUri(BASE_URL)
            .contentType(ContentType.JSON)
        .when()
            .{method_lower}("{path}")
        .then()
            .statusCode(401);
    }
`,r6=`
    @Test
    @Tag("security")
    @DisplayName("[{method}] {path} - Invalid authentication")
    void test_{endpoint_name}_invalid_auth() {
        // {description}
        given()
            .baseUri(BASE_URL)
            .contentType(ContentType.JSON)
            .header("Authorization", "{invalid_token}")
        .when()
            .{method_lower}("{path}")
        .then()
            .statusCode(401);
    }
`,n6=`
    @Test
    @Tag("security")
    @DisplayName("[{method}] {path} - {test_name}")
    void test_{endpoint_name}_{test_name}() {
        // {description}
        // Payload: {payload}
        given()
            .baseUri(BASE_URL)
            .contentType(ContentType.JSON)
{request_args}
        .when()
            .{method_lower}("{path}")
        .then()
            // Should NOT return 200 or 500 (injection should be blocked)
            .statusCode(not(anyOf(equalTo(200), equalTo(500))));
    }
`,i6=`
    @Test
    @Tag("validation")
    @DisplayName("[{wrong_method}] {path} - Method not allowed (should be {method})")
    void test_{endpoint_name}_method_not_allowed() {
        // {description}
        given()
            .baseUri(BASE_URL)
            .contentType(ContentType.JSON)
        .when()
            .{wrong_method_lower}("{path}")
        .then()
            .statusCode(405);
    }
`,s6=`
    @Test
    @Tag("validation")
    @DisplayName("[{method}] {path} - {test_name}")
    void test_{endpoint_name}_{test_name}() {
        // {description}
        given()
            .baseUri(BASE_URL)
            .contentType(ContentType.JSON)
{request_args}
        .when()
            .{method_lower}("{path}")
        .then()
            .statusCode(anyOf(equalTo(400), equalTo(404), equalTo(422)));
    }
`,o6=`
    @Test
    @Tag("security")
    @DisplayName("[{method}] {path} - {test_name}")
    void test_{endpoint_name}_{test_name}() {
        // {description}
        // Wrong OAuth2 scope: {wrong_scope}
        given()
            .baseUri(BASE_URL)
            .contentType(ContentType.JSON)
            .header("Authorization", "Bearer token_with_wrong_scope")
        .when()
            .{method_lower}("{path}")
        .then()
            // Wrong scope should return 403 Forbidden
            .statusCode(403);
    }
`,a6=`
    @Test
    @Tag("validation")
    @DisplayName("[{method}] {path} - {test_name}")
    void test_{endpoint_name}_{test_name}() {
        // {description}
        given()
            .baseUri(BASE_URL)
            .contentType(ContentType.JSON)
{query_params}
        .when()
            .{method_lower}("{path}")
        .then()
            // Invalid pagination should return 400
            .statusCode(400);
    }
`,l6=`
    @Test
    @Tag("validation")
    @DisplayName("[{method}] {path} - {test_name}")
    void test_{endpoint_name}_{test_name}() {
        // {description}
        given()
            .baseUri(BASE_URL)
            .contentType("{content_type}")
            .body("{body}")
        .when()
            .{method_lower}("{path}")
        .then()
            // Wrong content type should return 415 or 400
            .statusCode(anyOf(equalTo(415), equalTo(400)));
    }
`,c6=`package {package}.base;

import io.restassured.RestAssured;
import io.restassured.builder.RequestSpecBuilder;
import io.restassured.http.ContentType;
import io.restassured.specification.RequestSpecification;
import org.junit.jupiter.api.BeforeAll;

/**
 * Base test class with common setup.
 * All test classes should extend this.
 */
public abstract class BaseTest {

    protected static RequestSpecification spec;
    protected static RequestSpecification specNoAuth;

    @BeforeAll
    static void setupSpec() {
        String baseUrl = System.getenv().getOrDefault("API_BASE_URL", "{baseUrl}");
        String token = System.getenv().getOrDefault("API_TOKEN", "");

        specNoAuth = new RequestSpecBuilder()
            .setBaseUri(baseUrl)
            .setContentType(ContentType.JSON)
            .setAccept(ContentType.JSON)
            .build();

        RequestSpecBuilder specBuilder = new RequestSpecBuilder()
            .setBaseUri(baseUrl)
            .setContentType(ContentType.JSON)
            .setAccept(ContentType.JSON);

        if (!token.isEmpty()) {
            specBuilder.addHeader("Authorization", "Bearer " + token);
        }

        spec = specBuilder.build();
        RestAssured.enableLoggingOfRequestAndResponseIfValidationFails();
    }
}
`,u6=`package {package}.base;

import io.restassured.response.Response;
import io.restassured.specification.RequestSpecification;
import static io.restassured.RestAssured.given;

/**
 * Base API client with common functionality.
 * All API clients should extend this.
 */
public abstract class BaseClient {

    protected final RequestSpecification spec;

    public BaseClient(RequestSpecification spec) {
        this.spec = spec;
    }

    protected Response get(String path) {
        return given().spec(spec).get(path);
    }

    protected Response post(String path, Object body) {
        return given().spec(spec).body(body).post(path);
    }

    protected Response put(String path, Object body) {
        return given().spec(spec).body(body).put(path);
    }

    protected Response patch(String path, Object body) {
        return given().spec(spec).body(body).patch(path);
    }

    protected Response delete(String path) {
        return given().spec(spec).delete(path);
    }
}
`,d6=`package {package}.clients;

import io.restassured.response.Response;
import io.restassured.specification.RequestSpecification;
import {package}.base.BaseClient;
import static io.restassured.RestAssured.given;

import java.util.Map;

/**
 * API Client for {tag} endpoints.
 * Generated by Pe4King
 */
public class {className} extends BaseClient {

    public {className}(RequestSpecification spec) {
        super(spec);
    }

`,f6=`
    /**
     * {description}
     * {method} {path}
     */
    public Response {methodName}({parameters}) {
        return given()
            .spec(spec)
{pathParams}{queryParams}{body}
            .{httpMethod}("{path}");
    }
`;var h6=`package {package}.tests;

import io.restassured.response.Response;
import org.junit.jupiter.api.*;
import static org.hamcrest.Matchers.*;

import java.util.Map;

import {package}.base.BaseTest;
import {package}.clients.{clientClass};

/**
 * API Tests for {tag}
 * Source: {source}
 * Generated: {generatedAt}
 */
@TestMethodOrder(MethodOrderer.OrderAnnotation.class)
public class {className} extends BaseTest {

    private static {clientClass} client;

    @BeforeAll
    static void initClient() {
        setupSpec();
        client = new {clientClass}(spec);
    }

`,p6=`
    @Test
    @Order({order})
    @DisplayName("{displayName}")
    void {testName}() {
        Response response = client.{clientMethod}({callParams});
        response.then()
            .statusCode({statusCode}){assertions};
    }
`,g6=`package {package}.tests;

import io.restassured.response.Response;
import org.junit.jupiter.api.*;
import org.junit.jupiter.api.Tag;
import static org.hamcrest.Matchers.*;

import java.util.Map;

import {package}.base.BaseTest;
import {package}.clients.{clientClass};

/**
 * Security Tests for {tag}
 * Source: {source}
 * Generated: {generatedAt}
 */
@TestMethodOrder(MethodOrderer.OrderAnnotation.class)
public class {className} extends BaseTest {

    private static {clientClass} client;
    private static {clientClass} clientNoAuth;

    @BeforeAll
    static void initClient() {
        setupSpec();
        client = new {clientClass}(spec);
        clientNoAuth = new {clientClass}(specNoAuth);
    }

`,m6=`
    @Test
    @Tag("security")
    @DisplayName("[{method}] {path} - No authentication")
    void test_{endpointName}_no_auth() {
        Response response = clientNoAuth.{clientMethod}({callParams});
        response.then().statusCode(401);
    }
`,lx=`
    @Test
    @Tag("security")
    @DisplayName("[{method}] {path} - {testName}")
    void test_{endpointName}_{testName}() {
        // Payload: {payload}
        Response response = client.{clientMethod}({callParams});
        response.then()
            .statusCode(not(anyOf(equalTo(200), equalTo(500))));
    }
`,y6=`
    @Test
    @Tag("validation")
    @DisplayName("[{method}] {path} - {testName}")
    void test_{endpointName}_{testName}() {
        Response response = client.{clientMethod}({callParams});
        response.then()
            .statusCode(anyOf(equalTo(400), equalTo(404), equalTo(422)));
    }
`;var b6=`<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>{groupId}</groupId>
    <artifactId>api-tests</artifactId>
    <version>1.0.0</version>

    <properties>
        <maven.compiler.source>17</maven.compiler.source>
        <maven.compiler.target>17</maven.compiler.target>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <rest-assured.version>5.4.0</rest-assured.version>
        <junit.version>5.10.1</junit.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>io.rest-assured</groupId>
            <artifactId>rest-assured</artifactId>
            <version>\${rest-assured.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.junit.jupiter</groupId>
            <artifactId>junit-jupiter</artifactId>
            <version>\${junit.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.hamcrest</groupId>
            <artifactId>hamcrest</artifactId>
            <version>2.2</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>3.2.3</version>
            </plugin>
        </plugins>
    </build>
</project>
`;var Mg=class extends Ai{constructor(){super(),this.matchers=new Lg}get name(){return"rest-assured"}get fileExtension(){return".java"}render(e){return this.renderLayered(e)}renderLayered(e){let r=[],n=e.config.javaPackage||"com.api.tests",i=n.replace(/\./g,"/");r.push({filename:`src/test/java/${i}/base/BaseTest.java`,content:c6.replace(/{package}/g,n).replace(/{baseUrl}/g,e.config.baseUrl),language:"java"}),r.push({filename:`src/test/java/${i}/base/BaseClient.java`,content:u6.replace(/{package}/g,n),language:"java"});let s=this.groupEndpointsByTag(e.endpoints);for(let[a,l]of s){let c=this.toClassName(a)+"Client",u=this.toClassName(a)+"ApiTest";if(r.push({filename:`src/test/java/${i}/clients/${c}.java`,content:this.renderApiClient(e,a,c,l),language:"java"}),r.push({filename:`src/test/java/${i}/tests/${u}.java`,content:this.renderTestClassWithClient(e,a,u,c,l),language:"java"}),e.config.generateUniversalTests){let d=this.toClassName(a)+"SecurityTest";r.push({filename:`src/test/java/${i}/tests/${d}.java`,content:this.renderSecurityTestClassWithClient(e,a,d,c,l),language:"java"})}}let o=n.split(".").slice(0,2).join(".")||"com.api";return r.push({filename:"pom.xml",content:b6.replace(/{groupId}/g,o),language:"xml"}),r}groupEndpointsByTag(e){let r=new Map;for(let n of e){let i=n.endpoint.tags?.[0]||"Default";r.has(i)||r.set(i,[]),r.get(i).push(n)}return r}toClassName(e){return e.split(/[\s_-]+/).map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join("").replace(/[^a-zA-Z0-9]/g,"")}renderApiClient(e,r,n,i){let s=e.config.javaPackage||"com.api.tests",o=d6.replace(/{package}/g,s).replace(/{tag}/g,r).replace(/{className}/g,n);for(let a of i)o+=this.renderClientMethod(a.endpoint);return o+=`}
`,o}renderClientMethod(e){let r=this.sanitizeMethodName(e.operationId||`${e.method}_${e.path}`),n=e.summary||e.operationId||`${e.method} ${e.path}`,i=[],s=[],o=[],a="";for(let c of e.pathParams)i.push(`String ${c.name}`),s.push(`            .pathParam("${c.name}", ${c.name})`);e.queryParams.length>0&&(i.push("Map<String, Object> queryParams"),o.push("            .queryParams(queryParams)")),["POST","PUT","PATCH"].includes(e.method)&&(i.push("Object body"),a=`            .body(body)
`);let l=e.path;return f6.replace(/{description}/g,n).replace(/{method}/g,e.method).replace(/{path}/g,l).replace(/{methodName}/g,r).replace(/{parameters}/g,i.join(", ")).replace(/{pathParams}/g,s.length>0?s.join(`
`)+`
`:"").replace(/{queryParams}/g,o.length>0?o.join(`
`)+`
`:"").replace(/{body}/g,a).replace(/{httpMethod}/g,e.method.toLowerCase())}renderTestClassWithClient(e,r,n,i,s){let o=e.config.javaPackage||"com.api.tests",a=h6.replace(/{package}/g,o).replace(/{tag}/g,r).replace(/{source}/g,e.meta.source).replace(/{generatedAt}/g,e.meta.generatedAt).replace(/{className}/g,n).replace(/{clientClass}/g,i),l=1;for(let c of this.sortByCrudOrder(s))for(let u of c.scenarios)a+=this.renderTestMethodWithClient(c,u,l++);return a+=`}
`,a}renderTestMethodWithClient(e,r,n){let i=this.sanitizeMethodName(e.endpoint.operationId||`${e.endpoint.method}_${e.endpoint.path}`),s=[];for(let a of e.endpoint.pathParams){let l=r.request.pathParams?.[a.name]||`"test-${a.name}"`;s.push(typeof l=="string"&&!l.startsWith('"')?`"${l}"`:l)}if(e.endpoint.queryParams.length>0)if(r.request.queryParams&&Object.keys(r.request.queryParams).length>0){let a=Object.entries(r.request.queryParams).map(([l,c])=>`"${l}", ${this.toJavaLiteral(c)}`).join(", ");s.push(`Map.of(${a})`)}else s.push("Map.of()");if(["POST","PUT","PATCH"].includes(e.endpoint.method))if(r.request.body&&Object.keys(r.request.body).length>0){let a=this.objectToMapOf(r.request.body);s.push(a)}else s.push("Map.of()");let o=this.buildAssertionsForClient(r);return p6.replace(/{order}/g,String(n)).replace(/{displayName}/g,r.displayName).replace(/{testName}/g,r.name).replace(/{clientMethod}/g,i).replace(/{callParams}/g,s.join(", ")).replace(/{statusCode}/g,String(r.expected.statusCode)).replace(/{assertions}/g,o)}buildAssertionsForClient(e){if(e.expected.assertions.length===0)return"";let r=[],n=new Set;for(let i of e.expected.assertions){let s=i.path.match(/^([^[]+)\[0\]/);if(s){let o=s[1];n.has(o)||(n.add(o),r.push(`            ${this.matchers.arrayNotEmpty(o)}`))}r.push(`            ${this.matchers.fromAssertion(i)}`)}return`
`+r.join(`
`)}objectToMapOf(e){return`Map.of(${Object.entries(e).slice(0,5).map(([n,i])=>`"${n}", ${this.toJavaLiteral(i)}`).join(", ")})`}renderSecurityTestClassWithClient(e,r,n,i,s){let o=e.config.javaPackage||"com.api.tests",a=g6.replace(/{package}/g,o).replace(/{tag}/g,r).replace(/{source}/g,e.meta.source).replace(/{generatedAt}/g,e.meta.generatedAt).replace(/{className}/g,n).replace(/{clientClass}/g,i);for(let l of s){let c=_u(l.endpoint);for(let u of c)a+=this.renderSecurityTestWithClient(l.endpoint,u)}return a+=`}
`,a}renderSecurityTestWithClient(e,r){let n=this.sanitizeMethodName(e.operationId||`${e.method}_${e.path}`),i=n,s=this.sanitizeMethodName(r.name),o=[];for(let a of e.pathParams){let c=r.modification.pathParamOverride?.[a.name]||`"test-${a.name}"`;o.push(c.startsWith('"')?c:`"${c.replace(/"/g,'\\"')}"`)}if(e.queryParams.length>0)if(r.modification.queryParamOverride){let a=Object.entries(r.modification.queryParamOverride).map(([l,c])=>`"${l}", "${c.replace(/"/g,'\\"')}"`).join(", ");o.push(`Map.of(${a})`)}else o.push("Map.of()");if(["POST","PUT","PATCH"].includes(e.method))if(r.modification.bodyOverride){let a=JSON.stringify(r.modification.bodyOverride).replace(/"/g,'\\"');o.push(`"${a}"`)}else o.push("Map.of()");switch(r.category){case"auth":return r.modification.removeAuth?m6.replace(/{method}/g,e.method).replace(/{path}/g,e.path).replace(/{endpointName}/g,n).replace(/{clientMethod}/g,i).replace(/{callParams}/g,o.join(", ")):lx.replace(/{method}/g,e.method).replace(/{path}/g,e.path).replace(/{testName}/g,s).replace(/{endpointName}/g,n).replace(/{clientMethod}/g,i).replace(/{callParams}/g,o.join(", ")).replace(/{payload}/g,r.modification.invalidAuth||"invalid");case"injection":let a=r.modification.pathParamOverride?Object.values(r.modification.pathParamOverride)[0]:r.modification.bodyOverride?JSON.stringify(r.modification.bodyOverride):"";return lx.replace(/{method}/g,e.method).replace(/{path}/g,e.path).replace(/{testName}/g,s).replace(/{endpointName}/g,n).replace(/{clientMethod}/g,i).replace(/{callParams}/g,o.join(", ")).replace(/{payload}/g,a.replace(/"/g,'\\"'));default:return y6.replace(/{method}/g,e.method).replace(/{path}/g,e.path).replace(/{testName}/g,s).replace(/{endpointName}/g,n).replace(/{clientMethod}/g,i).replace(/{callParams}/g,o.join(", "))}}renderTestClass(e,r){let n=e.config.javaPackage||"com.api.tests",i=YU.replace(/{package}/g,n).replace(/{source}/g,e.meta.source).replace(/{generatedAt}/g,e.meta.generatedAt).replace(/{className}/g,r).replace(/{baseUrl}/g,e.config.baseUrl),s=this.sortByCrudOrder(e.endpoints),o=1;for(let a of s)for(let l of a.scenarios)i+=this.renderTest(a,l,o++);return i+=`}
`,i}renderSecurityTestClass(e,r){let n=e.config.javaPackage||"com.api.tests",i=e6.replace(/{package}/g,n).replace(/{source}/g,e.meta.source).replace(/{generatedAt}/g,e.meta.generatedAt).replace(/{className}/g,r).replace(/{baseUrl}/g,e.config.baseUrl);for(let s of e.endpoints){let o=s.endpoint,a=_u(o);for(let l of a)i+=this.renderUniversalTest(o,l)}return i+=`}
`,i}renderUniversalTest(e,r){let n=this.sanitizeMethodName(e.operationId||`${e.method}_${e.path}`),i=this.buildPathWithOverrides(e,r.modification.pathParamOverride);switch(r.category){case"auth":return r.modification.removeAuth?t6.replace(/{endpoint_name}/g,n).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{method_lower}/g,e.method.toLowerCase()).replace(/{path}/g,i):r6.replace(/{endpoint_name}/g,n).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{method_lower}/g,e.method.toLowerCase()).replace(/{path}/g,i).replace(/{invalid_token}/g,r.modification.invalidAuth||"invalid");case"injection":let s=r.modification.pathParamOverride?Object.values(r.modification.pathParamOverride)[0]:r.modification.bodyOverride?JSON.stringify(r.modification.bodyOverride):"";return n6.replace(/{endpoint_name}/g,n).replace(/{test_name}/g,this.sanitizeMethodName(r.name)).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{method_lower}/g,e.method.toLowerCase()).replace(/{path}/g,i).replace(/{payload}/g,s.replace(/"/g,'\\"')).replace(/{request_args}/g,this.buildSecurityRequestArgs(r));case"method":let o=r.modification.overrideMethod||"GET";return i6.replace(/{endpoint_name}/g,n).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{wrong_method}/g,o).replace(/{wrong_method_lower}/g,o.toLowerCase()).replace(/{path}/g,i);case"scope":return o6.replace(/{endpoint_name}/g,n).replace(/{test_name}/g,this.sanitizeMethodName(r.name)).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{method_lower}/g,e.method.toLowerCase()).replace(/{path}/g,i).replace(/{wrong_scope}/g,r.modification.wrongScope||"wrong:scope");case"pagination":let a=[];if(r.modification.queryParamOverride)for(let[u,d]of Object.entries(r.modification.queryParamOverride))a.push(`            .queryParam("${u}", "${d.replace(/"/g,'\\"')}")`);return a6.replace(/{endpoint_name}/g,n).replace(/{test_name}/g,this.sanitizeMethodName(r.name)).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{method_lower}/g,e.method.toLowerCase()).replace(/{path}/g,i).replace(/{query_params}/g,a.join(`
`)||"            // No query params");case"content_type":let l=r.modification.overrideContentType||"text/plain",c=typeof r.modification.bodyOverride=="string"?r.modification.bodyOverride.replace(/"/g,'\\"'):JSON.stringify(r.modification.bodyOverride).replace(/"/g,'\\"');return l6.replace(/{endpoint_name}/g,n).replace(/{test_name}/g,this.sanitizeMethodName(r.name)).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{method_lower}/g,e.method.toLowerCase()).replace(/{path}/g,i).replace(/{content_type}/g,l).replace(/{body}/g,c);default:return s6.replace(/{endpoint_name}/g,n).replace(/{test_name}/g,this.sanitizeMethodName(r.name)).replace(/{description}/g,r.description).replace(/{method}/g,e.method).replace(/{method_lower}/g,e.method.toLowerCase()).replace(/{path}/g,i).replace(/{request_args}/g,this.buildSecurityRequestArgs(r))}}buildPathWithOverrides(e,r){let n=e.path;if(r)for(let[i,s]of Object.entries(r))n=n.replace(`{${i}}`,s);for(let i of e.pathParams)n=n.replace(`{${i.name}}`,`{${i.name}}`);return n}buildSecurityRequestArgs(e){let r=[];if(e.modification.queryParamOverride)for(let[n,i]of Object.entries(e.modification.queryParamOverride))r.push(`            .queryParam("${n}", "${i.replace(/"/g,'\\"')}")`);if(e.modification.bodyOverride){let n=JSON.stringify(e.modification.bodyOverride).replace(/"/g,'\\"');r.push(`            .body("${n}")`)}return r.length>0?r.join(`
`):"            // No additional params"}sanitizeMethodName(e){return e.replace(/[^a-zA-Z0-9_]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").toLowerCase()}sortByCrudOrder(e){let r={POST:1,GET:2,PUT:3,PATCH:4,DELETE:5};return[...e].sort((n,i)=>{let s=r[n.endpoint.method]||99,o=r[i.endpoint.method]||99;return s!==o?s-o:n.endpoint.path.length-i.endpoint.path.length})}renderTest(e,r,n){let{endpoint:i}=e;if(r.type==="negative")return this.renderNegativeTest(e,r,n);let s=this.buildArrange(i,r),o=this.buildPathExpression(i,r),a=this.buildRequestBody(r),l=this.buildAssertions(r);return(this.isMultipartEndpoint(i)?ZU:JU).replace(/{displayName}/g,r.displayName).replace(/{methodName}/g,r.name).replace(/{order}/g,String(n)).replace(/{arrange}/g,s).replace(/{httpMethod}/g,i.method.toLowerCase()).replace(/{pathExpr}/g,o).replace(/{statusCode}/g,String(r.expected.statusCode)).replace(/{requestBody}/g,a).replace(/{assertions}/g,l).replace(/{specName}/g,"spec")}renderNegativeTest(e,r,n){let{endpoint:i}=e,s=this.buildPathExpression(i,r),o=this.buildRequestBody(r),a,l=s;return r.expected.statusCode===404?(a=QU,l=this.buildNonExistentPath(i)):r.expected.statusCode===400?a=ax:r.expected.statusCode===401?a=XU:a=ax,a.replace(/{displayName}/g,r.displayName).replace(/{methodName}/g,r.name).replace(/{order}/g,String(n)).replace(/{httpMethod}/g,i.method.toLowerCase()).replace(/{pathExpr}/g,l).replace(/{requestBody}/g,o).replace(/{specName}/g,r.expected.statusCode===401?"specNoAuth":"spec")}buildNonExistentPath(e){let r=e.path;for(let n of e.pathParams)r=r.replace(`{${n.name}}`,"NONEXISTENT_99999");return`"${r}"`}isMultipartEndpoint(e){if(e.consumes?.includes("multipart/form-data"))return!0;let r=e.path.toLowerCase(),n=e.operationId?.toLowerCase()||"";return r.includes("upload")||n.includes("upload")}buildArrange(e,r){let n=[];if(r.request.pathParams)for(let[i,s]of Object.entries(r.request.pathParams)){let o=s.startsWith("${")?`System.getenv().getOrDefault("${i.toUpperCase()}", "test-${i}")`:`"${s}"`;n.push(`        String ${i} = ${o};`)}if(r.request.body&&Object.keys(r.request.body).length>0){n.push("        Map<String, Object> body = new HashMap<>();");for(let[i,s]of Object.entries(r.request.body))n.push(`        body.put("${i}", ${this.toJavaLiteral(s)});`)}return n.length>0?n.join(`
`):"        // No setup required"}buildPathExpression(e,r){let n=e.path;if(r.request.pathParams&&Object.keys(r.request.pathParams).length>0){for(let s of Object.keys(r.request.pathParams))n=n.replace(`{${s}}`,`" + ${s} + "`);let i=`"${n}"`;return i=i.replace(/ \+ ""$/,""),i}return`"${n}"`}buildRequestBody(e){let r=[];if(e.request.queryParams&&Object.keys(e.request.queryParams).length>0)for(let[n,i]of Object.entries(e.request.queryParams)){let s=String(i).startsWith("${")?`System.getenv().getOrDefault("${n.toUpperCase()}", "test-${n}")`:`"${i}"`;r.push(`            .queryParam("${n}", ${s})`)}return e.request.body&&Object.keys(e.request.body).length>0&&r.push("            .body(body)"),r.join(`
`)}buildAssertions(e){if(e.expected.assertions.length===0)return"; // No response schema defined";let r=[],n=new Set;for(let i of e.expected.assertions){let s=i.path.match(/^([^[]+)\[0\]/);if(s){let o=s[1];n.has(o)||(n.add(o),r.push(`            ${this.matchers.arrayNotEmpty(o)}`))}r.push(`            ${this.matchers.fromAssertion(i)}`)}return`
`+r.join(`
`)+";"}generateClassName(e){let r=e.replace(/[^a-zA-Z0-9\s]/g,"").split(/\s+/).map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join("");return`${/^[A-Z]/.test(r)?r:`Api${r}`}Test`}toJavaLiteral(e){return e==null?"null":typeof e=="string"?e.startsWith("${")?`System.getenv().getOrDefault("${e.slice(2,-1)}", "test-value")`:`"${e.replace(/"/g,'\\"')}"`:typeof e=="boolean"?e?"true":"false":typeof e=="number"?String(e):Array.isArray(e)?e.length===0?"List.of()":`List.of(${e.map(r=>this.toJavaLiteral(r)).join(", ")})`:"Map.of()"}};var Dg=class{generateTestScript(e,r,n){let i=[];if(i.push(`pm.test("Status code is ${e}", function () {`),i.push(`    pm.response.to.have.status(${e});`),i.push("});"),i.push(""),[204,202].includes(e))return i.push("// No response body expected"),i.join(`
`);if(r.length===0)return i.push("// No response schema defined"),i.join(`
`);i.push(`pm.test("${n} - Response validation", function () {`),i.push("    const jsonData = pm.response.json();"),i.push("");let o=new Set;for(let a of r){let l=a.path.match(/^([^[]+)\[0\]/);if(l){let c=l[1];if(!o.has(c)){o.add(c);let u=this.buildAccessor(c);i.push(`    pm.expect(${u}).to.be.an('array').that.is.not.empty;`)}}i.push(`    ${this.assertionToScript(a)}`)}return i.push("});"),i.join(`
`)}generatePreRequestScript(e,r){let n=["// Pre-request Script"];return(e||r)&&(n.push('if (!pm.environment.get("testUUID")) {'),n.push('    pm.environment.set("testUUID", pm.variables.replaceIn("{{$guid}}"));'),n.push("}"),n.push('pm.environment.set("timestamp", new Date().toISOString());')),n.join(`
`)}assertionToScript(e){let r=this.buildAccessor(e.path);switch(e.matcher){case"notNull":return`pm.expect(${r}).to.not.be.null;`;case"isNull":return`pm.expect(${r}).to.be.null;`;case"equals":return`pm.expect(${r}).to.eql(${JSON.stringify(e.value)});`;case"contains":return`pm.expect(${r}).to.include("${e.value}");`;case"matchesPattern":let n=e.value.replace(/^\^/,"").replace(/\$$/,"").replace(/\//g,"\\/");return`pm.expect(${r}).to.match(/${n}/);`;case"oneOf":return`pm.expect(${JSON.stringify(e.value)}).to.include(${r});`;case"isType":let i=e.value==="integer"?"number":e.value;return`pm.expect(typeof ${r}).to.eql("${i}");`;case"notEmpty":return`pm.expect(${r}).to.not.be.empty;`;case"greaterThan":return`pm.expect(${r}).to.be.above(${e.value});`;case"lessThan":return`pm.expect(${r}).to.be.below(${e.value});`;default:return`pm.expect(${r}).to.exist;`}}buildAccessor(e){let r=e.split(/\.|\[(\d+)\]/).filter(Boolean),n="jsonData";for(let i of r)/^\d+$/.test(i)?n+=`[${i}]`:n+=`["${i}"]`;return n}};var $g=class extends Ai{constructor(){super(),this.scripts=new Dg}get name(){return"postman"}get fileExtension(){return".json"}render(e){let r=this.buildCollection(e);return[{filename:`${e.meta.specTitle.toLowerCase().replace(/[^a-z0-9]+/g,"_").substring(0,50)}_postman_collection.json`,content:JSON.stringify(r,null,2),language:"json"}]}buildCollection(e){let r=this.groupEndpoints(e.endpoints);return{info:{name:e.meta.specTitle,description:`Generated by Pe4King
Source: ${e.meta.source}`,schema:"https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},item:r,variable:[{key:"baseUrl",value:e.config.baseUrl,type:"string"},{key:"authToken",value:"",type:"string"}],auth:{type:"bearer",bearer:[{key:"token",value:"{{authToken}}",type:"string"}]}}}groupEndpoints(e){let r=new Map;for(let n of e){let{endpoint:i}=n,s=i.tags?.[0]||this.extractPathPrefix(i.path);r.has(s)||r.set(s,[]);for(let o of n.scenarios)o.disabled||r.get(s).push(this.buildItem(n,o))}return Array.from(r.entries()).map(([n,i])=>({name:this.formatFolderName(n),item:i}))}buildItem(e,r){let{endpoint:n}=e,i=n.path,s=[];if(r.request.pathParams)for(let[c,u]of Object.entries(r.request.pathParams))i=i.replace(`{${c}}`,`:${c}`),s.push({key:c,value:u.startsWith("${")?`{{${c}}}`:u});let o=i.split("/").filter(c=>c),a={name:r.displayName,request:{method:n.method,header:[{key:"Content-Type",value:"application/json"},{key:"Accept",value:"application/json"}],url:{raw:`{{baseUrl}}${i}`,host:["{{baseUrl}}"],path:o,...s.length>0&&{variable:s}}},response:[]};r.request.body&&(a.request.body={mode:"raw",raw:JSON.stringify(r.request.body,null,2),options:{raw:{language:"json"}}});let l=this.scripts.generateTestScript(r.expected.statusCode,r.expected.assertions,r.displayName);if(a.event=[{listen:"test",script:{type:"text/javascript",exec:l.split(`
`)}}],n.pathParams.length>0||r.request.body){let c=this.scripts.generatePreRequestScript(n.pathParams.length>0,!!r.request.body);a.event.unshift({listen:"prerequest",script:{type:"text/javascript",exec:c.split(`
`)}})}return a}extractPathPrefix(e){let r=e.split("/").filter(n=>n&&!n.startsWith("{"));return r.length>=2?r.slice(0,2).join("/"):r[0]||"default"}formatFolderName(e){return e.split(/[/_-]/).map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}};var Fg=class{constructor(){this.renderers=new Map,this.renderers.set("pytest",new Pg),this.renderers.set("rest-assured",new Mg),this.renderers.set("postman",new $g)}generate(e,r){try{let i=new Fs(e).parse(),s={baseUrl:r.baseUrl||i.baseUrl,framework:r.framework||"pytest",pythonPackage:r.pythonPackage,javaPackage:r.javaPackage||"com.api.tests",generateNegativeTests:r.generateNegativeTests??!0,generateEdgeCases:r.generateEdgeCases??!1,generateUniversalTests:r.generateUniversalTests??!1,usePlaceholders:r.usePlaceholders??!0},o=this.buildTestModel(i,s),a=this.renderers.get(s.framework);if(!a)throw new Error(`Unknown framework: ${s.framework}`);let l=a.render(o),c=this.calculateStats(o);return{success:!0,files:l,stats:c}}catch(n){return{success:!1,files:[],stats:{totalEndpoints:0,totalTests:0,positiveTests:0,negativeTests:0,assertions:0},errors:[n.message]}}}buildTestModel(e,r){let n=[];for(let i of e.endpoints){let s=this.buildScenarios(i,r);n.push({endpoint:i,scenarios:s})}return{meta:{source:"OpenAPI Spec",generatedAt:new Date().toISOString(),version:"1.0.0",specTitle:e.title,specVersion:e.version},config:r,endpoints:n}}buildScenarios(e,r){let n=[];return n.push(this.buildPositiveScenario(e,r)),r.generateNegativeTests&&n.push(...this.buildNegativeScenarios(e)),n}buildPositiveScenario(e,r){let n=this.generateTestName(e),i={};if(e.pathParams.length>0){i.pathParams={};for(let o of e.pathParams)i.pathParams[o.name]=r.usePlaceholders?`\${${o.name.toUpperCase()}}`:String(this.generateSampleValue(o.schema))}if(e.queryParams.length>0){i.queryParams={};for(let o of e.queryParams)o.example!==void 0&&o.example!==null?i.queryParams[o.name]=String(o.example):o.schema.enumValues&&o.schema.enumValues.length>0?i.queryParams[o.name]=o.schema.enumValues[0]:i.queryParams[o.name]=String(this.generateSampleValue(o.schema))}e.requestBodySchema&&e.requestBodySchema.length>0&&(i.body=this.buildRequestBody(e.requestBodySchema));let s=this.buildAssertions(e);return{name:n,displayName:`${e.method} ${e.path}`,type:"positive",request:i,expected:{statusCode:e.successStatus,contentType:"application/json",assertions:s}}}buildNegativeScenarios(e){let r=[],n=this.generateTestName(e);if(e.pathParams.length>0&&r.push({name:`${n}_not_found`,displayName:`${e.method} ${e.path} - Not Found`,type:"negative",request:{},expected:{statusCode:404,assertions:[]}}),e.requestBodyRequired&&r.push({name:`${n}_empty_body`,displayName:`${e.method} ${e.path} - Empty Body`,type:"negative",request:{body:{}},expected:{statusCode:400,assertions:[]}}),e.security&&e.security.length>0&&r.push({name:`${n}_unauthorized`,displayName:`${e.method} ${e.path} - Unauthorized`,type:"negative",request:{},expected:{statusCode:401,assertions:[]}}),e.requestBodySchema&&e.requestBodySchema.length>0){let i=this.buildConstraintViolationTests(e,n);r.push(...i)}return r}buildConstraintViolationTests(e,r){let n=[],i=e.requestBodySchema||[],s=i.filter(o=>!o.path.includes(".")).slice(0,5);for(let o of s){if(o.enumValues&&o.enumValues.length>0&&n.push({name:`${r}_invalid_enum_${this.sanitizeName(o.name)}`,displayName:`${e.method} ${e.path} - Invalid ${o.name} enum`,type:"negative",request:{body:this.buildBodyWithField(i,o.name,"INVALID_ENUM_VALUE_XYZ")},expected:{statusCode:400,assertions:[]}}),o.minimum!==void 0&&n.push({name:`${r}_below_min_${this.sanitizeName(o.name)}`,displayName:`${e.method} ${e.path} - ${o.name} below minimum`,type:"negative",request:{body:this.buildBodyWithField(i,o.name,o.minimum-1)},expected:{statusCode:400,assertions:[]}}),o.maximum!==void 0&&n.push({name:`${r}_above_max_${this.sanitizeName(o.name)}`,displayName:`${e.method} ${e.path} - ${o.name} above maximum`,type:"negative",request:{body:this.buildBodyWithField(i,o.name,o.maximum+1)},expected:{statusCode:400,assertions:[]}}),o.minLength!==void 0&&o.minLength>0){let a=o.minLength>1?"x".repeat(o.minLength-1):"";n.push({name:`${r}_too_short_${this.sanitizeName(o.name)}`,displayName:`${e.method} ${e.path} - ${o.name} too short`,type:"negative",request:{body:this.buildBodyWithField(i,o.name,a)},expected:{statusCode:400,assertions:[]}})}if(o.maxLength!==void 0){let a="x".repeat(o.maxLength+10);n.push({name:`${r}_too_long_${this.sanitizeName(o.name)}`,displayName:`${e.method} ${e.path} - ${o.name} too long`,type:"negative",request:{body:this.buildBodyWithField(i,o.name,a)},expected:{statusCode:400,assertions:[]}})}o.pattern&&n.push({name:`${r}_pattern_mismatch_${this.sanitizeName(o.name)}`,displayName:`${e.method} ${e.path} - ${o.name} pattern mismatch`,type:"negative",request:{body:this.buildBodyWithField(i,o.name,"!!!INVALID_PATTERN!!!")},expected:{statusCode:400,assertions:[]}}),o.fieldType==="string"&&!o.enumValues&&n.push({name:`${r}_wrong_type_${this.sanitizeName(o.name)}`,displayName:`${e.method} ${e.path} - ${o.name} wrong type`,type:"negative",request:{body:this.buildBodyWithField(i,o.name,12345)},expected:{statusCode:400,assertions:[]}}),(o.fieldType==="integer"||o.fieldType==="number")&&n.push({name:`${r}_wrong_type_${this.sanitizeName(o.name)}`,displayName:`${e.method} ${e.path} - ${o.name} wrong type`,type:"negative",request:{body:this.buildBodyWithField(i,o.name,"not_a_number")},expected:{statusCode:400,assertions:[]}}),o.required&&n.push({name:`${r}_missing_${this.sanitizeName(o.name)}`,displayName:`${e.method} ${e.path} - Missing ${o.name}`,type:"negative",request:{body:this.buildBodyWithoutField(i,o.name)},expected:{statusCode:400,assertions:[]}})}return n}buildBodyWithField(e,r,n){let i={};for(let s of e)!s.path.includes(".")&&s.required&&s.name!==r&&(i[s.name]=this.generateSampleValue(s));return i[r]=n,i}buildBodyWithoutField(e,r){let n={};for(let i of e)!i.path.includes(".")&&i.required&&i.name!==r&&(n[i.name]=this.generateSampleValue(i));return n}sanitizeName(e){return e.replace(/[^a-zA-Z0-9]/g,"_").toLowerCase()}buildAssertions(e){let r=[];if(e.hasResponseSchema&&e.responseFields.length>0){let n=new Set;for(let i of e.responseFields){let s=i.path.match(/^([^[]+)\[0\]/);if(s){let a=s[1];n.has(a)||(n.add(a),r.push({path:a,matcher:"notEmpty",description:`${a} array is not empty`}))}let o=this.fieldToAssertions(i);r.push(...o)}}return r.length===0&&r.push({path:"$",matcher:"notNull",description:"Response body is not null"}),r}formatToMatcher(e){return{uuid:{matcher:"matchesPattern",value:"^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"},email:{matcher:"contains",value:"@"},uri:{matcher:"matchesPattern",value:"^https?://"},url:{matcher:"matchesPattern",value:"^https?://"},date:{matcher:"matchesPattern",value:"^\\d{4}-\\d{2}-\\d{2}$"},"date-time":{matcher:"matchesPattern",value:"^\\d{4}-\\d{2}-\\d{2}"}}[e]||null}inferMatcherFromName(e){let r=e.name.toLowerCase();return r==="id"||r==="uuid"||r==="guid"||r.endsWith("_id")||r.endsWith("Id")||r.endsWith("_uuid")?{matcher:"notNull"}:r.includes("date")||r.includes("time")||r.endsWith("_at")||r.endsWith("At")||r==="created"||r==="updated"||r==="deleted"||r==="timestamp"||r.includes("timestamp")?{matcher:"matchesPattern",value:"^\\d{4}-\\d{2}-\\d{2}"}:r.includes("email")||r.includes("mail")||r==="e_mail"?{matcher:"contains",value:"@"}:r.includes("url")||r.includes("uri")||r.includes("link")||r.includes("href")||r.includes("endpoint")||r.includes("callback")?{matcher:"matchesPattern",value:"^https?://"}:r.includes("phone")||r.includes("mobile")||r.includes("tel")||r==="fax"||r.includes("cell")?{matcher:"matchesPattern",value:"^[+0-9()\\s-]+$"}:r==="name"||r==="title"||r==="label"||r.endsWith("_name")||r.endsWith("Name")||r.endsWith("_title")||r.endsWith("Title")?{matcher:"notNull"}:r.includes("count")||r.includes("total")||r.includes("size")||r.includes("length")||r.includes("amount")||r.includes("quantity")||r.startsWith("num_")||r.startsWith("number_of")?{matcher:"greaterThanOrEqual",value:0}:r.includes("price")||r.includes("cost")||r.includes("amount")||r.includes("fee")||r.includes("sum")||r.includes("balance")||r.includes("salary")||r.includes("payment")?{matcher:"greaterThanOrEqual",value:0}:r.includes("percent")||r.includes("ratio")||r.includes("rate")||r.endsWith("_pct")||r.endsWith("Pct")?{matcher:"lessThanOrEqual",value:100}:r==="age"||r.endsWith("_age")||r.endsWith("Age")?{matcher:"greaterThanOrEqual",value:0}:r==="version"||r.endsWith("_version")||r.endsWith("Version")?{matcher:"notNull"}:r==="status"||r==="state"||r.endsWith("_status")||r.endsWith("Status")?{matcher:"notNull"}:r==="ip"||r.includes("ip_address")||r.includes("ipaddress")||r.endsWith("_ip")||r.endsWith("Ip")?{matcher:"matchesPattern",value:"^[0-9.:]+$"}:r.startsWith("is_")||r.startsWith("has_")||r.startsWith("can_")||r.startsWith("should_")||r.startsWith("allow_")||r.startsWith("enable")||r.endsWith("_enabled")||r.endsWith("_active")||r.endsWith("_flag")?{matcher:"notNull"}:null}typeToAssertion(e){let r=this.inferMatcherFromName(e);if(r)return{path:e.path,matcher:r.matcher,value:r.value,description:`${e.name} matches expected pattern`};switch(e.fieldType){case"array":return{path:e.path,matcher:"notEmpty",description:`${e.name} is not empty array`};case"boolean":return{path:e.path,matcher:"isType",value:"boolean",description:`${e.name} is boolean`};case"integer":case"number":return{path:e.path,matcher:"isType",value:"number",description:`${e.name} is number`};default:return{path:e.path,matcher:"notNull",description:`${e.name} is not null`}}}fieldToAssertions(e){let r=[];if((e.path.match(/\./g)||[]).length>3)return r;if(e.enumValues&&e.enumValues.length>0)return r.push({path:e.path,matcher:"oneOf",value:e.enumValues,description:`${e.name} is one of allowed values`}),r;if(e.format){let i=this.formatToMatcher(e.format);i&&r.push({path:e.path,matcher:i.matcher,value:i.value,description:`${e.name} matches ${e.format} format`})}if(e.pattern&&!e.format&&r.push({path:e.path,matcher:"matchesPattern",value:e.pattern,description:`${e.name} matches schema pattern`}),e.minimum!==void 0&&r.push({path:e.path,matcher:"greaterThanOrEqual",value:e.minimum,description:`${e.name} >= ${e.minimum}`}),e.maximum!==void 0&&r.push({path:e.path,matcher:"lessThanOrEqual",value:e.maximum,description:`${e.name} <= ${e.maximum}`}),e.exclusiveMinimum!==void 0&&r.push({path:e.path,matcher:"greaterThan",value:e.exclusiveMinimum,description:`${e.name} > ${e.exclusiveMinimum}`}),e.exclusiveMaximum!==void 0&&r.push({path:e.path,matcher:"lessThan",value:e.exclusiveMaximum,description:`${e.name} < ${e.exclusiveMaximum}`}),e.minLength!==void 0&&e.minLength>0&&r.push({path:e.path,matcher:"hasMinLength",value:e.minLength,description:`${e.name} length >= ${e.minLength}`}),e.maxLength!==void 0&&r.push({path:e.path,matcher:"hasMaxLength",value:e.maxLength,description:`${e.name} length <= ${e.maxLength}`}),e.fieldType==="array"&&(e.minItems!==void 0&&e.minItems>0&&r.push({path:e.path,matcher:"hasSizeGreaterThan",value:e.minItems-1,description:`${e.name} has at least ${e.minItems} items`}),e.maxItems!==void 0&&r.push({path:e.path,matcher:"hasSizeLessThan",value:e.maxItems+1,description:`${e.name} has at most ${e.maxItems} items`})),r.length===0&&e.description){let i=this.inferFromDescription(e);i&&r.push({path:e.path,matcher:i.matcher,value:i.value,description:`${e.name} (inferred from description)`})}if(r.length===0){let i=this.inferMatcherFromName(e);i&&r.push({path:e.path,matcher:i.matcher,value:i.value,description:`${e.name} matches expected pattern`})}return r.length===0?r.push(this.typeToAssertion(e)):(e.fieldType==="integer"||e.fieldType==="number")&&r.unshift({path:e.path,matcher:"isType",value:"number",description:`${e.name} is number`}),r}inferFromDescription(e){let r=(e.description||"").toLowerCase();return r.includes("email")||r.includes("e-mail")||r.includes("\u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D")?{matcher:"contains",value:"@"}:r.includes("url")||r.includes("\u0441\u0441\u044B\u043B\u043A")||r.includes("uri")||r.includes("link")||r.includes("href")?{matcher:"matchesPattern",value:"^https?://"}:r.includes("phone")||r.includes("\u0442\u0435\u043B\u0435\u0444\u043E\u043D")||r.includes("mobile")?{matcher:"matchesPattern",value:"^[+0-9]"}:r.includes("uuid")||r.includes("guid")||r.includes("unique identifier")||r.includes("\u0443\u043D\u0438\u043A\u0430\u043B\u044C\u043D\u044B\u0439 \u0438\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440")?{matcher:"matchesPattern",value:"[0-9a-f]{8}-[0-9a-f]{4}"}:r.includes("timestamp")||r.includes("iso 8601")||r.includes("rfc 3339")||r.includes("\u0434\u0430\u0442\u0430")?{matcher:"matchesPattern",value:"^\\d{4}-\\d{2}-\\d{2}"}:r.includes("positive")||r.includes("\u043F\u043E\u043B\u043E\u0436\u0438\u0442\u0435\u043B\u044C\u043D")||r.includes("greater than zero")||r.includes("\u0431\u043E\u043B\u044C\u0448\u0435 \u043D\u0443\u043B\u044F")?{matcher:"greaterThan",value:0}:r.includes("non-negative")||r.includes("\u043D\u0435\u043E\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043B\u044C\u043D")||r.includes(">= 0")?{matcher:"greaterThanOrEqual",value:0}:r.includes("percentage")||r.includes("\u043F\u0440\u043E\u0446\u0435\u043D\u0442")?{matcher:"lessThanOrEqual",value:100}:null}buildRequestBody(e){let r={};for(let n of e)n.required&&!n.path.includes(".")&&(r[n.name]=this.generateSampleValue(n));if(Object.keys(r).length===0){let n=e.filter(i=>!i.path.includes(".")&&["name","title","description","id"].includes(i.name.toLowerCase()));for(let i of n.slice(0,3))r[i.name]=this.generateSampleValue(i)}return r}generateSampleValue(e){if(e.enumValues&&e.enumValues.length>0)return e.enumValues[0];switch(e.format){case"uuid":return"${UUID}";case"email":return"test@example.com";case"date":return"2024-01-01";case"date-time":return"2024-01-01T00:00:00Z";case"uri":case"url":return"https://example.com"}switch(e.fieldType){case"string":return`Test ${e.name}`;case"integer":return 1;case"number":return 1;case"boolean":return!0;case"array":return[];case"object":return{};default:return null}}generateTestName(e){if(e.operationId)return`test_${this.toSnakeCase(e.operationId)}`;let r=e.path.replace(/\{(\w+)\}/g,"by_$1").split("/").filter(n=>n).map(n=>this.toSnakeCase(n));return`test_${e.method.toLowerCase()}_${r.join("_")}`}toSnakeCase(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase().replace(/^_/,"").replace(/-/g,"_").replace(/__+/g,"_")}generateForEndpoints(e,r){try{let n={baseUrl:r.baseUrl||"",framework:r.framework||"pytest",pythonPackage:r.pythonPackage,javaPackage:r.javaPackage||"com.api.tests",generateNegativeTests:r.generateNegativeTests??!0,generateEdgeCases:r.generateEdgeCases??!1,generateUniversalTests:r.generateUniversalTests??!1,usePlaceholders:r.usePlaceholders??!0},i={title:"API Tests",version:"1.0.0",baseUrl:n.baseUrl},s=this.buildTestModelFromEndpoints(e,i,n),o=this.renderers.get(n.framework);if(!o)throw new Error(`Unknown framework: ${n.framework}`);let a=o.render(s),l=this.calculateStats(s);return{success:!0,files:a,stats:l}}catch(n){return{success:!1,files:[],stats:{totalEndpoints:0,totalTests:0,positiveTests:0,negativeTests:0,assertions:0},errors:[n.message]}}}buildTestModelFromEndpoints(e,r,n){let i=[];for(let s of e){let o=this.buildScenarios(s,n);i.push({endpoint:s,scenarios:o})}return{meta:{source:"OpenAPI Spec (filtered)",generatedAt:new Date().toISOString(),version:"1.0.0",specTitle:r.title,specVersion:r.version},config:n,endpoints:i}}calculateStats(e){let r=0,n=0,i=0,s=0;for(let o of e.endpoints)for(let a of o.scenarios)r++,a.type==="positive"?n++:i++,s+=a.expected.assertions.length;return{totalEndpoints:e.endpoints.length,totalTests:r,positiveTests:n,negativeTests:i,assertions:s}}};var ve=st(require("vscode")),Ci=st(require("fs")),Eu=st(require("path")),SW=require("child_process");var rxe=st(require("https")),nxe=st(require("http")),ixe=["/v3/api-docs","/v2/api-docs","/v2/swagger.json","/v3/swagger.json","/swagger.json","/openapi.json","/openapi.yaml","/api-docs","/swagger/v1/swagger.json","/swagger/v2/swagger.json","/api/swagger.json","/docs/openapi.json"],Bg=class{constructor(){this.defaultTimeout=3e4}async resolve(e,r={}){let n=e.trim();!n.startsWith("http://")&&!n.startsWith("https://")&&(n="https://"+n),n=n.replace(/\/$/,"");let i=await this.tryFetch(n,r);if(i.success&&this.isValidSpec(i.specContent))return{...i,resolvedUrl:n};if(this.looksLikeSwaggerUI(n)){let o=await this.extractSpecUrlFromUI(n,r);if(o){let a=await this.tryFetch(o,r);if(a.success&&this.isValidSpec(a.specContent))return{...a,resolvedUrl:o}}}let s=this.extractBaseUrl(n);for(let o of ixe){let a=s+o,l=await this.tryFetch(a,r);if(l.success&&this.isValidSpec(l.specContent))return{...l,resolvedUrl:a}}return{success:!1,error:"Could not find OpenAPI specification. Please provide a direct URL to the spec file (e.g., /v3/api-docs or /swagger.json)"}}async tryFetch(e,r){return new Promise(n=>{let i=e.startsWith("https")?rxe:nxe,s=r.timeout||this.defaultTimeout,o={headers:{Accept:"application/json, application/yaml, text/yaml, */*","User-Agent":"Pe4King-VSCode/1.0",...r.headers},timeout:s},a=i.get(e,o,l=>{if(l.statusCode===301||l.statusCode===302||l.statusCode===307){let u=l.headers.location;if(u){let d=u.startsWith("http")?u:new URL(u,e).href;this.tryFetch(d,r).then(n);return}}if(l.statusCode!==200){n({success:!1,error:`HTTP ${l.statusCode}: ${l.statusMessage}`});return}let c="";l.on("data",u=>c+=u),l.on("end",()=>{n({success:!0,specContent:c})})});a.on("error",l=>{n({success:!1,error:l.message})}),a.on("timeout",()=>{a.destroy(),n({success:!1,error:"Request timeout"})})})}isValidSpec(e){try{let r;try{r=JSON.parse(e)}catch{return!!(e.includes("openapi:")||e.includes("swagger:"))}return!!(r.openapi||r.swagger||r.paths)}catch{return!1}}looksLikeSwaggerUI(e){return[/swagger-ui/i,/swagger\/index/i,/api-docs.*html/i,/docs\/?$/i,/\.swagger\.io/i,/swagger\.[a-z]+\/?$/i].some(n=>n.test(e))}async extractSpecUrlFromUI(e,r){let n=await this.tryFetch(e,r);if(!n.success||!n.specContent)return null;let i=n.specContent,s=i.match(/url:\s*["']([^"']+)["']/);if(s){let l=s[1];return l.startsWith("http")?l:new URL(l,e).href}let o=i.match(/data-url=["']([^"']+)["']/);if(o){let l=o[1];return l.startsWith("http")?l:new URL(l,e).href}let a=i.match(/configUrl:\s*["']([^"']+)["']/);if(a){let l=a[1].startsWith("http")?a[1]:new URL(a[1],e).href,c=await this.tryFetch(l,r);if(c.success&&c.specContent)try{let u=JSON.parse(c.specContent);if(u.url)return u.url.startsWith("http")?u.url:new URL(u.url,e).href}catch{}}return null}extractBaseUrl(e){try{let r=new URL(e);return`${r.protocol}//${r.host}`}catch{return e}}};var Oa=class{constructor(){this.counter=0}generateValue(e){return e.example!==void 0?e.example:e.enumValues&&e.enumValues.length>0?e.enumValues[0]:this.generateByType(e)}generateByType(e){let r=e.format?.toLowerCase(),n=e.name.toLowerCase();switch(e.fieldType){case"string":return this.generateString(r,n);case"integer":return this.generateInteger(r,n);case"number":return this.generateNumber(r);case"boolean":return!0;case"array":if(e.nested&&e.nested.length>0){if(e.nested[0].fieldType==="object"||e.nested.length>1){let i={};for(let s of e.nested)i[s.name]=this.generateValue(s);return[i]}return[this.generateValue(e.nested[0])]}return[];case"object":if(e.nested&&e.nested.length>0){let i={};for(let s of e.nested)i[s.name]=this.generateValue(s);return i}return{};default:return null}}generateString(e,r){switch(e){case"uuid":return"550e8400-e29b-41d4-a716-446655440000";case"date":return"2024-01-15";case"date-time":return"2024-01-15T10:30:00Z";case"time":return"10:30:00";case"email":return"user@example.com";case"uri":case"url":return"https://example.com/resource";case"hostname":return"api.example.com";case"ipv4":return"192.168.1.1";case"ipv6":return"2001:0db8:85a3:0000:0000:8a2e:0370:7334";case"byte":return"SGVsbG8gV29ybGQ=";case"binary":return"<binary data>";case"password":return"********"}if(r){if(r.includes("id")||r.endsWith("id"))return"550e8400-e29b-41d4-a716-446655440000";if(r.includes("email"))return"user@example.com";if(r.includes("name"))return"Sample Name";if(r.includes("title"))return"Sample Title";if(r.includes("description"))return"Sample description text";if(r.includes("url")||r.includes("link"))return"https://example.com";if(r.includes("phone"))return"+1-555-123-4567";if(r.includes("address"))return"123 Main Street";if(r.includes("city"))return"New York";if(r.includes("country"))return"US";if(r.includes("zip")||r.includes("postal"))return"10001";if(r.includes("token"))return"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...";if(r.includes("status"))return"active";if(r.includes("type"))return"default"}return"string"}generateInteger(e,r){switch(e){case"int32":case"int64":return 0}if(r){if(r.includes("count")||r.includes("total"))return 10;if(r.includes("page"))return 1;if(r.includes("size")||r.includes("limit"))return 20;if(r.includes("offset")||r.includes("skip"))return 0;if(r.includes("port"))return 8080;if(r.includes("year"))return 2024;if(r.includes("age"))return 25}return 1}generateNumber(e){switch(e){case"float":return 3.14;case"double":return 3.141592653589793}return 1.5}generateRequestBody(e){let r={};for(let n of e)!n.path.includes(".")&&!n.path.includes("[")&&(r[n.name]=this.generateValue(n));return r}generateParamValue(e,r){return r!==void 0?r:this.generateValue(e)}reset(){this.counter=0}};var jg=class{build(e){let r=this.groupEndpoints(e),n=[];for(let[i,s]of r){let o=s.map((a,l)=>({id:`${i}-${l}`,label:`${a.method} ${a.path}`,type:"endpoint",checked:!0,endpoint:a,method:a.method,path:a.path}));n.push({id:i,label:`${this.formatGroupName(i)} (${o.length})`,type:"folder",checked:!0,children:o})}return n.sort((i,s)=>i.label.localeCompare(s.label)),n}groupEndpoints(e){let r=new Map;for(let n of e){let i=n.tags?.[0]||this.extractPathGroup(n.path);r.has(i)||r.set(i,[]),r.get(i).push(n)}for(let[,n]of r)n.sort((i,s)=>{let o=i.path.localeCompare(s.path);return o!==0?o:this.methodOrder(i.method)-this.methodOrder(s.method)});return r}extractPathGroup(e){return e.split("/").filter(i=>i&&!i.startsWith("{")).filter(i=>!["api","v1","v2","v3"].includes(i.toLowerCase()))[0]||"other"}formatGroupName(e){return e.replace(/([A-Z])/g," $1").replace(/[-_]/g," ").trim().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" ")}methodOrder(e){return{GET:1,POST:2,PUT:3,PATCH:4,DELETE:5}[e]||99}};var nr=st(require("vscode"));var sxe=st(require("https")),oxe=st(require("http")),v6=require("url"),qa=class{constructor(){this.defaultTimeout=3e4}async execute(e){let r=Date.now();return new Promise(n=>{try{let i=new v6.URL(e.url),s=i.protocol==="https:",o=s?sxe:oxe,a={method:e.method.toUpperCase(),hostname:i.hostname,port:i.port||(s?443:80),path:i.pathname+i.search,headers:{"User-Agent":"Pe4King-VSCode/1.0",Accept:"application/json, */*",...e.headers},timeout:e.timeout||this.defaultTimeout,rejectUnauthorized:e.rejectUnauthorized??!0};if(e.body){let c=Buffer.from(e.body,"utf-8");a.headers={...a.headers,"Content-Length":c.length.toString()}}let l=o.request(a,c=>{let u="";c.on("data",d=>{u+=d}),c.on("end",()=>{let d=Date.now()-r,p={};for(let[f,y]of Object.entries(c.headers))y!==void 0&&(p[f]=y);n({success:!0,status:c.statusCode,statusText:c.statusMessage||this.getStatusText(c.statusCode||0),headers:p,body:u,time:d,size:Buffer.byteLength(u,"utf-8")})})});l.on("error",c=>{n({success:!1,error:c.message,time:Date.now()-r})}),l.on("timeout",()=>{l.destroy(),n({success:!1,error:`Request timeout after ${e.timeout||this.defaultTimeout}ms`,time:Date.now()-r})}),e.body&&l.write(e.body),l.end()}catch(i){n({success:!1,error:i.message,time:Date.now()-r})}})}getStatusText(e){return{200:"OK",201:"Created",202:"Accepted",204:"No Content",301:"Moved Permanently",302:"Found",304:"Not Modified",400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",409:"Conflict",422:"Unprocessable Entity",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout"}[e]||"Unknown"}};var cx=require("child_process"),axe=`
import sys
import json

# Read context from stdin
context_json = sys.stdin.read()
context = json.loads(context_json)

request = context.get('request', {})
response = context.get('response')
env = context.get('env', {})

# Results collector with individual test tracking
__results__ = {
    'assertions': {'passed': 0, 'failed': 0, 'errors': [], 'tests': []},
    'output': [],
    'modified_request': None
}

def log(*args):
    __results__['output'].append(' '.join(str(a) for a in args))

def set_header(name, value):
    if __results__['modified_request'] is None:
        __results__['modified_request'] = {}
    if 'headers' not in __results__['modified_request']:
        __results__['modified_request']['headers'] = dict(request.get('headers', {}))
    __results__['modified_request']['headers'][name] = value

def set_body(body):
    if __results__['modified_request'] is None:
        __results__['modified_request'] = {}
    __results__['modified_request']['body'] = body

def set_url(url):
    if __results__['modified_request'] is None:
        __results__['modified_request'] = {}
    __results__['modified_request']['url'] = url

# Test function that tracks each test individually
def test(condition, message=None):
    test_name = message or f'Test #{len(__results__["assertions"]["tests"]) + 1}'
    passed = bool(condition)
    __results__['assertions']['tests'].append({'name': test_name, 'passed': passed})
    if passed:
        __results__['assertions']['passed'] += 1
    else:
        __results__['assertions']['failed'] += 1
        __results__['assertions']['errors'].append(test_name)

# Assert equals with actual/expected tracking
def assert_eq(actual, expected, message=None):
    test_name = message or f'Expected {expected}'
    passed = actual == expected
    __results__['assertions']['tests'].append({
        'name': test_name,
        'passed': passed,
        'actual': str(actual),
        'expected': str(expected)
    })
    if passed:
        __results__['assertions']['passed'] += 1
    else:
        __results__['assertions']['failed'] += 1
        __results__['assertions']['errors'].append(test_name)

# Assert status code
def assert_status(expected, message=None):
    actual = response.get('status') if response else None
    test_name = message or f'Status should be {expected}'
    assert_eq(actual, expected, test_name)

# Assert response time
def assert_time(max_ms, message=None):
    actual = response.get('time_ms') if response else 0
    test_name = message or f'Response time < {max_ms}ms'
    passed = actual < max_ms
    __results__['assertions']['tests'].append({
        'name': test_name,
        'passed': passed,
        'actual': f'{actual}ms',
        'expected': f'< {max_ms}ms'
    })
    if passed:
        __results__['assertions']['passed'] += 1
    else:
        __results__['assertions']['failed'] += 1
        __results__['assertions']['errors'].append(test_name)

try:
    # Execute user script
    exec('''
USER_SCRIPT_PLACEHOLDER
''')
except AssertionError as e:
    __results__['assertions']['failed'] += 1
    __results__['assertions']['errors'].append(str(e) or 'Assertion failed')
except Exception as e:
    __results__['assertions']['failed'] += 1
    __results__['assertions']['errors'].append(f'{type(e).__name__}: {e}')

# Output results as JSON
print(json.dumps(__results__))
`,Pa=class{constructor(e){this.pythonPath="python";this.timeout=1e4;e?.pythonPath&&(this.pythonPath=e.pythonPath),e?.timeout&&(this.timeout=e.timeout)}async execute(e,r){return new Promise(n=>{let i=axe.replace("USER_SCRIPT_PLACEHOLDER",e),s=(0,cx.spawn)(this.pythonPath,["-c",i],{stdio:["pipe","pipe","pipe"],timeout:this.timeout}),o="",a="";s.stdout.on("data",c=>{o+=c.toString()}),s.stderr.on("data",c=>{a+=c.toString()}),s.stdin.write(JSON.stringify(r)),s.stdin.end();let l=setTimeout(()=>{s.kill(),n({success:!1,error:`Script timeout after ${this.timeout}ms`})},this.timeout);s.on("close",c=>{if(clearTimeout(l),c!==0&&!o){n({success:!1,error:a||`Python exited with code ${c}`,output:a});return}try{let u=JSON.parse(o);console.log("[PythonRunner] Raw results:",JSON.stringify(u,null,2)),console.log("[PythonRunner] tests array:",u.assertions?.tests);let d=u.assertions?.failed>0;n({success:!d,output:u.output?.join(`
`)||"",assertions:{passed:u.assertions?.passed||0,failed:u.assertions?.failed||0,errors:u.assertions?.errors||[],tests:u.assertions?.tests||[]},modifiedRequest:u.modified_request?{headers:u.modified_request.headers,body:u.modified_request.body,url:u.modified_request.url}:void 0})}catch{n({success:!1,error:"Failed to parse script output",output:o+a})}}),s.on("error",c=>{clearTimeout(l),n({success:!1,error:`Failed to run Python: ${c.message}`})})})}async checkPython(){return new Promise(e=>{let r=(0,cx.spawn)(this.pythonPath,["--version"],{stdio:["pipe","pipe","pipe"]}),n="";r.stdout.on("data",i=>{n+=i.toString()}),r.stderr.on("data",i=>{n+=i.toString()}),r.on("close",i=>{e(i===0?{available:!0,version:n.trim()}:{available:!1,error:"Python not found"})}),r.on("error",i=>{e({available:!1,error:i.message})})})}};var Ug={Status:[{type:"status",name:"Status is 200",description:"Response status code equals 200",icon:"check",defaultConfig:{expected:200}},{type:"status",name:"Status is 201",description:"Response status code equals 201 (Created)",icon:"check",defaultConfig:{expected:201}},{type:"status",name:"Status is 204",description:"Response status code equals 204 (No Content)",icon:"check",defaultConfig:{expected:204}},{type:"statusFamily",name:"Status is 2xx",description:"Response status code is successful (200-299)",icon:"check-all",defaultConfig:{expected:"2xx"}},{type:"status",name:"Status is 400",description:"Response status code equals 400 (Bad Request)",icon:"error",defaultConfig:{expected:400}},{type:"status",name:"Status is 401",description:"Response status code equals 401 (Unauthorized)",icon:"lock",defaultConfig:{expected:401}},{type:"status",name:"Status is 404",description:"Response status code equals 404 (Not Found)",icon:"search",defaultConfig:{expected:404}}],Body:[{type:"notEmpty",name:"Body is not empty",description:"Response body exists and is not empty",icon:"file",defaultConfig:{}},{type:"hasJsonBody",name:"Body is JSON",description:"Response has application/json content type",icon:"json",defaultConfig:{}},{type:"hasField",name:"Body has field",description:"Response body contains specific field",icon:"symbol-field",defaultConfig:{field:"id"}},{type:"fieldNotNull",name:"Field is not null",description:"Specific field exists and is not null",icon:"symbol-key",defaultConfig:{field:"id"}},{type:"fieldEquals",name:"Field equals value",description:"Specific field equals expected value",icon:"symbol-constant",defaultConfig:{field:"status",expected:"active"}}],Performance:[{type:"responseTime",name:"Response time < 200ms",description:"Response received within 200 milliseconds",icon:"dashboard",defaultConfig:{maxMs:200}},{type:"responseTime",name:"Response time < 500ms",description:"Response received within 500 milliseconds",icon:"dashboard",defaultConfig:{maxMs:500}},{type:"responseTime",name:"Response time < 1s",description:"Response received within 1 second",icon:"dashboard",defaultConfig:{maxMs:1e3}}],Headers:[{type:"headerExists",name:"Has Content-Type",description:"Response has Content-Type header",icon:"list-flat",defaultConfig:{header:"Content-Type"}},{type:"headerExists",name:"Has Authorization",description:"Response has Authorization header",icon:"key",defaultConfig:{header:"Authorization"}},{type:"headerEquals",name:"Content-Type is JSON",description:"Content-Type header equals application/json",icon:"json",defaultConfig:{header:"Content-Type",expected:"application/json"}}],JSONPath:[{type:"arrayLength",name:"Array length equals",description:"Check array has exact length",icon:"symbol-array",defaultConfig:{field:"$.items",expected:10,operator:"=="}},{type:"arrayLength",name:"Array not empty",description:"Check array has items",icon:"symbol-array",defaultConfig:{field:"$.items",expected:0,operator:">"}},{type:"allMatch",name:"All items match",description:"All array items satisfy condition",icon:"check-all",defaultConfig:{field:"$.items[*]",condition:"active == true"}},{type:"anyMatch",name:"Any item matches",description:"At least one item satisfies condition",icon:"pass",defaultConfig:{field:"$.items[*]",condition:'priority == "high"'}},{type:"hasField",name:"Has nested field (JSONPath)",description:"Check field exists using JSONPath",icon:"symbol-field",defaultConfig:{field:"$.data.users[0].email"}}],Custom:[{type:"custom",name:"Array not empty",description:"Check that array has items",icon:"symbol-array",defaultConfig:{expression:"response.body.items.length > 0",description:"Items array is not empty"}},{type:"custom",name:"All items valid",description:"Check all items pass validation",icon:"check-all",defaultConfig:{expression:"all(response.body.items, i => i.valid)",description:"All items are valid"}},{type:"custom",name:"Custom expression...",description:"Write your own JS expression",icon:"code",defaultConfig:{expression:"",description:""}}]};function S6(t){switch(t.type){case"status":return`test(response['status'] == ${t.expected}, 'Status should be ${t.expected}')`;case"statusFamily":{let e=t.expected;return`test(str(response['status']).startswith('${e.charAt(0)}'), 'Status should be ${e}')`}case"notEmpty":return"test(response['body'], 'Body should not be empty')";case"hasJsonBody":return"test('application/json' in response['headers'].get('content-type', ''), 'Should be JSON')";case"hasField":return`test('${t.field}' in response['body'], 'Should have field "${t.field}"')`;case"fieldNotNull":return`test(response['body'].get('${t.field}') is not None, '"${t.field}" should not be null')`;case"fieldEquals":{let e=typeof t.expected=="string"?`'${t.expected}'`:t.expected,r=typeof t.expected=="string"?t.expected:String(t.expected);return`test(response['body'].get('${t.field}') == ${e}, "${t.field} should equal ${r}")`}case"responseTime":return`test(response['time_ms'] < ${t.maxMs}, 'Response time should be < ${t.maxMs}ms')`;case"headerExists":return`test('${t.header?.toLowerCase()}' in response['headers'], 'Should have header "${t.header}"')`;case"headerEquals":return`test(response['headers'].get('${t.header?.toLowerCase()}') == '${t.expected}', '"${t.header}" should equal "${t.expected}"')`;case"arrayLength":{let e=t.operator||"==";return`test(len(response['body'].get('${t.field}', [])) ${e} ${t.expected}, 'Array length check')`}case"custom":{let e=(t.description||"Custom assertion").replace(/"/g,'\\"');return t.expression?`# ${t.description||"Custom test"}
test(${t.expression}, "${e}")`:`# Custom test
test(True, "Add your assertion here")`}default:return`# ${t.type}
test(True, '${t.type}')`}}function Bs(t){switch(t.type){case"status":return`Status = ${t.expected}`;case"statusFamily":return`Status is ${t.expected}`;case"notEmpty":return"Body not empty";case"hasJsonBody":return"Body is JSON";case"hasField":return`Has field "${t.field}"`;case"fieldNotNull":return`"${t.field}" not null`;case"fieldEquals":return`"${t.field}" = ${t.expected}`;case"responseTime":return`Time < ${t.maxMs}ms`;case"headerExists":return`Has header "${t.header}"`;case"headerEquals":return`"${t.header}" = ${t.expected}`;case"custom":return t.description||t.expression?.substring(0,30)+"..."||"Custom";case"arrayLength":return`len(${t.field}) ${t.operator||"=="} ${t.expected}`;case"allMatch":return`all(${t.field}) match ${t.condition}`;case"anyMatch":return`any(${t.field}) match ${t.condition}`;default:return t.type}}var Wg=class{constructor(e){this._currentTests=[];this._executor=new qa,this._sampleGenerator=new Oa,this._pythonRunner=new Pa,this._collectionManager=e}open(e){this._options=e,this._sampleGenerator.reset(),this._panel?this._panel.reveal(nr.ViewColumn.Beside):(this._panel=nr.window.createWebviewPanel("pe4kingRequest",`${e.endpoint.method} ${this.getShortPath(e.endpoint.path)}`,nr.ViewColumn.Beside,{enableScripts:!0,retainContextWhenHidden:!0}),this._panel.onDidDispose(()=>{this._panel=void 0}),this._panel.webview.onDidReceiveMessage(async r=>{switch(r.type){case"sendRequest":await this._handleSendRequest(r);break;case"copyAsCurl":this._handleCopyAsCurl(r);break;case"saveToCollection":await this._handleSaveToCollection(r);break;case"getCollections":this._sendCollections();break;case"createCollection":this._collectionManager.createCollection(r.name),this._sendCollections();break}})),this._panel.title=`${e.endpoint.method} ${this.getShortPath(e.endpoint.path)}`,this._panel.webview.html=this._getHtmlContent(e)}getShortPath(e){let r=e.split("/").filter(Boolean);return r.length>3?"/.../"+r.slice(-2).join("/"):e}async _handleSendRequest(e){this._panel?.webview.postMessage({type:"loading"});let r=e.url,n={...e.headers},i=e.body,s=e.scripts||this._currentScripts,o;if(s?.preRequest){let l={request:{method:e.method,url:r,headers:n,body:i},env:{}};o=await this._pythonRunner.execute(s.preRequest,l),this._panel?.webview.postMessage({type:"preRequestResult",result:o}),o.modifiedRequest&&(o.modifiedRequest.url&&(r=o.modifiedRequest.url),o.modifiedRequest.headers&&(n={...n,...o.modifiedRequest.headers}),o.modifiedRequest.body!==void 0&&(i=o.modifiedRequest.body))}let a=await this._executor.execute({method:e.method,url:r,headers:n,body:i,rejectUnauthorized:!1});if(this._panel?.webview.postMessage({type:"response",result:a}),s?.test&&a.success){let l={request:{method:e.method,url:r,headers:n,body:i},response:{status:a.status||0,statusText:a.statusText||"",headers:a.headers||{},body:a.body||"",time_ms:a.time||0,size:a.size||0},env:{}},c=await this._pythonRunner.execute(s.test,l);console.log("[Pe4King] Test result:",JSON.stringify(c,null,2)),this._panel?.webview.postMessage({type:"testResult",result:c})}if(this._currentTests.length>0&&a.success){let l=this._executeSnippets(this._currentTests,{status:a.status||0,headers:a.headers||{},body:a.body||"",time:a.time||0});this._panel?.webview.postMessage({type:"snippetResults",results:l})}}_executeSnippets(e,r){return e.filter(n=>n.enabled).map(n=>{try{let i;try{i=JSON.parse(r.body)}catch{i=r.body}let s={};for(let[l,c]of Object.entries(r.headers))s[l.toLowerCase()]=Array.isArray(c)?c[0]:c;let o=!1,a=Bs(n);switch(n.type){case"status":o=r.status===n.expected;break;case"statusFamily":{let l=n.expected;o=String(r.status).startsWith(l.charAt(0));break}case"notEmpty":o=r.body!==""&&r.body!==null;break;case"hasJsonBody":o=(s["content-type"]||"").includes("application/json");break;case"hasField":o=this._getNestedValue(i,n.field)!==void 0;break;case"fieldNotNull":{let l=this._getNestedValue(i,n.field);o=l!=null;break}case"fieldEquals":o=this._getNestedValue(i,n.field)===n.expected;break;case"responseTime":o=r.time<(n.maxMs||1e3);break;case"headerExists":o=n.header.toLowerCase()in s;break;case"headerEquals":o=s[n.header.toLowerCase()]===n.expected;break}return{name:a,passed:o}}catch(i){return{name:Bs(n),passed:!1,error:i.message}}})}_getNestedValue(e,r){if(!e||typeof e!="object")return;let n=r.split("."),i=e;for(let s of n){if(i==null)return;i=i[s]}return i}_handleCopyAsCurl(e){let r=`curl -X ${e.method} '${e.url}'`;for(let[n,i]of Object.entries(e.headers))i&&(r+=` \\
  -H '${n}: ${i}'`);e.body&&(r+=` \\
  -d '${e.body.replace(/'/g,"\\'")}'`),nr.env.clipboard.writeText(r),nr.window.showInformationMessage("Curl command copied to clipboard")}async _handleSaveToCollection(e){let r=this._collectionManager.saveRequest(e.collectionId,e.name,e.method,e.url,e.headers,e.body,e.bodyType,e.folderId,e.scripts);r?(nr.window.showInformationMessage(`Saved "${e.name}" to collection`),this._panel?.webview.postMessage({type:"savedToCollection",requestId:r.id})):nr.window.showErrorMessage("Failed to save request")}_sendCollections(){let e=this._collectionManager.collections.map(r=>({id:r.id,name:r.name,folders:this._flattenFolders(r.folders,r.id)}));this._panel?.webview.postMessage({type:"collectionsData",collections:e})}_sendSnippetLibrary(){this._panel?.webview.postMessage({type:"snippetLibrary",library:Ug,currentTests:this._currentTests})}_handleAddSnippet(e,r){let n={type:e,enabled:!0,...r},i=S6(n);this._panel?.webview.postMessage({type:"insertSnippetCode",code:i})}_handleRemoveSnippet(e){e>=0&&e<this._currentTests.length&&(this._currentTests.splice(e,1),this._currentCollectionId&&this._currentRequestId&&this._collectionManager.updateRequestTests(this._currentCollectionId,this._currentRequestId,this._currentTests),this._panel?.webview.postMessage({type:"testsUpdated",tests:this._currentTests}))}_handleUpdateScripts(e,r,n){this._collectionManager.updateRequest(e,r,{scripts:n})}_handleAddExtraction(e,r,n){this._collectionManager.addExtractionToRequest(e,r,{...n,scope:"request"});let i=this._collectionManager.getRequest(e,r);i&&this._panel?.webview.postMessage({type:"variablesUpdated",variables:i.extractVariables||[]})}_handleRemoveExtraction(e,r,n){this._collectionManager.removeExtractionFromRequest(e,r,n);let i=this._collectionManager.getRequest(e,r);i&&this._panel?.webview.postMessage({type:"variablesUpdated",variables:i.extractVariables||[]})}_flattenFolders(e,r,n=""){let i=[];for(let s of e){let o=n?`${n} / ${s.name}`:s.name;i.push({id:s.id,name:o}),i.push(...this._flattenFolders(s.folders,r,o))}return i}openSavedRequest(e,r){this._currentCollectionId=r,this._currentScripts=e.scripts,this._panel?this._panel.reveal(nr.ViewColumn.Beside):(this._panel=nr.window.createWebviewPanel("pe4kingRequest",`${e.method} ${e.name}`,nr.ViewColumn.Beside,{enableScripts:!0,retainContextWhenHidden:!0}),this._panel.onDidDispose(()=>{this._panel=void 0}),this._panel.webview.onDidReceiveMessage(async n=>{switch(n.type){case"sendRequest":await this._handleSendRequest(n);break;case"copyAsCurl":this._handleCopyAsCurl(n);break;case"saveToCollection":await this._handleSaveToCollection(n);break;case"getCollections":this._sendCollections();break;case"createCollection":this._collectionManager.createCollection(n.name),this._sendCollections();break;case"addSnippet":this._handleAddSnippet(n.snippetType,n.config);break;case"removeSnippet":this._handleRemoveSnippet(n.index);break;case"getSnippetLibrary":this._sendSnippetLibrary();break;case"updateScripts":this._handleUpdateScripts(n.collectionId,n.requestId,n.scripts);break;case"addExtraction":this._handleAddExtraction(n.collectionId,n.requestId,n.extraction);break;case"removeExtraction":this._handleRemoveExtraction(n.collectionId,n.requestId,n.index);break}})),this._panel.title=`${e.method} ${e.name}`,this._currentRequestId=e.id,this._currentTests=e.tests||[],this._panel.webview.html=this._getSavedRequestHtmlContent(e,r)}extractPathParams(e){return(e.match(/\{([^}]+)\}/g)||[]).map(n=>n.slice(1,-1))}generatePathParamSamples(e){let r={};for(let n of e.pathParams||[])n.example!==void 0&&(r[n.name]=String(n.example));return r}generateQueryParamSamples(e){let r={};for(let n of e.queryParams||[])if(n.required){let i=this._sampleGenerator.generateParamValue(n.schema,n.example);r[n.name]=String(i)}return r}generateBodySample(e){if(e.requestBodyExample!==void 0)return JSON.stringify(e.requestBodyExample,null,2);if(!e.requestBodySchema||e.requestBodySchema.length===0)return;let r=this._sampleGenerator.generateRequestBody(e.requestBodySchema);return JSON.stringify(r,null,2)}generateFormDataSamples(e){let r={};for(let n of e.formDataParams||[]){let i=this._sampleGenerator.generateParamValue(n.schema,n.example);r[n.name]=String(i)}return r}isFormData(e){return!!(e.formDataParams&&e.formDataParams.length>0||e.consumes?.includes("application/x-www-form-urlencoded"))}_getHtmlContent(e){let{endpoint:r,baseUrl:n,authHeader:i}=e;console.log("[Pe4King] ========== ENDPOINT DEBUG =========="),console.log("[Pe4King] Method:",r.method),console.log("[Pe4King] Path:",r.path),console.log("[Pe4King] formDataParams:",JSON.stringify(r.formDataParams)),console.log("[Pe4King] consumes:",JSON.stringify(r.consumes)),console.log("[Pe4King] requestBodySchema:",JSON.stringify(r.requestBodySchema)),console.log("[Pe4King] requestBodyExample:",JSON.stringify(r.requestBodyExample)),console.log("[Pe4King] pathParams:",JSON.stringify(r.pathParams)),console.log("[Pe4King] =====================================");let s=this.generatePathParamSamples(r),o=this.generateQueryParamSamples(r),a=this.generateFormDataSamples(r),l=this.generateBodySample(r),c=this.isFormData(r);console.log("[Pe4King] isFormEndpoint:",c);let u=["POST","PUT","PATCH"].includes(r.method),d=r.queryParams||[],p=r.formDataParams||[],f="application/json",y="raw",h=this.extractPathParams(r.path),m=["application/json","application/x-www-form-urlencoded","multipart/form-data","text/plain"],g=r.consumes&&r.consumes.length>0?[...new Set([...r.consumes,...m])]:m,E=h.length>0?`
  <div class="section" id="pathParamsSection">
    <div class="section-header" onclick="toggleSection('pathParamsSection')">
      <span class="section-title">
        <span class="section-toggle">\u25BC</span>
        Path Parameters
      </span>
    </div>
    <div class="section-content">
      <table class="params-table">
        <thead>
          <tr>
            <th style="width: 30%">Name</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
          ${h.map(k=>`
          <tr>
            <td>
              <span class="param-name">{${k}}</span>
              <span class="param-required">*</span>
            </td>
            <td>
              <input type="text" id="path_${k}" value="${this.escapeHtml(s[k]||"")}" placeholder="Required" onchange="updateUrl()">
            </td>
          </tr>
          `).join("")}
        </tbody>
      </table>
    </div>
  </div>
  `:"",b=d.length>0?`
  <div class="section" id="queryParamsSection">
    <div class="section-header" onclick="toggleSection('queryParamsSection')">
      <span class="section-title">
        <span class="section-toggle">\u25BC</span>
        Query Parameters
      </span>
    </div>
    <div class="section-content">
      <table class="params-table">
        <thead>
          <tr>
            <th style="width: 30%">Name</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
          ${d.map(k=>`
          <tr>
            <td>
              <span class="param-name">${this.escapeHtml(k.name)}</span>
              ${k.required?'<span class="param-required">*</span>':""}
              <div class="param-type">${k.schema?.fieldType||"string"}</div>
            </td>
            <td>
              <input type="text" id="query_${k.name}" value="${this.escapeHtml(o[k.name]||"")}" onchange="updateUrl()">
            </td>
          </tr>
          `).join("")}
        </tbody>
      </table>
    </div>
  </div>
  `:"",v=p.length>0?JSON.stringify(Object.fromEntries(p.map(k=>[k.name,a[k.name]||""])),null,2):"{}",A=u?`
  <div class="section" id="bodySection">
    <div class="section-header" onclick="toggleSection('bodySection')">
      <span class="section-title">
        <span class="section-toggle">\u25BC</span>
        Body
      </span>
    </div>
    <div class="section-content">
      <div class="body-type-selector">
        <label class="body-type-option">
          <input type="radio" name="bodyType" value="none" onchange="onBodyTypeChange(this.value)">
          <span>none</span>
        </label>
        <label class="body-type-option">
          <input type="radio" name="bodyType" value="form-data" onchange="onBodyTypeChange(this.value)">
          <span>form-data</span>
        </label>
        <label class="body-type-option">
          <input type="radio" name="bodyType" value="x-www-form-urlencoded" onchange="onBodyTypeChange(this.value)">
          <span>x-www-form-urlencoded</span>
        </label>
        <label class="body-type-option">
          <input type="radio" name="bodyType" value="raw" checked onchange="onBodyTypeChange(this.value)">
          <span>raw (JSON)</span>
        </label>
      </div>

      <!-- Raw body editor (shown by default) -->
      <div id="rawBodyContainer">
        <textarea class="body-editor" id="bodyEditor">${this.escapeHtml(l||"{}")}</textarea>
      </div>

      <!-- Form data key-value editor (hidden by default) -->
      <div id="formDataContainer" style="display: none;">
        <table class="params-table" id="formDataTable">
          <thead>
            <tr>
              <th style="width: 30%">Key</th>
              <th>Value</th>
              <th style="width: 40px"></th>
            </tr>
          </thead>
          <tbody id="formDataBody">
            ${p.map(k=>`
            <tr>
              <td><input type="text" class="form-key" value="${this.escapeHtml(k.name)}"></td>
              <td><input type="text" class="form-value" value="${this.escapeHtml(a[k.name]||"")}"></td>
              <td><button class="btn-icon" onclick="removeFormRow(this)" title="Remove">\xD7</button></td>
            </tr>
            `).join("")}
            ${p.length===0?`
            <tr>
              <td><input type="text" class="form-key" value="" placeholder="key"></td>
              <td><input type="text" class="form-value" value="" placeholder="value"></td>
              <td><button class="btn-icon" onclick="removeFormRow(this)" title="Remove">\xD7</button></td>
            </tr>
            `:""}
          </tbody>
        </table>
        <button class="btn-secondary btn-small" onclick="addFormRow()" style="margin-top: 8px;">+ Add Row</button>
      </div>

      <!-- None body message -->
      <div id="noneBodyContainer" style="display: none;">
        <div class="empty-body-message">This request does not have a body</div>
      </div>
    </div>
  </div>
  `:"";return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'unsafe-inline'; script-src 'unsafe-inline';">
  <title>Request Panel</title>
  <style>
    :root {
      --vscode-font-family: var(--vscode-editor-font-family, system-ui, -apple-system, sans-serif);
      --vscode-font-size: var(--vscode-editor-font-size, 13px);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: var(--vscode-font-family);
      font-size: var(--vscode-font-size);
      color: var(--vscode-foreground);
      background: var(--vscode-editor-background);
      padding: 16px;
      line-height: 1.5;
    }

    /* Header */
    .header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--vscode-panel-border, #3c3c3c);
    }
    .method-badge {
      font-family: monospace;
      font-weight: 600;
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 0.9em;
    }
    .method-get { background: #61affe22; color: #61affe; }
    .method-post { background: #49cc9022; color: #49cc90; }
    .method-put { background: #fca13022; color: #fca130; }
    .method-patch { background: #50e3c222; color: #50e3c2; }
    .method-delete { background: #f93e3e22; color: #f93e3e; }
    .endpoint-path {
      font-family: monospace;
      font-size: 1em;
      flex: 1;
      word-break: break-all;
    }

    /* URL Bar */
    .url-bar {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
    }
    .url-input {
      flex: 1;
      padding: 10px 12px;
      border: 1px solid var(--vscode-input-border, #3c3c3c);
      background: var(--vscode-input-background);
      color: var(--vscode-input-foreground);
      border-radius: 4px;
      font-family: monospace;
      font-size: inherit;
    }
    .url-input:focus {
      outline: 1px solid var(--vscode-focusBorder);
      border-color: var(--vscode-focusBorder);
    }

    /* Buttons */
    button {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      font-size: inherit;
      cursor: pointer;
      transition: opacity 0.15s;
    }
    button:hover { opacity: 0.9; }
    button:disabled { opacity: 0.5; cursor: not-allowed; }
    .btn-primary {
      background: var(--vscode-button-background);
      color: var(--vscode-button-foreground);
      font-weight: 500;
    }
    .btn-secondary {
      background: var(--vscode-button-secondaryBackground);
      color: var(--vscode-button-secondaryForeground);
    }

    /* Sections */
    .section {
      margin-bottom: 16px;
    }
    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
      cursor: pointer;
      user-select: none;
    }
    .section-title {
      font-weight: 600;
      font-size: 0.95em;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .section-toggle {
      font-size: 0.8em;
      color: var(--vscode-descriptionForeground);
    }
    .section-content {
      padding-left: 4px;
    }
    .section.collapsed .section-content {
      display: none;
    }
    .section.collapsed .section-toggle {
      transform: rotate(-90deg);
    }

    /* Params table */
    .params-table {
      width: 100%;
      border-collapse: collapse;
    }
    .params-table th,
    .params-table td {
      padding: 6px 8px;
      text-align: left;
      border-bottom: 1px solid var(--vscode-panel-border, #2d2d2d);
    }
    .params-table th {
      font-weight: 500;
      font-size: 0.85em;
      color: var(--vscode-descriptionForeground);
    }
    .params-table input {
      width: 100%;
      padding: 6px 8px;
      border: 1px solid var(--vscode-input-border, #3c3c3c);
      background: var(--vscode-input-background);
      color: var(--vscode-input-foreground);
      border-radius: 3px;
      font-family: monospace;
      font-size: inherit;
    }
    .params-table input:focus,
    .params-table select:focus {
      outline: 1px solid var(--vscode-focusBorder);
    }
    .params-table select {
      width: 100%;
      padding: 6px 8px;
      border: 1px solid var(--vscode-input-border, #3c3c3c);
      background: var(--vscode-input-background);
      color: var(--vscode-input-foreground);
      border-radius: 3px;
      font-family: monospace;
      font-size: inherit;
      cursor: pointer;
    }
    .param-name {
      font-family: monospace;
      font-weight: 500;
    }
    .param-required {
      color: #f93e3e;
      margin-left: 2px;
    }
    .param-type {
      font-size: 0.85em;
      color: var(--vscode-descriptionForeground);
    }

    /* Body type selector */
    .body-type-selector {
      display: flex;
      gap: 16px;
      margin-bottom: 12px;
      padding: 8px 0;
      border-bottom: 1px solid var(--vscode-panel-border, #2d2d2d);
    }
    .body-type-option {
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      font-size: 0.9em;
    }
    .body-type-option input[type="radio"] {
      margin: 0;
      cursor: pointer;
    }
    .body-type-option span {
      color: var(--vscode-foreground);
    }
    .empty-body-message {
      padding: 20px;
      text-align: center;
      color: var(--vscode-descriptionForeground);
      font-style: italic;
    }
    .btn-icon {
      background: transparent;
      border: none;
      color: var(--vscode-descriptionForeground);
      font-size: 16px;
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 3px;
    }
    .btn-icon:hover {
      background: var(--vscode-list-hoverBackground);
      color: var(--vscode-errorForeground);
    }

    /* Body editor */
    .body-editor {
      width: 100%;
      min-height: 150px;
      padding: 12px;
      border: 1px solid var(--vscode-input-border, #3c3c3c);
      background: var(--vscode-input-background);
      color: var(--vscode-input-foreground);
      border-radius: 4px;
      font-family: monospace;
      font-size: inherit;
      resize: vertical;
      line-height: 1.4;
    }
    .body-editor:focus {
      outline: 1px solid var(--vscode-focusBorder);
    }

    /* Response section */
    .response-section {
      margin-top: 20px;
      padding-top: 16px;
      border-top: 1px solid var(--vscode-panel-border, #3c3c3c);
    }
    .response-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }
    .status-badge {
      padding: 4px 10px;
      border-radius: 4px;
      font-weight: 600;
      font-family: monospace;
    }
    .status-2xx { background: #49cc9022; color: #49cc90; }
    .status-3xx { background: #61affe22; color: #61affe; }
    .status-4xx { background: #fca13022; color: #fca130; }
    .status-5xx { background: #f93e3e22; color: #f93e3e; }
    .response-meta {
      font-size: 0.85em;
      color: var(--vscode-descriptionForeground);
    }
    .response-body {
      background: var(--vscode-textBlockQuote-background);
      border: 1px solid var(--vscode-panel-border, #3c3c3c);
      border-radius: 4px;
      padding: 12px;
      font-family: monospace;
      font-size: 0.9em;
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-all;
      max-height: 400px;
      overflow-y: auto;
    }
    .response-headers-content {
      background: var(--vscode-textBlockQuote-background);
      border: 1px solid var(--vscode-panel-border, #3c3c3c);
      border-radius: 4px;
      padding: 8px 12px;
      font-family: monospace;
      font-size: 0.85em;
      max-height: 150px;
      overflow-y: auto;
    }

    /* Loading state */
    .loading {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 20px;
      color: var(--vscode-descriptionForeground);
    }
    .spinner {
      width: 20px;
      height: 20px;
      border: 2px solid var(--vscode-progressBar-background);
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Error state */
    .error {
      background: #f93e3e22;
      border: 1px solid #f93e3e44;
      color: #f93e3e;
      padding: 12px;
      border-radius: 4px;
      font-family: monospace;
    }

    /* JSON syntax highlighting */
    .json-key { color: #9cdcfe; }
    .json-string { color: #ce9178; }
    .json-number { color: #b5cea8; }
    .json-boolean { color: #569cd6; }
    .json-null { color: #569cd6; }

    /* Empty state */
    .empty-response {
      text-align: center;
      padding: 40px;
      color: var(--vscode-descriptionForeground);
    }

    /* Actions bar */
    .actions-bar {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }
    .btn-small {
      padding: 4px 8px;
      font-size: 0.85em;
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal-content {
      background: var(--vscode-editor-background);
      border: 1px solid var(--vscode-panel-border);
      border-radius: 8px;
      width: 400px;
      max-width: 90%;
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
      border-bottom: 1px solid var(--vscode-panel-border);
    }
    .modal-header h3 {
      margin: 0;
      font-size: 1em;
    }
    .btn-close {
      background: transparent;
      border: none;
      font-size: 1.5em;
      cursor: pointer;
      color: var(--vscode-foreground);
      padding: 0 4px;
    }
    .modal-body {
      padding: 16px;
    }
    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      padding: 12px 16px;
      border-top: 1px solid var(--vscode-panel-border);
    }
    .form-group {
      margin-bottom: 12px;
    }
    .form-group label {
      display: block;
      margin-bottom: 4px;
      font-size: 0.9em;
      color: var(--vscode-foreground);
    }
    .form-input {
      width: 100%;
      padding: 8px;
      border: 1px solid var(--vscode-input-border);
      background: var(--vscode-input-background);
      color: var(--vscode-input-foreground);
      border-radius: 4px;
      font-size: inherit;
    }

    /* Scripts section */
    .scripts-tabs { display: flex; border-bottom: 1px solid var(--vscode-panel-border); margin-bottom: 8px; }
    .script-tab { padding: 6px 12px; cursor: pointer; border: none; background: transparent; color: var(--vscode-descriptionForeground); border-bottom: 2px solid transparent; margin-bottom: -1px; }
    .script-tab:hover { color: var(--vscode-foreground); }
    .script-tab.active { color: var(--vscode-foreground); border-bottom-color: var(--vscode-focusBorder); }
    .script-editor { width: 100%; min-height: 120px; padding: 12px; border: 1px solid var(--vscode-input-border); background: var(--vscode-input-background); color: var(--vscode-input-foreground); border-radius: 4px; font-family: monospace; font-size: 12px; resize: vertical; }
    .script-content { display: none; }
    .script-content.active { display: block; }
    .script-help { font-size: 0.85em; color: var(--vscode-descriptionForeground); margin-bottom: 8px; }
    .test-results { margin-top: 12px; padding: 12px; border-radius: 4px; }
    .test-results.success { background: #49cc9022; border: 1px solid #49cc9044; }
    .test-results.failure { background: #f93e3e22; border: 1px solid #f93e3e44; }
    .test-summary { font-weight: 500; margin-bottom: 8px; }
    .test-passed { color: #49cc90; }
    .test-failed { color: #f93e3e; }
    .test-list { margin-top: 8px; }
    .test-item { display: flex; align-items: center; gap: 8px; padding: 4px 0; border-bottom: 1px solid var(--vscode-panel-border); }
    .test-item:last-child { border-bottom: none; }
    .test-icon { font-size: 14px; width: 18px; }
    .test-icon.pass { color: #49cc90; }
    .test-icon.fail { color: #f93e3e; }
    .test-name { font-family: monospace; font-size: 0.9em; flex: 1; }
    .test-expand { font-size: 10px; color: var(--vscode-descriptionForeground); width: 12px; transition: transform 0.2s; }
    .script-output { background: var(--vscode-textBlockQuote-background); padding: 8px; border-radius: 4px; font-family: monospace; font-size: 0.85em; margin-top: 8px; white-space: pre-wrap; }
  </style>
</head>
<body>
  <div class="header">
    <span class="method-badge method-${r.method.toLowerCase()}">${r.method}</span>
    <span class="endpoint-path">${this.escapeHtml(r.path)}</span>
  </div>

  <div class="url-bar">
    <input type="text" class="url-input" id="urlInput" value="${this.escapeHtml(this.buildInitialUrl(n,r.path,s))}">
    <button class="btn-primary" onclick="sendRequest()">Send</button>
    <button class="btn-secondary" onclick="copyAsCurl()" title="Copy as curl">Copy</button>
    <button class="btn-secondary" onclick="showSaveModal()" title="Save to collection">Save</button>
  </div>

  <!-- Save to Collection Modal -->
  <div id="saveModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Save to Collection</h3>
        <button class="btn-close" onclick="hideSaveModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Request Name</label>
          <input type="text" id="saveRequestName" class="form-input" value="${this.escapeHtml(r.operationId||r.path)}">
        </div>
        <div class="form-group">
          <label>Collection</label>
          <div style="display: flex; gap: 8px;">
            <select id="saveCollectionId" class="form-input" style="flex: 1;" onchange="loadFolders()">
              <option value="">Select collection...</option>
            </select>
            <button class="btn-secondary" onclick="createNewCollection()" title="New collection">+</button>
          </div>
        </div>
        <div class="form-group" id="folderGroup" style="display: none;">
          <label>Folder (optional)</label>
          <select id="saveFolderId" class="form-input">
            <option value="">Root</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="hideSaveModal()">Cancel</button>
        <button class="btn-primary" onclick="saveToCollection()">Save</button>
      </div>
    </div>
  </div>

  ${E}
  ${b}

  <div class="section" id="headersSection">
    <div class="section-header" onclick="toggleSection('headersSection')">
      <span class="section-title">
        <span class="section-toggle">\u25BC</span>
        Headers (v2)
      </span>
    </div>
    <div class="section-content">
      <table class="params-table">
        <thead>
          <tr>
            <th style="width: 30%">Name</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><span class="param-name">Authorization</span></td>
            <td><input type="text" id="header_Authorization" value="${this.escapeHtml(i||"")}" placeholder="Bearer token..."></td>
          </tr>
          <tr>
            <td><span class="param-name">Content-Type</span></td>
            <td>
              <select id="header_Content-Type">
                ${g.map(k=>`<option value="${k}"${k===f?" selected":""}>${k}</option>`).join("")}
              </select>
            </td>
          </tr>
          <tr>
            <td><span class="param-name">Accept</span></td>
            <td><input type="text" id="header_Accept" value="application/json"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  ${A}

  <div class="section" id="scriptsSection">
    <div class="section-header" onclick="toggleSection('scriptsSection')">
      <span class="section-title">
        <span class="section-toggle">\u25BC</span>
        Scripts (Python)
      </span>
    </div>
    <div class="section-content">
      <div class="scripts-tabs">
        <button class="script-tab active" onclick="switchScriptTab('preRequest')">Pre-request</button>
        <button class="script-tab" onclick="switchScriptTab('test')">Tests</button>
      </div>
      <div id="preRequestContent" class="script-content active">
        <div class="script-help">
          Runs before the request. Available: <code>request</code> (method, url, headers, body), <code>set_header(name, value)</code>, <code>set_body(body)</code>, <code>log(...)</code>
        </div>
        <textarea class="script-editor" id="preRequestScript" placeholder="# Pre-request script (Python)
# Example: set_header('X-Timestamp', str(int(time.time())))"></textarea>
      </div>
      <div id="testContent" class="script-content">
        <div class="script-help">
          Runs after response. Available: <code>response</code> (status, headers, body, time_ms), <code>test(condition, message)</code>, <code>log(...)</code>
        </div>
        <textarea class="script-editor" id="testScript" placeholder="# Test script (Python)
# Example:
# test(response['status'] == 200, 'Status should be 200')
# test('id' in response['body'], 'Response should have id')"></textarea>
      </div>
      <div id="scriptResults"></div>
    </div>
  </div>

  <div class="response-section" id="responseSection">
    <div class="response-header">
      <span class="section-title">Response</span>
    </div>
    <div id="responseContent">
      <div class="empty-response">
        Click "Send" to execute the request
      </div>
    </div>
  </div>

  <script>
    const vscode = acquireVsCodeApi();

    const state = {
      baseUrl: ${JSON.stringify(n)},
      path: ${JSON.stringify(r.path)},
      method: ${JSON.stringify(r.method)},
      pathParams: ${JSON.stringify(h)},
      queryParams: ${JSON.stringify(d.map(k=>k.name))},
      formDataParams: ${JSON.stringify(p.map(k=>k.name))},
      bodyType: 'raw', // none, form-data, x-www-form-urlencoded, raw
      activeScriptTab: 'preRequest'
    };

    function toggleSection(sectionId) {
      const section = document.getElementById(sectionId);
      section.classList.toggle('collapsed');
    }

    function switchScriptTab(tab) {
      state.activeScriptTab = tab;
      document.querySelectorAll('.script-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.script-content').forEach(c => c.classList.remove('active'));
      document.querySelector('.script-tab[onclick*="' + tab + '"]').classList.add('active');
      document.getElementById(tab + 'Content').classList.add('active');
    }

    function getScripts() {
      const preRequest = document.getElementById('preRequestScript')?.value?.trim() || '';
      const test = document.getElementById('testScript')?.value?.trim() || '';
      if (!preRequest && !test) return undefined;
      return { preRequest: preRequest || undefined, test: test || undefined };
    }

    function renderScriptResult(result, type) {
      const container = document.getElementById('scriptResults');
      if (!result) return;

      const isSuccess = result.success;
      const assertions = result.assertions || { passed: 0, failed: 0, errors: [], tests: [] };
      const tests = assertions.tests || [];

      let html = '<div class="test-results ' + (isSuccess ? 'success' : 'failure') + '">';
      html += '<div class="test-summary">';
      html += type === 'preRequest' ? 'Pre-request: ' : 'Tests: ';
      html += '<span class="test-passed">' + assertions.passed + ' passed</span>';
      if (assertions.failed > 0) {
        html += ', <span class="test-failed">' + assertions.failed + ' failed</span>';
      }
      html += '</div>';

      // Show individual test results
      if (tests.length > 0) {
        html += '<div class="test-list">';
        for (var i = 0; i < tests.length; i++) {
          var t = tests[i];
          var icon = t.passed ? '\u2713' : '\u2717';
          var iconClass = t.passed ? 'pass' : 'fail';
          html += '<div class="test-item" onclick="toggleTestDebug(' + i + ')" style="cursor: pointer;">';
          html += '<span class="test-expand">\u25B6</span>';
          html += '<span class="test-icon ' + iconClass + '">' + icon + '</span>';
          html += '<span class="test-name">' + escapeHtml(t.name) + '</span>';
          html += '</div>';
          html += '<div class="test-debug" id="test-debug-' + i + '" style="display: none; padding: 8px 8px 8px 32px; background: var(--vscode-textBlockQuote-background); font-family: monospace; font-size: 0.8em; border-radius: 4px; margin: 4px 0;">';
          if (t.actual !== undefined && t.expected !== undefined) {
            html += '<div>Expected: <span style="color: #49cc90;">' + escapeHtml(t.expected) + '</span></div>';
            html += '<div>Actual: <span style="color: ' + (t.passed ? '#49cc90' : '#f93e3e') + ';">' + escapeHtml(t.actual) + '</span></div>';
          } else {
            html += '<div>Result: <span style="color: ' + (t.passed ? '#49cc90' : '#f93e3e') + '">' + (t.passed ? 'PASSED' : 'FAILED') + '</span></div>';
          }
          html += '</div>';
        }
        html += '</div>';
      }

      if (result.output) {
        html += '<div class="script-output">' + escapeHtml(result.output) + '</div>';
      }

      if (result.error) {
        html += '<div class="error" style="margin-top: 8px;">' + escapeHtml(result.error) + '</div>';
      }

      html += '</div>';

      if (type === 'preRequest') {
        container.innerHTML = html;
      } else {
        container.innerHTML += html;
      }
    }

    function toggleTestDebug(index) {
      const debugEl = document.getElementById('test-debug-' + index);
      const items = document.querySelectorAll('.test-item');
      if (!debugEl || !items[index]) return;

      const expandIcon = items[index].querySelector('.test-expand');
      if (debugEl.style.display === 'none') {
        debugEl.style.display = 'block';
        if (expandIcon) expandIcon.textContent = '\u25BC';
      } else {
        debugEl.style.display = 'none';
        if (expandIcon) expandIcon.textContent = '\u25B6';
      }
    }

    function updateUrl() {
      let url = state.baseUrl + state.path;

      // Replace path parameters
      for (const param of state.pathParams) {
        const input = document.getElementById('path_' + param);
        if (input && input.value) {
          url = url.replace('{' + param + '}', encodeURIComponent(input.value));
        }
      }

      // Add query parameters
      const queryParts = [];
      for (const param of state.queryParams) {
        const input = document.getElementById('query_' + param);
        if (input && input.value) {
          queryParts.push(encodeURIComponent(param) + '=' + encodeURIComponent(input.value));
        }
      }
      if (queryParts.length > 0) {
        url += '?' + queryParts.join('&');
      }

      document.getElementById('urlInput').value = url;
    }

    function getHeaders() {
      const headers = {};
      const authInput = document.getElementById('header_Authorization');
      const contentTypeInput = document.getElementById('header_Content-Type');
      const acceptInput = document.getElementById('header_Accept');

      if (authInput && authInput.value) {
        headers['Authorization'] = authInput.value;
      }
      if (contentTypeInput && contentTypeInput.value) {
        headers['Content-Type'] = contentTypeInput.value;
      }
      if (acceptInput && acceptInput.value) {
        headers['Accept'] = acceptInput.value;
      }

      return headers;
    }

    function getBody() {
      // No body for 'none' type
      if (state.bodyType === 'none') {
        return undefined;
      }

      // For form-data and x-www-form-urlencoded, encode form fields
      if (state.bodyType === 'form-data' || state.bodyType === 'x-www-form-urlencoded') {
        const rows = document.querySelectorAll('#formDataBody tr');
        const parts = [];
        rows.forEach(row => {
          const keyInput = row.querySelector('.form-key');
          const valueInput = row.querySelector('.form-value');
          if (keyInput && valueInput && keyInput.value.trim()) {
            parts.push(encodeURIComponent(keyInput.value) + '=' + encodeURIComponent(valueInput.value));
          }
        });
        return parts.length > 0 ? parts.join('&') : undefined;
      }

      // For raw body (JSON)
      const bodyEditor = document.getElementById('bodyEditor');
      return bodyEditor ? bodyEditor.value : undefined;
    }

    function onBodyTypeChange(type) {
      state.bodyType = type;

      // Show/hide appropriate containers
      const rawContainer = document.getElementById('rawBodyContainer');
      const formContainer = document.getElementById('formDataContainer');
      const noneContainer = document.getElementById('noneBodyContainer');

      if (rawContainer) rawContainer.style.display = type === 'raw' ? 'block' : 'none';
      if (formContainer) formContainer.style.display = (type === 'form-data' || type === 'x-www-form-urlencoded') ? 'block' : 'none';
      if (noneContainer) noneContainer.style.display = type === 'none' ? 'block' : 'none';

      // Update Content-Type header
      const contentTypeSelect = document.getElementById('header_Content-Type');
      if (contentTypeSelect) {
        switch (type) {
          case 'none':
            // Keep current or remove
            break;
          case 'form-data':
            contentTypeSelect.value = 'multipart/form-data';
            break;
          case 'x-www-form-urlencoded':
            contentTypeSelect.value = 'application/x-www-form-urlencoded';
            break;
          case 'raw':
            contentTypeSelect.value = 'application/json';
            break;
        }
      }
    }

    function addFormRow() {
      const tbody = document.getElementById('formDataBody');
      const tr = document.createElement('tr');
      tr.innerHTML = \`
        <td><input type="text" class="form-key" value="" placeholder="key"></td>
        <td><input type="text" class="form-value" value="" placeholder="value"></td>
        <td><button class="btn-icon" onclick="removeFormRow(this)" title="Remove">\xD7</button></td>
      \`;
      tbody.appendChild(tr);
    }

    function removeFormRow(btn) {
      const row = btn.closest('tr');
      const tbody = document.getElementById('formDataBody');
      // Keep at least one row
      if (tbody.children.length > 1) {
        row.remove();
      } else {
        // Clear values instead of removing
        row.querySelector('.form-key').value = '';
        row.querySelector('.form-value').value = '';
      }
    }

    function sendRequest() {
      const url = document.getElementById('urlInput').value;
      const headers = getHeaders();
      const body = getBody();
      const scripts = getScripts();

      // Clear previous script results
      document.getElementById('scriptResults').innerHTML = '';

      vscode.postMessage({
        type: 'sendRequest',
        url,
        method: state.method,
        headers,
        body: body && body.trim() ? body : undefined,
        scripts
      });
    }

    function copyAsCurl() {
      const url = document.getElementById('urlInput').value;
      const headers = getHeaders();
      const body = getBody();

      vscode.postMessage({
        type: 'copyAsCurl',
        url,
        method: state.method,
        headers,
        body: body && body.trim() ? body : undefined
      });
    }

    function formatJson(json) {
      try {
        const obj = typeof json === 'string' ? JSON.parse(json) : json;
        return syntaxHighlight(JSON.stringify(obj, null, 2));
      } catch {
        return escapeHtml(json);
      }
    }

    function syntaxHighlight(json) {
      json = escapeHtml(json);
      return json.replace(
        /("(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\"])*"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g,
        function (match) {
          let cls = 'json-number';
          if (/^"/.test(match)) {
            if (/:$/.test(match)) {
              cls = 'json-key';
            } else {
              cls = 'json-string';
            }
          } else if (/true|false/.test(match)) {
            cls = 'json-boolean';
          } else if (/null/.test(match)) {
            cls = 'json-null';
          }
          return '<span class="' + cls + '">' + match + '</span>';
        }
      );
    }

    function escapeHtml(str) {
      if (typeof str !== 'string') return String(str);
      return str
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;');
    }

    function getStatusClass(status) {
      if (status >= 200 && status < 300) return 'status-2xx';
      if (status >= 300 && status < 400) return 'status-3xx';
      if (status >= 400 && status < 500) return 'status-4xx';
      return 'status-5xx';
    }

    function formatHeaders(headers) {
      if (!headers) return '';
      return Object.entries(headers)
        .map(([key, value]) => key + ': ' + (Array.isArray(value) ? value.join(', ') : value))
        .join('\\n');
    }

    function formatSize(bytes) {
      if (bytes < 1024) return bytes + ' B';
      if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
      return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
    }

    // Handle messages from extension
    window.addEventListener('message', event => {
      const message = event.data;
      const responseContent = document.getElementById('responseContent');

      switch (message.type) {
        case 'loading':
          responseContent.innerHTML = \`
            <div class="loading">
              <div class="spinner"></div>
              <span>Sending request...</span>
            </div>
          \`;
          break;

        case 'preRequestResult':
          renderScriptResult(message.result, 'preRequest');
          break;

        case 'testResult':
          renderScriptResult(message.result, 'test');
          break;

        case 'response':
          const result = message.result;

          if (!result.success) {
            responseContent.innerHTML = \`
              <div class="error">\${escapeHtml(result.error || 'Request failed')}</div>
              <div class="response-meta" style="margin-top: 8px;">
                Time: \${result.time || 0}ms
              </div>
            \`;
            return;
          }

          const headersHtml = result.headers ? \`
            <div class="section collapsed" id="responseHeadersSection">
              <div class="section-header" onclick="toggleSection('responseHeadersSection')">
                <span class="section-title">
                  <span class="section-toggle">\u25BC</span>
                  Response Headers
                </span>
              </div>
              <div class="section-content">
                <div class="response-headers-content">\${escapeHtml(formatHeaders(result.headers))}</div>
              </div>
            </div>
          \` : '';

          responseContent.innerHTML = \`
            <div class="response-header">
              <span class="status-badge \${getStatusClass(result.status)}">\${result.status} \${result.statusText}</span>
              <span class="response-meta">\${result.time}ms \xB7 \${formatSize(result.size || 0)}</span>
            </div>
            \${headersHtml}
            <div class="response-body">\${formatJson(result.body || '')}</div>
            <div class="actions-bar">
              <button class="btn-secondary btn-small" onclick="copyResponse()">Copy Response</button>
            </div>
          \`;
          break;
      }
    });

    function copyResponse() {
      const responseBody = document.querySelector('.response-body');
      if (responseBody) {
        // Get text content without HTML formatting
        const text = responseBody.textContent || '';
        navigator.clipboard.writeText(text);
      }
    }

    // ========== Save to Collection ==========
    let collectionsData = [];

    function showSaveModal() {
      vscode.postMessage({ type: 'getCollections' });
      document.getElementById('saveModal').style.display = 'flex';
    }

    function hideSaveModal() {
      document.getElementById('saveModal').style.display = 'none';
    }

    function loadFolders() {
      const collectionId = document.getElementById('saveCollectionId').value;
      const folderGroup = document.getElementById('folderGroup');
      const folderSelect = document.getElementById('saveFolderId');

      if (!collectionId) {
        folderGroup.style.display = 'none';
        return;
      }

      const collection = collectionsData.find(c => c.id === collectionId);
      if (collection && collection.folders.length > 0) {
        folderSelect.innerHTML = '<option value="">Root</option>' +
          collection.folders.map(f => '<option value="' + f.id + '">' + f.name + '</option>').join('');
        folderGroup.style.display = 'block';
      } else {
        folderGroup.style.display = 'none';
      }
    }

    function saveToCollection() {
      const name = document.getElementById('saveRequestName').value.trim();
      const collectionId = document.getElementById('saveCollectionId').value;
      const folderId = document.getElementById('saveFolderId').value || undefined;

      if (!name) {
        alert('Please enter a request name');
        return;
      }
      if (!collectionId) {
        alert('Please select a collection');
        return;
      }

      const url = document.getElementById('urlInput').value;
      const headers = getHeaders();
      const body = getBody();

      vscode.postMessage({
        type: 'saveToCollection',
        name,
        url,
        method: state.method,
        headers,
        body,
        bodyType: state.bodyType,
        collectionId,
        folderId
      });

      hideSaveModal();
    }

    function createNewCollection() {
      const name = prompt('New collection name:');
      if (name && name.trim()) {
        vscode.postMessage({ type: 'createCollection', name: name.trim() });
      }
    }

    // Handle collections data from extension
    window.addEventListener('message', event => {
      const message = event.data;
      if (message.type === 'collectionsData') {
        collectionsData = message.collections || [];
        const select = document.getElementById('saveCollectionId');
        const currentValue = select.value;
        select.innerHTML = '<option value="">Select collection...</option>' +
          collectionsData.map(c => '<option value="' + c.id + '">' + c.name + '</option>').join('');
        // Restore or select new collection
        if (currentValue) {
          select.value = currentValue;
        } else if (collectionsData.length > 0) {
          select.value = collectionsData[collectionsData.length - 1].id;
          loadFolders();
        }
      }
    });

    // Initialize URL
    updateUrl();
  </script>
</body>
</html>`}buildInitialUrl(e,r,n){let i=e+r;for(let[s,o]of Object.entries(n))i=i.replace(`{${s}}`,encodeURIComponent(o));return i}escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}_getSnippetDisplayName(e){return Bs(e)}_getSavedRequestHtmlContent(e,r){let n=Object.entries(e.headers||{}),i=e.scripts?.preRequest||"",s=e.scripts?.test||"";return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'unsafe-inline'; script-src 'unsafe-inline';">
  <title>${e.method} ${e.name}</title>
  <style>
    :root {
      --vscode-font-family: var(--vscode-editor-font-family, system-ui, -apple-system, sans-serif);
      --vscode-font-size: var(--vscode-editor-font-size, 13px);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: var(--vscode-font-family);
      font-size: var(--vscode-font-size);
      color: var(--vscode-foreground);
      background: var(--vscode-editor-background);
      padding: 16px;
      line-height: 1.5;
    }
    .header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; }
    .method-badge { font-family: monospace; font-weight: 600; padding: 4px 10px; border-radius: 4px; }
    .method-get { background: #61affe22; color: #61affe; }
    .method-post { background: #49cc9022; color: #49cc90; }
    .method-put { background: #fca13022; color: #fca130; }
    .method-patch { background: #50e3c222; color: #50e3c2; }
    .method-delete { background: #f93e3e22; color: #f93e3e; }
    .request-name { font-size: 1.1em; font-weight: 500; }
    .url-bar { display: flex; gap: 8px; margin-bottom: 16px; }
    .url-input { flex: 1; padding: 10px 12px; border: 1px solid var(--vscode-input-border); background: var(--vscode-input-background); color: var(--vscode-input-foreground); border-radius: 4px; font-family: monospace; }
    button { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; }
    .btn-primary { background: var(--vscode-button-background); color: var(--vscode-button-foreground); }
    .btn-secondary { background: var(--vscode-button-secondaryBackground); color: var(--vscode-button-secondaryForeground); }
    .section { margin-bottom: 16px; }
    .section-header { cursor: pointer; margin-bottom: 8px; font-weight: 600; }
    .section-toggle { margin-right: 6px; }
    .params-table { width: 100%; border-collapse: collapse; }
    .params-table th, .params-table td { padding: 6px 8px; text-align: left; border-bottom: 1px solid var(--vscode-panel-border); }
    .params-table input { width: 100%; padding: 6px 8px; border: 1px solid var(--vscode-input-border); background: var(--vscode-input-background); color: var(--vscode-input-foreground); border-radius: 3px; font-family: monospace; }
    .body-editor { width: 100%; min-height: 150px; padding: 12px; border: 1px solid var(--vscode-input-border); background: var(--vscode-input-background); color: var(--vscode-input-foreground); border-radius: 4px; font-family: monospace; resize: vertical; }
    .response-section { margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--vscode-panel-border); }
    .status-badge { padding: 4px 10px; border-radius: 4px; font-weight: 600; font-family: monospace; }
    .status-2xx { background: #49cc9022; color: #49cc90; }
    .status-4xx { background: #fca13022; color: #fca130; }
    .status-5xx { background: #f93e3e22; color: #f93e3e; }
    .response-body { background: var(--vscode-textBlockQuote-background); border: 1px solid var(--vscode-panel-border); border-radius: 4px; padding: 12px; font-family: monospace; overflow-x: auto; white-space: pre-wrap; max-height: 400px; overflow-y: auto; }
    .loading { display: flex; align-items: center; gap: 12px; padding: 20px; color: var(--vscode-descriptionForeground); }
    .spinner { width: 20px; height: 20px; border: 2px solid var(--vscode-progressBar-background); border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .error { background: #f93e3e22; border: 1px solid #f93e3e44; color: #f93e3e; padding: 12px; border-radius: 4px; font-family: monospace; }
    .json-key { color: #9cdcfe; }
    .json-string { color: #ce9178; }
    .json-number { color: #b5cea8; }
    .json-boolean { color: #569cd6; }

    /* Scripts section */
    .scripts-tabs { display: flex; border-bottom: 1px solid var(--vscode-panel-border); margin-bottom: 8px; }
    .script-tab { padding: 6px 12px; cursor: pointer; border: none; background: transparent; color: var(--vscode-descriptionForeground); border-bottom: 2px solid transparent; margin-bottom: -1px; }
    .script-tab:hover { color: var(--vscode-foreground); }
    .script-tab.active { color: var(--vscode-foreground); border-bottom-color: var(--vscode-focusBorder); }
    .script-editor { width: 100%; min-height: 120px; padding: 12px; border: 1px solid var(--vscode-input-border); background: var(--vscode-input-background); color: var(--vscode-input-foreground); border-radius: 4px; font-family: monospace; font-size: 12px; resize: vertical; }
    .script-content { display: none; }
    .script-content.active { display: block; }
    .script-help { font-size: 0.85em; color: var(--vscode-descriptionForeground); margin-bottom: 8px; }
    .test-results { margin-top: 12px; padding: 12px; border-radius: 4px; }
    .test-results.success { background: #49cc9022; border: 1px solid #49cc9044; }
    .test-results.failure { background: #f93e3e22; border: 1px solid #f93e3e44; }
    .test-summary { font-weight: 500; margin-bottom: 8px; }
    .test-passed { color: #49cc90; }
    .test-failed { color: #f93e3e; }
    .test-list { margin-top: 8px; }
    .test-item { display: flex; align-items: center; gap: 8px; padding: 4px 0; border-bottom: 1px solid var(--vscode-panel-border); }
    .test-item:last-child { border-bottom: none; }
    .test-icon { font-size: 14px; width: 18px; }
    .test-icon.pass { color: #49cc90; }
    .test-icon.fail { color: #f93e3e; }
    .test-name { font-family: monospace; font-size: 0.9em; flex: 1; }
    .test-expand { font-size: 10px; color: var(--vscode-descriptionForeground); width: 12px; transition: transform 0.2s; }
    .script-output { background: var(--vscode-textBlockQuote-background); padding: 8px; border-radius: 4px; font-family: monospace; font-size: 0.85em; margin-top: 8px; white-space: pre-wrap; }

    /* Snippets section */
    .snippets-section { margin-bottom: 16px; }
    .snippets-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
    .snippets-title { font-weight: 600; }
    .btn-add-test { padding: 4px 8px; font-size: 0.85em; }
    .snippet-list { border: 1px solid var(--vscode-panel-border); border-radius: 4px; }
    .snippet-item { display: flex; align-items: center; gap: 8px; padding: 8px 12px; border-bottom: 1px solid var(--vscode-panel-border); }
    .snippet-item:last-child { border-bottom: none; }
    .snippet-icon { color: var(--vscode-textLink-foreground); }
    .snippet-name { flex: 1; font-family: monospace; font-size: 0.9em; }
    .snippet-remove { background: transparent; border: none; color: var(--vscode-descriptionForeground); cursor: pointer; padding: 2px 6px; border-radius: 3px; }
    .snippet-remove:hover { background: var(--vscode-list-hoverBackground); color: #f93e3e; }
    .empty-snippets { padding: 20px; text-align: center; color: var(--vscode-descriptionForeground); }

    /* Snippet picker modal */
    .snippet-picker { display: none; position: fixed; top: 0; right: 0; bottom: 0; width: 320px; background: var(--vscode-sideBar-background); border-left: 1px solid var(--vscode-panel-border); z-index: 1000; overflow-y: auto; }
    .snippet-picker.open { display: block; }
    .picker-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; border-bottom: 1px solid var(--vscode-panel-border); }
    .picker-title { font-weight: 600; }
    .picker-close { background: transparent; border: none; font-size: 1.5em; cursor: pointer; color: var(--vscode-foreground); }
    .picker-category { padding: 8px 16px; font-weight: 500; color: var(--vscode-descriptionForeground); background: var(--vscode-editor-background); }
    .picker-item { display: flex; align-items: center; gap: 10px; padding: 10px 16px; cursor: pointer; border-bottom: 1px solid var(--vscode-panel-border); }
    .picker-item:hover { background: var(--vscode-list-hoverBackground); }
    .picker-item-name { font-weight: 500; }
    .picker-item-desc { font-size: 0.85em; color: var(--vscode-descriptionForeground); }
  </style>
</head>
<body>
  <div class="header">
    <span class="method-badge method-${e.method.toLowerCase()}">${e.method}</span>
    <span class="request-name">${this.escapeHtml(e.name)}</span>
  </div>

  <div class="url-bar">
    <input type="text" class="url-input" id="urlInput" value="${this.escapeHtml(e.url)}">
    <button class="btn-primary" onclick="sendRequest()">Send</button>
    <button class="btn-secondary" onclick="copyAsCurl()">Copy</button>
  </div>

  <div class="section">
    <div class="section-header">Headers</div>
    <table class="params-table">
      <tbody>
        ${n.map(([o,a])=>`
        <tr>
          <td style="width: 30%"><input type="text" id="hkey_${o}" value="${this.escapeHtml(o)}"></td>
          <td><input type="text" id="hval_${o}" value="${this.escapeHtml(a)}"></td>
        </tr>
        `).join("")}
      </tbody>
    </table>
  </div>

  ${e.body?`
  <div class="section">
    <div class="section-header">Body</div>
    <textarea class="body-editor" id="bodyEditor">${this.escapeHtml(e.body)}</textarea>
  </div>
  `:""}

  <!-- Snippet Picker Panel -->
  <div id="snippetPicker" class="snippet-picker">
    <div class="picker-header">
      <span class="picker-title">Add Test Snippet</span>
      <button class="picker-close" onclick="closeSnippetPicker()">\xD7</button>
    </div>
    <div id="snippetPickerContent">Loading...</div>
  </div>

  <div class="section">
    <div class="section-header" style="display: flex; justify-content: space-between; align-items: center;">
      <span>Scripts (Python)</span>
      <button class="btn-secondary btn-add-test" onclick="openSnippetPicker()" title="Insert test snippet">+ Snippet</button>
    </div>
    <div class="scripts-tabs">
      <button class="script-tab active" onclick="switchScriptTab('preRequest')">Pre-request</button>
      <button class="script-tab" onclick="switchScriptTab('test')">Tests</button>
    </div>
    <div id="preRequestContent" class="script-content active">
      <div class="script-help">
        Runs before the request. Available: <code>request</code> (method, url, headers, body), <code>set_header(name, value)</code>, <code>set_body(body)</code>, <code>log(...)</code>
      </div>
      <textarea class="script-editor" id="preRequestScript" placeholder="# Pre-request script (Python)
# Example: set_header('X-Timestamp', str(int(time.time())))">${this.escapeHtml(i)}</textarea>
    </div>
    <div id="testContent" class="script-content">
      <div class="script-help">
        Runs after response. Available: <code>response</code> (status, headers, body, time_ms), <code>test(condition, message)</code>, <code>log(...)</code>
      </div>
      <textarea class="script-editor" id="testScript" placeholder="# Test script (Python)
# Example:
# test(response['status'] == 200, 'Status should be 200')
# test('id' in response['body'], 'Response should have id')">${this.escapeHtml(s)}</textarea>
    </div>
    <div id="scriptResults"></div>
  </div>

  <div class="section">
    <div class="section-header" style="display: flex; justify-content: space-between; align-items: center;">
      <span>Variables</span>
      <button class="btn-secondary btn-add-test" onclick="showAddVariable()">+ Variable</button>
    </div>
    <div id="variablesList">
      ${(e.extractVariables||[]).map((o,a)=>`
        <div class="variable-item" style="display: flex; align-items: center; gap: 8px; padding: 6px 0; border-bottom: 1px solid var(--vscode-panel-border);">
          <span style="color: #fca130; font-family: monospace;">{{${this.escapeHtml(o.name)}}}</span>
          <span style="flex: 1; color: var(--vscode-descriptionForeground); font-family: monospace; font-size: 0.85em;">${this.escapeHtml(o.path)}</span>
          <button class="btn-icon" onclick="removeVariable(${a})" title="Remove">\xD7</button>
        </div>
      `).join("")}
    </div>
    <div id="addVariableForm" style="display: none; margin-top: 8px; padding: 8px; background: var(--vscode-input-background); border-radius: 4px;">
      <div style="display: flex; gap: 8px; margin-bottom: 8px;">
        <input type="text" id="varName" placeholder="Variable name" style="flex: 1; padding: 6px; border: 1px solid var(--vscode-input-border); background: var(--vscode-input-background); color: var(--vscode-input-foreground); border-radius: 4px;">
        <input type="text" id="varPath" placeholder="JSONPath (e.g. $.data.id)" style="flex: 2; padding: 6px; border: 1px solid var(--vscode-input-border); background: var(--vscode-input-background); color: var(--vscode-input-foreground); border-radius: 4px;">
      </div>
      <div style="display: flex; gap: 8px; justify-content: flex-end;">
        <button class="btn-secondary" onclick="hideAddVariable()">Cancel</button>
        <button class="btn-primary" onclick="addVariable()">Add</button>
      </div>
    </div>
  </div>

  <div class="response-section">
    <div class="section-header">Response</div>
    <div id="responseContent">
      <div style="text-align: center; padding: 40px; color: var(--vscode-descriptionForeground);">
        Click "Send" to execute the request
      </div>
    </div>
  </div>

  <script>
    const vscode = acquireVsCodeApi();
    const currentCollectionId = ${JSON.stringify(r)};
    const currentRequestId = ${JSON.stringify(e.id)};
    let currentVariables = ${JSON.stringify(e.extractVariables||[])};
    const state = {
      method: ${JSON.stringify(e.method)},
      headerKeys: ${JSON.stringify(n.map(([o])=>o))},
      activeScriptTab: 'preRequest'
    };

    let saveTimeout = null;
    function saveScripts() {
      if (saveTimeout) clearTimeout(saveTimeout);
      saveTimeout = setTimeout(() => {
        const scripts = getScripts();
        vscode.postMessage({
          type: 'updateScripts',
          collectionId: currentCollectionId,
          requestId: currentRequestId,
          scripts: scripts
        });
      }, 500);
    }

    function switchScriptTab(tab) {
      state.activeScriptTab = tab;
      document.querySelectorAll('.script-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.script-content').forEach(c => c.classList.remove('active'));
      document.querySelector('.script-tab[onclick*="' + tab + '"]').classList.add('active');
      document.getElementById(tab + 'Content').classList.add('active');
    }

    function getScripts() {
      const preRequest = document.getElementById('preRequestScript')?.value?.trim() || '';
      const test = document.getElementById('testScript')?.value?.trim() || '';
      if (!preRequest && !test) return undefined;
      return { preRequest: preRequest || undefined, test: test || undefined };
    }

    let lastScriptResult = null;

    function renderScriptResult(result, type) {
      const container = document.getElementById('scriptResults');
      if (!result) return;

      lastScriptResult = result;

      const isSuccess = result.success;
      const assertions = result.assertions || { passed: 0, failed: 0, errors: [], tests: [] };
      const tests = assertions.tests || [];

      let html = '<div class="test-results ' + (isSuccess ? 'success' : 'failure') + '">';
      html += '<div class="test-summary">';
      html += type === 'preRequest' ? 'Pre-request: ' : 'Tests: ';
      html += '<span class="test-passed">' + assertions.passed + ' passed</span>';
      if (assertions.failed > 0) {
        html += ', <span class="test-failed">' + assertions.failed + ' failed</span>';
      }
      html += '</div>';

      // Show individual test results
      if (tests.length > 0) {
        html += '<div class="test-list">';
        for (var i = 0; i < tests.length; i++) {
          var t = tests[i];
          var icon = t.passed ? '\u2713' : '\u2717';
          var iconClass = t.passed ? 'pass' : 'fail';
          html += '<div class="test-item" onclick="toggleTestDebug(' + i + ')" style="cursor: pointer;">';
          html += '<span class="test-expand">\u25B6</span>';
          html += '<span class="test-icon ' + iconClass + '">' + icon + '</span>';
          html += '<span class="test-name">' + escapeHtml(t.name) + '</span>';
          html += '</div>';
          html += '<div class="test-debug" id="test-debug-' + i + '" style="display: none; padding: 8px 8px 8px 32px; background: var(--vscode-textBlockQuote-background); font-family: monospace; font-size: 0.8em; border-radius: 4px; margin: 4px 0;">';
          if (t.actual !== undefined && t.expected !== undefined) {
            html += '<div>Expected: <span style="color: #49cc90;">' + escapeHtml(t.expected) + '</span></div>';
            html += '<div>Actual: <span style="color: ' + (t.passed ? '#49cc90' : '#f93e3e') + ';">' + escapeHtml(t.actual) + '</span></div>';
          } else {
            html += '<div>Result: <span style="color: ' + (t.passed ? '#49cc90' : '#f93e3e') + '">' + (t.passed ? 'PASSED' : 'FAILED') + '</span></div>';
          }
          html += '</div>';
        }
        html += '</div>';
      }

      if (result.output) {
        html += '<div class="script-output">' + escapeHtml(result.output) + '</div>';
      }

      if (result.error) {
        html += '<div class="error" style="margin-top: 8px;">' + escapeHtml(result.error) + '</div>';
      }

      html += '</div>';

      if (type === 'preRequest') {
        container.innerHTML = html;
      } else {
        container.innerHTML += html;
      }
    }

    function toggleTestDebug(index) {
      const debugEl = document.getElementById('test-debug-' + index);
      const items = document.querySelectorAll('.test-item');
      if (!debugEl || !items[index]) return;

      const expandIcon = items[index].querySelector('.test-expand');
      if (debugEl.style.display === 'none') {
        debugEl.style.display = 'block';
        if (expandIcon) expandIcon.textContent = '\u25BC';
      } else {
        debugEl.style.display = 'none';
        if (expandIcon) expandIcon.textContent = '\u25B6';
      }
    }

    function showAddVariable() {
      document.getElementById('addVariableForm').style.display = 'block';
      document.getElementById('varName').focus();
    }

    function hideAddVariable() {
      document.getElementById('addVariableForm').style.display = 'none';
      document.getElementById('varName').value = '';
      document.getElementById('varPath').value = '';
    }

    function addVariable() {
      const name = document.getElementById('varName').value.trim();
      const path = document.getElementById('varPath').value.trim();
      if (!name || !path) return;

      vscode.postMessage({
        type: 'addExtraction',
        collectionId: currentCollectionId,
        requestId: currentRequestId,
        extraction: { name, path }
      });
      hideAddVariable();
    }

    function removeVariable(index) {
      vscode.postMessage({
        type: 'removeExtraction',
        collectionId: currentCollectionId,
        requestId: currentRequestId,
        index: index
      });
    }

    function renderVariables(variables) {
      const container = document.getElementById('variablesList');
      if (!variables || variables.length === 0) {
        container.innerHTML = '<div style="color: var(--vscode-descriptionForeground); padding: 8px 0;">No variables defined</div>';
        return;
      }
      container.innerHTML = variables.map((v, i) =>
        '<div class="variable-item" style="display: flex; align-items: center; gap: 8px; padding: 6px 0; border-bottom: 1px solid var(--vscode-panel-border);">' +
        '<span style="color: #fca130; font-family: monospace;">{{' + escapeHtml(v.name) + '}}</span>' +
        '<span style="flex: 1; color: var(--vscode-descriptionForeground); font-family: monospace; font-size: 0.85em;">' + escapeHtml(v.path) + '</span>' +
        '<button class="btn-icon" onclick="removeVariable(' + i + ')" title="Remove">\xD7</button>' +
        '</div>'
      ).join('');
    }

    function getHeaders() {
      const headers = {};
      for (const key of state.headerKeys) {
        const keyInput = document.getElementById('hkey_' + key);
        const valInput = document.getElementById('hval_' + key);
        if (keyInput && valInput && keyInput.value) {
          headers[keyInput.value] = valInput.value;
        }
      }
      return headers;
    }

    function getBody() {
      const editor = document.getElementById('bodyEditor');
      return editor ? editor.value : undefined;
    }

    function sendRequest() {
      const url = document.getElementById('urlInput').value;
      document.getElementById('scriptResults').innerHTML = '';
      vscode.postMessage({
        type: 'sendRequest',
        url,
        method: state.method,
        headers: getHeaders(),
        body: getBody(),
        scripts: getScripts()
      });
    }

    function copyAsCurl() {
      const url = document.getElementById('urlInput').value;
      vscode.postMessage({
        type: 'copyAsCurl',
        url,
        method: state.method,
        headers: getHeaders(),
        body: getBody()
      });
    }

    function formatJson(json) {
      try {
        const obj = typeof json === 'string' ? JSON.parse(json) : json;
        return syntaxHighlight(JSON.stringify(obj, null, 2));
      } catch { return escapeHtml(json); }
    }

    function syntaxHighlight(json) {
      json = escapeHtml(json);
      return json.replace(/("(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\"])*"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {
        let cls = 'json-number';
        if (/^"/.test(match)) { cls = /:$/.test(match) ? 'json-key' : 'json-string'; }
        else if (/true|false/.test(match)) { cls = 'json-boolean'; }
        return '<span class="' + cls + '">' + match + '</span>';
      });
    }

    function escapeHtml(str) {
      if (typeof str !== 'string') return String(str);
      return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    }

    function getStatusClass(status) {
      if (status >= 200 && status < 300) return 'status-2xx';
      if (status >= 400 && status < 500) return 'status-4xx';
      return 'status-5xx';
    }

    // ========== Snippet Functions ==========
    let snippetLibrary = {};

    function openSnippetPicker() {
      // Switch to Tests tab first
      switchScriptTab('test');
      vscode.postMessage({ type: 'getSnippetLibrary' });
      document.getElementById('snippetPicker').classList.add('open');
    }

    function closeSnippetPicker() {
      document.getElementById('snippetPicker').classList.remove('open');
    }

    function renderSnippetPicker(library) {
      let html = '';
      for (const [category, snippets] of Object.entries(library)) {
        html += '<div class="picker-category">' + escapeHtml(category) + '</div>';
        for (const snippet of snippets) {
          const configJson = JSON.stringify(snippet.defaultConfig).replace(/"/g, '&quot;');
          html += '<div class="picker-item" data-type="' + snippet.type + '" data-config="' + configJson + '">';
          html += '<div>';
          html += '<div class="picker-item-name">' + escapeHtml(snippet.name) + '</div>';
          html += '<div class="picker-item-desc">' + escapeHtml(snippet.description) + '</div>';
          html += '</div>';
          html += '</div>';
        }
      }
      document.getElementById('snippetPickerContent').innerHTML = html;

      // Add click handlers via delegation
      document.getElementById('snippetPickerContent').onclick = function(e) {
        const item = e.target.closest('.picker-item');
        if (item) {
          const type = item.dataset.type;
          const config = JSON.parse(item.dataset.config);
          addSnippet(type, config);
        }
      };
    }

    function addSnippet(type, config) {
      vscode.postMessage({ type: 'addSnippet', snippetType: type, config: config });
    }

    function insertSnippetCode(code) {
      const textarea = document.getElementById('testScript');
      if (!textarea) return;

      // Get current content
      const currentValue = textarea.value;

      // Add newline if textarea has content
      const prefix = currentValue.trim() ? '\\n\\n' : '';

      // Insert code
      textarea.value = currentValue + prefix + code;

      // Close picker
      closeSnippetPicker();

      // Auto-save
      saveScripts();
    }

    window.addEventListener('message', event => {
      const message = event.data;
      const responseContent = document.getElementById('responseContent');
      switch (message.type) {
        case 'loading':
          responseContent.innerHTML = '<div class="loading"><div class="spinner"></div><span>Sending...</span></div>';
          break;
        case 'preRequestResult':
          renderScriptResult(message.result, 'preRequest');
          break;
        case 'testResult':
          renderScriptResult(message.result, 'test');
          break;
        case 'response':
          const result = message.result;
          if (!result.success) {
            responseContent.innerHTML = '<div class="error">' + escapeHtml(result.error) + '</div>';
            return;
          }
          responseContent.innerHTML = '<div style="margin-bottom: 8px;"><span class="status-badge ' + getStatusClass(result.status) + '">' + result.status + ' ' + result.statusText + '</span> <span style="color: var(--vscode-descriptionForeground);">' + result.time + 'ms</span></div><div class="response-body">' + formatJson(result.body || '') + '</div>';
          break;
        case 'snippetLibrary':
          snippetLibrary = message.library;
          currentTests = message.currentTests || [];
          renderSnippetPicker(snippetLibrary);
          break;
        case 'testsUpdated':
          currentTests = message.tests || [];
          renderSnippetList(currentTests);
          break;
        case 'insertSnippetCode':
          insertSnippetCode(message.code);
          break;
        case 'variablesUpdated':
          currentVariables = message.variables || [];
          renderVariables(currentVariables);
          break;
        case 'snippetResults':
          renderSnippetResults(message.results);
          break;
      }
    });

    function renderSnippetResults(results) {
      if (!results || results.length === 0) return;

      const container = document.getElementById('scriptResults');
      const passed = results.filter(r => r.passed).length;
      const failed = results.filter(r => !r.passed).length;
      const isSuccess = failed === 0;

      let html = '<div class="test-results ' + (isSuccess ? 'success' : 'failure') + '">';
      html += '<div class="test-summary">';
      html += 'Snippets: <span class="test-passed">' + passed + ' passed</span>';
      if (failed > 0) {
        html += ', <span class="test-failed">' + failed + ' failed</span>';
      }
      html += '</div>';
      html += '<div class="test-list">';
      results.forEach(function(r) {
        const icon = r.passed ? '\u2713' : '\u2717';
        const iconClass = r.passed ? 'pass' : 'fail';
        html += '<div class="test-item">';
        html += '<span class="test-icon ' + iconClass + '">' + icon + '</span>';
        html += '<span class="test-name">' + escapeHtml(r.name) + '</span>';
        html += '</div>';
        if (r.error) {
          html += '<div style="padding-left: 26px; color: #f93e3e; font-size: 0.85em;">' + escapeHtml(r.error) + '</div>';
        }
      });
      html += '</div></div>';

      // Update snippet icons in the list
      const snippetList = document.getElementById('snippetList');
      if (snippetList) {
        const items = snippetList.querySelectorAll('.snippet-item');
        results.forEach(function(r, i) {
          if (items[i]) {
            const icon = items[i].querySelector('.snippet-icon');
            if (icon) {
              icon.textContent = r.passed ? '\u2713' : '\u2717';
              icon.style.color = r.passed ? '#49cc90' : '#f93e3e';
            }
          }
        });
      }

      container.innerHTML += html;
    }

    // Auto-save on textarea change
    document.getElementById('testScript')?.addEventListener('input', saveScripts);
    document.getElementById('preRequestScript')?.addEventListener('input', saveScripts);
  </script>
</body>
</html>`}};var Ma=st(require("vscode"));function ux(){return Date.now().toString(36)+Math.random().toString(36).slice(2,9)}function E6(t,e){let r=new Date().toISOString();return{id:ux(),name:t,description:e,folders:[],requests:[],createdAt:r,updatedAt:r}}function x6(t){return{id:ux(),name:t,requests:[],folders:[],createdAt:new Date().toISOString()}}function T6(t,e,r,n,i,s="raw",o){let a=new Date().toISOString();return{id:ux(),name:t,method:e,url:r,headers:n,body:i,bodyType:s,scripts:o,createdAt:a,updatedAt:a}}var La=st(require("vscode")),Mr=st(require("fs")),js=st(require("path"));var lxe="pe4king-collections.json",cxe="1.0.0",zg=class{constructor(e){this._onDidChange=new La.EventEmitter;this.onDidChange=this._onDidChange.event;let r;if(e.globalStorageUri)r=e.globalStorageUri.fsPath;else if(e.globalStoragePath)r=e.globalStoragePath;else{let n=La.workspace.workspaceFolders?.[0]?.uri.fsPath;r=n?js.join(n,".pe4king"):js.join(process.cwd(),".pe4king")}this._storagePath=js.join(r,lxe),console.log("[Collections] Storage path:",this._storagePath),this._data=this.load(),console.log("[Collections] Loaded",this._data.collections.length,"collections")}get collections(){return this._data.collections}load(){try{let e=js.dirname(this._storagePath);if(Mr.existsSync(e)||Mr.mkdirSync(e,{recursive:!0}),Mr.existsSync(this._storagePath)){let r=Mr.readFileSync(this._storagePath,"utf-8");return JSON.parse(r)}}catch(e){console.error("[Collections] Failed to load:",e)}return{version:cxe,collections:[]}}save(){try{let e=js.dirname(this._storagePath);console.log("[Collections] Saving to:",this._storagePath),Mr.existsSync(e)||(console.log("[Collections] Creating directory:",e),Mr.mkdirSync(e,{recursive:!0})),Mr.writeFileSync(this._storagePath,JSON.stringify(this._data,null,2)),console.log("[Collections] Saved",this._data.collections.length,"collections"),this._onDidChange.fire()}catch(e){console.error("[Collections] Failed to save:",e),La.window.showErrorMessage(`Failed to save collections: ${e}`)}}createCollection(e,r){let n=E6(e,r);return this._data.collections.push(n),this.save(),n}getCollection(e){return this._data.collections.find(r=>r.id===e)}updateCollection(e,r){let n=this.getCollection(e);n&&(Object.assign(n,r,{updatedAt:new Date().toISOString()}),this.save())}deleteCollection(e){let r=this._data.collections.findIndex(n=>n.id===e);r!==-1&&(this._data.collections.splice(r,1),this.save())}createFolderIn(e,r,n){let i=this.getCollection(e);if(!i)return;let s=x6(r);if(n){let o=this.findFolder(i,n);if(o)o.folders.push(s);else return}else i.folders.push(s);return i.updatedAt=new Date().toISOString(),this.save(),s}findFolder(e,r){let n=i=>{for(let s of i){if(s.id===r)return s;let o=n(s.folders);if(o)return o}};return n(e.folders)}deleteFolder(e,r){let n=this.getCollection(e);if(!n)return;let i=s=>{let o=s.findIndex(a=>a.id===r);if(o!==-1)return s.splice(o,1),!0;for(let a of s)if(i(a.folders))return!0;return!1};i(n.folders)&&(n.updatedAt=new Date().toISOString(),this.save())}renameFolder(e,r,n){let i=this.getCollection(e);if(!i)return;let s=this.findFolder(i,r);s&&(s.name=n,i.updatedAt=new Date().toISOString(),this.save())}saveRequest(e,r,n,i,s,o,a,l,c){let u=this.getCollection(e);if(!u)return;let d=T6(r,n,i,s,o,a,c);if(l){let p=this.findFolder(u,l);if(p)p.requests.push(d);else return}else u.requests.push(d);return u.updatedAt=new Date().toISOString(),this.save(),d}updateRequest(e,r,n){let i=this.getCollection(e);if(!i)return;let s=this.findRequest(i,r);s&&(Object.assign(s,n,{updatedAt:new Date().toISOString()}),i.updatedAt=new Date().toISOString(),this.save())}findRequest(e,r){let n=e.requests.find(s=>s.id===r);if(n)return n;let i=s=>{for(let o of s){let a=o.requests.find(c=>c.id===r);if(a)return a;let l=i(o.folders);if(l)return l}};return i(e.folders)}deleteRequest(e,r){let n=this.getCollection(e);if(!n)return;let i=n.requests.findIndex(o=>o.id===r);if(i!==-1){n.requests.splice(i,1),n.updatedAt=new Date().toISOString(),this.save();return}let s=o=>{for(let a of o){let l=a.requests.findIndex(c=>c.id===r);if(l!==-1)return a.requests.splice(l,1),!0;if(s(a.folders))return!0}return!1};s(n.folders)&&(n.updatedAt=new Date().toISOString(),this.save())}getRequest(e,r){let n=this.getCollection(e);if(n)return this.findRequest(n,r)}exportToPostman(e){let r=this.getCollection(e);if(!r)return;let n=s=>({name:s.name,request:{method:s.method,header:Object.entries(s.headers).map(([o,a])=>({key:o,value:a})),url:{raw:s.url},body:s.body?{mode:s.bodyType==="raw"?"raw":"urlencoded",raw:s.body}:void 0}}),i=s=>({name:s.name,item:[...s.requests.map(n),...s.folders.map(i)]});return{info:{name:r.name,description:r.description,schema:"https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},item:[...r.requests.map(n),...r.folders.map(i)]}}getTreeData(){return this._data.collections.map(e=>this.collectionToTreeNode(e))}collectionToTreeNode(e){return{id:e.id,type:"collection",name:e.name,children:[...e.requests.map(r=>this.requestToTreeNode(r,e.id)),...e.folders.map(r=>this.folderToTreeNode(r,e.id))]}}folderToTreeNode(e,r){return{id:e.id,type:"folder",name:e.name,collectionId:r,children:[...e.requests.map(n=>this.requestToTreeNode(n,r)),...e.folders.map(n=>this.folderToTreeNode(n,r))]}}requestToTreeNode(e,r){return{id:e.id,type:"request",name:e.name,collectionId:r,method:e.method,url:e.url,tests:e.tests}}addTestToRequest(e,r,n){let i=this.getCollection(e);if(!i)return;let s=this.findRequest(i,r);s&&(s.tests||(s.tests=[]),s.tests.push(n),i.updatedAt=new Date().toISOString(),this.save())}removeTestFromRequest(e,r,n){let i=this.getCollection(e);if(!i)return;let s=this.findRequest(i,r);!s||!s.tests||(s.tests.splice(n,1),i.updatedAt=new Date().toISOString(),this.save())}updateTest(e,r,n,i){let s=this.getCollection(e);if(!s)return;let o=this.findRequest(s,r);!o||!o.tests||!o.tests[n]||(o.tests[n]={...o.tests[n],...i},s.updatedAt=new Date().toISOString(),this.save())}toggleTest(e,r,n){let i=this.getCollection(e);if(!i)return;let s=this.findRequest(i,r);!s||!s.tests||!s.tests[n]||(s.tests[n].enabled=!s.tests[n].enabled,i.updatedAt=new Date().toISOString(),this.save())}getRequestTests(e,r){let n=this.getCollection(e);return n?this.findRequest(n,r)?.tests||[]:[]}updateRequestTests(e,r,n){let i=this.getCollection(e);if(!i)return;let s=this.findRequest(i,r);s&&(s.tests=n,s.updatedAt=new Date().toISOString(),i.updatedAt=new Date().toISOString(),this.save())}addExtractionToRequest(e,r,n){let i=this.getCollection(e);if(!i)return;let s=this.findRequest(i,r);s&&(s.extractVariables||(s.extractVariables=[]),s.extractVariables.push(n),s.updatedAt=new Date().toISOString(),i.updatedAt=new Date().toISOString(),this.save())}removeExtractionFromRequest(e,r,n){let i=this.getCollection(e);if(!i)return;let s=this.findRequest(i,r);!s||!s.extractVariables||(s.extractVariables.splice(n,1),s.updatedAt=new Date().toISOString(),i.updatedAt=new Date().toISOString(),this.save())}getRequestExtractions(e,r){let n=this.getCollection(e);return n?this.findRequest(n,r)?.extractVariables||[]:[]}};var C6=require("events");function vu(t,e){if(!e.startsWith("$"))throw new Error("JSONPath must start with $");let r=e.substring(1);return r===""||r==="."?[t]:Ri(t,r)}function dx(t,e){return vu(t,e)[0]}function I6(t,e){return vu(t,e).length>0}function Ri(t,e){if(!e||e===".")return t!==void 0?[t]:[];if(e.startsWith("..")){let n=e.substring(2).match(/^(\w+)(.*)/);if(n){let[,i,s]=n;return mxe(t,i,s)}}if(e.startsWith(".")){let r=e.substring(1);return A6(t,r)}return A6(t,e)}function A6(t,e){if(t==null)return[];let{segment:r,rest:n}=uxe(e);if(r.startsWith("["))return fxe(t,r,n);if(typeof t!="object")return[];let i=t[r];return n?Ri(i,n):i!==void 0?[i]:[]}function uxe(t){if(t.startsWith("[")){let r=dxe(t);return{segment:t.substring(0,r+1),rest:t.substring(r+1)}}let e=t.match(/^(\w+)([\.\[].*)?$/);return e?{segment:e[1],rest:e[2]||""}:{segment:t,rest:""}}function dxe(t){let e=0;for(let r=0;r<t.length;r++)if(t[r]==="["&&e++,t[r]==="]"&&e--,e===0)return r;return t.length-1}function fxe(t,e,r){let n=e.substring(1,e.length-1);if(n==="*"){if(!Array.isArray(t))return[];let l=[];for(let c of t)r?l.push(...Ri(c,r)):l.push(c);return l}let i=n.match(/^(-?\d+)$/);if(i){if(!Array.isArray(t))return[];let l=parseInt(i[1],10);l<0&&(l=t.length+l);let c=t[l];return r?Ri(c,r):c!==void 0?[c]:[]}let s=n.match(/^(-?\d*):(-?\d*)$/);if(s){if(!Array.isArray(t))return[];let l=s[1]?parseInt(s[1],10):0,c=s[2]?parseInt(s[2],10):t.length;l<0&&(l=t.length+l),c<0&&(c=t.length+c);let u=[];for(let d=l;d<c&&d<t.length;d++)r?u.push(...Ri(t[d],r)):u.push(t[d]);return u}let o=n.match(/^\?\((.+)\)$/);if(o){if(!Array.isArray(t))return[];let l=o[1],c=[];for(let u of t)hxe(u,l)&&(r?c.push(...Ri(u,r)):c.push(u));return c}let a=n.match(/^['"](.+)['"]$/);if(a){if(typeof t!="object"||t===null)return[];let l=t[a[1]];return r?Ri(l,r):l!==void 0?[l]:[]}return[]}function hxe(t,e){if(typeof t!="object"||t===null)return!1;let r=e.match(/^@\.(\w+(?:\.\w+)*)\s*(===?|!==?|>=?|<=?)\s*(.+)$/);if(r){let[,i,s,o]=r,a=R6(t,i),l=pxe(o.trim());return gxe(a,s,l)}let n=e.match(/^@\.(\w+(?:\.\w+)*)$/);if(n){let i=R6(t,n[1]);return i!=null}return!1}function R6(t,e){let r=e.split("."),n=t;for(let i of r){if(n==null||typeof n!="object")return;n=n[i]}return n}function pxe(t){if(t==="true")return!0;if(t==="false")return!1;if(t==="null")return null;if(/^-?\d+(\.\d+)?$/.test(t))return parseFloat(t);let e=t.match(/^['"](.*)['"]$/);return e?e[1]:t}function gxe(t,e,r){switch(e){case"==":case"===":return t===r;case"!=":case"!==":return t!==r;case">":return Number(t)>Number(r);case">=":return Number(t)>=Number(r);case"<":return Number(t)<Number(r);case"<=":return Number(t)<=Number(r);default:return!1}}function mxe(t,e,r){let n=[];function i(s){if(s!=null&&typeof s=="object")if(Array.isArray(s))for(let o of s)i(o);else{let o=s;e in o&&(r?n.push(...Ri(o[e],r)):n.push(o[e]));for(let a of Object.values(o))i(a)}}return i(t),n}var Hg=class extends C6.EventEmitter{constructor(){super();this.isRunning=!1;this.shouldStop=!1;this.currentResult=null;this.environment={};this.expressionHelpers={matches:(r,n)=>n.test(String(r)),contains:(r,n)=>Array.isArray(r)&&r.includes(n),all:(r,n)=>Array.isArray(r)&&r.every(n),any:(r,n)=>Array.isArray(r)&&r.some(n),len:r=>Array.isArray(r)||typeof r=="string"?r.length:typeof r=="object"&&r!==null?Object.keys(r).length:0,between:(r,n,i)=>r>=n&&r<=i};this.executor=new qa,this.pythonRunner=new Pa}get running(){return this.isRunning}get result(){return this.currentResult}async runCollection(r,n={}){let i=this.flattenRequests(r);return this.runRequests(i,r.id,r.name,n)}async runRequests(r,n,i,s={}){if(this.isRunning)throw new Error("Runner is already executing");this.isRunning=!0,this.shouldStop=!1,this.environment=s.environment||{};let o={collectionId:n,collectionName:i,status:"running",startedAt:new Date().toISOString(),totalRequests:r.length,completed:0,passed:0,failed:0,errors:0,skipped:0,totalTime:0,results:r.map(l=>({requestId:l.id,requestName:l.name,method:l.method,url:l.url,status:"pending"}))};this.currentResult=o,this.emit("start",o);let a=Date.now();for(let l=0;l<r.length;l++){if(this.shouldStop){for(let d=l;d<r.length;d++)o.results[d].status="skipped",o.skipped++;break}let c=r[l],u=o.results[l];u.status="running",this.emit("request-start",u,l);try{await this.executeRequest(c,u,s),o.completed++;let d=u.status;d==="passed"?o.passed++:d==="failed"?(o.failed++,s.stopOnError&&(this.shouldStop=!0)):d==="error"&&(o.errors++,s.stopOnError&&(this.shouldStop=!0))}catch(d){u.status="error",u.error=d.message,o.errors++,o.completed++,s.stopOnError&&(this.shouldStop=!0)}this.emit("request-complete",u,l),this.emit("progress",o),s.delay&&l<r.length-1&&!this.shouldStop&&await this.sleep(s.delay)}return o.totalTime=Date.now()-a,o.completedAt=new Date().toISOString(),o.status=this.shouldStop?"stopped":"completed",this.isRunning=!1,this.emit(this.shouldStop?"stop":"complete",o),o}stop(){this.isRunning&&(this.shouldStop=!0)}async executeRequest(r,n,i){let s=r.url,o={...r.headers},a=r.body;if(r.scripts?.preRequest){let c={request:{method:r.method,url:s,headers:o,body:a},env:this.environment},u=await this.pythonRunner.execute(r.scripts.preRequest,c);u.modifiedRequest&&(u.modifiedRequest.url&&(s=u.modifiedRequest.url),u.modifiedRequest.headers&&(o=u.modifiedRequest.headers),u.modifiedRequest.body&&(a=u.modifiedRequest.body)),u.output&&console.log("[TestRunner] Pre-request output:",u.output)}let l=await this.executor.execute({method:r.method,url:s,headers:o,body:a});if(n.url=s,n.httpStatus=l.status,n.httpStatusText=l.statusText,n.responseTime=l.time,n.responseSize=l.size,(l.headers||l.body)&&(n.response={headers:l.headers||{},body:l.body||""}),!l.success){n.status="error",n.error=l.error;return}if(r.scripts?.test){let c={request:{method:r.method,url:s,headers:o,body:a},response:{status:l.status,statusText:l.statusText,headers:l.headers,body:l.body,time_ms:l.time,size:l.size},env:this.environment},u=await this.pythonRunner.execute(r.scripts.test,c);n.assertions={passed:u.assertions?.passed||0,failed:u.assertions?.failed||0,tests:u.assertions?.tests||[]},u.assertions&&u.assertions.failed>0?n.status="failed":u.assertions&&u.assertions.passed>0?n.status="passed":n.status=this.isSuccessStatus(l.status)?"passed":"failed"}if(r.tests&&r.tests.length>0){let c=this.executeSnippets(r.tests,{status:l.status,headers:l.headers||{},body:l.body||"",time:l.time||0});n.snippetResults=c;let u=c.filter(p=>!p.passed).length,d=c.filter(p=>p.passed).length;n.assertions||(n.assertions={passed:0,failed:0,tests:[]}),n.assertions.passed+=d,n.assertions.failed+=u,u>0?n.status="failed":d>0&&n.status!=="failed"&&(n.status="passed")}!r.scripts?.test&&(!r.tests||r.tests.length===0)&&(n.status=this.isSuccessStatus(l.status)?"passed":"failed")}flattenRequests(r){let n=[];n.push(...r.requests);let i=s=>{for(let o of s)n.push(...o.requests),o.folders.length>0&&i(o.folders)};return i(r.folders),n}isSuccessStatus(r){return r!==void 0&&r>=200&&r<300}sleep(r){return new Promise(n=>setTimeout(n,r))}executeSnippets(r,n){return r.filter(i=>i.enabled).map(i=>this.executeSnippet(i,n))}executeSnippet(r,n){let i=Bs(r);try{let s;try{s=JSON.parse(n.body)}catch{s=n.body}let o={};for(let[a,l]of Object.entries(n.headers))o[a.toLowerCase()]=Array.isArray(l)?l[0]:l;switch(r.type){case"status":return{snippet:r,name:i,passed:n.status===r.expected,actual:n.status};case"statusFamily":{let l=r.expected.charAt(0),c=String(n.status).startsWith(l);return{snippet:r,name:i,passed:c,actual:n.status}}case"notEmpty":{let a=n.body!==null&&n.body!==void 0&&n.body!==""&&(typeof s!="object"||Object.keys(s).length>0);return{snippet:r,name:i,passed:a,actual:typeof s}}case"hasJsonBody":{let a=o["content-type"]||"";return{snippet:r,name:i,passed:a.includes("application/json"),actual:a}}case"hasField":{let a=this.getNestedValue(s,r.field)!==void 0;return{snippet:r,name:i,passed:a}}case"fieldNotNull":{let a=this.getNestedValue(s,r.field);return{snippet:r,name:i,passed:a!=null,actual:a}}case"fieldEquals":{let a=this.getNestedValue(s,r.field);return{snippet:r,name:i,passed:a===r.expected,actual:a}}case"responseTime":return{snippet:r,name:i,passed:n.time<(r.maxMs||1e3),actual:n.time};case"headerExists":{let l=r.header.toLowerCase()in o;return{snippet:r,name:i,passed:l}}case"headerEquals":{let a=r.header.toLowerCase(),l=o[a];return{snippet:r,name:i,passed:l===r.expected,actual:l}}case"custom":return this.executeCustomSnippet(r,{status:n.status,body:s,headers:o,time:n.time});case"arrayLength":{let l=this.getAllValues(s,r.field).length,c=r.expected,u=r.operator||"==",d=!1;switch(u){case">":d=l>c;break;case">=":d=l>=c;break;case"<":d=l<c;break;case"<=":d=l<=c;break;case"!=":d=l!==c;break;default:d=l===c}return{snippet:r,name:i,passed:d,actual:l}}case"allMatch":{let a=this.getAllValues(s,r.field);if(a.length===0)return{snippet:r,name:i,passed:!1,actual:"empty array"};let l=a.every(c=>this.evaluateItemCondition(c,r.condition));return{snippet:r,name:i,passed:l,actual:`${a.length} items`}}case"anyMatch":{let a=this.getAllValues(s,r.field),l=a.some(c=>this.evaluateItemCondition(c,r.condition));return{snippet:r,name:i,passed:l,actual:`${a.length} items`}}default:return{snippet:r,name:i,passed:!1,error:`Unknown snippet type: ${r.type}`}}}catch(s){return{snippet:r,name:i,passed:!1,error:s.message}}}getNestedValue(r,n){if(!r||typeof r!="object")return;if(n.startsWith("$"))return dx(r,n);let i=n.split("."),s=r;for(let o of i){if(s==null)return;let a=o.match(/^(\w+)\[(\d+)\]$/);if(a){let[,l,c]=a;if(s=s[l],Array.isArray(s))s=s[parseInt(c,10)];else return}else s=s[o]}return s}getAllValues(r,n){return n.startsWith("$")?vu(r,n):vu(r,"$."+n)}executeCustomSnippet(r,n){let i=Bs(r);if(!r.expression)return{snippet:r,name:i,passed:!1,error:"No expression provided"};try{let s={response:{status:n.status,body:n.body,headers:n.headers,time:n.time},JSON,Array,Object,String,Number,Boolean,Math,Date,RegExp,...this.expressionHelpers},o=this.evaluateExpression(r.expression,s);return{snippet:r,name:i,passed:!!o,actual:o}}catch(s){return{snippet:r,name:i,passed:!1,error:`Expression error: ${s.message}`}}}evaluateExpression(r,n){let i=["eval","Function","setTimeout","setInterval","fetch","XMLHttpRequest","import","require","process","global","window","document","__proto__","constructor","prototype"];for(let l of i)if(r.includes(l))throw new Error(`Forbidden pattern: ${l}`);let s=Object.keys(n),o=Object.values(n),a=`
      "use strict";
      return (${r});
    `;try{return new Function(...s,a)(...o)}catch(l){throw new Error(`Invalid expression: ${l.message}`)}}evaluateItemCondition(r,n){if(typeof r!="object"||r===null)return!1;let i=n.match(/^(\w+(?:\.\w+)*)\s*(===?|!==?|>=?|<=?)\s*(.+)$/);if(!i)return I6(r,"$."+n);let[,s,o,a]=i,l=dx(r,"$."+s),c=this.parseConditionValue(a.trim());switch(o){case"==":case"===":return l===c;case"!=":case"!==":return l!==c;case">":return Number(l)>Number(c);case">=":return Number(l)>=Number(c);case"<":return Number(l)<Number(c);case"<=":return Number(l)<=Number(c);default:return!1}}parseConditionValue(r){return r==="true"?!0:r==="false"?!1:r==="null"?null:/^-?\d+(\.\d+)?$/.test(r)?parseFloat(r):r.match(/^['"](.*)['"]$/)?r.slice(1,-1):r}};var Vg=class{constructor(e){this.panel=null;this.currentCollectionId=null;this.customOrder=[];this.collectionManager=e,this.runner=new Hg,this.setupRunnerEvents()}setupRunnerEvents(){this.runner.on("start",e=>{this.sendMessage({type:"runStart",result:e})}),this.runner.on("request-start",(e,r)=>{this.sendMessage({type:"requestStart",requestResult:e,index:r})}),this.runner.on("request-complete",(e,r)=>{this.sendMessage({type:"requestComplete",requestResult:e,index:r})}),this.runner.on("progress",e=>{this.sendMessage({type:"progress",result:e})}),this.runner.on("complete",e=>{this.sendMessage({type:"runComplete",result:e})}),this.runner.on("stop",e=>{this.sendMessage({type:"runStopped",result:e})})}open(e){let r=this.collectionManager.getCollection(e);if(!r){Ma.window.showErrorMessage("Collection not found");return}this.currentCollectionId=e,this.customOrder=this.flattenRequests(r),this.panel?this.panel.reveal():(this.panel=Ma.window.createWebviewPanel("pe4kingRunner",`Run: ${r.name}`,Ma.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0}),this.panel.onDidDispose(()=>{this.panel=null,this.runner.running&&this.runner.stop()}),this.panel.webview.onDidReceiveMessage(n=>this.handleMessage(n))),this.panel.title=`Run: ${r.name}`,this.panel.webview.html=this.getHtml(r.name),setTimeout(()=>{this.sendMessage({type:"init",collectionName:r.name,requests:this.customOrder.map(n=>({id:n.id,name:n.name,method:n.method,url:n.url,hasTests:!!n.scripts?.test}))})},100)}async handleMessage(e){switch(e.type){case"run":await this.runCollection(e);break;case"stop":this.runner.stop();break;case"reorder":this.handleReorder(e.order);break;case"close":this.panel?.dispose();break}}async runCollection(e){if(!this.currentCollectionId||this.customOrder.length===0)return;let r=this.collectionManager.getCollection(this.currentCollectionId);if(r)try{await this.runner.runRequests(this.customOrder,r.id,r.name,{delay:e.delay||0,stopOnError:e.stopOnError||!1})}catch(n){Ma.window.showErrorMessage(`Run failed: ${n.message}`)}}handleReorder(e){let r=new Map(this.customOrder.map(n=>[n.id,n]));this.customOrder=e.map(n=>r.get(n)).filter(n=>n!==void 0)}flattenRequests(e){let r=[];r.push(...e.requests);let n=i=>{for(let s of i)r.push(...s.requests),s.folders.length>0&&n(s.folders)};return n(e.folders),r}sendMessage(e){this.panel?.webview.postMessage(e)}getHtml(e){return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'unsafe-inline'; script-src 'unsafe-inline';">
  <title>Run Collection</title>
  <style>
    :root {
      --vscode-font-family: var(--vscode-editor-font-family, system-ui, sans-serif);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: var(--vscode-font-family);
      font-size: 13px;
      color: var(--vscode-foreground);
      background: var(--vscode-editor-background);
      padding: 16px;
      line-height: 1.5;
    }
    h2 { font-size: 1.3em; margin-bottom: 16px; }
    h3 { font-size: 1.1em; margin-bottom: 12px; color: var(--vscode-descriptionForeground); }

    /* Controls */
    .controls {
      display: flex;
      gap: 12px;
      align-items: center;
      margin-bottom: 16px;
      padding: 12px;
      background: var(--vscode-sideBar-background);
      border-radius: 6px;
    }
    .control-group {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .control-group label { font-size: 0.9em; }
    input[type="number"] {
      width: 70px;
      padding: 4px 8px;
      border: 1px solid var(--vscode-input-border);
      background: var(--vscode-input-background);
      color: var(--vscode-input-foreground);
      border-radius: 4px;
    }
    input[type="checkbox"] {
      width: 16px;
      height: 16px;
    }
    button {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: inherit;
      transition: opacity 0.15s;
    }
    button:hover { opacity: 0.9; }
    button:disabled { opacity: 0.5; cursor: not-allowed; }
    .btn-primary {
      background: var(--vscode-button-background);
      color: var(--vscode-button-foreground);
      font-weight: 500;
    }
    .btn-danger {
      background: #f93e3e;
      color: white;
    }
    .btn-secondary {
      background: var(--vscode-button-secondaryBackground);
      color: var(--vscode-button-secondaryForeground);
    }

    /* Summary */
    .summary {
      display: flex;
      gap: 24px;
      margin-bottom: 16px;
      padding: 16px;
      background: var(--vscode-sideBar-background);
      border-radius: 6px;
    }
    .summary-item {
      text-align: center;
    }
    .summary-value {
      font-size: 2em;
      font-weight: 600;
    }
    .summary-label {
      font-size: 0.85em;
      color: var(--vscode-descriptionForeground);
    }
    .summary-passed { color: #49cc90; }
    .summary-failed { color: #f93e3e; }
    .summary-error { color: #fca130; }

    /* Progress */
    .progress-bar {
      height: 4px;
      background: var(--vscode-progressBar-background);
      border-radius: 2px;
      margin-bottom: 16px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: var(--vscode-button-background);
      transition: width 0.3s ease;
    }

    /* Request List */
    .request-list {
      border: 1px solid var(--vscode-panel-border);
      border-radius: 6px;
      max-height: 400px;
      overflow-y: auto;
    }
    .request-item {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      border-bottom: 1px solid var(--vscode-panel-border);
      cursor: grab;
      transition: background 0.15s;
    }
    .request-item:last-child { border-bottom: none; }
    .request-item:hover { background: var(--vscode-list-hoverBackground); }
    .request-item.dragging {
      opacity: 0.5;
      background: var(--vscode-list-activeSelectionBackground);
    }
    .request-item.drag-over {
      border-top: 2px solid var(--vscode-focusBorder);
    }
    .drag-handle {
      cursor: grab;
      padding: 0 8px;
      color: var(--vscode-descriptionForeground);
      font-size: 1.2em;
    }
    .request-index {
      width: 24px;
      text-align: center;
      color: var(--vscode-descriptionForeground);
      font-size: 0.9em;
    }
    .request-method {
      font-family: monospace;
      font-size: 0.8em;
      font-weight: 600;
      padding: 2px 6px;
      border-radius: 3px;
      margin-right: 8px;
      min-width: 50px;
      text-align: center;
    }
    .method-get { background: #61affe22; color: #61affe; }
    .method-post { background: #49cc9022; color: #49cc90; }
    .method-put { background: #fca13022; color: #fca130; }
    .method-patch { background: #50e3c222; color: #50e3c2; }
    .method-delete { background: #f93e3e22; color: #f93e3e; }
    .request-name {
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .request-status {
      width: 80px;
      text-align: center;
      font-size: 0.85em;
      font-weight: 500;
    }
    .status-pending { color: var(--vscode-descriptionForeground); }
    .status-running { color: var(--vscode-textLink-foreground); }
    .status-passed { color: #49cc90; }
    .status-failed { color: #f93e3e; }
    .status-error { color: #fca130; }
    .status-skipped { color: var(--vscode-descriptionForeground); }
    .request-time {
      width: 70px;
      text-align: right;
      font-size: 0.85em;
      color: var(--vscode-descriptionForeground);
    }
    .request-assertions {
      width: 100px;
      text-align: right;
      font-size: 0.85em;
    }
    .test-badge {
      font-size: 0.75em;
      padding: 2px 6px;
      border-radius: 3px;
      margin-left: 6px;
    }
    .test-badge.has-tests {
      background: var(--vscode-badge-background);
      color: var(--vscode-badge-foreground);
    }

    /* Expandable test details */
    .request-row { cursor: pointer; }
    .request-details { display: none; padding: 12px 16px 12px 60px; background: var(--vscode-editor-background); border-bottom: 1px solid var(--vscode-panel-border); }
    .request-details.expanded { display: block; }
    .detail-section { margin-bottom: 12px; }
    .detail-title { font-size: 0.85em; color: var(--vscode-descriptionForeground); margin-bottom: 4px; }
    .test-detail-item { display: flex; align-items: center; gap: 8px; padding: 4px 0; font-family: monospace; font-size: 0.9em; }
    .test-detail-icon { width: 16px; }
    .test-detail-icon.pass { color: #49cc90; }
    .test-detail-icon.fail { color: #f93e3e; }
    .test-expand-icon { font-size: 10px; width: 12px; color: var(--vscode-descriptionForeground); }
    .expand-icon { margin-right: 4px; font-size: 0.8em; color: var(--vscode-descriptionForeground); transition: transform 0.2s; }
    .expand-icon.expanded { transform: rotate(90deg); }

    /* Spinner */
    .spinner {
      display: inline-block;
      width: 14px;
      height: 14px;
      border: 2px solid var(--vscode-textLink-foreground);
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 40px;
      color: var(--vscode-descriptionForeground);
    }

    /* Result details */
    .result-details {
      margin-top: 16px;
      padding: 12px;
      background: var(--vscode-sideBar-background);
      border-radius: 6px;
      font-family: monospace;
      font-size: 0.9em;
      max-height: 200px;
      overflow-y: auto;
    }
    .assertion-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 4px 0;
    }
    .assertion-icon { font-size: 1.1em; }
    .assertion-passed { color: #49cc90; }
    .assertion-failed { color: #f93e3e; }
  </style>
</head>
<body>
  <h2>Collection Runner</h2>
  <h3 id="collection-name">${e}</h3>

  <div class="controls">
    <button id="btn-run" class="btn-primary" onclick="run()">
      Run Collection
    </button>
    <button id="btn-stop" class="btn-danger" onclick="stop()" disabled>
      Stop
    </button>

    <div class="control-group">
      <label for="delay">Delay (ms):</label>
      <input type="number" id="delay" value="0" min="0" max="10000" step="100">
    </div>

    <div class="control-group">
      <input type="checkbox" id="stop-on-error">
      <label for="stop-on-error">Stop on error</label>
    </div>
  </div>

  <div class="summary" id="summary" style="display: none;">
    <div class="summary-item">
      <div class="summary-value" id="total-count">0</div>
      <div class="summary-label">Total</div>
    </div>
    <div class="summary-item summary-passed">
      <div class="summary-value" id="passed-count">0</div>
      <div class="summary-label">Passed</div>
    </div>
    <div class="summary-item summary-failed">
      <div class="summary-value" id="failed-count">0</div>
      <div class="summary-label">Failed</div>
    </div>
    <div class="summary-item summary-error">
      <div class="summary-value" id="error-count">0</div>
      <div class="summary-label">Errors</div>
    </div>
    <div class="summary-item">
      <div class="summary-value" id="total-time">0ms</div>
      <div class="summary-label">Total Time</div>
    </div>
  </div>

  <div class="progress-bar" id="progress-bar" style="display: none;">
    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
  </div>

  <div class="request-list" id="request-list">
    <div class="empty-state">Loading requests...</div>
  </div>

  <script>
    const vscode = acquireVsCodeApi();
    let requests = [];
    let isRunning = false;
    let draggedItem = null;

    window.addEventListener('message', event => {
      const message = event.data;
      switch (message.type) {
        case 'init':
          requests = message.requests;
          renderRequests();
          break;
        case 'runStart':
          isRunning = true;
          updateControls();
          document.getElementById('summary').style.display = 'flex';
          document.getElementById('progress-bar').style.display = 'block';
          break;
        case 'requestStart':
          updateRequestStatus(message.index, 'running');
          break;
        case 'requestComplete':
          updateRequestResult(message.index, message.requestResult);
          break;
        case 'progress':
          updateProgress(message.result);
          break;
        case 'runComplete':
        case 'runStopped':
          isRunning = false;
          updateControls();
          updateProgress(message.result);
          break;
      }
    });

    // Store results for expansion
    let requestResults = {};

    function renderRequests() {
      const container = document.getElementById('request-list');
      if (requests.length === 0) {
        container.innerHTML = '<div class="empty-state">No requests in collection</div>';
        return;
      }

      container.innerHTML = requests.map((req, idx) => \`
        <div class="request-item request-row" data-id="\${req.id}" data-index="\${idx}"
             draggable="true"
             ondragstart="handleDragStart(event)"
             ondragend="handleDragEnd(event)"
             ondragover="handleDragOver(event)"
             ondrop="handleDrop(event)"
             onclick="toggleDetails(\${idx}, event)">
          <span class="expand-icon" id="expand-\${idx}">\u25B6</span>
          <span class="drag-handle">\u22EE\u22EE</span>
          <span class="request-index">\${idx + 1}</span>
          <span class="request-method method-\${req.method.toLowerCase()}">\${req.method}</span>
          <span class="request-name">\${req.name}</span>
          \${req.hasTests ? '<span class="test-badge has-tests">Tests</span>' : ''}
          <span class="request-status status-pending" id="status-\${idx}">Pending</span>
          <span class="request-time" id="time-\${idx}">-</span>
          <span class="request-assertions" id="assertions-\${idx}">-</span>
        </div>
        <div class="request-details" id="details-\${idx}">
          <div class="detail-section">
            <div class="detail-title">Test Results</div>
            <div id="tests-detail-\${idx}">No results yet</div>
          </div>
        </div>
      \`).join('');
    }

    function toggleDetails(idx, event) {
      // Ignore clicks on drag handle
      if (event.target.classList.contains('drag-handle')) return;

      const details = document.getElementById('details-' + idx);
      const expandIcon = document.getElementById('expand-' + idx);

      if (details.classList.contains('expanded')) {
        details.classList.remove('expanded');
        expandIcon.classList.remove('expanded');
      } else {
        details.classList.add('expanded');
        expandIcon.classList.add('expanded');
      }
    }

    function updateRequestStatus(index, status) {
      const statusEl = document.getElementById('status-' + index);
      if (!statusEl) return;

      statusEl.className = 'request-status status-' + status;
      if (status === 'running') {
        statusEl.innerHTML = '<span class="spinner"></span>';
      } else {
        statusEl.textContent = status.charAt(0).toUpperCase() + status.slice(1);
      }
    }

    function updateRequestResult(index, result) {
      updateRequestStatus(index, result.status);
      requestResults[index] = result;

      const timeEl = document.getElementById('time-' + index);
      if (timeEl && result.responseTime) {
        timeEl.textContent = result.responseTime + 'ms';
      }

      const assertionsEl = document.getElementById('assertions-' + index);
      if (assertionsEl && result.assertions) {
        const { passed, failed } = result.assertions;
        if (passed > 0 || failed > 0) {
          assertionsEl.innerHTML = \`
            <span style="color: #49cc90">\${passed}</span> /
            <span style="color: #f93e3e">\${failed}</span>
          \`;
        }
      }

      // Update test details section
      renderTestDetails(index, result);
    }

    function renderTestDetails(index, result) {
      const container = document.getElementById('tests-detail-' + index);
      if (!container) return;

      let html = '';

      // Python script test results (from assertions.tests)
      if (result.assertions && result.assertions.tests && result.assertions.tests.length > 0) {
        result.assertions.tests.forEach((t, i) => {
          const icon = t.passed ? '\u2713' : '\u2717';
          const iconClass = t.passed ? 'pass' : 'fail';
          const testId = 'runner-test-' + index + '-' + i;
          html += '<div class="test-detail-item" onclick="toggleRunnerTest(\\'' + testId + '\\')" style="cursor: pointer;">';
          html += '<span class="test-expand-icon" id="expand-' + testId + '">\u25B6</span>';
          html += '<span class="test-detail-icon ' + iconClass + '">' + icon + '</span>';
          html += '<span style="flex: 1;">' + escapeHtml(t.name) + '</span>';
          html += '</div>';
          html += '<div class="test-debug-detail" id="' + testId + '" style="display: none; padding: 8px 8px 8px 40px; background: var(--vscode-editor-background); font-size: 0.85em; border-radius: 4px; margin: 4px 0;">';
          if (t.actual !== undefined && t.expected !== undefined) {
            html += '<div>Expected: <span style="color: #49cc90;">' + escapeHtml(t.expected) + '</span></div>';
            html += '<div>Actual: <span style="color: ' + (t.passed ? '#49cc90' : '#f93e3e') + ';">' + escapeHtml(t.actual) + '</span></div>';
          } else {
            html += '<div>Result: <span style="color: ' + (t.passed ? '#49cc90' : '#f93e3e') + '">' + (t.passed ? 'PASSED' : 'FAILED') + '</span></div>';
          }
          html += '</div>';
        });
      }

      // Response info
      if (result.httpStatus) {
        if (html) html += '<div style="margin-top: 12px;"></div>';
        html += '<div style="font-size: 0.85em; color: var(--vscode-descriptionForeground);">Response: ' + result.httpStatus + ' (' + (result.responseTime || 0) + 'ms)</div>';
      }

      // Error
      if (result.error) {
        html += '<div style="margin-top: 8px; color: #f93e3e;">' + escapeHtml(result.error) + '</div>';
      }

      container.innerHTML = html || '<div style="color: var(--vscode-descriptionForeground);">No test results</div>';
    }

    function toggleRunnerTest(testId) {
      const debugEl = document.getElementById(testId);
      const expandIcon = document.getElementById('expand-' + testId);
      if (!debugEl) return;

      if (debugEl.style.display === 'none') {
        debugEl.style.display = 'block';
        if (expandIcon) expandIcon.textContent = '\u25BC';
      } else {
        debugEl.style.display = 'none';
        if (expandIcon) expandIcon.textContent = '\u25B6';
      }
    }

    function escapeHtml(str) {
      if (typeof str !== 'string') return String(str);
      return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    }

    function updateProgress(result) {
      document.getElementById('total-count').textContent = result.totalRequests;
      document.getElementById('passed-count').textContent = result.passed;
      document.getElementById('failed-count').textContent = result.failed;
      document.getElementById('error-count').textContent = result.errors;
      document.getElementById('total-time').textContent = result.totalTime + 'ms';

      const percent = (result.completed / result.totalRequests) * 100;
      document.getElementById('progress-fill').style.width = percent + '%';
    }

    function updateControls() {
      document.getElementById('btn-run').disabled = isRunning;
      document.getElementById('btn-stop').disabled = !isRunning;
      document.getElementById('delay').disabled = isRunning;
      document.getElementById('stop-on-error').disabled = isRunning;

      // Disable drag during run
      document.querySelectorAll('.request-item').forEach(el => {
        el.draggable = !isRunning;
        el.querySelector('.drag-handle').style.opacity = isRunning ? 0.3 : 1;
      });
    }

    function run() {
      const delay = parseInt(document.getElementById('delay').value) || 0;
      const stopOnError = document.getElementById('stop-on-error').checked;

      // Reset UI
      requests.forEach((_, idx) => {
        updateRequestStatus(idx, 'pending');
        document.getElementById('time-' + idx).textContent = '-';
        document.getElementById('assertions-' + idx).textContent = '-';
      });

      vscode.postMessage({ type: 'run', delay, stopOnError });
    }

    function stop() {
      vscode.postMessage({ type: 'stop' });
    }

    // Drag and drop handlers
    function handleDragStart(e) {
      if (isRunning) return;
      draggedItem = e.target;
      e.target.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    }

    function handleDragEnd(e) {
      e.target.classList.remove('dragging');
      document.querySelectorAll('.drag-over').forEach(el => el.classList.remove('drag-over'));
      draggedItem = null;
    }

    function handleDragOver(e) {
      if (isRunning) return;
      e.preventDefault();
      const item = e.target.closest('.request-item');
      if (item && item !== draggedItem) {
        document.querySelectorAll('.drag-over').forEach(el => el.classList.remove('drag-over'));
        item.classList.add('drag-over');
      }
    }

    function handleDrop(e) {
      if (isRunning) return;
      e.preventDefault();
      const target = e.target.closest('.request-item');
      if (!target || !draggedItem || target === draggedItem) return;

      const container = document.getElementById('request-list');
      const items = Array.from(container.querySelectorAll('.request-item'));
      const draggedIdx = items.indexOf(draggedItem);
      const targetIdx = items.indexOf(target);

      // Reorder requests array
      const [removed] = requests.splice(draggedIdx, 1);
      requests.splice(targetIdx, 0, removed);

      // Re-render
      renderRequests();

      // Notify extension
      vscode.postMessage({
        type: 'reorder',
        order: requests.map(r => r.id)
      });

      target.classList.remove('drag-over');
    }
  </script>
</body>
</html>`}};function fx(t,e){let r=[],n=0;for(let i of t.requests)r.push(k6(i,++n));for(let i of t.folders)for(let s of i.requests)r.push(k6(s,++n,i.name));return r}function k6(t,e,r){return{name:bxe(t.name),description:t.name,method:t.method,url:t.url,headers:t.headers,body:t.body,assertions:(t.tests||[]).map(yxe),extractVariables:(t.extractVariables||[]).map(n=>({name:n.name,path:n.path,scope:n.scope==="collection"?"global":"local"})),tags:r?[r]:void 0,order:e}}function yxe(t){switch(t.type){case"status":return{type:"status",statusCode:t.expected};case"statusFamily":return{type:"status",statusFamily:t.expected};case"notEmpty":return{type:"body",path:"$",exists:!0};case"hasJsonBody":return{type:"header",headerName:"Content-Type",contains:"application/json"};case"hasField":return{type:"body",path:Da(t.field),exists:!0};case"fieldNotNull":return{type:"body",path:Da(t.field),notNull:!0};case"fieldEquals":return{type:"body",path:Da(t.field),equals:t.expected};case"responseTime":return{type:"time",maxMs:t.maxMs};case"headerExists":return{type:"header",headerName:t.header,exists:!0};case"headerEquals":return{type:"header",headerName:t.header,headerValue:t.expected};case"arrayLength":return{type:"body",path:Da(t.field),arrayLength:t.expected,arrayOp:t.operator||"=="};case"allMatch":return{type:"body",path:Da(t.field),allMatch:t.condition};case"anyMatch":return{type:"body",path:Da(t.field),anyMatch:t.condition};case"custom":return{type:"custom",expression:t.expression,description:t.description};default:return{type:"custom",description:`Unknown: ${t.type}`}}}function Da(t){return t.startsWith("$")?t:"$."+t}function bxe(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"").substring(0,60)}function hx(t,e){let r=[],n=[];try{if(e.singleFile){let i=N6(t,e);r.push({filename:`test_${e.moduleName||"api"}.py`,content:i,language:"python"})}else{let i=Exe(t);for(let[s,o]of Object.entries(i)){let a=N6(o,e,s),l=s?`test_${xxe(s)}.py`:`test_${e.moduleName||"api"}.py`;r.push({filename:l,content:a,language:"python"})}}return e.includeSetup&&r.push({filename:"conftest.py",content:vxe(e),language:"python"}),{success:!0,files:r}}catch(i){return n.push(i.message),{success:!1,files:r,errors:n}}}function N6(t,e,r){let n=e.indent||"    ",i=[];i.push('"""'),i.push(`API Tests${r?` - ${r}`:""}`),i.push("Generated by Pe4King"),i.push('"""'),i.push(""),i.push("import pytest"),i.push("import requests"),i.push("import re"),i.push("from jsonpath_ng import parse as jsonpath"),i.push(""),i.push(""),e.baseUrl&&(i.push(`BASE_URL = "${e.baseUrl}"`),i.push("")),e.includeVariables&&(i.push("# Variable store for chained requests"),i.push("_variables = {}"),i.push(""),i.push(""),i.push("def get_var(name: str) -> str:"),i.push(`${n}"""Get variable value"""`),i.push(`${n}return _variables.get(name, f"{{{{{name}}}}}")`),i.push(""),i.push(""),i.push("def set_var(name: str, value) -> None:"),i.push(`${n}"""Set variable value"""`),i.push(`${n}_variables[name] = value`),i.push(""),i.push(""),i.push("def resolve_vars(text: str) -> str:"),i.push(`${n}"""Replace {{var}} with values"""`),i.push(`${n}def replacer(m):`),i.push(`${n}${n}return str(get_var(m.group(1)))`),i.push(`${n}return re.sub(r'\\{\\{(\\w+)\\}\\}', replacer, text)`),i.push(""),i.push("")),i.push(`class Test${Txe(r||"Api")}:`),i.push(`${n}"""${r||"API"} Tests"""`),i.push("");for(let s of t)i.push(...wxe(s,e)),i.push("");return i.join(`
`)}function wxe(t,e){let r=e.indent||"    ",n=[];t.order!==void 0&&n.push(`${r}@pytest.mark.order(${t.order})`),n.push(`${r}def test_${t.name}(self, base_url):`),n.push(`${r}${r}"""${t.description||t.name}"""`);let i=e.includeVariables?`resolve_vars(f"{base_url}${t.url}")`:`f"{base_url}${t.url}"`;if(n.push(`${r}${r}url = ${i}`),Object.keys(t.headers).length>0){n.push(`${r}${r}headers = {`);for(let[o,a]of Object.entries(t.headers)){let l=e.includeVariables?`resolve_vars("${a}")`:`"${a}"`;n.push(`${r}${r}${r}"${o}": ${l},`)}n.push(`${r}${r}}`)}else n.push(`${r}${r}headers = {}`);if(t.body){let o=JSON.stringify(t.body,null,4).split(`
`).map((a,l)=>l===0?a:r+r+a).join(`
`);n.push(`${r}${r}body = ${o}`)}let s=t.body?", json=body":"";n.push(""),n.push(`${r}${r}response = requests.${t.method.toLowerCase()}(`),n.push(`${r}${r}${r}url,`),n.push(`${r}${r}${r}headers=headers${s}`),n.push(`${r}${r})`),n.push("");for(let o of t.assertions)n.push(..._xe(o,e));if(e.includeVariables&&t.extractVariables?.length){n.push(""),n.push(`${r}${r}# Extract variables`),n.push(`${r}${r}data = response.json()`);for(let o of t.extractVariables)n.push(`${r}${r}set_var("${o.name}", jsonpath("${o.path}").find(data)[0].value)`)}return n}function _xe(t,e){let r=e.indent||"    ",n=r+r,i=[];switch(t.type){case"status":if(t.statusCode)i.push(`${n}assert response.status_code == ${t.statusCode}`);else if(t.statusFamily){let s=t.statusFamily.charAt(0);i.push(`${n}assert response.status_code // 100 == ${s}`)}break;case"body":if(t.path){let s=`jsonpath("${t.path}").find(response.json())`;if(t.exists&&i.push(`${n}assert len(${s}) > 0, "Field ${t.path} not found"`),t.notNull&&(i.push(`${n}matches = ${s}`),i.push(`${n}assert len(matches) > 0 and matches[0].value is not None`)),t.equals!==void 0){let o=JSON.stringify(t.equals);i.push(`${n}assert ${s}[0].value == ${o}`)}if(t.arrayLength!==void 0){let o=t.arrayOp||"==";i.push(`${n}assert len(${s}) ${o} ${t.arrayLength}`)}}break;case"header":t.headerName&&(t.exists&&i.push(`${n}assert "${t.headerName}" in response.headers`),t.headerValue&&i.push(`${n}assert response.headers.get("${t.headerName}") == "${t.headerValue}"`),t.contains&&i.push(`${n}assert "${t.contains}" in response.headers.get("${t.headerName}", "")`));break;case"time":t.maxMs&&i.push(`${n}assert response.elapsed.total_seconds() * 1000 < ${t.maxMs}`);break;case"custom":if(t.expression){let s=Sxe(t.expression);i.push(`${n}# ${t.description||"Custom assertion"}`),i.push(`${n}data = response.json()`),i.push(`${n}assert ${s}`)}break}return i}function vxe(t){return`"""
Pytest configuration and fixtures
Generated by Pe4King
"""

import pytest


@pytest.fixture(scope="session")
def base_url():
    """Base URL for API tests"""
    return "${t.baseUrl||"http://localhost:8080"}"


@pytest.fixture(autouse=True)
def reset_variables():
    """Reset variables before each test module"""
    try:
        from test_api import _variables
        _variables.clear()
    except ImportError:
        pass
    yield
`}function Sxe(t){return t.replace(/===?/g,"==").replace(/!==?/g,"!=").replace(/&&/g," and ").replace(/\|\|/g," or ").replace(/!/g,"not ").replace(/true/g,"True").replace(/false/g,"False").replace(/null/g,"None").replace(/response\.body/g,"data").replace(/response\.status/g,"response.status_code").replace(/\.length/g,")").replace(/len\(/g,"len(")}function Exe(t){let e={"":[]};for(let r of t){let n=r.tags?.[0]||"";e[n]||(e[n]=[]),e[n].push(r)}return e}function xxe(t){return t.toLowerCase().replace(/[^a-z0-9]+/g,"_")}function Txe(t){return t.split(/[^a-zA-Z0-9]+/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join("")}var Axe=`package {package}.base;

import io.restassured.RestAssured;
import io.restassured.http.ContentType;
import io.restassured.specification.RequestSpecification;
import org.junit.jupiter.api.BeforeAll;

/**
 * Base test class with common setup
 * Generated by Pe4King
 */
public abstract class BaseTest {

    protected static RequestSpecification spec;
    protected static RequestSpecification specNoAuth;
    protected static String baseUrl;

    @BeforeAll
    static void baseSetup() {
        baseUrl = System.getenv().getOrDefault("API_BASE_URL", "{baseUrl}");
        String token = System.getenv().getOrDefault("API_TOKEN", "");

        specNoAuth = RestAssured.given()
            .baseUri(baseUrl)
            .contentType(ContentType.JSON)
            .accept(ContentType.JSON);

        spec = RestAssured.given()
            .baseUri(baseUrl)
            .contentType(ContentType.JSON)
            .accept(ContentType.JSON);

        if (!token.isEmpty()) {
            spec = spec.header("Authorization", "Bearer " + token);
        }

        RestAssured.enableLoggingOfRequestAndResponseIfValidationFails();
    }
}
`,Rxe=`package {package}.base;

import io.restassured.http.ContentType;
import io.restassured.response.Response;
import io.restassured.specification.RequestSpecification;
import static io.restassured.RestAssured.given;

import java.util.Map;

/**
 * Base API client with common request methods
 * Generated by Pe4King
 */
public abstract class BaseClient {

    protected RequestSpecification spec;

    public BaseClient(RequestSpecification spec) {
        this.spec = spec;
    }

    protected Response doGet(String path) {
        return given().spec(spec).when().get(path);
    }

    protected Response doGet(String path, Map<String, ?> queryParams) {
        return given().spec(spec).queryParams(queryParams).when().get(path);
    }

    protected Response doPost(String path, Object body) {
        return given().spec(spec).contentType(ContentType.JSON).body(body).when().post(path);
    }

    protected Response doPut(String path, Object body) {
        return given().spec(spec).contentType(ContentType.JSON).body(body).when().put(path);
    }

    protected Response doPatch(String path, Object body) {
        return given().spec(spec).contentType(ContentType.JSON).body(body).when().patch(path);
    }

    protected Response doDelete(String path) {
        return given().spec(spec).when().delete(path);
    }

    protected String resolveVars(String template, Map<String, Object> variables) {
        String result = template;
        for (Map.Entry<String, Object> entry : variables.entrySet()) {
            result = result.replace("{{" + entry.getKey() + "}}", String.valueOf(entry.getValue()));
        }
        return result;
    }
}
`,Ixe=`package {package}.clients;

import {package}.base.BaseClient;
import io.restassured.response.Response;
import io.restassured.specification.RequestSpecification;

import java.util.Map;
import java.util.HashMap;

/**
 * API Client for {collectionName}
 * Generated by Pe4King
 */
public class {className} extends BaseClient {

    private Map<String, Object> variables = new HashMap<>();

    public {className}(RequestSpecification spec) {
        super(spec);
    }

    public void setVariable(String name, Object value) {
        variables.put(name, value);
    }

    public Object getVariable(String name) {
        return variables.get(name);
    }

`,Cxe=`
    /**
     * {description}
     * {method} {path}
     */
    public Response {methodName}({parameters}) {
        String url = resolveVars("{path}", variables);
{bodySetup}
        return {requestChain};
    }
`,kxe=`}
`,Nxe=`package {package}.tests;

import {package}.base.BaseTest;
import {package}.clients.{clientClass};
import io.restassured.response.Response;
import org.junit.jupiter.api.*;
import org.junit.jupiter.api.MethodOrderer.OrderAnnotation;
import static org.hamcrest.MatcherAssert.assertThat;
import static org.hamcrest.Matchers.*;

import java.util.Map;
import java.util.HashMap;

/**
 * API Tests for {collectionName}
 * Generated by Pe4King
 */
@TestMethodOrder(OrderAnnotation.class)
public class {className} extends BaseTest {

    private static {clientClass} client;

    @BeforeAll
    static void setupClient() {
        baseSetup();
        client = new {clientClass}(spec);
    }

`,Oxe=`
    @Test
    @Order({order})
    @DisplayName("{displayName}")
    void {testName}() {
        Response response = client.{clientMethod}({callParams});

        assertThat(response.statusCode(), {statusMatcher});
{assertions}
{extractions}
    }
`,qxe=`}
`,Pxe=`<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>{groupId}</groupId>
    <artifactId>api-tests</artifactId>
    <version>1.0.0</version>
    <packaging>jar</packaging>

    <properties>
        <maven.compiler.source>17</maven.compiler.source>
        <maven.compiler.target>17</maven.compiler.target>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <rest-assured.version>5.4.0</rest-assured.version>
        <junit.version>5.10.1</junit.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>io.rest-assured</groupId>
            <artifactId>rest-assured</artifactId>
            <version>\${rest-assured.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.junit.jupiter</groupId>
            <artifactId>junit-jupiter</artifactId>
            <version>\${junit.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.hamcrest</groupId>
            <artifactId>hamcrest</artifactId>
            <version>2.2</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>3.2.2</version>
            </plugin>
        </plugins>
    </build>
</project>
`;function gx(t,e){let r=[],n=[];try{let i=e.javaPackage||"com.api.tests",s=i.replace(/\./g,"/"),o=e.className||"ApiTest",a=o.replace(/Test$/,"")+"Client",l=e.collectionName||"API";r.push({filename:`src/test/java/${s}/base/BaseTest.java`,content:Axe.replace(/{package}/g,i).replace(/{baseUrl}/g,e.baseUrl||"http://localhost:8080"),language:"java"}),r.push({filename:`src/test/java/${s}/base/BaseClient.java`,content:Rxe.replace(/{package}/g,i),language:"java"}),r.push({filename:`src/test/java/${s}/clients/${a}.java`,content:Lxe(t,e,i,a,l),language:"java"}),r.push({filename:`src/test/java/${s}/tests/${o}.java`,content:Dxe(t,e,i,o,a,l),language:"java"});let c=i.split(".").slice(0,2).join(".")||"com.api";return r.push({filename:"pom.xml",content:Pxe.replace(/{groupId}/g,c),language:"xml"}),{success:!0,files:r}}catch(i){return n.push(i.message),{success:!1,files:r,errors:n}}}function Lxe(t,e,r,n,i){let s=Ixe.replace(/{package}/g,r).replace(/{className}/g,n).replace(/{collectionName}/g,i),o=new Set;for(let a of t){let l=mx(a.name);o.has(l)||(o.add(l),s+=Mxe(a,e))}return s+=kxe,s}function Mxe(t,e){let r=mx(t.name),n=t.method.toUpperCase(),i=["POST","PUT","PATCH"].includes(n),s=[];i&&s.push("Object body");let o,a="";return i?(a=`        Object requestBody = body != null ? body : Map.of();
`,o=`do${yx(n.toLowerCase())}(url, requestBody)`):n==="DELETE"?o="doDelete(url)":o="doGet(url)",Cxe.replace(/{description}/g,t.description||t.name).replace(/{method}/g,n).replace(/{path}/g,t.url).replace(/{methodName}/g,r).replace(/{parameters}/g,s.join(", ")).replace(/{bodySetup}/g,a).replace(/{requestChain}/g,o)}function Dxe(t,e,r,n,i,s){let o=Nxe.replace(/{package}/g,r).replace(/{className}/g,n).replace(/{clientClass}/g,i).replace(/{collectionName}/g,s),a=1;for(let l of t)o+=$xe(l,e,a++);return o+=qxe,o}function $xe(t,e,r){let n=mx(t.name),i="test"+yx(n),s=["POST","PUT","PATCH"].includes(t.method.toUpperCase()),o=[];s&&(t.body&&Object.keys(t.body).length>0?o.push(Wxe(t.body)):o.push("Map.of()"));let a=Fxe(t.assertions),l=Bxe(t.assertions),c=Uxe(t,e);return Oxe.replace(/{order}/g,String(r)).replace(/{displayName}/g,px(t.description||t.name)).replace(/{testName}/g,i).replace(/{clientMethod}/g,n).replace(/{callParams}/g,o.join(", ")).replace(/{statusMatcher}/g,a).replace(/{assertions}/g,l).replace(/{extractions}/g,c)}function Fxe(t){for(let e of t)if(e.type==="status"){if(e.statusCode)return`equalTo(${e.statusCode})`;if(e.statusFamily){let r=e.statusFamily.charAt(0);return`allOf(greaterThanOrEqualTo(${r}00), lessThan(${parseInt(r)+1}00))`}}return"lessThan(400)"}function Bxe(t){let e=[];for(let r of t){if(r.type==="status")continue;let n=jxe(r);for(let i of n)e.push(`        ${i}`)}return e.length>0?`
`+e.join(`
`):""}function jxe(t){let e=[];switch(t.type){case"body":if(t.path){let r=t.path.startsWith("$")?t.path.substring(2):t.path;if((t.exists||t.notNull)&&e.push(`assertThat(response.jsonPath().get("${r}"), notNullValue());`),t.equals!==void 0){let n=O6(t.equals);e.push(`assertThat(response.jsonPath().get("${r}"), equalTo(${n}));`)}if(t.arrayLength!==void 0){let n=zxe(t.arrayOp||"==",t.arrayLength);e.push(`assertThat(response.jsonPath().getList("${r}"), hasSize(${n}));`)}}break;case"header":t.headerName&&(t.exists&&e.push(`assertThat(response.header("${t.headerName}"), notNullValue());`),t.headerValue&&e.push(`assertThat(response.header("${t.headerName}"), equalTo("${t.headerValue}"));`));break;case"time":t.maxMs&&e.push(`assertThat(response.time(), lessThan(${t.maxMs}L));`);break;case"custom":t.expression&&(e.push(`// Custom: ${t.description||t.expression}`),e.push("// TODO: Convert to Java assertion"));break}return e}function Uxe(t,e){if(!e.includeVariables||!t.extractVariables?.length)return"";let r=[""];r.push("        // Extract variables");for(let n of t.extractVariables){let i=n.path.startsWith("$")?n.path.substring(2):n.path;r.push(`        client.setVariable("${n.name}", response.jsonPath().get("${i}"));`)}return r.join(`
`)}function mx(t){return t.split(/[^a-zA-Z0-9]+/).filter(Boolean).map((e,r)=>r===0?e.toLowerCase():yx(e)).join("")}function yx(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}function px(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")}function O6(t){return t===null?"null":typeof t=="string"?`"${px(t)}"`:typeof t=="number"?Number.isInteger(t)?String(t):`${t}f`:typeof t=="boolean"?String(t):`"${px(JSON.stringify(t))}"`}function Wxe(t){return`Map.of(${Object.entries(t).slice(0,10).map(([r,n])=>`"${r}", ${O6(n)}`).join(", ")})`}function zxe(t,e){switch(t){case">":return`greaterThan(${e})`;case">=":return`greaterThanOrEqualTo(${e})`;case"<":return`lessThan(${e})`;case"<=":return`lessThanOrEqualTo(${e})`;case"!=":return`not(${e})`;default:return String(e)}}bx();wx();_x();Sx();function U6(){let{WEBVIEW_STYLES:t}=(bx(),Ya(P6)),{WEBVIEW_SCRIPTS:e}=(wx(),Ya(M6)),{WEBVIEW_MODALS:r}=(_x(),Ya($6)),{ICONS_CSS:n}=(Sx(),Ya(j6));return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'unsafe-inline'; script-src 'unsafe-inline';">
  <title>Pe4King Generator</title>
  <style>${t}${n}</style>
</head>
<body>
  <h2>Pe4King Generator</h2>
  <div id="app"></div>
  ${r}
  <script>${e}</script>
</body>
</html>`}var uTe=T0(),dTe=vW(),xu=class{constructor(e,r,n){this._endpoints=[];this._tree=[];this._baseUrl="";this._activeTab="endpoints";this._extensionUri=e,this._generator=r,this._collectionManager=n,this._treeBuilder=new jg,this._urlResolver=new Bg,this._sampleGenerator=new Oa,this._requestPanel=new Wg(n),this._runnerPanel=new Vg(n),this._collectionManager.onDidChange(()=>{this._sendCollections()})}static{this.viewType="pe4king.mainView"}resolveWebviewView(e,r,n){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlContent(),e.webview.onDidReceiveMessage(async i=>{switch(i.type){case"ready":console.log("[Pe4King] Webview ready, tree has",this._tree.length,"folders"),this._tree.length>0&&this._sendEndpoints(),this._sendCollections();break;case"generate":await this._handleGenerate(i);break;case"loadUrl":await this._handleLoadUrl(i.url,i.authHeader);break;case"reset":this._endpoints=[],this._tree=[],this._specPath=void 0,this._currentSpecUrl=void 0,this._baseUrl="",this._authHeader=void 0;break;case"browseFile":await this._handleBrowseFile();break;case"openRequest":this._handleOpenRequest(i.endpointId);break;case"switchTab":this._activeTab=i.tab;break;case"getCollections":this._sendCollections();break;case"createCollection":console.log("[Webview] Creating collection:",i.name);let s=this._collectionManager.createCollection(i.name,i.description);this._sendCollections(),this._view?.webview.postMessage({type:"expandCollection",collectionId:s.id});break;case"promptCreateCollection":this._promptCreateCollection();break;case"deleteCollection":this._confirmDeleteCollection(i.collectionId);break;case"createFolder":this._collectionManager.createFolderIn(i.collectionId,i.name,i.parentFolderId),this._sendCollections();break;case"promptCreateFolder":this._promptCreateFolder(i.collectionId,i.parentFolderId);break;case"deleteFolder":this._collectionManager.deleteFolder(i.collectionId,i.folderId),this._sendCollections();break;case"deleteRequest":this._collectionManager.deleteRequest(i.collectionId,i.requestId),this._sendCollections();break;case"openSavedRequest":this._handleOpenSavedRequest(i.collectionId,i.requestId);break;case"exportCollection":this._handleExportCollection(i.collectionId);break;case"runCollection":this._runnerPanel.open(i.collectionId);break;case"addToCollection":this._handleAddToCollection(i.selectedIds);break;case"addTestSnippet":this._collectionManager.addTestToRequest(i.collectionId,i.requestId,i.snippet),this._sendCollections();break;case"removeTestSnippet":this._collectionManager.removeTestFromRequest(i.collectionId,i.requestId,i.index),this._sendCollections();break;case"toggleTestSnippet":this._collectionManager.toggleTest(i.collectionId,i.requestId,i.index),this._sendCollections();break;case"getSnippetLibrary":this._sendSnippetLibrary();break;case"addExtraction":this._collectionManager.addExtractionToRequest(i.collectionId,i.requestId,i.extraction),this._sendCollections();break;case"removeExtraction":this._collectionManager.removeExtractionFromRequest(i.collectionId,i.requestId,i.index),this._sendCollections();break;case"previewExportCode":{let o=this._collectionManager.getCollection(i.collectionId);if(!o)break;let a=fx(o,i.config),l;i.config.format==="pytest"?l=hx(a,i.config):i.config.format==="rest-assured"&&(l=gx(a,i.config)),l?.files?.[0]&&this._view?.webview.postMessage({type:"exportPreview",code:l.files[0].content});break}case"saveExportCode":{let o=this._collectionManager.getCollection(i.collectionId);if(!o)break;let a=fx(o,i.config),l;i.config.format==="pytest"?l=hx(a,i.config):i.config.format==="rest-assured"&&(l=gx(a,i.config)),l?.success&&l.files.length>0&&await this._saveExportFiles(l.files,i.config.format);break}case"browseTestArchive":await this._handleBrowseTestArchive();break;case"runEva":await this._handleRunEva(i.archivePath);break}})}async _saveExportFiles(e,r){if(r==="rest-assured"&&e.length>1){let n=await ve.window.showSaveDialog({filters:{"ZIP Archive":["zip"]},saveLabel:"Save Tests Archive"});if(!n)return;await this._createZipArchive(n.fsPath,e),ve.window.showInformationMessage(`Exported ${e.length} files to ${n.fsPath}`)}else{let n=await ve.window.showSaveDialog({filters:r==="pytest"?{Python:["py"]}:{Java:["java"]},saveLabel:"Save Test File"});if(!n)return;await ve.workspace.fs.writeFile(n,Buffer.from(e[0].content,"utf8")),ve.window.showInformationMessage(`Exported to ${n.fsPath}`);let i=await ve.workspace.openTextDocument(n);await ve.window.showTextDocument(i)}}async _promptCreateCollection(){let e=await ve.window.showInputBox({prompt:"Enter collection name",placeHolder:"My Collection"});if(e){let r=this._collectionManager.createCollection(e);this._sendCollections(),this._view?.webview.postMessage({type:"expandCollection",collectionId:r.id})}}async _promptCreateFolder(e,r){let n=await ve.window.showInputBox({prompt:"Enter folder name",placeHolder:"New Folder"});n&&(this._collectionManager.createFolderIn(e,n,r),this._sendCollections())}async _confirmDeleteCollection(e){await ve.window.showWarningMessage("Delete this collection?",{modal:!0},"Delete")==="Delete"&&(this._collectionManager.deleteCollection(e),this._sendCollections())}_sendCollections(){let e=this._collectionManager.getTreeData();if(console.log("[Webview] Sending",e.length,"collections to webview"),!this._view){console.log("[Webview] Warning: view is not available");return}this._view.webview.postMessage({type:"setCollections",collections:e})}_sendSnippetLibrary(){this._view&&this._view.webview.postMessage({type:"setSnippetLibrary",library:Ug})}_handleOpenSavedRequest(e,r){let n=this._collectionManager.getRequest(e,r);if(!n){ve.window.showErrorMessage("Request not found");return}this._requestPanel.openSavedRequest(n,e)}async _handleExportCollection(e){let r=this._collectionManager.getCollection(e);if(!r)return;let n=this._collectionManager.exportToPostman(e);if(!n)return;let i=await ve.window.showSaveDialog({defaultUri:ve.Uri.file(`${r.name}.postman_collection.json`),filters:{"Postman Collection":["json"]}});i&&(Ci.writeFileSync(i.fsPath,JSON.stringify(n,null,2)),ve.window.showInformationMessage(`Exported to ${i.fsPath}`))}async _handleAddToCollection(e){let r=this._getSelectedEndpoints(e);if(r.length===0)return;let n=this._collectionManager.collections,i=[{label:"$(add) New Collection...",description:"Create a new collection"},...n.map(a=>({label:a.name,description:`${a.requests.length} requests`}))],s=await ve.window.showQuickPick(i,{placeHolder:"Select collection or create new"});if(!s)return;let o;if(s.label==="$(add) New Collection..."){let a=await ve.window.showInputBox({prompt:"Collection name",placeHolder:"My Collection"});if(!a)return;o=this._collectionManager.createCollection(a).id}else{let a=n.find(l=>l.name===s.label);if(!a)return;o=a.id}for(let a of r){let l=this._baseUrl+a.path,c={"Content-Type":"application/json",Accept:"application/json"};this._authHeader&&(c.Authorization=this._authHeader);let u,d="none";if(["POST","PUT","PATCH"].includes(a.method)){if(a.requestBodyExample!==void 0)u=JSON.stringify(a.requestBodyExample,null,2),d="raw";else if(a.requestBodySchema&&a.requestBodySchema.length>0){let p=this._sampleGenerator.generateRequestBody(a.requestBodySchema);u=JSON.stringify(p,null,2),d="raw"}}this._collectionManager.saveRequest(o,`${a.method} ${a.path}`,a.method,l,c,u,d)}this._sendCollections(),ve.window.showInformationMessage(`Added ${r.length} requests to collection`)}async _handleBrowseFile(){let e=await ve.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"OpenAPI Spec":["json","yaml","yml","zip"]},title:"Select OpenAPI Specification"});e&&e.length>0&&(this._view?.webview.postMessage({type:"loading",message:"Loading specification..."}),await this.loadSpec(e[0].fsPath))}async loadSpec(e){try{console.log("[Pe4King] Loading spec from file:",e),this._specPath=e,this._currentSpecUrl=void 0;let r;e.toLowerCase().endsWith(".zip")?r=this._extractSpecFromZip(e):r=Ci.readFileSync(e,"utf-8");let i=new Fs(r).parse();this._endpoints=i.endpoints,this._tree=this._treeBuilder.build(this._endpoints),this._baseUrl=i.baseUrl,console.log("[Pe4King] Parsed",this._endpoints.length,"endpoints,",this._tree.length,"folders"),this._view?(this._view.show?.(!0),this._sendEndpoints()):console.log("[Pe4King] Warning: view not available"),ve.window.showInformationMessage(`Loaded ${this._endpoints.length} endpoints from ${Eu.basename(e)}`)}catch(r){console.error("[Pe4King] Error loading spec:",r),ve.window.showErrorMessage(`Failed to load spec: ${r.message}`)}}_extractSpecFromZip(e){let n=new dTe(e).getEntries(),i=[/openapi\.(json|yaml|yml)$/i,/swagger\.(json|yaml|yml)$/i,/api\.(json|yaml|yml)$/i,/spec\.(json|yaml|yml)$/i,/\.(json|yaml|yml)$/i];for(let s of i)for(let o of n)if(!o.isDirectory&&s.test(o.entryName)){let a=o.getData().toString("utf-8");if(a.includes("openapi")||a.includes("swagger")||a.includes("paths"))return console.log("[Pe4King] Found spec in ZIP:",o.entryName),a}throw new Error("No OpenAPI specification found in ZIP archive")}async loadSpecFromUrl(e,r){await this._handleLoadUrl(e,r)}async _handleLoadUrl(e,r){try{this._view?.webview.postMessage({type:"loading",message:"Resolving specification URL..."});let n={};r&&(n.headers={Authorization:r});let i=await this._urlResolver.resolve(e,n);if(!i.success)throw new Error(i.error||"Failed to load specification");this._currentSpecUrl=i.resolvedUrl,this._specPath=void 0;let o=new Fs(i.specContent).parse();this._endpoints=o.endpoints,this._tree=this._treeBuilder.build(this._endpoints),this._baseUrl=o.baseUrl,this._authHeader=r,this._view&&this._sendEndpoints(),ve.window.showInformationMessage(`Loaded ${this._endpoints.length} endpoints from ${i.resolvedUrl}`)}catch(n){this._view?.webview.postMessage({type:"error",error:n.message}),ve.window.showErrorMessage(`Failed to load spec: ${n.message}`)}}_handleOpenRequest(e){let r=this._findEndpointById(e);if(!r){ve.window.showErrorMessage("Endpoint not found");return}this._requestPanel.open({endpoint:r,baseUrl:this._baseUrl,authHeader:this._authHeader})}_findEndpointById(e){for(let r of this._tree)for(let n of r.children||[])if(n.id===e&&n.endpoint)return n.endpoint}_sendEndpoints(){console.log("[Pe4King] Sending",this._tree.length,"folders to webview");let e=this._tree.map(n=>({id:n.id,label:n.label,type:n.type,checked:n.checked,children:n.children?.map(i=>({id:i.id,label:i.label,type:i.type,checked:i.checked,method:i.method,path:i.path}))}));this._view?.webview.postMessage({type:"setEndpoints",tree:e});let r=this._currentSpecUrl||(this._specPath?`file://${this._specPath}`:"");r&&this._view?.webview.postMessage({type:"sourceUrl",url:r})}async _handleGenerate(e){try{let r=this._getSelectedEndpoints(e.selectedIds);if(r.length===0)throw new Error("No endpoints selected");let n=this._generator.generateForEndpoints(r,{baseUrl:this._baseUrl,framework:e.framework,generateNegativeTests:e.generateNegative,generateUniversalTests:e.generateUniversal??!1});if(!n.success)throw new Error(n.errors?.join(", ")||"Generation failed");let i=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),s=`pe4king-tests-${e.framework}-${i}.zip`,o=await ve.window.showSaveDialog({defaultUri:ve.Uri.file(s),filters:{"ZIP Archive":["zip"]},title:"Save Generated Tests"});if(!o){this._view?.webview.postMessage({type:"generationComplete"});return}await this._createZipArchive(o.fsPath,n.files),this._view?.webview.postMessage({type:"generationComplete"}),ve.window.showInformationMessage(`Generated ${n.stats.totalTests} tests \u2192 ${Eu.basename(o.fsPath)}`)}catch(r){this._view?.webview.postMessage({type:"error",error:r.message}),ve.window.showErrorMessage(`Generation failed: ${r.message}`)}}_createZipArchive(e,r){return new Promise((n,i)=>{let s=Ci.createWriteStream(e),o=uTe("zip",{zlib:{level:9}});s.on("close",()=>n()),o.on("error",a=>i(a)),o.pipe(s);for(let a of r)o.append(a.content,{name:a.filename});o.finalize()})}_getSelectedEndpoints(e){let r=new Set(e),n=[];for(let i of this._tree)for(let s of i.children||[])r.has(s.id)&&s.endpoint&&n.push(s.endpoint);return n}_getHtmlContent(){return U6()}async _handleBrowseTestArchive(){let e=ve.workspace.workspaceFolders?.[0]?.uri,r=await ve.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,defaultUri:e,filters:{"Test Archives":["zip"],"All Files":["*"]},title:"Select Tests Archive (.zip)"});r&&r.length>0&&this._view?.webview.postMessage({type:"setEvaArchive",path:r[0].fsPath})}async _handleRunEva(e){if(e){this._view?.webview.postMessage({type:"evaLoading"});try{let r=Eu.join(this._extensionUri.fsPath,"scripts","eva-v2.js");if(!Ci.existsSync(r))throw new Error("EVA script not found. Please ensure scripts/eva-v2.js exists.");let n;try{n=(0,SW.execSync)(`node "${r}" "${e}" --json`,{encoding:"utf-8",timeout:6e4,cwd:this._extensionUri.fsPath})}catch(s){let o=s;if(o.stdout&&o.stdout.startsWith("{"))n=o.stdout;else throw new Error(o.message||"EVA execution failed")}let i=JSON.parse(n.trim());this._view?.webview.postMessage({type:"evaResult",result:i})}catch(r){let n=r instanceof Error?r.message:String(r);this._view?.webview.postMessage({type:"evaError",error:n})}}}};var Ix,Zg,EW;function fTe(t){console.log("Pe4King extension activated!"),Ix=new Fg,EW=new zg(t),Zg=new xu(t.extensionUri,Ix,EW),t.subscriptions.push(X.window.registerWebviewViewProvider(xu.viewType,Zg));let e=X.commands.registerCommand("pe4king.generateTests",async s=>{let o=s?.fsPath||X.window.activeTextEditor?.document.uri.fsPath;if(!o){X.window.showErrorMessage("No file selected");return}await Zg.loadSpec(o),X.commands.executeCommand("pe4king.mainView.focus")}),r=X.commands.registerCommand("pe4king.quickGenerate",async s=>{await hTe(s,Ix)}),n=X.commands.registerCommand("pe4king.openPanel",()=>{X.commands.executeCommand("pe4king.mainView.focus")}),i=X.commands.registerCommand("pe4king.loadFromUrl",async()=>{let s=await X.window.showInputBox({prompt:"Enter OpenAPI/Swagger specification URL",placeHolder:"https://api.example.com/v3/api-docs or https://api.example.com/swagger-ui/",validateInput:l=>l?!l.match(/^https?:\/\//i)&&!l.match(/^[a-z0-9.-]+\.[a-z]{2,}/i)?"Please enter a valid URL":null:"URL is required"});if(!s)return;let o=await X.window.showQuickPick(["No","Yes"],{placeHolder:"Does this API require authentication?"}),a;o==="Yes"&&(a=await X.window.showInputBox({prompt:"Enter Authorization header value",placeHolder:"Bearer your-token-here",password:!1})),await Zg.loadSpecFromUrl(s,a),X.commands.executeCommand("pe4king.mainView.focus")});t.subscriptions.push(e,r,n,i),X.window.showInformationMessage("Pe4King activated")}async function hTe(t,e){try{let r=t?.fsPath||X.window.activeTextEditor?.document.uri.fsPath;if(!r){X.window.showErrorMessage("No file selected");return}let n=await X.window.showQuickPick([{label:"pytest",description:"Python + requests",detail:"Generates test_api.py + conftest.py"},{label:"rest-assured",description:"Java + JUnit 5",detail:"Generates Maven project with REST Assured"},{label:"postman",description:"Postman Collection",detail:"Generates collection.json with test scripts"}],{placeHolder:"Select test framework",title:"Pe4King: Choose Framework"});if(!n)return;let i=n.label,o=X.workspace.getConfiguration("pe4king").get("generateNegativeTests")??!0;await X.window.withProgress({location:X.ProgressLocation.Notification,title:"Generating tests...",cancellable:!1},async a=>{a.report({increment:0});let l=wr.readFileSync(r,"utf-8"),c=Zt.basename(r,Zt.extname(r)),u=e.generate(l,{framework:i,generateNegativeTests:o});if(!u.success)throw new Error(u.errors?.join(", ")||"Generation failed");a.report({increment:30,message:"Writing files..."});let d=Zt.join(Zt.dirname(r),"generated-tests");wr.existsSync(d)||wr.mkdirSync(d,{recursive:!0});for(let h of u.files){let m=Zt.join(d,h.filename),g=Zt.dirname(m);wr.existsSync(g)||wr.mkdirSync(g,{recursive:!0}),wr.writeFileSync(m,h.content)}a.report({increment:60,message:"Creating ZIP archive..."});let p=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),f=`${c}_${i}_${p}.zip`,y=Zt.join(Zt.dirname(r),f);await pTe(d,y),a.report({increment:100}),gTe(u,d,y,c,i)})}catch(r){X.window.showErrorMessage(`Error: ${r.message}`)}}async function pTe(t,e){return new Promise((r,n)=>{let i=wr.createWriteStream(e),s=xW.default("zip",{zlib:{level:9}});i.on("close",()=>r()),s.on("error",o=>n(o)),s.pipe(i),s.directory(t,!1),s.finalize()})}function gTe(t,e,r,n,i){let s=X.window.createWebviewPanel("pe4kingResults","Pe4King Results",X.ViewColumn.One,{enableScripts:!0}),o=t.files.map(a=>`<li><a href="#" onclick="openFile('${a.filename}')">${a.filename}</a></li>`).join(`
`);s.webview.html=`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generation Results</title>
    <style>
        body {
            font-family: var(--vscode-font-family);
            padding: 20px;
            color: var(--vscode-foreground);
            background: var(--vscode-editor-background);
        }
        .header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }
        .header h1 {
            margin: 0;
            color: var(--vscode-textLink-foreground);
        }
        .badge {
            background: var(--vscode-badge-background);
            color: var(--vscode-badge-foreground);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        .stat-card {
            background: var(--vscode-input-background);
            padding: 16px;
            border-radius: 8px;
            text-align: center;
        }
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: var(--vscode-textLink-foreground);
        }
        .stat-label {
            font-size: 12px;
            color: var(--vscode-descriptionForeground);
            margin-top: 4px;
        }
        .actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 24px;
        }
        button {
            padding: 10px 20px;
            background: var(--vscode-button-background);
            color: var(--vscode-button-foreground);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        button:hover {
            background: var(--vscode-button-hoverBackground);
        }
        button.secondary {
            background: var(--vscode-button-secondaryBackground);
            color: var(--vscode-button-secondaryForeground);
        }
        .files-section h2 {
            margin-bottom: 12px;
        }
        .file-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .file-list li {
            padding: 8px 12px;
            background: var(--vscode-input-background);
            margin-bottom: 4px;
            border-radius: 4px;
        }
        .file-list a {
            color: var(--vscode-textLink-foreground);
            text-decoration: none;
        }
        .file-list a:hover {
            text-decoration: underline;
        }
        .zip-info {
            margin-top: 24px;
            padding: 12px;
            background: var(--vscode-textBlockQuote-background);
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Generation Complete</h1>
        <span class="badge">${i}</span>
    </div>

    <div class="stats">
        <div class="stat-card">
            <div class="stat-value">${t.stats.totalEndpoints}</div>
            <div class="stat-label">Endpoints</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">${t.stats.totalTests}</div>
            <div class="stat-label">Tests</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">${t.stats.positiveTests}</div>
            <div class="stat-label">Positive</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">${t.stats.negativeTests}</div>
            <div class="stat-label">Negative</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">${t.stats.assertions}</div>
            <div class="stat-label">Assertions</div>
        </div>
    </div>

    <div class="actions">
        <button onclick="openFolder()">
            <span>Open Output Folder</span>
        </button>
        <button onclick="openZip()">
            <span>Open ZIP Archive</span>
        </button>
        <button class="secondary" onclick="openMainFile()">
            <span>Open Main Test File</span>
        </button>
        <button class="secondary" onclick="copyPath()">
            <span>Copy Folder Path</span>
        </button>
    </div>

    <div class="files-section">
        <h2>Generated Files</h2>
        <ul class="file-list">
            ${o}
        </ul>
    </div>

    <div class="zip-info">
        <strong>ZIP Archive:</strong> ${Zt.basename(r)}
    </div>

    <script>
        const vscode = acquireVsCodeApi();
        const outputDir = ${JSON.stringify(e)};
        const zipPath = ${JSON.stringify(r)};
        const files = ${JSON.stringify(t.files.map(a=>a.filename))};

        function openFolder() {
            vscode.postMessage({ command: 'openFolder', path: outputDir });
        }

        function openZip() {
            vscode.postMessage({ command: 'revealFile', path: zipPath });
        }

        function openMainFile() {
            vscode.postMessage({ command: 'openFile', path: outputDir, filename: files[0] });
        }

        function openFile(filename) {
            vscode.postMessage({ command: 'openFile', path: outputDir, filename });
        }

        function copyPath() {
            vscode.postMessage({ command: 'copyPath', path: outputDir });
        }
    </script>
</body>
</html>`,s.webview.onDidReceiveMessage(async a=>{switch(a.command){case"openFolder":X.commands.executeCommand("revealFileInOS",X.Uri.file(a.path));break;case"revealFile":X.commands.executeCommand("revealFileInOS",X.Uri.file(a.path));break;case"openFile":let l=Zt.join(a.path,a.filename),c=await X.workspace.openTextDocument(l);await X.window.showTextDocument(c,X.ViewColumn.Beside);break;case"copyPath":await X.env.clipboard.writeText(a.path),X.window.showInformationMessage("Path copied to clipboard!");break}})}function mTe(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

archiver/lib/error.js:
archiver/lib/core.js:
  (**
   * Archiver Core
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

crc-32/crc32.js:
  (*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com *)

zip-stream/index.js:
  (**
   * ZipStream
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-zip-stream/blob/master/LICENSE}
   * @copyright (c) 2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/zip.js:
  (**
   * ZIP Format Plugin
   *
   * @module plugins/zip
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/tar.js:
  (**
   * TAR Format Plugin
   *
   * @module plugins/tar
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/json.js:
  (**
   * JSON Format Plugin
   *
   * @module plugins/json
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/index.js:
  (**
   * Archiver Vending
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)
*/
